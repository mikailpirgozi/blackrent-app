[{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/@types/file-saver.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/@types/papaparse.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/App.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/app/root-3/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/Layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/Statistics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/__tests__/Button.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/admin/AdvancedUserManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/admin/CacheMonitoring.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used.","line":56,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'backendStats' is assigned a value but never used.","line":75,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üìä CACHE MONITORING\n *\n * Admin dashboard pre sledovanie cache performance\n */\n\nimport {\n  Refresh as RefreshIcon,\n  Clear as ClearIcon,\n  Memory as MemoryIcon,\n  Speed as SpeedIcon,\n  TrendingUp as TrendingUpIcon,\n  Storage as StorageIcon,\n  Timeline as TimelineIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Button,\n  Chip,\n  LinearProgress,\n  IconButton,\n  Tooltip,\n  Alert,\n  Stack,\n  useTheme,\n} from '@mui/material';\nimport React, { useState, useEffect, memo } from 'react';\n\n// üîÑ PHASE 4: Migrated to unified cache system\nimport { unifiedCache } from '../../utils/unifiedCacheSystem';\n\ninterface CacheStatsDisplay {\n  size: number;\n  hits: number;\n  misses: number;\n  hitRate: number;\n  totalRequests: number;\n  memoryUsage: string;\n  oldestEntry: string;\n  newestEntry: string;\n  topHits: Array<{ key: string; hits: number }>;\n}\n\nconst CacheMonitoring: React.FC = () => {\n  const theme = useTheme();\n  const [stats, setStats] = useState<CacheStatsDisplay | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [lastRefresh, setLastRefresh] = useState<Date>(new Date());\n  const [autoRefresh, setAutoRefresh] = useState(true);\n\n  const loadStats = async () => {\n    setLoading(true);\n    try {\n      // Frontend cache stats\n      // üîÑ PHASE 4: Using unified cache stats\n      const frontendStats = unifiedCache.getStats();\n\n      // Backend cache stats (if available)\n      let backendStats = null;\n      try {\n        const response = await fetch('/api/cache/stats');\n        if (response.ok) {\n          const data = await response.json();\n          backendStats = data.data;\n        }\n      } catch (error) {\n        console.warn('Backend cache stats not available:', error);\n      }\n\n      // üîÑ PHASE 4: Map unified cache stats to display format\n      const displayStats: CacheStatsDisplay = {\n        size: frontendStats.entryCount,\n        hits: frontendStats.hits,\n        misses: frontendStats.misses,\n        hitRate: frontendStats.hitRate,\n        totalRequests: frontendStats.hits + frontendStats.misses,\n        oldestEntry: new Date().toISOString(),\n        newestEntry: new Date().toISOString(),\n        topHits: [],\n        memoryUsage: frontendStats.memoryUsage || '~calculating~',\n      };\n      setStats(displayStats);\n      setLastRefresh(new Date());\n    } catch (error) {\n      console.error('Failed to load cache stats:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadStats();\n  }, []);\n\n  // Auto-refresh every 30 seconds\n  useEffect(() => {\n    if (!autoRefresh) return;\n\n    const interval = setInterval(loadStats, 30000);\n    return () => clearInterval(interval);\n  }, [autoRefresh]);\n\n  const handleClearCache = () => {\n    // üîÑ PHASE 4: Using unified cache clear\n    unifiedCache.clear();\n    loadStats();\n  };\n\n  const formatHitRate = (rate: number) => {\n    if (rate >= 80) return 'success';\n    if (rate >= 60) return 'warning';\n    return 'error';\n  };\n\n  const formatMemoryUsage = (usage: string) => {\n    const match = usage.match(/(\\d+(?:\\.\\d+)?)/);\n    const value = match ? parseFloat(match[1]) : 0;\n\n    if (value > 1000) return 'warning';\n    if (value > 2000) return 'error';\n    return 'success';\n  };\n\n  if (!stats) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <LinearProgress />\n        <Typography sx={{ mt: 2 }}>Naƒç√≠tavam cache ≈°tatistiky...</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 3 }}>\n      {/* Header */}\n      <Stack\n        direction=\"row\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        sx={{ mb: 3 }}\n      >\n        <Typography\n          variant=\"h4\"\n          sx={{\n            fontWeight: 600,\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1,\n          }}\n        >\n          <MemoryIcon color=\"primary\" />\n          Cache Monitoring\n        </Typography>\n\n        <Stack direction=\"row\" spacing={1}>\n          <Button\n            variant={autoRefresh ? 'contained' : 'outlined'}\n            size=\"small\"\n            onClick={() => setAutoRefresh(!autoRefresh)}\n          >\n            Auto-refresh {autoRefresh ? 'ON' : 'OFF'}\n          </Button>\n\n          <Tooltip title=\"Obnovi≈• ≈°tatistiky\">\n            <IconButton onClick={loadStats} disabled={loading}>\n              <RefreshIcon />\n            </IconButton>\n          </Tooltip>\n\n          <Tooltip title=\"Vymaza≈• cache\">\n            <IconButton onClick={handleClearCache} color=\"error\">\n              <ClearIcon />\n            </IconButton>\n          </Tooltip>\n        </Stack>\n      </Stack>\n\n      {/* Last Refresh Info */}\n      <Alert severity=\"info\" sx={{ mb: 3 }}>\n        <Typography variant=\"body2\">\n          Posledn√° aktualiz√°cia: {lastRefresh.toLocaleString()}\n          {autoRefresh && ' ‚Ä¢ Auto-refresh je zapnut√Ω (30s interval)'}\n        </Typography>\n      </Alert>\n\n      {/* Overview Cards */}\n      <Grid container spacing={3} sx={{ mb: 4 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                <StorageIcon color=\"primary\" />\n                <Box>\n                  <Typography color=\"textSecondary\" gutterBottom>\n                    Cache Entries\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ fontWeight: 600 }}>\n                    {stats.size}\n                  </Typography>\n                </Box>\n              </Stack>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                <SpeedIcon color=\"primary\" />\n                <Box>\n                  <Typography color=\"textSecondary\" gutterBottom>\n                    Hit Rate\n                  </Typography>\n                  <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n                    <Typography variant=\"h4\" sx={{ fontWeight: 600 }}>\n                      {stats.hitRate.toFixed(1)}%\n                    </Typography>\n                    <Chip\n                      size=\"small\"\n                      color={formatHitRate(stats.hitRate)}\n                      label={\n                        stats.hitRate >= 80\n                          ? 'Excellent'\n                          : stats.hitRate >= 60\n                            ? 'Good'\n                            : 'Poor'\n                      }\n                    />\n                  </Stack>\n                </Box>\n              </Stack>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                <TrendingUpIcon color=\"primary\" />\n                <Box>\n                  <Typography color=\"textSecondary\" gutterBottom>\n                    Total Requests\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ fontWeight: 600 }}>\n                    {stats.totalRequests}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    {stats.hits} hits ‚Ä¢ {stats.misses} misses\n                  </Typography>\n                </Box>\n              </Stack>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n                <MemoryIcon color=\"primary\" />\n                <Box>\n                  <Typography color=\"textSecondary\" gutterBottom>\n                    Memory Usage\n                  </Typography>\n                  <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n                    <Typography variant=\"h4\" sx={{ fontWeight: 600 }}>\n                      {stats.memoryUsage}\n                    </Typography>\n                    <Chip\n                      size=\"small\"\n                      color={formatMemoryUsage(stats.memoryUsage)}\n                    />\n                  </Stack>\n                </Box>\n              </Stack>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Hit Rate Progress */}\n      <Card sx={{ mb: 4 }}>\n        <CardContent>\n          <Typography\n            variant=\"h6\"\n            sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n          >\n            <TimelineIcon />\n            Cache Performance\n          </Typography>\n\n          <Box sx={{ mb: 2 }}>\n            <Stack\n              direction=\"row\"\n              justifyContent=\"space-between\"\n              sx={{ mb: 1 }}\n            >\n              <Typography variant=\"body2\">Hit Rate</Typography>\n              <Typography variant=\"body2\">\n                {stats.hitRate.toFixed(1)}%\n              </Typography>\n            </Stack>\n            <LinearProgress\n              variant=\"determinate\"\n              value={stats.hitRate}\n              color={formatHitRate(stats.hitRate)}\n              sx={{ height: 8, borderRadius: 4 }}\n            />\n          </Box>\n\n          <Grid container spacing={2}>\n            <Grid item xs={6}>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                Cache Hits\n              </Typography>\n              <Typography variant=\"h6\" color=\"success.main\">\n                {stats.hits}\n              </Typography>\n            </Grid>\n            <Grid item xs={6}>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                Cache Misses\n              </Typography>\n              <Typography variant=\"h6\" color=\"error.main\">\n                {stats.misses}\n              </Typography>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n\n      {/* Top Cache Entries */}\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" sx={{ mb: 2 }}>\n            Most Accessed Cache Entries\n          </Typography>\n\n          {stats.topHits && stats.topHits.length > 0 ? (\n            <TableContainer component={Paper} variant=\"outlined\">\n              <Table size=\"small\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Cache Key</TableCell>\n                    <TableCell align=\"right\">Hits</TableCell>\n                    <TableCell align=\"right\">Hit Rate</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {stats.topHits.map((item, index) => (\n                    <TableRow key={index}>\n                      <TableCell>\n                        <Typography\n                          variant=\"body2\"\n                          sx={{ fontFamily: 'monospace' }}\n                        >\n                          {item.key.length > 50\n                            ? `${item.key.substring(0, 50)}...`\n                            : item.key}\n                        </Typography>\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        <Chip\n                          size=\"small\"\n                          label={item.hits}\n                          color=\"primary\"\n                          variant=\"outlined\"\n                        />\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        {stats.totalRequests > 0 ? (\n                          <Typography variant=\"body2\">\n                            {((item.hits / stats.totalRequests) * 100).toFixed(\n                              1\n                            )}\n                            %\n                          </Typography>\n                        ) : (\n                          <Typography variant=\"body2\" color=\"textSecondary\">\n                            -\n                          </Typography>\n                        )}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          ) : (\n            <Alert severity=\"info\">\n              ≈Ωiadne cache entries nen√°jden√©. Cache je pr√°zdny alebo e≈°te nebol\n              pou≈æit√Ω.\n            </Alert>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Cache Age Info */}\n      {stats.oldestEntry && stats.newestEntry && (\n        <Card sx={{ mt: 3 }}>\n          <CardContent>\n            <Typography variant=\"h6\" sx={{ mb: 2 }}>\n              Cache Timeline\n            </Typography>\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Oldest Entry\n                </Typography>\n                <Typography variant=\"body1\">{stats.oldestEntry}</Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Newest Entry\n                </Typography>\n                <Typography variant=\"body1\">{stats.newestEntry}</Typography>\n              </Grid>\n            </Grid>\n          </CardContent>\n        </Card>\n      )}\n    </Box>\n  );\n};\n\nexport default memo(CacheMonitoring);\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/admin/EmailManagementDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/admin/ImapEmailMonitoring.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/admin/R2Configuration.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/admin/VehicleOwnershipTransfer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has a missing dependency: 'loadAllVehicleHistories'. Either include it or remove the dependency array.","line":253,"column":6,"nodeType":"ArrayExpression","endLine":253,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [loadAllVehicleHistories, vehicles]","fix":{"range":[7767,7777],"text":"[loadAllVehicleHistories, vehicles]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Cancel as CancelIcon,\n  DirectionsCar as CarIcon,\n  Business as CompanyIcon,\n  CalendarToday as DateIcon,\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  ExpandMore as ExpandMoreIcon,\n  History as HistoryIcon,\n  Refresh as RefreshIcon,\n  Save as SaveIcon,\n  SwapHoriz,\n  SwapHoriz as TransferIcon,\n} from '@mui/icons-material';\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Alert,\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  CircularProgress,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControl,\n  Grid,\n  IconButton,\n  InputLabel,\n  MenuItem,\n  Paper,\n  Select,\n  Stack,\n  TextField,\n  Tooltip,\n  Typography,\n} from '@mui/material';\nimport { format } from 'date-fns';\nimport { sk } from 'date-fns/locale';\nimport React, { useEffect, useState } from 'react';\n\nimport { useApp } from '../../context/AppContext';\nimport { apiService, getAPI_BASE_URL } from '../../services/api';\n\ninterface OwnershipHistory {\n  id: string;\n  ownerCompanyId: string;\n  ownerCompanyName: string;\n  validFrom: string;\n  validTo: string | null;\n  transferReason: string;\n  transferNotes: string | null;\n}\n\ninterface VehicleWithHistory {\n  id: string;\n  brand: string;\n  model: string;\n  licensePlate: string;\n  ownerCompanyId: string;\n  history: OwnershipHistory[];\n}\n\nconst VehicleOwnershipTransfer: React.FC = () => {\n  const { state } = useApp();\n  const vehicles = state.vehicles || [];\n  const companies = state.companies || [];\n\n  // Transfer form states\n  const [selectedVehicleId, setSelectedVehicleId] = useState('');\n  const [newOwnerCompanyId, setNewOwnerCompanyId] = useState('');\n  const [transferReason, setTransferReason] = useState('sale');\n  const [transferNotes, setTransferNotes] = useState('');\n  const [transferDate, setTransferDate] = useState(\n    format(new Date(), 'yyyy-MM-dd')\n  );\n\n  // UI states\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{\n    type: 'success' | 'error';\n    text: string;\n  } | null>(null);\n\n  // History states\n  const [vehiclesWithHistory, setVehiclesWithHistory] = useState<\n    VehicleWithHistory[]\n  >([]);\n  const [historyLoading, setHistoryLoading] = useState(false);\n\n  // Edit dialog states\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [editingTransfer, setEditingTransfer] =\n    useState<OwnershipHistory | null>(null);\n  const [editCompanyId, setEditCompanyId] = useState('');\n  const [editReason, setEditReason] = useState('');\n  const [editNotes, setEditNotes] = useState('');\n  const [editDate, setEditDate] = useState('');\n\n  // Delete confirmation dialog states\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [transferToDelete, setTransferToDelete] =\n    useState<OwnershipHistory | null>(null);\n\n  const transferReasons = [\n    { value: 'sale', label: 'Predaj' },\n    { value: 'acquisition', label: 'K√∫pa' },\n    { value: 'lease_end', label: 'Ukonƒçenie leasingu' },\n    { value: 'lease_transfer', label: 'Transfer leasingu' },\n    { value: 'merger', label: 'F√∫zia firiem' },\n    { value: 'administrative', label: 'Administrat√≠vna zmena' },\n    { value: 'manual_transfer', label: 'Manu√°lny transfer' },\n  ];\n\n  // ‚ö°‚ö° ULTRA OPTIMALIZOVAN√â: Jedin√© bulk API volanie namiesto 111 requestov\n  const loadAllVehicleHistories = async () => {\n    setHistoryLoading(true);\n    console.log(\n      `üöÄ BULK: Loading ownership history for all vehicles in single request...`\n    );\n    const startTime = Date.now();\n\n    try {\n      // ‚ö°‚ö° SINGLE BULK REQUEST: Namiesto 111 requestov -> 1 request\n      const bulkData = await apiService.getBulkVehicleOwnershipHistory();\n\n      console.log(\n        `üìä BULK Response: ${bulkData.totalVehicles} vehicles processed in ${bulkData.loadTimeMs}ms (backend) + ${Date.now() - startTime}ms (frontend)`\n      );\n\n      // FILTER LOGIC: Zobrazuj len vozidl√° s re√°lnymi transfermi\n      const vehiclesWithHistoryData: VehicleWithHistory[] = [];\n\n      for (const vehicleHistory of bulkData.vehicleHistories) {\n        const vehicleHistoryTyped = vehicleHistory as {\n          vehicle: {\n            id: string;\n            brand: string;\n            model: string;\n            licensePlate: string;\n            ownerCompanyId?: string;\n          };\n          history: OwnershipHistory[];\n        };\n        const history = vehicleHistoryTyped.history;\n\n        // 1. Vozidl√° s viac ako 1 z√°znamom = mali aspo≈à 1 transfer\n        // 2. Vozidl√° s 1 z√°znamom, ale nie je to initial_setup\n        // 3. Vyl√∫ƒç vozidl√° len s initial_setup (≈æiadny skutoƒçn√Ω transfer)\n        const hasRealTransfers =\n          history.length > 1 ||\n          (history.length === 1 &&\n            history[0].transferReason !== 'initial_setup');\n\n        if (hasRealTransfers) {\n          vehiclesWithHistoryData.push({\n            id: vehicleHistoryTyped.vehicle.id,\n            brand: vehicleHistoryTyped.vehicle.brand,\n            model: vehicleHistoryTyped.vehicle.model,\n            licensePlate: vehicleHistoryTyped.vehicle.licensePlate,\n            ownerCompanyId: vehicleHistoryTyped.vehicle.ownerCompanyId || '',\n            history: history,\n          });\n        }\n      }\n\n      // SORTING: Zoraƒè podƒæa poƒçtu transferov (viac transferov = vy≈°≈°ie v zozname)\n      vehiclesWithHistoryData.sort(\n        (a, b) => b.history.length - a.history.length\n      );\n\n      const totalTime = Date.now() - startTime;\n      console.log(\n        `‚úÖ BULK: Processed ${vehiclesWithHistoryData.length} vehicles with transfers in ${totalTime}ms total`\n      );\n\n      setVehiclesWithHistory(vehiclesWithHistoryData);\n    } catch (error) {\n      console.error('Failed to load bulk vehicle histories:', error);\n      // Fallback na star√Ω sp√¥sob ak bulk zlyh√°\n      console.log('üîÑ Falling back to individual requests...');\n      await loadVehicleHistoriesIndividually();\n    } finally {\n      setHistoryLoading(false);\n    }\n  };\n\n  // Fallback met√≥da pre pr√≠pad zlyhania bulk requestu\n  const loadVehicleHistoriesIndividually = async () => {\n    console.log(\n      `üöÄ FALLBACK: Loading histories for ${vehicles.length} vehicles individually...`\n    );\n\n    const historyPromises = vehicles.map(async vehicle => {\n      try {\n        const response = await fetch(\n          `${getAPI_BASE_URL()}/vehicles/${vehicle.id}/ownership-history`,\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('blackrent_token')}`,\n            },\n          }\n        );\n\n        if (response.ok) {\n          const data = await response.json();\n          const history = data.data.ownershipHistory || [];\n\n          const hasRealTransfers =\n            history.length > 1 ||\n            (history.length === 1 &&\n              history[0].transferReason !== 'initial_setup');\n\n          if (hasRealTransfers) {\n            return {\n              id: vehicle.id,\n              brand: vehicle.brand,\n              model: vehicle.model,\n              licensePlate: vehicle.licensePlate,\n              ownerCompanyId: vehicle.ownerCompanyId || '',\n              history: history,\n            };\n          }\n        }\n        return null;\n      } catch (error) {\n        console.error(\n          `Failed to load history for vehicle ${vehicle.id}:`,\n          error\n        );\n        return null;\n      }\n    });\n\n    const results = await Promise.all(historyPromises);\n    const vehiclesWithHistoryData = results.filter(\n      (vehicle): vehicle is VehicleWithHistory => vehicle !== null\n    );\n    vehiclesWithHistoryData.sort((a, b) => b.history.length - a.history.length);\n\n    setVehiclesWithHistory(vehiclesWithHistoryData);\n  };\n\n  // Naƒç√≠tanie hist√≥rie pri mount\n  useEffect(() => {\n    if (vehicles.length > 0) {\n      loadAllVehicleHistories();\n    }\n  }, [vehicles]);\n\n  const handleTransferSubmit = async () => {\n    if (!selectedVehicleId || !newOwnerCompanyId) {\n      setMessage({ type: 'error', text: 'Vyberte vozidlo a nov√∫ firmu' });\n      return;\n    }\n\n    setLoading(true);\n    setMessage(null);\n\n    try {\n      const response = await fetch(\n        `${getAPI_BASE_URL()}/vehicles/${selectedVehicleId}/transfer-ownership`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('blackrent_token')}`,\n          },\n          body: JSON.stringify({\n            newOwnerCompanyId,\n            transferReason,\n            transferNotes: transferNotes.trim() || null,\n            transferDate: new Date(transferDate).toISOString(),\n          }),\n        }\n      );\n\n      const data = await response.json();\n\n      if (data.success) {\n        setMessage({\n          type: 'success',\n          text: data.message || 'Transfer ownership √∫spe≈°n√Ω!',\n        });\n\n        // Reset form\n        setSelectedVehicleId('');\n        setNewOwnerCompanyId('');\n        setTransferReason('sale');\n        setTransferNotes('');\n        setTransferDate(format(new Date(), 'yyyy-MM-dd'));\n\n        // Refresh history\n        await loadAllVehicleHistories();\n      } else {\n        setMessage({\n          type: 'error',\n          text: data.error || 'Transfer sa nepodaril',\n        });\n      }\n    } catch (error) {\n      console.error('Transfer error:', error);\n      setMessage({\n        type: 'error',\n        text: 'Chyba pri transfere ownership',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditTransfer = (transfer: OwnershipHistory) => {\n    setEditingTransfer(transfer);\n    setEditCompanyId(transfer.ownerCompanyId);\n    setEditReason(transfer.transferReason);\n    setEditNotes(transfer.transferNotes || '');\n    setEditDate(format(new Date(transfer.validFrom), 'yyyy-MM-dd'));\n    setEditDialogOpen(true);\n  };\n\n  const handleEditSubmit = async () => {\n    if (!editingTransfer) return;\n\n    setLoading(true);\n    try {\n      const response = await fetch(\n        `${getAPI_BASE_URL()}/vehicles/ownership-history/${editingTransfer.id}`,\n        {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('blackrent_token')}`,\n          },\n          body: JSON.stringify({\n            ownerCompanyId: editCompanyId,\n            transferReason: editReason,\n            transferNotes: editNotes.trim() || null,\n            validFrom: new Date(editDate).toISOString(),\n          }),\n        }\n      );\n\n      const data = await response.json();\n\n      if (data.success) {\n        setMessage({ type: 'success', text: 'Transfer √∫spe≈°ne upraven√Ω!' });\n        setEditDialogOpen(false);\n        await loadAllVehicleHistories();\n      } else {\n        setMessage({\n          type: 'error',\n          text: data.error || '√öprava sa nepodarila',\n        });\n      }\n    } catch (error) {\n      console.error('Edit error:', error);\n      setMessage({ type: 'error', text: 'Chyba pri √∫prave transferu' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteTransfer = (transfer: OwnershipHistory) => {\n    setTransferToDelete(transfer);\n    setDeleteDialogOpen(true);\n  };\n\n  const confirmDeleteTransfer = async () => {\n    if (!transferToDelete) return;\n\n    setLoading(true);\n    try {\n      const response = await fetch(\n        `${getAPI_BASE_URL()}/vehicles/ownership-history/${transferToDelete.id}`,\n        {\n          method: 'DELETE',\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('blackrent_token')}`,\n          },\n        }\n      );\n\n      const data = await response.json();\n\n      if (data.success) {\n        setMessage({ type: 'success', text: 'Transfer √∫spe≈°ne vymazan√Ω!' });\n        await loadAllVehicleHistories();\n      } else {\n        setMessage({\n          type: 'error',\n          text: data.error || 'Vymazanie sa nepodarilo',\n        });\n      }\n    } catch (error) {\n      console.error('Delete error:', error);\n      setMessage({ type: 'error', text: 'Chyba pri vymaz√°van√≠ transferu' });\n    } finally {\n      setLoading(false);\n      setDeleteDialogOpen(false);\n      setTransferToDelete(null);\n    }\n  };\n\n  const selectedVehicle = vehicles.find(v => v.id === selectedVehicleId);\n  const currentOwnerCompany = companies.find(\n    c => c.id === selectedVehicle?.ownerCompanyId\n  );\n\n  return (\n    <Box>\n      <Typography\n        variant=\"h5\"\n        gutterBottom\n        sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n      >\n        <TransferIcon />\n        Transfer vlastn√≠ctva vozidiel\n      </Typography>\n\n      {message && (\n        <Alert\n          severity={message.type}\n          sx={{ mb: 2 }}\n          onClose={() => setMessage(null)}\n        >\n          {message.text}\n        </Alert>\n      )}\n\n      <Grid container spacing={3}>\n        {/* ƒΩav√° strana - Nov√Ω transfer */}\n        <Grid item xs={12} md={5}>\n          <Card>\n            <CardContent>\n              <Typography\n                variant=\"h6\"\n                gutterBottom\n                sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n              >\n                <SwapHoriz />\n                Nov√Ω transfer vlastn√≠ctva\n              </Typography>\n\n              <Stack spacing={3}>\n                <FormControl fullWidth>\n                  <InputLabel>Vozidlo</InputLabel>\n                  <Select\n                    value={selectedVehicleId}\n                    onChange={e => setSelectedVehicleId(e.target.value)}\n                    label=\"Vozidlo\"\n                  >\n                    {vehicles.map(vehicle => {\n                      const ownerCompany = companies.find(\n                        c => c.id === vehicle.ownerCompanyId\n                      );\n                      return (\n                        <MenuItem key={vehicle.id} value={vehicle.id}>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <CarIcon fontSize=\"small\" />\n                            <Box>\n                              <Typography variant=\"body1\">\n                                {vehicle.brand} {vehicle.model} -{' '}\n                                {vehicle.licensePlate}\n                              </Typography>\n                              <Typography\n                                variant=\"caption\"\n                                color=\"textSecondary\"\n                              >\n                                Majiteƒæ: {ownerCompany?.name || 'Nezn√°my'}\n                              </Typography>\n                            </Box>\n                          </Box>\n                        </MenuItem>\n                      );\n                    })}\n                  </Select>\n                </FormControl>\n\n                {selectedVehicle && (\n                  <Alert severity=\"info\">\n                    <Typography variant=\"body2\">\n                      <strong>Aktu√°lny majiteƒæ:</strong>{' '}\n                      {currentOwnerCompany?.name || 'Nezn√°my'}\n                    </Typography>\n                  </Alert>\n                )}\n\n                <FormControl fullWidth>\n                  <InputLabel>Nov√Ω majiteƒæ</InputLabel>\n                  <Select\n                    value={newOwnerCompanyId}\n                    onChange={e => setNewOwnerCompanyId(e.target.value)}\n                    label=\"Nov√Ω majiteƒæ\"\n                    disabled={!selectedVehicleId}\n                  >\n                    {companies\n                      .filter(c => c.id !== currentOwnerCompany?.id)\n                      .map(company => (\n                        <MenuItem key={company.id} value={company.id}>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <CompanyIcon fontSize=\"small\" />\n                            {company.name}\n                          </Box>\n                        </MenuItem>\n                      ))}\n                  </Select>\n                </FormControl>\n\n                <Box sx={{ display: 'flex', gap: 2 }}>\n                  <FormControl sx={{ minWidth: 200 }}>\n                    <InputLabel>D√¥vod transferu</InputLabel>\n                    <Select\n                      value={transferReason}\n                      onChange={e => setTransferReason(e.target.value)}\n                      label=\"D√¥vod transferu\"\n                    >\n                      {transferReasons.map(reason => (\n                        <MenuItem key={reason.value} value={reason.value}>\n                          {reason.label}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n\n                  <TextField\n                    label=\"D√°tum transferu\"\n                    type=\"date\"\n                    value={transferDate}\n                    onChange={e => setTransferDate(e.target.value)}\n                    InputLabelProps={{ shrink: true }}\n                    InputProps={{\n                      startAdornment: (\n                        <DateIcon sx={{ mr: 1, color: 'action.active' }} />\n                      ),\n                    }}\n                  />\n                </Box>\n\n                <TextField\n                  label=\"Pozn√°mky (voliteƒæn√©)\"\n                  multiline\n                  rows={3}\n                  value={transferNotes}\n                  onChange={e => setTransferNotes(e.target.value)}\n                  placeholder=\"ƒéal≈°ie inform√°cie o transfere...\"\n                />\n\n                <Button\n                  variant=\"contained\"\n                  size=\"large\"\n                  onClick={handleTransferSubmit}\n                  disabled={loading || !selectedVehicleId || !newOwnerCompanyId}\n                  startIcon={\n                    loading ? <CircularProgress size={20} /> : <TransferIcon />\n                  }\n                >\n                  {loading ? 'Spracov√°vam...' : 'Transferova≈• vlastn√≠ctvo'}\n                </Button>\n              </Stack>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Prav√° strana - Hist√≥ria transferov */}\n        <Grid item xs={12} md={7}>\n          <Card>\n            <CardContent>\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  mb: 2,\n                }}\n              >\n                <Typography\n                  variant=\"h6\"\n                  sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                >\n                  <HistoryIcon />\n                  Vozidl√° s transfermi vlastn√≠ctva\n                </Typography>\n                <Tooltip title=\"Obnovi≈• hist√≥riu\">\n                  <IconButton\n                    onClick={loadAllVehicleHistories}\n                    disabled={historyLoading}\n                  >\n                    <RefreshIcon />\n                  </IconButton>\n                </Tooltip>\n              </Box>\n\n              {historyLoading ? (\n                <Box\n                  sx={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    p: 4,\n                  }}\n                >\n                  <CircularProgress size={40} />\n                  <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    sx={{ mt: 2 }}\n                  >\n                    Naƒç√≠tavam hist√≥riu transferov...\n                  </Typography>\n                  <Typography\n                    variant=\"caption\"\n                    color=\"textSecondary\"\n                    sx={{ mt: 1 }}\n                  >\n                    ‚ö°‚ö° Bulk API - jedin√© volanie pre v≈°etky vozidl√°\n                  </Typography>\n                </Box>\n              ) : (\n                <Stack\n                  spacing={2}\n                  sx={{ maxHeight: '600px', overflow: 'auto' }}\n                >\n                  {vehiclesWithHistory.length === 0 ? (\n                    <Typography color=\"textSecondary\">\n                      ≈Ωiadne vozidl√° s transfermi vlastn√≠ctva nen√°jden√©.\n                    </Typography>\n                  ) : (\n                    vehiclesWithHistory.map(vehicle => (\n                      <Accordion key={vehicle.id}>\n                        <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <CarIcon />\n                            <Typography variant=\"subtitle1\">\n                              {vehicle.brand} {vehicle.model} -{' '}\n                              {vehicle.licensePlate}\n                            </Typography>\n                            <Chip\n                              label={`${vehicle.history.length} transferov`}\n                              size=\"small\"\n                              color=\"primary\"\n                            />\n                          </Box>\n                        </AccordionSummary>\n                        <AccordionDetails>\n                          <Stack spacing={2}>\n                            {vehicle.history.length === 0 ? (\n                              <Typography color=\"textSecondary\">\n                                ≈Ωiadna hist√≥ria transferov.\n                              </Typography>\n                            ) : (\n                              vehicle.history.map((transfer, index) => (\n                                <Paper\n                                  key={transfer.id}\n                                  variant=\"outlined\"\n                                  sx={{ p: 2 }}\n                                >\n                                  <Box\n                                    sx={{\n                                      display: 'flex',\n                                      justifyContent: 'space-between',\n                                      alignItems: 'flex-start',\n                                    }}\n                                  >\n                                    <Box sx={{ flexGrow: 1 }}>\n                                      <Box\n                                        sx={{\n                                          display: 'flex',\n                                          alignItems: 'center',\n                                          gap: 1,\n                                          mb: 1,\n                                        }}\n                                      >\n                                        <CompanyIcon fontSize=\"small\" />\n                                        <Typography variant=\"subtitle2\">\n                                          {transfer.ownerCompanyName}\n                                        </Typography>\n                                        <Chip\n                                          label={\n                                            index === 0\n                                              ? 'Aktu√°lny'\n                                              : 'Historick√Ω'\n                                          }\n                                          color={\n                                            index === 0 ? 'primary' : 'default'\n                                          }\n                                          size=\"small\"\n                                        />\n                                      </Box>\n\n                                      <Typography\n                                        variant=\"body2\"\n                                        color=\"textSecondary\"\n                                        gutterBottom\n                                      >\n                                        <strong>Platnos≈•:</strong>{' '}\n                                        {format(\n                                          new Date(transfer.validFrom),\n                                          'dd.MM.yyyy',\n                                          { locale: sk }\n                                        )}\n                                        {transfer.validTo &&\n                                          ` - ${format(new Date(transfer.validTo), 'dd.MM.yyyy', { locale: sk })}`}\n                                      </Typography>\n\n                                      <Typography\n                                        variant=\"body2\"\n                                        color=\"textSecondary\"\n                                        gutterBottom\n                                      >\n                                        <strong>D√¥vod:</strong>{' '}\n                                        {transferReasons.find(\n                                          r =>\n                                            r.value === transfer.transferReason\n                                        )?.label || transfer.transferReason}\n                                      </Typography>\n\n                                      {transfer.transferNotes && (\n                                        <Typography\n                                          variant=\"body2\"\n                                          color=\"textSecondary\"\n                                        >\n                                          <strong>Pozn√°mky:</strong>{' '}\n                                          {transfer.transferNotes}\n                                        </Typography>\n                                      )}\n                                    </Box>\n\n                                    <Box sx={{ display: 'flex', gap: 1 }}>\n                                      <Tooltip title=\"Upravi≈• transfer\">\n                                        <IconButton\n                                          size=\"small\"\n                                          onClick={() =>\n                                            handleEditTransfer(transfer)\n                                          }\n                                          color=\"primary\"\n                                        >\n                                          <EditIcon fontSize=\"small\" />\n                                        </IconButton>\n                                      </Tooltip>\n                                      <Tooltip title=\"Vymaza≈• transfer\">\n                                        <IconButton\n                                          size=\"small\"\n                                          onClick={() =>\n                                            handleDeleteTransfer(transfer)\n                                          }\n                                          color=\"error\"\n                                        >\n                                          <DeleteIcon fontSize=\"small\" />\n                                        </IconButton>\n                                      </Tooltip>\n                                    </Box>\n                                  </Box>\n                                </Paper>\n                              ))\n                            )}\n                          </Stack>\n                        </AccordionDetails>\n                      </Accordion>\n                    ))\n                  )}\n                </Stack>\n              )}\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Edit Transfer Dialog */}\n      <Dialog\n        open={editDialogOpen}\n        onClose={() => setEditDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <EditIcon />\n            Upravi≈• transfer vlastn√≠ctva\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          <Stack spacing={3} sx={{ mt: 1 }}>\n            <FormControl fullWidth>\n              <InputLabel>Firma</InputLabel>\n              <Select\n                value={editCompanyId}\n                onChange={e => setEditCompanyId(e.target.value)}\n                label=\"Firma\"\n              >\n                {companies.map(company => (\n                  <MenuItem key={company.id} value={company.id}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <CompanyIcon fontSize=\"small\" />\n                      {company.name}\n                    </Box>\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            <FormControl fullWidth>\n              <InputLabel>D√¥vod transferu</InputLabel>\n              <Select\n                value={editReason}\n                onChange={e => setEditReason(e.target.value)}\n                label=\"D√¥vod transferu\"\n              >\n                {transferReasons.map(reason => (\n                  <MenuItem key={reason.value} value={reason.value}>\n                    {reason.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            <TextField\n              label=\"D√°tum platnosti\"\n              type=\"date\"\n              value={editDate}\n              onChange={e => setEditDate(e.target.value)}\n              InputLabelProps={{ shrink: true }}\n              fullWidth\n            />\n\n            <TextField\n              label=\"Pozn√°mky\"\n              multiline\n              rows={3}\n              value={editNotes}\n              onChange={e => setEditNotes(e.target.value)}\n              fullWidth\n            />\n          </Stack>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => setEditDialogOpen(false)}\n            startIcon={<CancelIcon />}\n          >\n            Zru≈°i≈•\n          </Button>\n          <Button\n            onClick={handleEditSubmit}\n            variant=\"contained\"\n            disabled={loading || !editCompanyId || !editReason || !editDate}\n            startIcon={loading ? <CircularProgress size={16} /> : <SaveIcon />}\n          >\n            {loading ? 'Uklad√°m...' : 'Ulo≈æi≈•'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <Dialog\n        open={deleteDialogOpen}\n        onClose={() => setDeleteDialogOpen(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <DeleteIcon />\n            Potvrdi≈• vymazanie transferu\n          </Box>\n        </DialogTitle>\n        <DialogContent>\n          {transferToDelete && (\n            <Box>\n              <Typography variant=\"body1\" gutterBottom>\n                Naozaj chcete vymaza≈• tento transfer vlastn√≠ctva?\n              </Typography>\n\n              <Alert severity=\"warning\" sx={{ mt: 2 }}>\n                <Typography variant=\"body2\">\n                  <strong>Firma:</strong> {transferToDelete.ownerCompanyName}\n                </Typography>\n                <Typography variant=\"body2\">\n                  <strong>D√°tum:</strong>{' '}\n                  {format(new Date(transferToDelete.validFrom), 'dd.MM.yyyy', {\n                    locale: sk,\n                  })}\n                </Typography>\n                <Typography variant=\"body2\">\n                  <strong>D√¥vod:</strong>{' '}\n                  {transferReasons.find(\n                    r => r.value === transferToDelete.transferReason\n                  )?.label || transferToDelete.transferReason}\n                </Typography>\n                {transferToDelete.transferNotes && (\n                  <Typography variant=\"body2\">\n                    <strong>Pozn√°mky:</strong> {transferToDelete.transferNotes}\n                  </Typography>\n                )}\n              </Alert>\n\n              <Typography variant=\"body2\" color=\"error\" sx={{ mt: 2 }}>\n                T√°to akcia sa ned√° vr√°ti≈• sp√§≈•.\n              </Typography>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={() => setDeleteDialogOpen(false)}\n            startIcon={<CancelIcon />}\n          >\n            Zru≈°i≈•\n          </Button>\n          <Button\n            onClick={confirmDeleteTransfer}\n            variant=\"contained\"\n            color=\"error\"\n            disabled={loading}\n            startIcon={\n              loading ? <CircularProgress size={16} /> : <DeleteIcon />\n            }\n          >\n            {loading ? 'Vymaz√°vam...' : 'Vymaza≈•'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default VehicleOwnershipTransfer;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/auth/ChangePasswordForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/auth/LoginForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/auth/ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/availability/AddUnavailabilityModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/availability/AvailabilityCalendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/availability/SmartAvailabilityDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/BulkDownload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/EnhancedErrorToast.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'networkQuality' is assigned a value but never used.","line":65,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üçû ENHANCED ERROR TOAST COMPONENT\n *\n * Vylep≈°en√° verzia error toast s:\n * - User-friendly messages\n * - Contextual suggestions\n * - Better positioning\n * - Recovery actions\n */\n\nimport {\n  BugReport as BugReportIcon,\n  Close as CloseIcon,\n  ExpandLess as ExpandLessIcon,\n  ExpandMore as ExpandMoreIcon,\n  Refresh as RefreshIcon,\n} from '@mui/icons-material';\nimport {\n  Alert,\n  Box,\n  Button,\n  Chip,\n  Collapse,\n  IconButton,\n  Snackbar,\n  Stack,\n  Typography,\n  alpha,\n  useMediaQuery,\n  useTheme,\n} from '@mui/material';\nimport React, { useEffect, useState } from 'react';\n\nimport { useNetworkStatus } from '../../hooks/useNetworkStatus';\nimport type { ErrorContext } from '../../utils/enhancedErrorMessages';\nimport {\n  getEnhancedErrorMessage,\n  getRecoverySuggestions,\n} from '../../utils/enhancedErrorMessages';\nimport type { EnhancedError } from '../../utils/errorHandling';\n\ninterface EnhancedErrorToastProps {\n  error: EnhancedError | null;\n  context?: ErrorContext;\n  onClose: () => void;\n  onRetry?: () => void;\n  autoHideDuration?: number;\n  position?: 'top' | 'bottom';\n}\n\nexport const EnhancedErrorToast: React.FC<EnhancedErrorToastProps> = ({\n  error,\n  context = {},\n  onClose,\n  onRetry,\n  autoHideDuration = 8000, // Longer for better UX\n  position = 'top',\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const [open, setOpen] = useState(false);\n  const [isRetrying, setIsRetrying] = useState(false);\n  const [showDetails, setShowDetails] = useState(false);\n  const [showTechnicalDetails, setShowTechnicalDetails] = useState(false);\n  const { isOnline, networkQuality } = useNetworkStatus();\n\n  // Show toast when error appears\n  useEffect(() => {\n    if (error) {\n      setOpen(true);\n      setShowDetails(false);\n      setShowTechnicalDetails(false);\n    }\n  }, [error]);\n\n  // Handle close\n  const handleClose = (\n    event?: React.SyntheticEvent | Event,\n    reason?: string\n  ) => {\n    if (reason === 'clickaway') return;\n    setOpen(false);\n    setTimeout(onClose, 300); // Wait for animation\n  };\n\n  // Handle retry with enhanced feedback\n  const handleRetry = async () => {\n    if (!onRetry) return;\n\n    setIsRetrying(true);\n    try {\n      await onRetry();\n      setOpen(false);\n      setTimeout(onClose, 300);\n    } catch (err) {\n      console.error('Retry failed:', err);\n      // Error handling u≈æ sa zvl√°dne v parent komponente\n    } finally {\n      setIsRetrying(false);\n    }\n  };\n\n  // Handle page refresh\n  const handleRefresh = () => {\n    window.location.reload();\n  };\n\n  if (!error) return null;\n\n  const enhancedMessage = getEnhancedErrorMessage(error, context);\n  const suggestions = getRecoverySuggestions(error);\n\n  // Determine toast positioning\n  const anchorOrigin =\n    position === 'top'\n      ? { vertical: 'top' as const, horizontal: 'right' as const }\n      : { vertical: 'bottom' as const, horizontal: 'center' as const };\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={autoHideDuration}\n      onClose={handleClose}\n      anchorOrigin={anchorOrigin}\n      sx={{\n        // Better positioning for mobile\n        ...(isMobile &&\n          position === 'top' && {\n            top: 24,\n            left: 16,\n            right: 16,\n            transform: 'none !important',\n          }),\n        ...(isMobile &&\n          position === 'bottom' && {\n            bottom: 80, // Above mobile navigation\n            left: 16,\n            right: 16,\n            transform: 'none !important',\n          }),\n        // Desktop positioning\n        ...(!isMobile &&\n          position === 'top' && {\n            top: 24,\n            right: 24,\n          }),\n        zIndex: theme.zIndex.snackbar + 1,\n      }}\n    >\n      <Alert\n        severity={enhancedMessage.severity}\n        onClose={handleClose}\n        sx={{\n          width: '100%',\n          maxWidth: isMobile ? '100%' : 480,\n          borderRadius: 3,\n          boxShadow: `0 8px 32px ${alpha(theme.palette.common.black, 0.12)}`,\n          backdropFilter: 'blur(20px)',\n          backgroundColor: alpha(theme.palette.background.paper, 0.95),\n          border: `1px solid ${alpha(theme.palette.divider, 0.2)}`,\n\n          '& .MuiAlert-message': {\n            width: '100%',\n            padding: 0,\n          },\n\n          '& .MuiAlert-action': {\n            alignItems: 'flex-start',\n            paddingTop: 1,\n          },\n\n          // Enhanced icon styling\n          '& .MuiAlert-icon': {\n            fontSize: 24,\n            marginTop: 0.5,\n          },\n        }}\n        action={\n          <Box sx={{ display: 'flex', gap: 0.5 }}>\n            <IconButton\n              size=\"small\"\n              onClick={() => setShowDetails(!showDetails)}\n              sx={{\n                color: 'inherit',\n                opacity: 0.8,\n                '&:hover': { opacity: 1 },\n              }}\n            >\n              {showDetails ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n            </IconButton>\n            <IconButton\n              size=\"small\"\n              onClick={handleClose}\n              sx={{\n                color: 'inherit',\n                opacity: 0.8,\n                '&:hover': { opacity: 1 },\n              }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </Box>\n        }\n      >\n        <Box>\n          {/* Main error message */}\n          <Box sx={{ mb: showDetails ? 1.5 : 0 }}>\n            <Typography\n              variant=\"subtitle2\"\n              sx={{\n                fontWeight: 600,\n                mb: 0.5,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 0.5,\n              }}\n            >\n              <span style={{ fontSize: 18 }}>{enhancedMessage.emoji}</span>\n              {enhancedMessage.title}\n            </Typography>\n            <Typography variant=\"body2\" sx={{ opacity: 0.9, lineHeight: 1.4 }}>\n              {enhancedMessage.message}\n            </Typography>\n          </Box>\n\n          {/* Connection status indicator */}\n          {enhancedMessage.category === 'network' && (\n            <Chip\n              size=\"small\"\n              label={isOnline ? 'Online' : 'Offline'}\n              color={isOnline ? 'success' : 'error'}\n              sx={{\n                mb: showDetails ? 1 : 0,\n                fontSize: '0.7rem',\n              }}\n            />\n          )}\n\n          {/* Expandable details */}\n          <Collapse in={showDetails} unmountOnExit>\n            <Box sx={{ mt: 1.5 }}>\n              {/* Suggestion */}\n              <Typography\n                variant=\"body2\"\n                sx={{\n                  mb: 1.5,\n                  padding: 1.5,\n                  backgroundColor: alpha(theme.palette.info.main, 0.1),\n                  borderRadius: 1.5,\n                  border: `1px solid ${alpha(theme.palette.info.main, 0.2)}`,\n                  fontSize: '0.875rem',\n                  lineHeight: 1.4,\n                }}\n              >\n                üí° <strong>N√°vrh:</strong> {enhancedMessage.suggestion}\n              </Typography>\n\n              {/* Recovery suggestions */}\n              {suggestions.length > 0 && (\n                <Box sx={{ mb: 1.5 }}>\n                  <Typography\n                    variant=\"caption\"\n                    sx={{ fontWeight: 600, mb: 1, display: 'block' }}\n                  >\n                    Mo≈æn√© rie≈°enia:\n                  </Typography>\n                  <Stack spacing={0.5}>\n                    {suggestions.map((suggestion, index) => (\n                      <Typography\n                        key={index}\n                        variant=\"caption\"\n                        sx={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: 0.5,\n                          opacity: 0.8,\n                          fontSize: '0.75rem',\n                        }}\n                      >\n                        <Box\n                          sx={{\n                            width: 4,\n                            height: 4,\n                            borderRadius: '50%',\n                            backgroundColor: 'currentColor',\n                            flexShrink: 0,\n                          }}\n                        />\n                        {suggestion}\n                      </Typography>\n                    ))}\n                  </Stack>\n                </Box>\n              )}\n\n              {/* Action buttons */}\n              <Stack direction=\"row\" spacing={1} sx={{ mb: 1 }}>\n                {onRetry && enhancedMessage.actionLabel && (\n                  <Button\n                    size=\"small\"\n                    variant=\"contained\"\n                    onClick={handleRetry}\n                    disabled={isRetrying}\n                    startIcon={isRetrying ? undefined : <RefreshIcon />}\n                    sx={{\n                      borderRadius: 2,\n                      textTransform: 'none',\n                      fontSize: '0.75rem',\n                      minWidth: 120,\n                    }}\n                  >\n                    {isRetrying ? 'Sk√∫≈°am...' : enhancedMessage.actionLabel}\n                  </Button>\n                )}\n\n                {enhancedMessage.category === 'unknown' && (\n                  <Button\n                    size=\"small\"\n                    variant=\"outlined\"\n                    onClick={handleRefresh}\n                    startIcon={<RefreshIcon />}\n                    sx={{\n                      borderRadius: 2,\n                      textTransform: 'none',\n                      fontSize: '0.75rem',\n                    }}\n                  >\n                    Obnovi≈• str√°nku\n                  </Button>\n                )}\n              </Stack>\n\n              {/* Technical details toggle */}\n              <Button\n                size=\"small\"\n                onClick={() => setShowTechnicalDetails(!showTechnicalDetails)}\n                startIcon={<BugReportIcon />}\n                sx={{\n                  textTransform: 'none',\n                  fontSize: '0.7rem',\n                  opacity: 0.7,\n                  '&:hover': { opacity: 1 },\n                }}\n              >\n                {showTechnicalDetails ? 'Skry≈•' : 'Zobrazi≈•'} technick√© detaily\n              </Button>\n\n              <Collapse in={showTechnicalDetails} unmountOnExit>\n                <Box\n                  sx={{\n                    mt: 1,\n                    p: 1,\n                    backgroundColor: alpha(theme.palette.grey[500], 0.1),\n                    borderRadius: 1,\n                    fontFamily: 'monospace',\n                    fontSize: '0.7rem',\n                    wordBreak: 'break-all',\n                    opacity: 0.8,\n                  }}\n                >\n                  <Typography\n                    variant=\"caption\"\n                    sx={{ fontWeight: 600, mb: 0.5, display: 'block' }}\n                  >\n                    Technick√© info:\n                  </Typography>\n                  <Typography variant=\"caption\" component=\"div\">\n                    Error: {error.technicalMessage}\n                  </Typography>\n                  {error.originalError?.status && (\n                    <Typography variant=\"caption\" component=\"div\">\n                      Status: {error.originalError.status}\n                    </Typography>\n                  )}\n                  <Typography variant=\"caption\" component=\"div\">\n                    Type: {error.errorType}\n                  </Typography>\n                  <Typography variant=\"caption\" component=\"div\">\n                    Retryable: {error.isRetryable ? 'Yes' : 'No'}\n                  </Typography>\n                </Box>\n              </Collapse>\n            </Box>\n          </Collapse>\n        </Box>\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default EnhancedErrorToast;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/EnhancedLoading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/EnhancedSearchBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CloseIcon' is defined but never used.","line":18,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UseEnhancedSearchOptions' is defined but never used.","line":49,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1036,1039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1036,1039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1045,1048],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1045,1048],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1762,1765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1762,1765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'inputFocused' is assigned a value but never used.","line":143,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":143,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":437,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":437,"endColumn":48}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üîç ENHANCED SEARCH BAR\n *\n * Unified search komponent s pokroƒçil√Ωmi features:\n * - Debounced search\n * - Autocomplete suggestions\n * - Search history\n * - Quick filters\n * - Mobile-optimized UX\n */\n\nimport {\n  Search as SearchIcon,\n  Clear as ClearIcon,\n  History as HistoryIcon,\n  TrendingUp as SuggestionIcon,\n  FilterList as FilterIcon,\n  Close as CloseIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  TextField,\n  InputAdornment,\n  IconButton,\n  Paper,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Chip,\n  Typography,\n  Divider,\n  Fade,\n  CircularProgress,\n  Tooltip,\n  useTheme,\n  useMediaQuery,\n  Stack,\n  Badge,\n} from '@mui/material';\nimport React, { useState, useRef, useEffect, memo } from 'react';\n\nimport type {\n  SearchSuggestion,\n  QuickFilter,\n} from '../../hooks/useEnhancedSearch';\nimport {\n  useEnhancedSearch,\n  UseEnhancedSearchOptions,\n} from '../../hooks/useEnhancedSearch';\n\ninterface EnhancedSearchBarProps {\n  // Search function\n  onSearch: (query: string, quickFilter?: string) => Promise<any[]> | any[];\n  suggestionFunction?: (\n    query: string\n  ) => Promise<SearchSuggestion[]> | SearchSuggestion[];\n\n  // Search options\n  debounceDelay?: number;\n  minQueryLength?: number;\n  maxSuggestions?: number;\n  maxHistory?: number;\n  storageKey?: string;\n  enableHistory?: boolean;\n  enableSuggestions?: boolean;\n\n  // UI customization\n  placeholder?: string;\n  size?: 'small' | 'medium';\n  fullWidth?: boolean;\n  variant?: 'outlined' | 'filled' | 'standard';\n\n  // Quick filters\n  quickFilters?: QuickFilter[];\n\n  // Mobile optimization\n  autoFocus?: boolean;\n  showResultCount?: boolean;\n  showPerformanceStats?: boolean;\n\n  // Event handlers\n  onQueryChange?: (query: string) => void;\n  onResultsChange?: (results: any[]) => void;\n  onQuickFilterChange?: (filterId: string | null) => void;\n}\n\nconst EnhancedSearchBar: React.FC<EnhancedSearchBarProps> = ({\n  onSearch,\n  suggestionFunction,\n  debounceDelay,\n  minQueryLength,\n  maxSuggestions,\n  maxHistory,\n  storageKey,\n  enableHistory,\n  enableSuggestions,\n  placeholder = 'Hƒæada≈•...',\n  size = 'medium',\n  fullWidth = true,\n  variant = 'outlined',\n  quickFilters = [],\n  autoFocus = false,\n  showResultCount = true,\n  showPerformanceStats = false,\n  onQueryChange,\n  onResultsChange,\n  onQuickFilterChange,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  // Search hook\n  const {\n    query,\n    setQuery,\n    isSearching,\n    activeQuickFilter,\n    results,\n    suggestions,\n    searchHistory,\n    showSuggestions,\n    setShowSuggestions,\n    clearSearch,\n    selectSuggestion,\n    setQuickFilter,\n    searchStats,\n  } = useEnhancedSearch({\n    searchFunction: onSearch,\n    suggestionFunction,\n    debounceDelay,\n    minQueryLength,\n    maxSuggestions,\n    maxHistory,\n    storageKey,\n    enableHistory,\n    enableSuggestions,\n    placeholder,\n    quickFilters,\n  });\n\n  // Local state\n  const [inputFocused, setInputFocused] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const suggestionsRef = useRef<HTMLDivElement>(null);\n\n  // Notify parent of changes\n  useEffect(() => {\n    onQueryChange?.(query);\n  }, [query, onQueryChange]);\n\n  useEffect(() => {\n    onResultsChange?.(results);\n  }, [results, onResultsChange]);\n\n  useEffect(() => {\n    onQuickFilterChange?.(activeQuickFilter);\n  }, [activeQuickFilter, onQuickFilterChange]);\n\n  // Handle input change\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newQuery = e.target.value;\n    setQuery(newQuery);\n\n    if (newQuery.length > 0) {\n      setShowSuggestions(true);\n    }\n  };\n\n  // Handle input focus\n  const handleInputFocus = () => {\n    setInputFocused(true);\n    if (query.length > 0 || searchHistory.length > 0) {\n      setShowSuggestions(true);\n    }\n  };\n\n  // Handle input blur (with delay for suggestion clicks)\n  const handleInputBlur = () => {\n    setTimeout(() => {\n      setInputFocused(false);\n      setShowSuggestions(false);\n    }, 200);\n  };\n\n  // Handle suggestion selection\n  const handleSuggestionSelect = (suggestion: SearchSuggestion) => {\n    selectSuggestion(suggestion);\n    inputRef.current?.focus();\n  };\n\n  // Handle quick filter selection\n  const handleQuickFilterSelect = (filterId: string) => {\n    if (activeQuickFilter === filterId) {\n      setQuickFilter(null);\n    } else {\n      setQuickFilter(filterId);\n    }\n  };\n\n  // Handle clear\n  const handleClear = () => {\n    clearSearch();\n    inputRef.current?.focus();\n  };\n\n  // Handle key navigation\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      setShowSuggestions(false);\n      inputRef.current?.blur();\n    }\n  };\n\n  // Calculate search info text\n  const getSearchInfo = () => {\n    if (isSearching) return 'Vyhƒæad√°vam...';\n\n    if (showResultCount && results.length > 0) {\n      const count = results.length;\n      const duration = searchStats.duration;\n\n      if (showPerformanceStats && duration > 0) {\n        return `${count} ${count === 1 ? 'v√Ωsledok' : count < 5 ? 'v√Ωsledky' : 'v√Ωsledkov'} (${duration.toFixed(0)}ms)`;\n      }\n\n      return `${count} ${count === 1 ? 'v√Ωsledok' : count < 5 ? 'v√Ωsledky' : 'v√Ωsledkov'}`;\n    }\n\n    return '';\n  };\n\n  return (\n    <Box sx={{ position: 'relative', width: fullWidth ? '100%' : 'auto' }}>\n      {/* Quick Filters */}\n      {quickFilters.length > 0 && (\n        <Stack\n          direction=\"row\"\n          spacing={1}\n          sx={{\n            mb: 2,\n            flexWrap: 'wrap',\n            gap: 1,\n          }}\n        >\n          <Typography\n            variant=\"caption\"\n            sx={{\n              alignSelf: 'center',\n              color: 'text.secondary',\n              whiteSpace: 'nowrap',\n              minWidth: 'fit-content',\n            }}\n          >\n            <FilterIcon\n              sx={{ fontSize: 14, mr: 0.5, verticalAlign: 'text-bottom' }}\n            />\n            R√Ωchle filtre:\n          </Typography>\n\n          {quickFilters.map(filter => (\n            <Chip\n              key={filter.id}\n              label={filter.label}\n              size={isMobile ? 'small' : 'medium'}\n              color={activeQuickFilter === filter.id ? filter.color : 'default'}\n              variant={activeQuickFilter === filter.id ? 'filled' : 'outlined'}\n              onClick={() => handleQuickFilterSelect(filter.id)}\n              sx={{\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  transform: 'translateY(-1px)',\n                  boxShadow: theme.shadows[2],\n                },\n              }}\n            />\n          ))}\n        </Stack>\n      )}\n\n      {/* Search Input */}\n      <TextField\n        ref={inputRef}\n        fullWidth={fullWidth}\n        size={size}\n        variant={variant}\n        placeholder={placeholder}\n        value={query}\n        onChange={handleInputChange}\n        onFocus={handleInputFocus}\n        onBlur={handleInputBlur}\n        onKeyDown={handleKeyDown}\n        autoFocus={autoFocus}\n        InputProps={{\n          startAdornment: (\n            <InputAdornment position=\"start\">\n              {isSearching ? (\n                <CircularProgress size={20} />\n              ) : (\n                <SearchIcon sx={{ color: 'text.secondary' }} />\n              )}\n            </InputAdornment>\n          ),\n          endAdornment: query && (\n            <InputAdornment position=\"end\">\n              <Tooltip title=\"Vymaza≈•\">\n                <IconButton\n                  size=\"small\"\n                  onClick={handleClear}\n                  sx={{\n                    '&:hover': {\n                      backgroundColor: `${theme.palette.error.main}15`,\n                    },\n                  }}\n                >\n                  <ClearIcon fontSize=\"small\" />\n                </IconButton>\n              </Tooltip>\n            </InputAdornment>\n          ),\n        }}\n        sx={{\n          '& .MuiOutlinedInput-root': {\n            transition: 'all 0.2s ease',\n            '&:hover': {\n              '& .MuiOutlinedInput-notchedOutline': {\n                borderColor: theme.palette.primary.main,\n              },\n            },\n            '&.Mui-focused': {\n              '& .MuiOutlinedInput-notchedOutline': {\n                borderWidth: 2,\n              },\n            },\n          },\n        }}\n      />\n\n      {/* Search Info */}\n      {getSearchInfo() && (\n        <Typography\n          variant=\"caption\"\n          sx={{\n            display: 'block',\n            mt: 0.5,\n            color: 'text.secondary',\n            textAlign: 'right',\n          }}\n        >\n          {getSearchInfo()}\n        </Typography>\n      )}\n\n      {/* Suggestions Dropdown */}\n      <Fade\n        in={\n          showSuggestions &&\n          (suggestions.length > 0 || searchHistory.length > 0)\n        }\n        timeout={200}\n      >\n        <Paper\n          ref={suggestionsRef}\n          sx={{\n            position: 'absolute',\n            top: '100%',\n            left: 0,\n            right: 0,\n            zIndex: theme.zIndex.modal,\n            maxHeight: isMobile ? '60vh' : '400px',\n            overflow: 'auto',\n            mt: 0.5,\n            boxShadow: theme.shadows[8],\n            borderRadius: 2,\n            border: `1px solid ${theme.palette.divider}`,\n          }}\n        >\n          <List dense disablePadding>\n            {/* Search History */}\n            {searchHistory.length > 0 && !query && (\n              <>\n                <ListItem\n                  sx={{\n                    py: 1,\n                    backgroundColor: theme.palette.background.default,\n                  }}\n                >\n                  <ListItemIcon>\n                    <HistoryIcon\n                      fontSize=\"small\"\n                      sx={{ color: 'text.secondary' }}\n                    />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={\n                      <Typography\n                        variant=\"caption\"\n                        sx={{ fontWeight: 600, color: 'text.secondary' }}\n                      >\n                        Posledn√© vyhƒæad√°vania\n                      </Typography>\n                    }\n                  />\n                </ListItem>\n                {searchHistory.slice(0, 5).map((historyItem, index) => (\n                  <ListItem\n                    key={`history-${index}`}\n                    button\n                    onClick={() =>\n                      handleSuggestionSelect({\n                        id: `history-${index}`,\n                        text: historyItem,\n                        type: 'recent',\n                      })\n                    }\n                    sx={{\n                      py: 1,\n                      '&:hover': {\n                        backgroundColor: theme.palette.action.hover,\n                      },\n                    }}\n                  >\n                    <ListItemIcon>\n                      <HistoryIcon\n                        fontSize=\"small\"\n                        sx={{ color: 'text.disabled' }}\n                      />\n                    </ListItemIcon>\n                    <ListItemText primary={historyItem} />\n                  </ListItem>\n                ))}\n                <Divider />\n              </>\n            )}\n\n            {/* Suggestions */}\n            {suggestions.map((suggestion, index) => (\n              <ListItem\n                key={suggestion.id}\n                button\n                onClick={() => handleSuggestionSelect(suggestion)}\n                sx={{\n                  py: 1,\n                  '&:hover': {\n                    backgroundColor: theme.palette.action.hover,\n                  },\n                }}\n              >\n                <ListItemIcon>\n                  {suggestion.type === 'recent' ? (\n                    <HistoryIcon\n                      fontSize=\"small\"\n                      sx={{ color: 'text.disabled' }}\n                    />\n                  ) : (\n                    <SuggestionIcon\n                      fontSize=\"small\"\n                      sx={{ color: theme.palette.primary.main }}\n                    />\n                  )}\n                </ListItemIcon>\n\n                <ListItemText\n                  primary={suggestion.text}\n                  secondary={suggestion.category}\n                />\n\n                {suggestion.count && (\n                  <Badge\n                    badgeContent={suggestion.count}\n                    color=\"primary\"\n                    sx={{ mr: 1 }}\n                  />\n                )}\n              </ListItem>\n            ))}\n\n            {/* No suggestions */}\n            {query && suggestions.length === 0 && (\n              <ListItem sx={{ py: 2 }}>\n                <ListItemText\n                  primary={\n                    <Typography\n                      variant=\"body2\"\n                      sx={{ textAlign: 'center', color: 'text.secondary' }}\n                    >\n                      ≈Ωiadne n√°vrhy pre \"{query}\"\n                    </Typography>\n                  }\n                />\n              </ListItem>\n            )}\n          </List>\n        </Paper>\n      </Fade>\n    </Box>\n  );\n};\n\nexport default memo(EnhancedSearchBar);\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/ErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4067,4070],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4067,4070],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'errorInfo' is assigned a value but never used.","line":204,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":204,"endColumn":31}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n  Refresh as RefreshIcon,\n  Home as HomeIcon,\n  BugReport as BugReportIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Button,\n  Paper,\n  Alert,\n  AlertTitle,\n  Collapse,\n  IconButton,\n  Stack,\n} from '@mui/material';\nimport type { ErrorInfo, ReactNode } from 'react';\nimport React, { Component } from 'react';\n// üîÑ MOBILE CLEANUP: mobileLogger removed\n// import { getMobileLogger } from '../../utils/mobileLogger';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  maxRetries?: number;\n  level?: 'page' | 'component' | 'section';\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo?: ErrorInfo;\n  retryCount: number;\n  showDetails: boolean;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  private retryTimeouts: NodeJS.Timeout[] = [];\n\n  public state: State = {\n    hasError: false,\n    error: null,\n    errorInfo: undefined,\n    retryCount: 0,\n    showDetails: false,\n  };\n\n  public static getDerivedStateFromError(error: Error): Partial<State> {\n    return { hasError: true, error };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    this.setState({ errorInfo });\n\n    console.group('üö® ErrorBoundary caught an error');\n    console.error('Error:', error);\n    console.error('Component Stack:', errorInfo.componentStack);\n    console.groupEnd();\n\n    // Report to MobileLogger with enhanced context\n    // üîÑ MOBILE CLEANUP: mobileLogger disabled\n    const mobileLogger = null; // getMobileLogger();\n    if (mobileLogger) {\n      // mobileLogger.log('CRITICAL', 'ErrorBoundary', 'React Error Boundary caught error', {\n      // error: error.message,\n      // stack: error.stack,\n      // componentStack: errorInfo.componentStack,\n      // errorBoundary: true,\n      // retryCount: this.state.retryCount,\n      // level: this.props.level || 'component',\n      // });\n    }\n\n    // Auto-retry for certain recoverable errors\n    if (\n      this.shouldAutoRetry(error) &&\n      this.state.retryCount < (this.props.maxRetries || 2)\n    ) {\n      const timeout = setTimeout(\n        () => {\n          this.handleRetry();\n        },\n        1000 * (this.state.retryCount + 1)\n      );\n\n      this.retryTimeouts.push(timeout);\n    }\n  }\n\n  componentWillUnmount() {\n    this.retryTimeouts.forEach(timeout => clearTimeout(timeout));\n  }\n\n  private shouldAutoRetry = (error: Error): boolean => {\n    const recoverableErrors = [\n      'ChunkLoadError',\n      'Loading chunk',\n      'Network Error',\n      'Failed to fetch',\n    ];\n\n    return recoverableErrors.some(\n      pattern => error.message.includes(pattern) || error.name.includes(pattern)\n    );\n  };\n\n  private handleRetry = () => {\n    this.setState(prevState => ({\n      hasError: false,\n      error: null,\n      errorInfo: undefined,\n      retryCount: prevState.retryCount + 1,\n      showDetails: false,\n    }));\n  };\n\n  private handleReload = () => {\n    window.location.reload();\n  };\n\n  private handleGoHome = () => {\n    window.location.href = '/';\n  };\n\n  private toggleDetails = () => {\n    this.setState(prevState => ({\n      showDetails: !prevState.showDetails,\n    }));\n  };\n\n  private getErrorMessage = (): string => {\n    const { error } = this.state;\n\n    if (!error) return 'Nezn√°ma chyba';\n\n    if (\n      error.message.includes('ChunkLoadError') ||\n      error.message.includes('Loading chunk')\n    ) {\n      // üîç IMPROVED: Lep≈°ie logovanie pre mobile chunk errors\n      const isMobile =\n        typeof window !== 'undefined' &&\n        window.matchMedia &&\n        window.matchMedia('(max-width: 900px)').matches;\n      const hasAutoReloaded =\n        sessionStorage.getItem('autoReloadedAfterChunkError') === '1';\n\n      console.group('üö® ChunkLoadError detected');\n      console.log('Is Mobile:', isMobile);\n      console.log('Has Auto Reloaded:', hasAutoReloaded);\n      console.log('Current URL:', window.location.href);\n      console.log('User Agent:', navigator.userAgent);\n      console.log('Connection:', (navigator as any).connection);\n      console.groupEnd();\n\n      // üîç CHANGE: Prid√°me delay a user confirmation na mobile\n      if (isMobile && !hasAutoReloaded) {\n        sessionStorage.setItem('autoReloadedAfterChunkError', '1');\n\n        // üö´ TEMPORARILY DISABLED: Automatic reload on ChunkLoadError\n        // This might be causing the mobile refresh issues\n\n        console.log(\n          'üö® ChunkLoadError detected but auto-reload is DISABLED for debugging'\n        );\n        console.log('üì± Mobile users should manually refresh if needed');\n\n        // P√îVODN√ù K√ìD (ZAK√ÅZAN√ù):\n        // if (process.env.NODE_ENV === 'development') {\n        //   const shouldReload = window.confirm('üö® ChunkLoadError na mobile!\\n\\nChcete automaticky obnovi≈• str√°nku?\\n(Cancel = ponecha≈• pre debugging)');\n        //   if (shouldReload) {\n        //     setTimeout(() => window.location.reload(), 100);\n        //   }\n        // } else {\n        //   setTimeout(() => window.location.reload(), 1000);\n        // }\n      }\n      return 'Naƒç√≠tavanie str√°nky bolo preru≈°en√©. Sk√∫ste obnovi≈• str√°nku.';\n    }\n\n    if (\n      error.message.includes('Network Error') ||\n      error.message.includes('Failed to fetch')\n    ) {\n      return 'Probl√©m s pripojen√≠m. Skontrolujte internetov√© pripojenie.';\n    }\n\n    if (error.name === 'TypeError') {\n      return 'Nastala technick√° chyba. Sk√∫ste obnovi≈• str√°nku.';\n    }\n\n    return 'Nastala neoƒçak√°van√° chyba. Sk√∫ste to znovu.';\n  };\n\n  public render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      const { level = 'component', maxRetries = 2 } = this.props;\n      const { error, errorInfo, retryCount, showDetails } = this.state;\n      const canRetry = retryCount < maxRetries;\n\n      // Different layouts based on error level\n      if (level === 'page') {\n        return (\n          <Box\n            display=\"flex\"\n            justifyContent=\"center\"\n            alignItems=\"center\"\n            minHeight=\"100vh\"\n            p={2}\n            bgcolor=\"background.default\"\n          >\n            <Paper elevation={3} sx={{ p: 4, maxWidth: 700 }}>\n              <Alert severity=\"error\" sx={{ mb: 3 }}>\n                <AlertTitle\n                  sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                >\n                  <BugReportIcon />\n                  Str√°nka sa nenaƒç√≠tala spr√°vne\n                </AlertTitle>\n                <Typography variant=\"body2\">\n                  {this.getErrorMessage()}\n                </Typography>\n              </Alert>\n\n              <Stack\n                direction=\"row\"\n                spacing={2}\n                sx={{ mb: 2, justifyContent: 'center' }}\n              >\n                {canRetry && (\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<RefreshIcon />}\n                    onClick={this.handleRetry}\n                  >\n                    Sk√∫si≈• znovu ({retryCount}/{maxRetries})\n                  </Button>\n                )}\n\n                <Button\n                  variant=\"outlined\"\n                  startIcon={<RefreshIcon />}\n                  onClick={this.handleReload}\n                >\n                  Obnovi≈• str√°nku\n                </Button>\n\n                <Button\n                  variant=\"text\"\n                  startIcon={<HomeIcon />}\n                  onClick={this.handleGoHome}\n                >\n                  Domov\n                </Button>\n              </Stack>\n\n              {/* Technical details for developers */}\n              <Box>\n                <Button\n                  size=\"small\"\n                  onClick={this.toggleDetails}\n                  startIcon={\n                    showDetails ? <ExpandLessIcon /> : <ExpandMoreIcon />\n                  }\n                  sx={{ mb: 1 }}\n                >\n                  Technick√© detaily\n                </Button>\n\n                <Collapse in={showDetails}>\n                  <Paper sx={{ p: 2, bgcolor: 'grey.50' }}>\n                    {process.env.NODE_ENV === 'development' && error && (\n                      <>\n                        <Typography\n                          variant=\"caption\"\n                          sx={{ fontWeight: 'bold', display: 'block', mb: 1 }}\n                        >\n                          Chybov√° spr√°va:\n                        </Typography>\n                        <Typography\n                          variant=\"body2\"\n                          sx={{ fontFamily: 'monospace', mb: 2 }}\n                        >\n                          {error.toString()}\n                        </Typography>\n\n                        {error.stack && (\n                          <Box\n                            component=\"pre\"\n                            sx={{\n                              fontSize: '0.75rem',\n                              overflow: 'auto',\n                              maxHeight: 200,\n                              bgcolor: 'grey.100',\n                              p: 1,\n                              borderRadius: 1,\n                            }}\n                          >\n                            {error.stack}\n                          </Box>\n                        )}\n                      </>\n                    )}\n\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      Chyba bola automaticky nahl√°sen√° a bude opraven√° ƒço\n                      najsk√¥r.\n                    </Typography>\n                  </Paper>\n                </Collapse>\n              </Box>\n            </Paper>\n          </Box>\n        );\n      }\n\n      // Component-level error (smaller, inline)\n      return (\n        <Alert\n          severity=\"error\"\n          sx={{ m: 2 }}\n          action={\n            <Stack direction=\"row\" spacing={1}>\n              {canRetry && (\n                <IconButton size=\"small\" onClick={this.handleRetry}>\n                  <RefreshIcon />\n                </IconButton>\n              )}\n              {showDetails && (\n                <IconButton size=\"small\" onClick={this.toggleDetails}>\n                  {showDetails ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n                </IconButton>\n              )}\n            </Stack>\n          }\n        >\n          <AlertTitle>Chyba v komponente</AlertTitle>\n          <Typography variant=\"body2\" sx={{ mb: 1 }}>\n            {this.getErrorMessage()}\n          </Typography>\n\n          {retryCount > 0 && (\n            <Typography\n              variant=\"caption\"\n              sx={{ display: 'block', opacity: 0.7 }}\n            >\n              Poƒçet pokusov: {retryCount}/{maxRetries}\n            </Typography>\n          )}\n\n          <Collapse in={showDetails}>\n            <Box\n              sx={{ mt: 2, p: 1, bgcolor: 'rgba(0,0,0,0.05)', borderRadius: 1 }}\n            >\n              <Typography variant=\"caption\">\n                {process.env.NODE_ENV === 'development' && error?.message}\n              </Typography>\n            </Box>\n          </Collapse>\n        </Alert>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/ErrorNotice.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/ErrorToast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/ErrorToastContainer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'WifiIcon' is defined but never used.","line":9,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'latestError' is assigned a value but never used.","line":232,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":232,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üçû Error Toast Container\n// Displays error messages as elegant toast notifications\n\nimport {\n  Close as CloseIcon,\n  Refresh as RefreshIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n  Wifi as WifiIcon,\n  WifiOff as WifiOffIcon,\n} from '@mui/icons-material';\nimport {\n  Snackbar,\n  Alert,\n  AlertTitle,\n  IconButton,\n  Box,\n  Typography,\n  Chip,\n  Stack,\n  Collapse,\n  Button,\n} from '@mui/material';\nimport React, { useMemo } from 'react';\n\nimport { useError } from '../../context/ErrorContext';\nimport type { AppError, ErrorSeverity } from '../../types/errors';\n\n// Toast severity mapping\nconst getSeverityColor = (severity: ErrorSeverity) => {\n  switch (severity) {\n    case 'info':\n      return 'info';\n    case 'warning':\n      return 'warning';\n    case 'error':\n      return 'error';\n    case 'critical':\n      return 'error';\n    default:\n      return 'info';\n  }\n};\n\n// Error icon mapping\nconst getErrorIcon = (error: AppError) => {\n  switch (error.category) {\n    case 'network':\n      return <WifiOffIcon fontSize=\"small\" />;\n    default:\n      return undefined;\n  }\n};\n\n// Individual Error Toast Component\ninterface ErrorToastProps {\n  error: AppError;\n  onDismiss: (id: string) => void;\n  isOnline: boolean;\n}\n\nconst ErrorToast: React.FC<ErrorToastProps> = ({\n  error,\n  onDismiss,\n  isOnline,\n}) => {\n  const [expanded, setExpanded] = React.useState(false);\n\n  const severity = getSeverityColor(error.severity);\n  const icon = getErrorIcon(error);\n\n  const handleRetry = async () => {\n    // TODO: Implement retry logic based on error context\n    console.log('Retrying action for error:', error.id);\n    onDismiss(error.id);\n  };\n\n  const handleDismiss = () => {\n    onDismiss(error.id);\n  };\n\n  const toggleExpanded = () => {\n    setExpanded(!expanded);\n  };\n\n  return (\n    <Alert\n      severity={severity}\n      icon={icon}\n      sx={{\n        mb: 1,\n        minWidth: 300,\n        maxWidth: 500,\n        '& .MuiAlert-message': { width: '100%' },\n        '& .MuiAlert-action': { alignItems: 'flex-start', pt: 0.5 },\n      }}\n      action={\n        <Box>\n          {error.details && (\n            <IconButton size=\"small\" onClick={toggleExpanded} sx={{ mr: 0.5 }}>\n              {expanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n            </IconButton>\n          )}\n          {error.retry && !isOnline && (\n            <IconButton\n              size=\"small\"\n              onClick={handleRetry}\n              sx={{ mr: 0.5 }}\n              disabled={!isOnline}\n            >\n              <RefreshIcon />\n            </IconButton>\n          )}\n          <IconButton size=\"small\" onClick={handleDismiss}>\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      }\n    >\n      <AlertTitle sx={{ mb: error.details ? 1 : 0 }}>\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\n          <Typography variant=\"subtitle2\" sx={{ flexGrow: 1 }}>\n            {error.message}\n          </Typography>\n          <Chip\n            label={error.category}\n            size=\"small\"\n            variant=\"outlined\"\n            sx={{ fontSize: '0.7rem', height: 20 }}\n          />\n        </Stack>\n      </AlertTitle>\n\n      <Collapse in={expanded}>\n        {error.details && (\n          <Typography variant=\"body2\" sx={{ mt: 1, opacity: 0.8 }}>\n            {error.details}\n          </Typography>\n        )}\n\n        {error.context && Object.keys(error.context).length > 0 && (\n          <Box sx={{ mt: 1 }}>\n            <Typography variant=\"caption\" sx={{ fontWeight: 'bold' }}>\n              Technick√© detaily:\n            </Typography>\n            <Box\n              component=\"pre\"\n              sx={{\n                fontSize: '0.7rem',\n                mt: 0.5,\n                p: 1,\n                bgcolor: 'rgba(0,0,0,0.1)',\n                borderRadius: 1,\n                overflow: 'auto',\n                maxHeight: 100,\n              }}\n            >\n              {JSON.stringify(error.context, null, 2)}\n            </Box>\n          </Box>\n        )}\n\n        {error.retry && (\n          <Button\n            size=\"small\"\n            startIcon={<RefreshIcon />}\n            onClick={handleRetry}\n            disabled={!isOnline}\n            sx={{ mt: 1 }}\n          >\n            Sk√∫si≈• znovu\n          </Button>\n        )}\n      </Collapse>\n\n      <Typography\n        variant=\"caption\"\n        sx={{\n          display: 'block',\n          mt: 1,\n          opacity: 0.6,\n          fontSize: '0.7rem',\n        }}\n      >\n        {error.timestamp.toLocaleTimeString()}\n      </Typography>\n    </Alert>\n  );\n};\n\n// Network Status Indicator\nconst NetworkStatusIndicator: React.FC<{ isOnline: boolean }> = ({\n  isOnline,\n}) => (\n  <Box\n    sx={{\n      position: 'fixed',\n      top: 16,\n      right: 16,\n      zIndex: 2000,\n      display: isOnline ? 'none' : 'flex',\n      alignItems: 'center',\n      gap: 1,\n      p: 1,\n      bgcolor: 'warning.main',\n      color: 'warning.contrastText',\n      borderRadius: 1,\n      boxShadow: 2,\n    }}\n  >\n    <WifiOffIcon fontSize=\"small\" />\n    <Typography variant=\"body2\">Offline</Typography>\n  </Box>\n);\n\n// Main Error Toast Container\nexport const ErrorToastContainer: React.FC = () => {\n  const { errors, dismissError, isOnline } = useError();\n\n  // Sort errors by severity and timestamp\n  const sortedErrors = useMemo(() => {\n    const severityOrder = { critical: 4, error: 3, warning: 2, info: 1 };\n    return [...errors].sort((a, b) => {\n      const severityDiff =\n        severityOrder[b.severity] - severityOrder[a.severity];\n      if (severityDiff !== 0) return severityDiff;\n      return b.timestamp.getTime() - a.timestamp.getTime();\n    });\n  }, [errors]);\n\n  // Get the most recent error for Snackbar positioning\n  const latestError = sortedErrors[0];\n\n  return (\n    <>\n      <NetworkStatusIndicator isOnline={isOnline} />\n\n      <Snackbar\n        open={sortedErrors.length > 0}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        sx={{\n          top: { xs: 80, sm: 24 },\n          '& .MuiSnackbarContent-root': {\n            p: 0,\n            bgcolor: 'transparent',\n            boxShadow: 'none',\n          },\n        }}\n      >\n        <Stack spacing={1} sx={{ minWidth: 300 }}>\n          {sortedErrors.map(error => (\n            <ErrorToast\n              key={error.id}\n              error={error}\n              onDismiss={dismissError}\n              isOnline={isOnline}\n            />\n          ))}\n\n          {sortedErrors.length > 3 && (\n            <Alert severity=\"info\" sx={{ opacity: 0.8 }}>\n              <Typography variant=\"body2\">\n                + {sortedErrors.length - 3} ƒèal≈°√≠ch ch√Ωb\n              </Typography>\n              <Button\n                size=\"small\"\n                onClick={() => {\n                  // Dismiss older errors\n                  sortedErrors.slice(3).forEach(error => {\n                    dismissError(error.id);\n                  });\n                }}\n                sx={{ mt: 0.5 }}\n              >\n                Skry≈• star≈°ie\n              </Button>\n            </Alert>\n          )}\n        </Stack>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default ErrorToastContainer;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/ImageGalleryLazy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/ImageGalleryModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/InfiniteScrollContainer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Skeleton' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[443,446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[443,446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[564,567],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[564,567],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üîÑ INFINITE SCROLL CONTAINER\n *\n * Booking.com ≈°t√Ωl infinite scrolling wrapper:\n * - Smooth loading animations\n * - Progress indicator\n * - Error handling\n * - Mobile optimized\n */\n\nimport {\n  Box,\n  LinearProgress,\n  Typography,\n  Skeleton,\n  CircularProgress,\n} from '@mui/material';\nimport React from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\ninterface InfiniteScrollContainerProps {\n  // Data\n  items: any[];\n  hasMore: boolean;\n  isLoading: boolean;\n\n  // Actions\n  loadMore: () => void;\n\n  // Render\n  renderItem: (item: any, index: number) => React.ReactNode;\n\n  // Config\n  height?: number | string;\n  itemHeight?: number;\n  showProgress?: boolean;\n  emptyMessage?: string;\n  loadingMessage?: string;\n  endMessage?: string;\n\n  // Stats\n  totalItems?: number;\n  progress?: number;\n}\n\nexport const InfiniteScrollContainer: React.FC<\n  InfiniteScrollContainerProps\n> = ({\n  items,\n  hasMore,\n  isLoading,\n  loadMore,\n  renderItem,\n  height = 600,\n  itemHeight = 120,\n  showProgress = true,\n  emptyMessage = '≈Ωiadne polo≈æky',\n  loadingMessage = 'Naƒç√≠tavam...',\n  endMessage = '‚úÖ V≈°etko naƒç√≠tan√©',\n  totalItems,\n  progress = 0,\n}) => {\n  // üîÑ Loading component\n  const LoadingComponent = () => (\n    <Box\n      sx={{\n        p: 2,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        gap: 2,\n      }}\n    >\n      <CircularProgress size={24} />\n      <Typography variant=\"body2\" color=\"text.secondary\">\n        {loadingMessage}\n      </Typography>\n    </Box>\n  );\n\n  // ‚úÖ End message component\n  const EndComponent = () => (\n    <Box sx={{ p: 3, textAlign: 'center' }}>\n      <Typography\n        variant=\"body2\"\n        color=\"text.secondary\"\n        sx={{ fontWeight: 500 }}\n      >\n        {endMessage}\n      </Typography>\n      {totalItems && (\n        <Typography\n          variant=\"caption\"\n          color=\"text.secondary\"\n          sx={{ mt: 1, display: 'block' }}\n        >\n          Zobrazen√Ωch {items.length} z {totalItems} polo≈æiek\n        </Typography>\n      )}\n    </Box>\n  );\n\n  // üìä Progress bar\n  const ProgressBar = () => {\n    if (!showProgress || !totalItems) return null;\n\n    return (\n      <Box sx={{ p: 2, borderBottom: '1px solid #e0e0e0' }}>\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            mb: 1,\n          }}\n        >\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            Naƒç√≠tan√©: {items.length} / {totalItems}\n          </Typography>\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            {progress}%\n          </Typography>\n        </Box>\n        <LinearProgress\n          variant=\"determinate\"\n          value={progress}\n          sx={{\n            height: 4,\n            borderRadius: 2,\n            backgroundColor: '#f0f0f0',\n            '& .MuiLinearProgress-bar': {\n              backgroundColor: '#1976d2',\n            },\n          }}\n        />\n      </Box>\n    );\n  };\n\n  // üì± Empty state\n  if (items.length === 0 && !isLoading) {\n    return (\n      <Box\n        sx={{\n          height,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          flexDirection: 'column',\n          gap: 2,\n          color: 'text.secondary',\n        }}\n      >\n        <Typography variant=\"h6\">üìã {emptyMessage}</Typography>\n        <Typography variant=\"body2\">\n          Sk√∫ste zmeni≈• filter alebo vyhƒæad√°vanie\n        </Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box\n      sx={{\n        height,\n        border: '1px solid #e0e0e0',\n        borderRadius: 2,\n        overflow: 'hidden',\n      }}\n    >\n      {/* Progress bar */}\n      <ProgressBar />\n\n      {/* Infinite scroll content */}\n      <InfiniteScroll\n        dataLength={items.length}\n        next={loadMore}\n        hasMore={hasMore}\n        loader={<LoadingComponent />}\n        endMessage={<EndComponent />}\n        height={\n          typeof height === 'number'\n            ? height - (showProgress && totalItems ? 60 : 0)\n            : height\n        }\n        style={{\n          padding: '8px',\n          overflowX: 'hidden', // Prevent horizontal scroll\n        }}\n        // üöÄ Performance optimizations\n        scrollThreshold={0.8} // Load more at 80% scroll\n        pullDownToRefreshThreshold={50}\n      >\n        {items.map((item, index) => (\n          <Box\n            key={item.id || index}\n            sx={{\n              minHeight: itemHeight,\n              marginBottom: 1,\n              '&:last-child': {\n                marginBottom: 0,\n              },\n            }}\n          >\n            {renderItem(item, index)}\n          </Box>\n        ))}\n      </InfiniteScroll>\n    </Box>\n  );\n};\n\n// üéØ Specialized containers for different data types\ninterface RentalScrollContainerProps\n  extends Omit<\n    InfiniteScrollContainerProps,\n    'emptyMessage' | 'loadingMessage'\n  > {}\n\nexport const RentalScrollContainer: React.FC<\n  RentalScrollContainerProps\n> = props => (\n  <InfiniteScrollContainer\n    {...props}\n    emptyMessage=\"≈Ωiadne pren√°jmy\"\n    loadingMessage=\"Naƒç√≠tavam pren√°jmy...\"\n    endMessage=\"‚úÖ V≈°etky pren√°jmy naƒç√≠tan√©\"\n    itemHeight={140}\n  />\n);\n\nexport const VehicleScrollContainer: React.FC<\n  RentalScrollContainerProps\n> = props => (\n  <InfiniteScrollContainer\n    {...props}\n    emptyMessage=\"≈Ωiadne vozidl√°\"\n    loadingMessage=\"Naƒç√≠tavam vozidl√°...\"\n    endMessage=\"‚úÖ V≈°etky vozidl√° naƒç√≠tan√©\"\n    itemHeight={120}\n  />\n);\n\nexport const CustomerScrollContainer: React.FC<\n  RentalScrollContainerProps\n> = props => (\n  <InfiniteScrollContainer\n    {...props}\n    emptyMessage=\"≈Ωiadni z√°kazn√≠ci\"\n    loadingMessage=\"Naƒç√≠tavam z√°kazn√≠kov...\"\n    endMessage=\"‚úÖ V≈°etci z√°kazn√≠ci naƒç√≠tan√≠\"\n    itemHeight={100}\n  />\n);\n\nexport default InfiniteScrollContainer;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/LazyDetailView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[975,978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[975,978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5220,5223],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5220,5223],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":290,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":290,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9654,9657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9654,9657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üëÅÔ∏è Lazy Detail View - Heavy component for performance testing\n// This represents a complex detail view component that should be lazy loaded\n\nimport {\n  ExpandMore as ExpandMoreIcon,\n  Timeline as TimelineIcon,\n  Info as InfoIcon,\n  Assessment as AssessmentIcon,\n} from '@mui/icons-material';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  Grid,\n  Chip,\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  CircularProgress,\n  Avatar,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n\nimport { OptimizedImage } from './OptimizedImage';\n\ninterface LazyDetailViewProps {\n  itemId: string;\n  open: boolean;\n  onClose: () => void;\n}\n\nconst LazyDetailView: React.FC<LazyDetailViewProps> = ({\n  itemId,\n  open,\n  onClose,\n}) => {\n  const [loading, setLoading] = useState(true);\n  const [detailData, setDetailData] = useState<any>(null);\n\n  // Simulate loading heavy detail data\n  useEffect(() => {\n    if (open) {\n      setLoading(true);\n      // Simulate API call with complex data\n      setTimeout(() => {\n        setDetailData({\n          id: itemId,\n          title: `Detail View for Item ${itemId}`,\n          subtitle: 'Comprehensive item details',\n          image: '/placeholder-image.jpg',\n          status: 'active',\n          category: 'Sample Category',\n          description:\n            'This is a detailed description of the item with lots of information.',\n          metadata: {\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            views: Math.floor(Math.random() * 1000),\n            rating: 4.5,\n          },\n          timeline: [\n            { date: '2025-01-15', event: 'Item created', type: 'info' },\n            { date: '2025-01-14', event: 'Status updated', type: 'success' },\n            { date: '2025-01-13', event: 'Category changed', type: 'warning' },\n          ],\n          analytics: {\n            totalViews: 1234,\n            uniqueVisitors: 567,\n            averageTime: '2m 34s',\n            bounceRate: '12%',\n          },\n          relatedItems: [\n            { id: '1', title: 'Related Item 1', image: '/placeholder-1.jpg' },\n            { id: '2', title: 'Related Item 2', image: '/placeholder-2.jpg' },\n            { id: '3', title: 'Related Item 3', image: '/placeholder-3.jpg' },\n          ],\n        });\n        setLoading(false);\n      }, 800); // Longer delay to simulate complex data loading\n    }\n  }, [open, itemId]);\n\n  if (loading) {\n    return (\n      <Dialog open={open} onClose={onClose} maxWidth=\"lg\" fullWidth>\n        <DialogContent>\n          <Box\n            display=\"flex\"\n            justifyContent=\"center\"\n            alignItems=\"center\"\n            py={6}\n          >\n            <CircularProgress size={60} />\n            <Box ml={3}>\n              <Typography variant=\"h6\">\n                Naƒç√≠tavam detailn√© inform√°cie...\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Spracov√°vam komplexn√© d√°ta...\n              </Typography>\n            </Box>\n          </Box>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  if (!detailData) return null;\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"lg\" fullWidth>\n      <DialogTitle>\n        <Box display=\"flex\" alignItems=\"center\" gap={2}>\n          <Avatar sx={{ bgcolor: 'primary.main' }}>\n            <InfoIcon />\n          </Avatar>\n          <Box>\n            <Typography variant=\"h5\">{detailData.title}</Typography>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              {detailData.subtitle}\n            </Typography>\n          </Box>\n          <Box ml=\"auto\">\n            <Chip\n              label={detailData.status}\n              color={detailData.status === 'active' ? 'success' : 'default'}\n            />\n          </Box>\n        </Box>\n      </DialogTitle>\n\n      <DialogContent>\n        <Grid container spacing={3}>\n          {/* Main Content */}\n          <Grid item xs={12} md={8}>\n            {/* Image */}\n            {detailData.image && (\n              <OptimizedImage\n                src={detailData.image}\n                alt={detailData.title}\n                width=\"100%\"\n                height={300}\n                aspectRatio={16 / 9}\n                placeholder=\"skeleton\"\n                priority={true}\n              />\n            )}\n\n            {/* Description */}\n            <Card sx={{ mt: 2 }}>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  Popis\n                </Typography>\n                <Typography variant=\"body1\">\n                  {detailData.description}\n                </Typography>\n              </CardContent>\n            </Card>\n\n            {/* Timeline */}\n            <Card sx={{ mt: 2 }}>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  <TimelineIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\n                  Hist√≥ria zmien\n                </Typography>\n                <List>\n                  {detailData.timeline.map((item: any, index: number) => (\n                    <React.Fragment key={index}>\n                      <ListItem>\n                        <ListItemText\n                          primary={item.event}\n                          secondary={new Date(item.date).toLocaleDateString(\n                            'sk'\n                          )}\n                        />\n                        <Chip\n                          size=\"small\"\n                          label={item.type}\n                          color={\n                            item.type === 'success'\n                              ? 'success'\n                              : item.type === 'warning'\n                                ? 'warning'\n                                : 'info'\n                          }\n                        />\n                      </ListItem>\n                      {index < detailData.timeline.length - 1 && <Divider />}\n                    </React.Fragment>\n                  ))}\n                </List>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          {/* Sidebar */}\n          <Grid item xs={12} md={4}>\n            {/* Metadata */}\n            <Card>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  Inform√°cie\n                </Typography>\n                <Box sx={{ '& > *': { mb: 1 } }}>\n                  <Typography variant=\"body2\">\n                    <strong>Kateg√≥ria:</strong> {detailData.category}\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Zobrazenia:</strong> {detailData.metadata.views}\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Hodnotenie:</strong> {detailData.metadata.rating}/5\n                  </Typography>\n                  <Typography variant=\"body2\">\n                    <strong>Vytvoren√©:</strong>{' '}\n                    {new Date(detailData.metadata.createdAt).toLocaleDateString(\n                      'sk'\n                    )}\n                  </Typography>\n                </Box>\n              </CardContent>\n            </Card>\n\n            {/* Analytics */}\n            <Card sx={{ mt: 2 }}>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  <AssessmentIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\n                  Analytika\n                </Typography>\n                <Grid container spacing={2}>\n                  <Grid item xs={6}>\n                    <Box textAlign=\"center\">\n                      <Typography variant=\"h4\" color=\"primary.main\">\n                        {detailData.analytics.totalViews.toLocaleString()}\n                      </Typography>\n                      <Typography variant=\"caption\">\n                        Celkov√© zobrazenia\n                      </Typography>\n                    </Box>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Box textAlign=\"center\">\n                      <Typography variant=\"h4\" color=\"secondary.main\">\n                        {detailData.analytics.uniqueVisitors}\n                      </Typography>\n                      <Typography variant=\"caption\">\n                        Unik√°tni n√°v≈°tevn√≠ci\n                      </Typography>\n                    </Box>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Box textAlign=\"center\">\n                      <Typography variant=\"body1\">\n                        {detailData.analytics.averageTime}\n                      </Typography>\n                      <Typography variant=\"caption\">Priemern√Ω ƒças</Typography>\n                    </Box>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Box textAlign=\"center\">\n                      <Typography variant=\"body1\">\n                        {detailData.analytics.bounceRate}\n                      </Typography>\n                      <Typography variant=\"caption\">Bounce rate</Typography>\n                    </Box>\n                  </Grid>\n                </Grid>\n              </CardContent>\n            </Card>\n\n            {/* Related Items */}\n            <Card sx={{ mt: 2 }}>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  S√∫visiace polo≈æky\n                </Typography>\n                {detailData.relatedItems.map((item: any) => (\n                  <Box key={item.id} sx={{ display: 'flex', gap: 2, mb: 1 }}>\n                    <OptimizedImage\n                      src={item.image}\n                      alt={item.title}\n                      width={60}\n                      height={60}\n                      aspectRatio={1}\n                      placeholder=\"icon\"\n                      lazy={true}\n                    />\n                    <Box>\n                      <Typography variant=\"body2\" fontWeight=\"medium\">\n                        {item.title}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        ID: {item.id}\n                      </Typography>\n                    </Box>\n                  </Box>\n                ))}\n              </CardContent>\n            </Card>\n          </Grid>\n        </Grid>\n\n        {/* Advanced sections with accordions */}\n        <Box sx={{ mt: 3 }}>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"h6\">Pokroƒçil√© nastavenia</Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <Typography>\n                Tu by boli pokroƒçil√© nastavenia a konfigur√°cie pre t√∫to polo≈æku.\n                Tento obsah sa naƒç√≠tava iba keƒè pou≈æ√≠vateƒæ rozbal√≠ sekciu.\n              </Typography>\n            </AccordionDetails>\n          </Accordion>\n\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"h6\">Technick√© detaily</Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <Typography>\n                Technick√© inform√°cie, logy, a diagnostick√© d√°ta. Tieto d√°ta sa\n                naƒç√≠tavaj√∫ iba na po≈æiadanie.\n              </Typography>\n            </AccordionDetails>\n          </Accordion>\n        </Box>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} variant=\"contained\">\n          Zavrie≈•\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default LazyDetailView;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/LazyEditDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/LazyImage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/LoadingStates.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'color' is assigned a value but never used.","line":136,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":136,"endColumn":8},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5542,5545],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5542,5545],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üåÄ Enhanced Loading States Components\n// Beautiful loading indicators with smooth animations and modern design\n\nimport {\n  Box,\n  CircularProgress,\n  LinearProgress,\n  Typography,\n  useTheme,\n  styled,\n  keyframes,\n  Fade,\n  Backdrop,\n} from '@mui/material';\nimport React from 'react';\n\n// Gradient pulse animation\nconst gradientPulse = keyframes`\n  0%, 100% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n`;\n\n// Floating animation\nconst float = keyframes`\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n`;\n\n// Spin with gradient\nconst spinGradient = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`;\n\n// Styled Loading Container\nconst LoadingContainer = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  minHeight: '200px',\n  padding: theme.spacing(4),\n  background:\n    theme.palette.mode === 'dark'\n      ? 'rgba(26, 31, 46, 0.8)'\n      : 'rgba(255, 255, 255, 0.9)',\n  backdropFilter: 'blur(8px)',\n  borderRadius: '20px',\n  border: `1px solid ${\n    theme.palette.mode === 'dark'\n      ? 'rgba(102, 126, 234, 0.2)'\n      : 'rgba(102, 126, 234, 0.1)'\n  }`,\n}));\n\n// Gradient CircularProgress\nconst GradientCircularProgress = styled(Box)(({ theme }) => ({\n  position: 'relative',\n  display: 'inline-flex',\n  '& .MuiCircularProgress-root': {\n    color: 'transparent',\n  },\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    background: `conic-gradient(\n      from 0deg,\n      transparent 0%,\n      ${theme.palette.mode === 'dark' ? '#667eea' : '#667eea'} 50%,\n      ${theme.palette.mode === 'dark' ? '#764ba2' : '#764ba2'} 100%\n    )`,\n    borderRadius: '50%',\n    animation: `${spinGradient} 1.5s linear infinite`,\n    mask: 'radial-gradient(farthest-side, transparent calc(50% - 4px), black calc(50% - 3px))',\n    WebkitMask:\n      'radial-gradient(farthest-side, transparent calc(50% - 4px), black calc(50% - 3px))',\n  },\n}));\n\n// Floating Icon\nconst FloatingIcon = styled(Box)(() => ({\n  fontSize: '3rem',\n  animation: `${float} 3s ease-in-out infinite`,\n}));\n\n// Gradient LinearProgress\nconst GradientLinearProgress = styled(LinearProgress)(({ theme }) => ({\n  height: 8,\n  borderRadius: 4,\n  background:\n    theme.palette.mode === 'dark'\n      ? 'rgba(45, 55, 72, 0.3)'\n      : 'rgba(241, 245, 249, 0.8)',\n  '& .MuiLinearProgress-bar': {\n    borderRadius: 4,\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n    backgroundSize: '200% 200%',\n    animation: `${gradientPulse} 2s ease-in-out infinite`,\n  },\n}));\n\ninterface LoadingStateProps {\n  variant?: 'spinner' | 'linear' | 'dots' | 'pulse' | 'custom';\n  size?: 'small' | 'medium' | 'large';\n  message?: string;\n  submessage?: string;\n  fullScreen?: boolean;\n  transparent?: boolean;\n  color?: 'primary' | 'secondary' | 'inherit';\n  icon?: React.ReactNode;\n}\n\nexport const LoadingState: React.FC<LoadingStateProps> = ({\n  variant = 'spinner',\n  size = 'medium',\n  message = 'Naƒç√≠tavam...',\n  submessage,\n  fullScreen = false,\n  transparent = false,\n  color = 'primary',\n  icon = 'üöó',\n}) => {\n  const theme = useTheme();\n\n  const getSizeValues = () => {\n    switch (size) {\n      case 'small':\n        return { spinner: 24, container: 120, text: 'body2' };\n      case 'large':\n        return { spinner: 60, container: 300, text: 'h6' };\n      default:\n        return { spinner: 40, container: 200, text: 'body1' };\n    }\n  };\n\n  const sizeValues = getSizeValues();\n\n  const renderSpinner = () => (\n    <GradientCircularProgress>\n      <CircularProgress\n        size={sizeValues.spinner}\n        thickness={4}\n        sx={{ color: 'transparent' }}\n      />\n    </GradientCircularProgress>\n  );\n\n  const renderLinear = () => (\n    <Box width=\"100%\" maxWidth={300}>\n      <GradientLinearProgress />\n    </Box>\n  );\n\n  const renderDots = () => (\n    <Box display=\"flex\" gap={1}>\n      {[0, 1, 2].map(index => (\n        <Box\n          key={index}\n          sx={{\n            width: 12,\n            height: 12,\n            borderRadius: '50%',\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            animation: `${float} 1.4s ease-in-out infinite`,\n            animationDelay: `${index * 0.2}s`,\n          }}\n        />\n      ))}\n    </Box>\n  );\n\n  const renderPulse = () => (\n    <Box\n      sx={{\n        width: sizeValues.spinner,\n        height: sizeValues.spinner,\n        borderRadius: '50%',\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        animation: `${gradientPulse} 2s ease-in-out infinite`,\n        backgroundSize: '200% 200%',\n      }}\n    />\n  );\n\n  const renderCustom = () => <FloatingIcon>{icon}</FloatingIcon>;\n\n  const renderLoader = () => {\n    switch (variant) {\n      case 'linear':\n        return renderLinear();\n      case 'dots':\n        return renderDots();\n      case 'pulse':\n        return renderPulse();\n      case 'custom':\n        return renderCustom();\n      default:\n        return renderSpinner();\n    }\n  };\n\n  const content = (\n    <LoadingContainer\n      sx={{\n        minHeight: sizeValues.container,\n        background: transparent ? 'transparent' : undefined,\n        border: transparent ? 'none' : undefined,\n        backdropFilter: transparent ? 'none' : undefined,\n      }}\n    >\n      <Box mb={2}>{renderLoader()}</Box>\n\n      <Typography\n        variant={sizeValues.text as any}\n        color=\"textPrimary\"\n        fontWeight={600}\n        textAlign=\"center\"\n        sx={{ mb: submessage ? 1 : 0 }}\n      >\n        {message}\n      </Typography>\n\n      {submessage && (\n        <Typography\n          variant=\"body2\"\n          color=\"textSecondary\"\n          textAlign=\"center\"\n          sx={{ opacity: 0.8 }}\n        >\n          {submessage}\n        </Typography>\n      )}\n    </LoadingContainer>\n  );\n\n  if (fullScreen) {\n    return (\n      <Backdrop\n        sx={{\n          color: '#fff',\n          zIndex: theme => theme.zIndex.drawer + 1,\n          background:\n            theme.palette.mode === 'dark'\n              ? 'rgba(10, 15, 28, 0.8)'\n              : 'rgba(255, 255, 255, 0.8)',\n          backdropFilter: 'blur(8px)',\n        }}\n        open={true}\n      >\n        <Fade in={true}>\n          <div>{content}</div>\n        </Fade>\n      </Backdrop>\n    );\n  }\n\n  return content;\n};\n\n// Specialized loading components\nexport const PageLoader: React.FC<{ message?: string }> = ({\n  message = 'Naƒç√≠tavam str√°nku...',\n}) => (\n  <LoadingState\n    variant=\"custom\"\n    size=\"large\"\n    message={message}\n    submessage=\"Pros√≠m poƒçkajte\"\n    icon=\"üöó\"\n  />\n);\n\nexport const ComponentLoader: React.FC<{ message?: string }> = ({\n  message = 'Naƒç√≠tavam...',\n}) => (\n  <LoadingState\n    variant=\"spinner\"\n    size=\"medium\"\n    message={message}\n    transparent={true}\n  />\n);\n\nexport const ButtonLoader: React.FC<{ size?: 'small' | 'medium' }> = ({\n  size = 'small',\n}) => (\n  <GradientCircularProgress>\n    <CircularProgress\n      size={size === 'small' ? 16 : 20}\n      thickness={4}\n      sx={{ color: 'transparent' }}\n    />\n  </GradientCircularProgress>\n);\n\nexport const FormLoader: React.FC = () => (\n  <LoadingState\n    variant=\"linear\"\n    size=\"medium\"\n    message=\"Spracov√°vam...\"\n    submessage=\"Uklad√°m zmeny\"\n  />\n);\n\nexport const DataLoader: React.FC<{\n  message?: string;\n  count?: number;\n}> = ({ message = 'Naƒç√≠tavam d√°ta...', count }) => (\n  <LoadingState\n    variant=\"dots\"\n    size=\"medium\"\n    message={message}\n    submessage={count ? `${count} polo≈æiek` : undefined}\n  />\n);\n\nexport const FullScreenLoader: React.FC<{\n  message?: string;\n  submessage?: string;\n}> = ({\n  message = 'BlackRent sa naƒç√≠tava...',\n  submessage = 'Pripravujeme v≈°etko pre v√°s',\n}) => (\n  <LoadingState\n    variant=\"custom\"\n    size=\"large\"\n    message={message}\n    submessage={submessage}\n    fullScreen={true}\n    icon=\"üöó\"\n  />\n);\n\nexport default LoadingState;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/MobileDebugPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[766,769],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[766,769],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setLogs' is assigned a value but never used.","line":43,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setStats' is assigned a value but never used.","line":45,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1116,1119],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1116,1119],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6530,6533],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6530,6533],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":250,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":250,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6827,6830],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6827,6830],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":254,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":254,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6996,6999],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6996,6999],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  BugReport as BugIcon,\n  Download as DownloadIcon,\n  Clear as ClearIcon,\n  Refresh as RefreshIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n  Close as CloseIcon,\n  Memory as MemoryIcon,\n  Speed as SpeedIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Typography,\n  Chip,\n  Divider,\n  IconButton,\n  Collapse,\n  Alert,\n  Stack,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n// üîÑ MOBILE CLEANUP: mobileLogger removed\n// import { getMobileLogger, LogEntry } from '../../utils/mobileLogger';\n\n// Fallback interface\ninterface LogEntry {\n  timestamp: number; // Changed from Date to number\n  level: string;\n  message: string;\n  data?: any;\n  category?: string; // Added missing property\n  stackTrace?: string; // Added missing property\n}\n\nconst MobileDebugPanel: React.FC = () => {\n  const [open, setOpen] = useState(false);\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [expandedLog, setExpandedLog] = useState<number | null>(null);\n  const [stats, setStats] = useState<any>(null);\n  // üîÑ MOBILE CLEANUP: mobileLogger disabled\n  const mobileLogger = null; // getMobileLogger();\n\n  // Detect if mobile\n  const isMobile = window.matchMedia('(max-width: 900px)').matches;\n\n  const refreshLogs = () => {\n    // üîÑ MOBILE CLEANUP: mobileLogger disabled\n    if (!mobileLogger) return;\n    // const currentLogs = mobileLogger.getLogs();\n    // setLogs(currentLogs.slice(-50)); // Last 50 logs\n    // setStats(mobileLogger.getStats());\n  };\n\n  useEffect(() => {\n    if (open && mobileLogger) {\n      refreshLogs();\n      // Auto-refresh every 2 seconds when panel is open\n      const interval = setInterval(refreshLogs, 2000);\n      return () => clearInterval(interval);\n    }\n  }, [open, mobileLogger]);\n\n  // Only show on mobile\n  if (!isMobile || !mobileLogger) {\n    return null;\n  }\n\n  const handleDownloadLogs = () => {\n    // üîÑ MOBILE CLEANUP: mobileLogger disabled\n    // mobileLogger.downloadLogs();\n  };\n\n  const handleClearLogs = () => {\n    // üîÑ MOBILE CLEANUP: mobileLogger disabled\n    // mobileLogger.clearLogs();\n    // refreshLogs();\n  };\n\n  const getLevelColor = (level: LogEntry['level']) => {\n    switch (level) {\n      case 'DEBUG':\n        return 'default';\n      case 'INFO':\n        return 'info';\n      case 'WARN':\n        return 'warning';\n      case 'ERROR':\n        return 'error';\n      case 'CRITICAL':\n        return 'error';\n      default:\n        return 'default';\n    }\n  };\n\n  const getLevelEmoji = (level: LogEntry['level']) => {\n    switch (level) {\n      case 'DEBUG':\n        return 'üîç';\n      case 'INFO':\n        return '‚ÑπÔ∏è';\n      case 'WARN':\n        return '‚ö†Ô∏è';\n      case 'ERROR':\n        return '‚ùå';\n      case 'CRITICAL':\n        return 'üö®';\n      default:\n        return 'üìù';\n    }\n  };\n\n  const formatTime = (timestamp: number) => {\n    return new Date(timestamp).toLocaleTimeString('sk-SK', {\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      fractionalSecondDigits: 3,\n    });\n  };\n\n  return (\n    <>\n      {/* Floating Debug Button */}\n      <Box\n        sx={{\n          position: 'fixed',\n          bottom: 20,\n          right: 20,\n          zIndex: 9999,\n          opacity: 0.8,\n          '&:hover': { opacity: 1 },\n        }}\n      >\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          size=\"small\"\n          onClick={() => setOpen(true)}\n          startIcon={<BugIcon />}\n          sx={{\n            borderRadius: '20px',\n            background: 'linear-gradient(45deg, #FF6B6B, #4ECDC4)',\n            color: 'white',\n            fontWeight: 'bold',\n            boxShadow: '0 4px 15px rgba(0,0,0,0.3)',\n            '&:hover': {\n              background: 'linear-gradient(45deg, #FF5252, #26C6DA)',\n            },\n          }}\n        >\n          Debug\n        </Button>\n      </Box>\n\n      {/* Debug Panel Dialog */}\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n        fullScreen={isMobile}\n        sx={{\n          '& .MuiDialog-paper': {\n            backgroundColor: '#1a1a1a',\n            color: '#ffffff',\n            height: isMobile ? '100vh' : '80vh',\n          },\n        }}\n      >\n        <DialogTitle\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            backgroundColor: '#2d2d2d',\n            borderBottom: '1px solid #444',\n          }}\n        >\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <BugIcon />\n            <Typography variant=\"h6\">üì± Mobile Debug Panel</Typography>\n          </Box>\n          <IconButton onClick={() => setOpen(false)} sx={{ color: 'white' }}>\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n\n        <DialogContent sx={{ p: 2, overflow: 'auto' }}>\n          {/* Stats Section */}\n          {stats && (\n            <Box sx={{ mb: 3 }}>\n              <Typography\n                variant=\"h6\"\n                sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n              >\n                <SpeedIcon /> ≈†tatistiky\n              </Typography>\n              <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" useFlexGap>\n                <Chip\n                  label={`üìù Celkom: ${stats.totalLogs}`}\n                  size=\"small\"\n                  variant=\"outlined\"\n                  sx={{ color: 'white', borderColor: '#666' }}\n                />\n                <Chip\n                  label={`‚ö†Ô∏è Warnings: ${stats.warningCount}`}\n                  size=\"small\"\n                  variant=\"outlined\"\n                  color=\"warning\"\n                />\n                <Chip\n                  label={`‚ùå Errors: ${stats.errorCount}`}\n                  size=\"small\"\n                  variant=\"outlined\"\n                  color=\"error\"\n                />\n                <Chip\n                  label={`üïê Recent: ${stats.recentLogs}`}\n                  size=\"small\"\n                  variant=\"outlined\"\n                  color=\"info\"\n                />\n              </Stack>\n            </Box>\n          )}\n\n          {/* Memory Info */}\n          <Box sx={{ mb: 3 }}>\n            <Typography\n              variant=\"h6\"\n              sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n            >\n              <MemoryIcon /> Pam√§≈•\n            </Typography>\n            {(performance as any).memory ? (\n              <Alert\n                severity=\"info\"\n                sx={{ backgroundColor: '#1e3a5f', color: 'white' }}\n              >\n                <Typography variant=\"body2\">\n                  Pou≈æit√°:{' '}\n                  {Math.round(\n                    (performance as any).memory.usedJSHeapSize / 1024 / 1024\n                  )}{' '}\n                  MB / Limit:{' '}\n                  {Math.round(\n                    (performance as any).memory.jsHeapSizeLimit / 1024 / 1024\n                  )}{' '}\n                  MB\n                </Typography>\n              </Alert>\n            ) : (\n              <Alert\n                severity=\"warning\"\n                sx={{ backgroundColor: '#5f4e1e', color: 'white' }}\n              >\n                Memory API nie je dostupn√©\n              </Alert>\n            )}\n          </Box>\n\n          <Divider sx={{ my: 2, borderColor: '#444' }} />\n\n          {/* Logs Section */}\n          <Typography variant=\"h6\" sx={{ mb: 2 }}>\n            üìã Posledn√© logy ({logs.length})\n          </Typography>\n\n          {logs.length === 0 ? (\n            <Alert\n              severity=\"info\"\n              sx={{ backgroundColor: '#1e3a5f', color: 'white' }}\n            >\n              ≈Ωiadne logy k dispoz√≠cii\n            </Alert>\n          ) : (\n            <Box sx={{ maxHeight: '400px', overflow: 'auto' }}>\n              {logs.map((log, index) => (\n                <Box key={index} sx={{ mb: 1 }}>\n                  <Box\n                    sx={{\n                      p: 1,\n                      backgroundColor: '#2d2d2d',\n                      borderRadius: 1,\n                      border:\n                        log.level === 'ERROR' || log.level === 'CRITICAL'\n                          ? '1px solid #f44336'\n                          : '1px solid #444',\n                      cursor: 'pointer',\n                    }}\n                    onClick={() =>\n                      setExpandedLog(expandedLog === index ? null : index)\n                    }\n                  >\n                    <Box\n                      sx={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 1,\n                        mb: 0.5,\n                      }}\n                    >\n                      <Typography variant=\"caption\" sx={{ color: '#888' }}>\n                        {formatTime(log.timestamp)}\n                      </Typography>\n                      <Chip\n                        label={`${getLevelEmoji(log.level)} ${log.level}`}\n                        size=\"small\"\n                        color={getLevelColor(log.level)}\n                        sx={{ minWidth: 'auto' }}\n                      />\n                      <Chip\n                        label={log.category}\n                        size=\"small\"\n                        variant=\"outlined\"\n                        sx={{ color: '#ccc', borderColor: '#666' }}\n                      />\n                      {expandedLog === index ? (\n                        <ExpandLessIcon />\n                      ) : (\n                        <ExpandMoreIcon />\n                      )}\n                    </Box>\n                    <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n                      {log.message}\n                    </Typography>\n                  </Box>\n\n                  <Collapse in={expandedLog === index}>\n                    <Box\n                      sx={{\n                        mt: 1,\n                        p: 2,\n                        backgroundColor: '#1a1a1a',\n                        borderRadius: 1,\n                      }}\n                    >\n                      {log.data && (\n                        <Box sx={{ mb: 2 }}>\n                          <Typography\n                            variant=\"caption\"\n                            sx={{ color: '#888', fontWeight: 'bold' }}\n                          >\n                            Data:\n                          </Typography>\n                          <Box\n                            component=\"pre\"\n                            sx={{\n                              fontSize: '0.75rem',\n                              color: '#4fc3f7',\n                              backgroundColor: '#0d1421',\n                              p: 1,\n                              borderRadius: 1,\n                              overflow: 'auto',\n                              maxHeight: '200px',\n                            }}\n                          >\n                            {JSON.stringify(log.data, null, 2)}\n                          </Box>\n                        </Box>\n                      )}\n\n                      {log.stackTrace && (\n                        <Box>\n                          <Typography\n                            variant=\"caption\"\n                            sx={{ color: '#888', fontWeight: 'bold' }}\n                          >\n                            Stack Trace:\n                          </Typography>\n                          <Box\n                            component=\"pre\"\n                            sx={{\n                              fontSize: '0.7rem',\n                              color: '#ff9800',\n                              backgroundColor: '#0d1421',\n                              p: 1,\n                              borderRadius: 1,\n                              overflow: 'auto',\n                              maxHeight: '150px',\n                            }}\n                          >\n                            {log.stackTrace}\n                          </Box>\n                        </Box>\n                      )}\n                    </Box>\n                  </Collapse>\n                </Box>\n              ))}\n            </Box>\n          )}\n        </DialogContent>\n\n        <DialogActions\n          sx={{\n            backgroundColor: '#2d2d2d',\n            borderTop: '1px solid #444',\n            gap: 1,\n          }}\n        >\n          <Button\n            startIcon={<RefreshIcon />}\n            onClick={refreshLogs}\n            variant=\"outlined\"\n            size=\"small\"\n            sx={{ color: 'white', borderColor: '#666' }}\n          >\n            Refresh\n          </Button>\n          <Button\n            startIcon={<DownloadIcon />}\n            onClick={handleDownloadLogs}\n            variant=\"outlined\"\n            size=\"small\"\n            sx={{ color: 'white', borderColor: '#666' }}\n          >\n            Download\n          </Button>\n          <Button\n            startIcon={<ClearIcon />}\n            onClick={handleClearLogs}\n            variant=\"outlined\"\n            color=\"warning\"\n            size=\"small\"\n          >\n            Clear\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nexport default MobileDebugPanel;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/NativeCamera.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/OfflineIndicator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Fade' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3104,3107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3104,3107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":352,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":352,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11231,11234],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11231,11234],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üìµ Offline Indicator Component\n// Shows offline status with elegant animations and retry options\n\nimport {\n  WifiOff as OfflineIcon,\n  Wifi as OnlineIcon,\n  Refresh as RefreshIcon,\n  ExpandMore as ExpandIcon,\n  ExpandLess as CollapseIcon,\n  CloudOff as CloudOffIcon,\n  Schedule as ScheduleIcon,\n  Sync as SyncIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  IconButton,\n  Collapse,\n  Alert,\n  LinearProgress,\n  Fade,\n  Slide,\n  useTheme,\n  alpha,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n\nimport { useNetworkStatus } from '../../hooks/useNetworkStatus';\nimport { usePWA } from '../../hooks/usePWA';\n\ninterface OfflineIndicatorProps {\n  position?: 'top' | 'bottom';\n  showDetails?: boolean;\n  autoHide?: boolean;\n  hideDelay?: number;\n}\n\nexport const OfflineIndicator: React.FC<OfflineIndicatorProps> = ({\n  position = 'top',\n  showDetails = false,\n  autoHide = false,\n  hideDelay = 5000,\n}) => {\n  const theme = useTheme();\n  const { isOnline, networkQuality, wasOffline, reconnectedAt } =\n    useNetworkStatus();\n  const { isOffline: pwaOffline } = usePWA();\n\n  const [showIndicator, setShowIndicator] = useState(!isOnline);\n  const [expanded, setExpanded] = useState(false);\n  const [pendingActions, setPendingActions] = useState<number>(0);\n  const [lastSync, setLastSync] = useState<Date | null>(null);\n  const [isRetrying, setIsRetrying] = useState(false);\n\n  // Show/hide indicator based on connection status\n  useEffect(() => {\n    if (!isOnline || pwaOffline) {\n      setShowIndicator(true);\n    } else if (autoHide && hideDelay > 0) {\n      const timer = setTimeout(() => {\n        setShowIndicator(false);\n      }, hideDelay);\n      return () => clearTimeout(timer);\n    } else {\n      setShowIndicator(false);\n    }\n  }, [isOnline, pwaOffline, autoHide, hideDelay]);\n\n  // Listen for service worker messages about pending actions\n  useEffect(() => {\n    if ('serviceWorker' in navigator) {\n      const handleMessage = (event: MessageEvent) => {\n        const { type, payload } = event.data;\n\n        switch (type) {\n          case 'PENDING_ACTIONS':\n            setPendingActions(payload.count || 0);\n            break;\n          case 'SYNC_COMPLETE':\n            setLastSync(new Date());\n            setPendingActions(0);\n            break;\n        }\n      };\n\n      navigator.serviceWorker.addEventListener('message', handleMessage);\n      return () => {\n        navigator.serviceWorker.removeEventListener('message', handleMessage);\n      };\n    }\n  }, []);\n\n  const handleRetry = async () => {\n    setIsRetrying(true);\n\n    try {\n      // Try to fetch a simple endpoint to test connectivity\n      const response = await fetch('/api/health', {\n        method: 'HEAD',\n        cache: 'no-cache',\n      });\n\n      if (response.ok) {\n        // Connection restored, trigger sync if available\n        if ('serviceWorker' in navigator) {\n          const registration = await navigator.serviceWorker.ready;\n          // Background sync (if supported)\n          if ('sync' in registration) {\n            (registration as any).sync.register('blackrent-sync');\n          }\n        }\n      }\n    } catch (error) {\n      console.log('Retry failed:', error);\n    } finally {\n      setTimeout(() => setIsRetrying(false), 1000);\n    }\n  };\n\n  const handleToggleExpanded = () => {\n    setExpanded(!expanded);\n  };\n\n  if (!showIndicator) {\n    return null;\n  }\n\n  const isOffline = !isOnline || pwaOffline;\n  const showReconnected = isOnline && wasOffline && reconnectedAt;\n\n  return (\n    <Slide direction={position === 'top' ? 'down' : 'up'} in={showIndicator}>\n      <Box\n        sx={{\n          position: 'fixed',\n          [position]: 0,\n          left: 0,\n          right: 0,\n          zIndex: 1300,\n          p: 1,\n        }}\n      >\n        <Paper\n          elevation={8}\n          sx={{\n            background: isOffline\n              ? `linear-gradient(135deg, ${alpha(theme.palette.error.main, 0.9)}, ${alpha(theme.palette.error.dark, 0.9)})`\n              : `linear-gradient(135deg, ${alpha(theme.palette.success.main, 0.9)}, ${alpha(theme.palette.success.dark, 0.9)})`,\n            color: 'white',\n            mx: 'auto',\n            maxWidth: 600,\n            borderRadius: 2,\n            overflow: 'hidden',\n            backdropFilter: 'blur(10px)',\n          }}\n        >\n          {/* Main Status Bar */}\n          <Box\n            display=\"flex\"\n            alignItems=\"center\"\n            justifyContent=\"space-between\"\n            p={2}\n            sx={{\n              cursor: showDetails ? 'pointer' : 'default',\n            }}\n            onClick={showDetails ? handleToggleExpanded : undefined}\n          >\n            <Box display=\"flex\" alignItems=\"center\" gap={2}>\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  width: 40,\n                  height: 40,\n                  borderRadius: '50%',\n                  background: 'rgba(255, 255, 255, 0.2)',\n                  animation: isOffline ? 'pulse 2s infinite' : undefined,\n                }}\n              >\n                {isOffline ? <OfflineIcon /> : <OnlineIcon />}\n              </Box>\n\n              <Box>\n                <Typography variant=\"subtitle1\" fontWeight={600}>\n                  {isOffline\n                    ? 'Aplik√°cia je offline'\n                    : showReconnected\n                      ? 'Pripojenie obnoven√©!'\n                      : 'Pripojen√©'}\n                </Typography>\n\n                <Typography variant=\"body2\" sx={{ opacity: 0.9 }}>\n                  {isOffline\n                    ? 'Niektor√© funkcie s√∫ obmedzen√©'\n                    : `Kvalita siete: ${networkQuality}`}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Box display=\"flex\" alignItems=\"center\" gap={1}>\n              {pendingActions > 0 && (\n                <Box\n                  display=\"flex\"\n                  alignItems=\"center\"\n                  gap={0.5}\n                  sx={{\n                    background: 'rgba(255, 255, 255, 0.2)',\n                    borderRadius: 1,\n                    px: 1,\n                    py: 0.5,\n                  }}\n                >\n                  <ScheduleIcon fontSize=\"small\" />\n                  <Typography variant=\"body2\">\n                    {pendingActions} ƒçakaj√∫cich\n                  </Typography>\n                </Box>\n              )}\n\n              {isOffline && (\n                <IconButton\n                  color=\"inherit\"\n                  onClick={handleRetry}\n                  disabled={isRetrying}\n                  size=\"small\"\n                >\n                  <RefreshIcon\n                    sx={{\n                      animation: isRetrying\n                        ? 'spin 1s linear infinite'\n                        : undefined,\n                    }}\n                  />\n                </IconButton>\n              )}\n\n              {showDetails && (\n                <IconButton\n                  color=\"inherit\"\n                  onClick={handleToggleExpanded}\n                  size=\"small\"\n                >\n                  {expanded ? <CollapseIcon /> : <ExpandIcon />}\n                </IconButton>\n              )}\n            </Box>\n          </Box>\n\n          {/* Progress bar for retrying */}\n          {isRetrying && (\n            <LinearProgress\n              sx={{\n                '& .MuiLinearProgress-bar': {\n                  background: 'rgba(255, 255, 255, 0.7)',\n                },\n              }}\n            />\n          )}\n\n          {/* Expanded Details */}\n          {showDetails && (\n            <Collapse in={expanded}>\n              <Box\n                sx={{\n                  borderTop: '1px solid rgba(255, 255, 255, 0.2)',\n                  p: 2,\n                  background: 'rgba(0, 0, 0, 0.1)',\n                }}\n              >\n                <Box display=\"flex\" flexWrap=\"wrap\" gap={2} mb={2}>\n                  {/* Network Status */}\n                  <Box\n                    sx={{\n                      background: 'rgba(255, 255, 255, 0.1)',\n                      borderRadius: 1,\n                      p: 1.5,\n                      flex: '1 1 200px',\n                    }}\n                  >\n                    <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                      <CloudOffIcon fontSize=\"small\" />\n                      <Typography variant=\"subtitle2\">Sie≈•</Typography>\n                    </Box>\n                    <Typography variant=\"body2\">\n                      Status: {isOffline ? 'Offline' : 'Online'}\n                    </Typography>\n                    {!isOffline && (\n                      <Typography variant=\"body2\">\n                        Kvalita: {networkQuality}\n                      </Typography>\n                    )}\n                  </Box>\n\n                  {/* Pending Actions */}\n                  <Box\n                    sx={{\n                      background: 'rgba(255, 255, 255, 0.1)',\n                      borderRadius: 1,\n                      p: 1.5,\n                      flex: '1 1 200px',\n                    }}\n                  >\n                    <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                      <ScheduleIcon fontSize=\"small\" />\n                      <Typography variant=\"subtitle2\">Akcie</Typography>\n                    </Box>\n                    <Typography variant=\"body2\">\n                      ƒåakaj√∫ce: {pendingActions}\n                    </Typography>\n                    {lastSync && (\n                      <Typography variant=\"body2\">\n                        Posledn√Ω sync: {lastSync.toLocaleTimeString()}\n                      </Typography>\n                    )}\n                  </Box>\n                </Box>\n\n                {/* Action Buttons */}\n                <Box display=\"flex\" gap={1} flexWrap=\"wrap\">\n                  <Button\n                    variant=\"outlined\"\n                    size=\"small\"\n                    startIcon={<RefreshIcon />}\n                    onClick={handleRetry}\n                    disabled={isRetrying}\n                    sx={{\n                      color: 'white',\n                      borderColor: 'rgba(255, 255, 255, 0.5)',\n                      '&:hover': {\n                        borderColor: 'white',\n                        background: 'rgba(255, 255, 255, 0.1)',\n                      },\n                    }}\n                  >\n                    {isRetrying ? 'Sk√∫≈°am...' : 'Sk√∫si≈• znovu'}\n                  </Button>\n\n                  {pendingActions > 0 && isOnline && (\n                    <Button\n                      variant=\"outlined\"\n                      size=\"small\"\n                      startIcon={<SyncIcon />}\n                      onClick={async () => {\n                        if ('serviceWorker' in navigator) {\n                          const registration =\n                            await navigator.serviceWorker.ready;\n                          // Background sync (if supported)\n                          if ('sync' in registration) {\n                            (registration as any).sync.register(\n                              'blackrent-sync'\n                            );\n                          }\n                        }\n                      }}\n                      sx={{\n                        color: 'white',\n                        borderColor: 'rgba(255, 255, 255, 0.5)',\n                        '&:hover': {\n                          borderColor: 'white',\n                          background: 'rgba(255, 255, 255, 0.1)',\n                        },\n                      }}\n                    >\n                      Synchronizova≈•\n                    </Button>\n                  )}\n                </Box>\n\n                <Alert\n                  severity={isOffline ? 'warning' : 'success'}\n                  sx={{\n                    mt: 2,\n                    '& .MuiAlert-root': {\n                      color: 'inherit',\n                    },\n                  }}\n                >\n                  {isOffline\n                    ? 'Va≈°e akcie bud√∫ synchronizovan√© po obnoven√≠ pripojenia.'\n                    : 'V≈°etko funguje spr√°vne. Akcie sa synchronizuj√∫ automaticky.'}\n                </Alert>\n              </Box>\n            </Collapse>\n          )}\n        </Paper>\n\n        {/* Global Styles for Animations */}\n        <style>{`\n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.5; }\n          }\n          \n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `}</style>\n      </Box>\n    </Slide>\n  );\n};\n\nexport default OfflineIndicator;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/OptimizedImage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'aspectRatio' is defined but never used.","line":41,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'placeholder' is defined but never used.","line":42,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'lazy' is defined but never used.","line":43,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":7}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üñºÔ∏è OPTIMIZED IMAGE COMPONENT\n *\n * Booking.com ≈°t√Ωl image loading:\n * - Lazy loading s Intersection Observer\n * - Thumbnail system pre zoznamy\n * - Progressive blur-to-sharp loading\n * - WebP format support\n * - Memory efficient\n */\n\nimport { Box, Skeleton } from '@mui/material';\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\n\ninterface OptimizedImageProps {\n  src: string;\n  alt: string;\n  width?: number | string;\n  height?: number | string;\n  thumbnail?: boolean; // Pre zoznamy - mal√© obr√°zky\n  quality?: number; // 1-100\n  priority?: boolean; // Pre critical images\n  aspectRatio?: number; // Backward compatibility\n  placeholder?: string; // Backward compatibility\n  lazy?: boolean; // Backward compatibility\n  onLoad?: () => void;\n  onError?: () => void;\n  className?: string;\n  style?: React.CSSProperties;\n  objectFit?: 'cover' | 'contain' | 'fill' | 'scale-down';\n}\n\nexport const OptimizedImage: React.FC<OptimizedImageProps> = ({\n  src,\n  alt,\n  width = '100%',\n  height = 'auto',\n  thumbnail = false,\n  quality = 75,\n  priority = false,\n  aspectRatio, // Backward compatibility - ignored for now\n  placeholder, // Backward compatibility - ignored for now\n  lazy, // Backward compatibility - handled by priority\n  onLoad,\n  onError,\n  className,\n  style,\n  objectFit = 'cover',\n}) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(priority); // Priority images load immediately\n  const [hasError, setHasError] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // üéØ Intersection Observer for lazy loading\n  useEffect(() => {\n    if (priority || isInView) return;\n\n    const observer = new IntersectionObserver(\n      entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            setIsInView(true);\n            observer.disconnect();\n          }\n        });\n      },\n      {\n        rootMargin: '50px', // Start loading 50px before visible\n        threshold: 0.1,\n      }\n    );\n\n    if (containerRef.current) {\n      observer.observe(containerRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, [priority, isInView]);\n\n  // üñºÔ∏è Generate optimized image URL\n  const getOptimizedUrl = useCallback(\n    (originalSrc: string) => {\n      // Ak je to u≈æ Cloudflare R2 URL, prid√°me optimaliz√°cie\n      if (\n        originalSrc.includes('r2.dev') ||\n        originalSrc.includes('cloudflare.com')\n      ) {\n        const url = new URL(originalSrc);\n\n        // Thumbnail rozmer\n        if (thumbnail) {\n          url.searchParams.set('w', '150');\n          url.searchParams.set('h', '150');\n        } else if (typeof width === 'number') {\n          url.searchParams.set('w', width.toString());\n        }\n\n        if (typeof height === 'number') {\n          url.searchParams.set('h', height.toString());\n        }\n\n        url.searchParams.set('q', quality.toString());\n        url.searchParams.set('format', 'webp');\n        url.searchParams.set('fit', objectFit);\n\n        return url.toString();\n      }\n\n      // Pre lok√°lne obr√°zky alebo in√© URL\n      return originalSrc;\n    },\n    [thumbnail, width, height, quality, objectFit]\n  );\n\n  const handleLoad = useCallback(() => {\n    setIsLoaded(true);\n    onLoad?.();\n  }, [onLoad]);\n\n  const handleError = useCallback(() => {\n    setHasError(true);\n    onError?.();\n  }, [onError]);\n\n  const optimizedSrc = getOptimizedUrl(src);\n\n  return (\n    <Box\n      ref={containerRef}\n      sx={{\n        position: 'relative',\n        width,\n        height,\n        overflow: 'hidden',\n        backgroundColor: '#f5f5f5',\n        ...style,\n      }}\n      className={className}\n    >\n      {/* üîÑ Loading skeleton */}\n      {!isLoaded && !hasError && (\n        <Skeleton\n          variant=\"rectangular\"\n          width=\"100%\"\n          height=\"100%\"\n          animation=\"wave\"\n          sx={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            zIndex: 1,\n          }}\n        />\n      )}\n\n      {/* üñºÔ∏è Actual image */}\n      {isInView && !hasError && (\n        <img\n          ref={imgRef}\n          src={optimizedSrc}\n          alt={alt}\n          onLoad={handleLoad}\n          onError={handleError}\n          style={{\n            width: '100%',\n            height: '100%',\n            objectFit,\n            transition: 'opacity 0.3s ease, filter 0.3s ease',\n            opacity: isLoaded ? 1 : 0,\n            filter: isLoaded ? 'none' : 'blur(5px)', // Progressive blur effect\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            zIndex: 2,\n          }}\n          loading={priority ? 'eager' : 'lazy'}\n        />\n      )}\n\n      {/* ‚ùå Error fallback */}\n      {hasError && (\n        <Box\n          sx={{\n            width: '100%',\n            height: '100%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            backgroundColor: '#f5f5f5',\n            color: '#999',\n            fontSize: '0.875rem',\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            zIndex: 3,\n          }}\n        >\n          üì∑ Obr√°zok sa nepodarilo naƒç√≠ta≈•\n        </Box>\n      )}\n    </Box>\n  );\n};\n\n// üéØ Specialized components for different use cases\nexport const ThumbnailImage: React.FC<\n  Omit<OptimizedImageProps, 'thumbnail'>\n> = props => <OptimizedImage {...props} thumbnail={true} quality={60} />;\n\nexport const HeroImage: React.FC<\n  Omit<OptimizedImageProps, 'priority'>\n> = props => <OptimizedImage {...props} priority={true} quality={85} />;\n\nexport default OptimizedImage;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/PDFViewer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[913,916],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[913,916],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook React.useEffect has missing dependencies: 'handleLoadPDF' and 'pdfUrl'. Either include them or remove the dependency array.","line":142,"column":6,"nodeType":"ArrayExpression","endLine":142,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [handleLoadPDF, open, pdfUrl]","fix":{"range":[3909,3915],"text":"[handleLoadPDF, open, pdfUrl]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Close as CloseIcon,\n  Download as DownloadIcon,\n  PictureAsPdf as PDFIcon,\n  OpenInNew as OpenInNewIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  IconButton,\n  Typography,\n  CircularProgress,\n  Alert,\n} from '@mui/material';\nimport React, { useState } from 'react';\n\nimport { getApiBaseUrl } from '../../utils/apiUrl';\n\ninterface PDFViewerProps {\n  open: boolean;\n  onClose: () => void;\n  protocolId: string;\n  protocolType: 'handover' | 'return';\n  title?: string;\n}\n\nexport default function PDFViewer({\n  open,\n  onClose,\n  protocolId,\n  protocolType,\n  title = 'Zobrazi≈• protokol',\n}: PDFViewerProps) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [pdfUrl, setPdfUrl] = useState<string | null>(null);\n  const [protocolData, setProtocolData] = useState<any>(null);\n\n  // Naƒç√≠tanie protokolu a jeho PDF URL\n  const loadProtocolData = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Najprv sk√∫s naƒç√≠ta≈• protokol aby z√≠skal pdfUrl\n      const apiBaseUrl = getApiBaseUrl();\n      const protocolUrl = `${apiBaseUrl}/protocols/${protocolType}/${protocolId}`;\n      console.log('üîç Loading protocol from:', protocolUrl);\n\n      const protocolResponse = await fetch(protocolUrl);\n      console.log('üìã Protocol response status:', protocolResponse.status);\n\n      if (protocolResponse.ok) {\n        const protocol = await protocolResponse.json();\n        console.log('üìã Protocol data:', protocol);\n        setProtocolData(protocol);\n\n        // Ak m√° protokol pdfUrl, pou≈æij ho\n        if (protocol.pdfUrl) {\n          console.log(\n            '‚úÖ Using existing PDF URL from protocol:',\n            protocol.pdfUrl\n          );\n          setPdfUrl(protocol.pdfUrl);\n          return;\n        } else {\n          console.log('‚ö†Ô∏è Protocol has no pdfUrl field');\n        }\n      } else {\n        console.log(\n          '‚ùå Protocol response not ok:',\n          protocolResponse.status,\n          protocolResponse.statusText\n        );\n        const errorText = await protocolResponse.text();\n        console.log('‚ùå Error response:', errorText);\n      }\n\n      // Ak nem√° pdfUrl, vygeneruj nov√© PDF\n      console.log('‚ö†Ô∏è No PDF URL found, generating new PDF');\n      const generateUrl = generatePDFUrl();\n      setPdfUrl(generateUrl);\n    } catch (err) {\n      console.error('‚ùå Error loading protocol data:', err);\n      // Fallback na generovanie PDF\n      const generateUrl = generatePDFUrl();\n      setPdfUrl(generateUrl);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Generovanie PDF URL (fallback)\n  const generatePDFUrl = () => {\n    const baseUrl = getApiBaseUrl();\n    return `${baseUrl}/protocols/${protocolType}/${protocolId}/pdf`;\n  };\n\n  // Download URL - pou≈æij existuj√∫ce PDF URL ak existuje\n  const getDownloadUrl = () => {\n    // Ak m√°me pdfUrl z protokolu, pou≈æij ho\n    if (protocolData?.pdfUrl) {\n      return protocolData.pdfUrl;\n    }\n\n    // Fallback na generovanie\n    const baseUrl = getApiBaseUrl();\n    return `${baseUrl}/protocols/${protocolType}/${protocolId}/download`;\n  };\n\n  // Naƒç√≠tanie PDF\n  const handleLoadPDF = async () => {\n    await loadProtocolData();\n  };\n\n  // Stiahnutie PDF\n  const handleDownload = () => {\n    const downloadUrl = getDownloadUrl();\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = `${protocolType}_protocol_${protocolId.slice(-8)}.pdf`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Otvorenie v novom okne\n  const handleOpenInNewWindow = () => {\n    const url = pdfUrl || generatePDFUrl();\n    window.open(url, '_blank');\n  };\n\n  // Automatick√© naƒç√≠tanie PDF pri otvoren√≠\n  React.useEffect(() => {\n    if (open && !pdfUrl) {\n      handleLoadPDF();\n    }\n  }, [open]);\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      maxWidth=\"lg\"\n      fullWidth\n      PaperProps={{\n        sx: {\n          height: '90vh',\n          maxHeight: '90vh',\n        },\n      }}\n    >\n      <DialogTitle\n        sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          backgroundColor: 'primary.main',\n          color: 'white',\n        }}\n      >\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <PDFIcon />\n          <Typography variant=\"h6\">\n            {title} - {protocolType === 'handover' ? 'Prevzatie' : 'Vr√°tenie'}{' '}\n            vozidla\n          </Typography>\n        </Box>\n        <IconButton onClick={onClose} sx={{ color: 'white' }}>\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n\n      <DialogContent sx={{ p: 0, position: 'relative' }}>\n        {loading && (\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              height: '100%',\n              flexDirection: 'column',\n              gap: 2,\n            }}\n          >\n            <CircularProgress />\n            <Typography>Naƒç√≠tavam PDF...</Typography>\n          </Box>\n        )}\n\n        {error && (\n          <Box sx={{ p: 2 }}>\n            <Alert severity=\"error\">{error}</Alert>\n          </Box>\n        )}\n\n        {pdfUrl && !loading && (\n          <iframe\n            src={pdfUrl}\n            style={{\n              width: '100%',\n              height: '100%',\n              border: 'none',\n              minHeight: '500px',\n            }}\n            title=\"PDF Viewer\"\n          />\n        )}\n      </DialogContent>\n\n      <DialogActions sx={{ p: 2, backgroundColor: 'background.default' }}>\n        <Button\n          variant=\"outlined\"\n          startIcon={<DownloadIcon />}\n          onClick={handleDownload}\n          disabled={loading}\n        >\n          Stiahnu≈• PDF\n        </Button>\n        <Button\n          variant=\"outlined\"\n          startIcon={<OpenInNewIcon />}\n          onClick={handleOpenInNewWindow}\n          disabled={loading}\n        >\n          Otvori≈• v novom okne\n        </Button>\n        <Button variant=\"contained\" onClick={onClose}>\n          Zavrie≈•\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/PWAInstallPrompt.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'StarIcon' is defined but never used.","line":9,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Snackbar' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Alert' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":8}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üì± PWA Install Prompt Component\n// Provides elegant install prompt with animations and user guidance\n\nimport {\n  Close as CloseIcon,\n  GetApp as InstallIcon,\n  PhoneIphone as PhoneIcon,\n  Computer as DesktopIcon,\n  Star as StarIcon,\n  Wifi as WifiIcon,\n  Speed as SpeedIcon,\n  NotificationsActive as NotificationIcon,\n} from '@mui/icons-material';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Typography,\n  Box,\n  IconButton,\n  Slide,\n  Paper,\n  useTheme,\n  useMediaQuery,\n  Fab,\n  Snackbar,\n  Alert,\n} from '@mui/material';\nimport type { TransitionProps } from '@mui/material/transitions';\nimport React, { useState, useEffect } from 'react';\n\nimport { usePWA } from '../../hooks/usePWA';\n\n// Slide transition for dialog\nconst Transition = React.forwardRef<\n  unknown,\n  TransitionProps & { children: React.ReactElement }\n>(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\ninterface PWAInstallPromptProps {\n  autoShow?: boolean;\n  delay?: number;\n  onInstall?: (success: boolean) => void;\n}\n\nexport const PWAInstallPrompt: React.FC<PWAInstallPromptProps> = ({\n  autoShow = true,\n  delay = 5000,\n  onInstall,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const { isInstallable, isInstalled, promptInstall } = usePWA();\n\n  const [showDialog, setShowDialog] = useState(false);\n  const [showFab, setShowFab] = useState(false);\n  const [dismissed, setDismissed] = useState(false);\n  const [installing, setInstalling] = useState(false);\n\n  // Auto-show logic\n  useEffect(() => {\n    if (!autoShow || dismissed || isInstalled || !isInstallable) {\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      setShowFab(true);\n\n      // Show dialog after additional delay on mobile\n      if (isMobile) {\n        setTimeout(() => setShowDialog(true), 3000);\n      }\n    }, delay);\n\n    return () => clearTimeout(timer);\n  }, [autoShow, delay, dismissed, isInstalled, isInstallable, isMobile]);\n\n  // Hide when installed\n  useEffect(() => {\n    if (isInstalled) {\n      setShowDialog(false);\n      setShowFab(false);\n    }\n  }, [isInstalled]);\n\n  const handleInstall = async () => {\n    if (!isInstallable) return;\n\n    setInstalling(true);\n    try {\n      const success = await promptInstall();\n\n      if (success) {\n        setShowDialog(false);\n        setShowFab(false);\n        onInstall?.(true);\n      }\n    } catch (error) {\n      console.error('Install failed:', error);\n      onInstall?.(false);\n    } finally {\n      setInstalling(false);\n    }\n  };\n\n  const handleDismiss = () => {\n    setShowDialog(false);\n    setDismissed(true);\n\n    // Keep FAB visible for later access\n    setTimeout(() => {\n      setShowFab(true);\n    }, 1000);\n  };\n\n  const handleFabClick = () => {\n    setShowDialog(true);\n  };\n\n  if (isInstalled || !isInstallable) {\n    return null;\n  }\n\n  const features = [\n    {\n      icon: <SpeedIcon color=\"primary\" />,\n      title: 'R√Ωchlej≈°ie naƒç√≠tanie',\n      description: 'Okam≈æit√© spustenie z plochy',\n    },\n    {\n      icon: <WifiIcon color=\"primary\" />,\n      title: 'Offline pr√≠stup',\n      description: 'Funguje aj bez internetu',\n    },\n    {\n      icon: <NotificationIcon color=\"primary\" />,\n      title: 'Notifik√°cie',\n      description: 'Ozn√°menia priamo na zariadenie',\n    },\n  ];\n\n  return (\n    <>\n      {/* Install Dialog */}\n      <Dialog\n        open={showDialog}\n        onClose={handleDismiss}\n        TransitionComponent={Transition}\n        maxWidth=\"sm\"\n        fullWidth\n        PaperProps={{\n          sx: {\n            borderRadius: 3,\n            backgroundImage: `linear-gradient(135deg, ${theme.palette.primary.light}15 0%, ${theme.palette.secondary.light}15 100%)`,\n          },\n        }}\n      >\n        <DialogTitle sx={{ pb: 1 }}>\n          <Box\n            display=\"flex\"\n            alignItems=\"center\"\n            justifyContent=\"space-between\"\n          >\n            <Box display=\"flex\" alignItems=\"center\" gap={1}>\n              {isMobile ? (\n                <PhoneIcon color=\"primary\" />\n              ) : (\n                <DesktopIcon color=\"primary\" />\n              )}\n              <Typography variant=\"h6\" component=\"div\">\n                Nain≈°talova≈• BlackRent\n              </Typography>\n            </Box>\n            <IconButton onClick={handleDismiss} size=\"small\">\n              <CloseIcon />\n            </IconButton>\n          </Box>\n        </DialogTitle>\n\n        <DialogContent>\n          <Box textAlign=\"center\" mb={3}>\n            <Box\n              sx={{\n                width: 80,\n                height: 80,\n                margin: '0 auto 16px',\n                borderRadius: 2,\n                background: `linear-gradient(135deg, ${theme.palette.primary.main}, ${theme.palette.secondary.main})`,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                fontSize: '2rem',\n                color: 'white',\n                animation: 'pulse 2s infinite',\n              }}\n            >\n              üöó\n            </Box>\n\n            <Typography variant=\"h6\" gutterBottom>\n              Z√≠skajte najlep≈°√≠ z√°≈æitok\n            </Typography>\n\n            <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n              Nain≈°talujte si BlackRent ako aplik√°ciu pre{' '}\n              {isMobile ? 'mobiln√© zariadenie' : 'poƒç√≠taƒç'} a u≈æ√≠vajte si v≈°etky\n              v√Ωhody.\n            </Typography>\n          </Box>\n\n          <Box sx={{ mb: 2 }}>\n            {features.map((feature, index) => (\n              <Box\n                key={index}\n                display=\"flex\"\n                alignItems=\"center\"\n                gap={2}\n                py={1}\n                sx={{\n                  '&:not(:last-child)': {\n                    borderBottom: `1px solid ${theme.palette.divider}`,\n                  },\n                }}\n              >\n                <Box\n                  sx={{\n                    width: 40,\n                    height: 40,\n                    borderRadius: '50%',\n                    background: `${theme.palette.primary.main}15`,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                >\n                  {feature.icon}\n                </Box>\n                <Box flex={1}>\n                  <Typography variant=\"subtitle2\" fontWeight={600}>\n                    {feature.title}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    {feature.description}\n                  </Typography>\n                </Box>\n              </Box>\n            ))}\n          </Box>\n\n          {isMobile && (\n            <Paper\n              sx={{\n                p: 2,\n                background: theme.palette.info.light + '20',\n                border: `1px solid ${theme.palette.info.light}`,\n              }}\n            >\n              <Typography variant=\"body2\" color=\"info.dark\" textAlign=\"center\">\n                üí° <strong>Tip:</strong> Po in≈°tal√°cii n√°jdete BlackRent na\n                ploche a v zozname aplik√°ci√≠\n              </Typography>\n            </Paper>\n          )}\n        </DialogContent>\n\n        <DialogActions sx={{ p: 3, pt: 1 }}>\n          <Button onClick={handleDismiss} color=\"inherit\" sx={{ mr: 1 }}>\n            Nesk√¥r\n          </Button>\n          <Button\n            onClick={handleInstall}\n            variant=\"contained\"\n            size=\"large\"\n            disabled={installing}\n            startIcon={installing ? null : <InstallIcon />}\n            sx={{\n              borderRadius: 2,\n              textTransform: 'none',\n              fontWeight: 600,\n              px: 3,\n            }}\n          >\n            {installing ? 'In≈°talujem...' : 'Nain≈°talova≈•'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Floating Action Button */}\n      {showFab && (\n        <Fab\n          color=\"primary\"\n          onClick={handleFabClick}\n          sx={{\n            position: 'fixed',\n            bottom: 20,\n            right: 20,\n            zIndex: 1000,\n            animation: 'bounce 2s infinite',\n            '&:hover': {\n              transform: 'scale(1.1)',\n            },\n          }}\n          aria-label=\"Nain≈°talova≈• aplik√°ciu\"\n        >\n          <InstallIcon />\n        </Fab>\n      )}\n\n      {/* Global Styles for Animations */}\n      <style>{`\n        @keyframes pulse {\n          0% { transform: scale(1); }\n          50% { transform: scale(1.05); }\n          100% { transform: scale(1); }\n        }\n        \n        @keyframes bounce {\n          0%, 20%, 53%, 80%, 100% { transform: translateY(0); }\n          40%, 43% { transform: translateY(-15px); }\n          70% { transform: translateY(-5px); }\n          90% { transform: translateY(-2px); }\n        }\n      `}</style>\n    </>\n  );\n};\n\n// Simple Install Button Component\ninterface PWAInstallButtonProps {\n  variant?: 'contained' | 'outlined' | 'text';\n  size?: 'small' | 'medium' | 'large';\n  fullWidth?: boolean;\n  children?: React.ReactNode;\n}\n\nexport const PWAInstallButton: React.FC<PWAInstallButtonProps> = ({\n  variant = 'outlined',\n  size = 'medium',\n  fullWidth = false,\n  children,\n}) => {\n  const { isInstallable, isInstalled, promptInstall } = usePWA();\n  const [installing, setInstalling] = useState(false);\n\n  const handleInstall = async () => {\n    setInstalling(true);\n    try {\n      await promptInstall();\n    } finally {\n      setInstalling(false);\n    }\n  };\n\n  if (isInstalled || !isInstallable) {\n    return null;\n  }\n\n  return (\n    <Button\n      variant={variant}\n      size={size}\n      fullWidth={fullWidth}\n      onClick={handleInstall}\n      disabled={installing}\n      startIcon={<InstallIcon />}\n      sx={{ textTransform: 'none' }}\n    >\n      {children || (installing ? 'In≈°talujem...' : 'Nain≈°talova≈• aplik√°ciu')}\n    </Button>\n  );\n};\n\nexport default PWAInstallPrompt;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/PWAStatus.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MobileIcon' is defined but never used.","line":14,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DesktopIcon' is defined but never used.","line":15,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'StarIcon' is defined but never used.","line":16,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FormControlLabel' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used.","line":71,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":17}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üìä PWA Status Component\n// Shows PWA state, offline status, and management options\n\nimport {\n  Wifi as OnlineIcon,\n  WifiOff as OfflineIcon,\n  CloudDone as InstalledIcon,\n  GetApp as InstallIcon,\n  Update as UpdateIcon,\n  Settings as SettingsIcon,\n  Info as InfoIcon,\n  ClearAll as ClearCacheIcon,\n  Refresh as RefreshIcon,\n  PhoneIphone as MobileIcon,\n  Computer as DesktopIcon,\n  Star as StarIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Chip,\n  IconButton,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n  Divider,\n  Switch,\n  FormControlLabel,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Alert,\n  Tooltip,\n  Badge,\n} from '@mui/material';\nimport React, { useState } from 'react';\n\nimport { useNetworkStatus } from '../../hooks/useNetworkStatus';\nimport { usePWA } from '../../hooks/usePWA';\n\ninterface PWAStatusProps {\n  showDetailed?: boolean;\n  position?: 'fixed' | 'relative';\n}\n\nexport const PWAStatus: React.FC<PWAStatusProps> = ({\n  showDetailed = false,\n  position = 'relative',\n}) => {\n  const {\n    isInstalled,\n    isInstallable,\n    isOffline,\n    isUpdateAvailable,\n    promptInstall,\n    updateServiceWorker,\n    clearCache,\n    checkForUpdates,\n    getVersion,\n  } = usePWA();\n\n  const { networkQuality } = useNetworkStatus();\n  const isSlowConnection = networkQuality === 'slow';\n\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [showDialog, setShowDialog] = useState(false);\n  const [version, setVersion] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n\n  const handleMenuClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleShowInfo = async () => {\n    handleMenuClose();\n    setLoading(true);\n    try {\n      const versionInfo = await getVersion();\n      setVersion(versionInfo);\n      setShowDialog(true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInstall = async () => {\n    handleMenuClose();\n    setLoading(true);\n    try {\n      await promptInstall();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdate = async () => {\n    handleMenuClose();\n    setLoading(true);\n    try {\n      await updateServiceWorker();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClearCache = async () => {\n    handleMenuClose();\n    setLoading(true);\n    try {\n      await clearCache();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCheckUpdates = async () => {\n    handleMenuClose();\n    setLoading(true);\n    try {\n      await checkForUpdates();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Get status color and icon\n  const getStatusInfo = () => {\n    if (isOffline) {\n      return {\n        color: 'error' as const,\n        icon: <OfflineIcon fontSize=\"small\" />,\n        label: 'Offline',\n        description: 'Bez internetov√©ho pripojenia',\n      };\n    }\n\n    if (isInstalled) {\n      return {\n        color: 'success' as const,\n        icon: <InstalledIcon fontSize=\"small\" />,\n        label: 'Nain≈°talovan√©',\n        description: 'Aplik√°cia je nain≈°talovan√°',\n      };\n    }\n\n    if (isInstallable) {\n      return {\n        color: 'primary' as const,\n        icon: <InstallIcon fontSize=\"small\" />,\n        label: 'M√¥≈æe sa nain≈°talova≈•',\n        description: 'Kliknite pre in≈°tal√°ciu',\n      };\n    }\n\n    return {\n      color: 'default' as const,\n      icon: <OnlineIcon fontSize=\"small\" />,\n      label: 'Online',\n      description: '≈†tandardn√Ω web prehliadaƒç',\n    };\n  };\n\n  const statusInfo = getStatusInfo();\n\n  // Simple chip version\n  if (!showDetailed) {\n    return (\n      <Box\n        sx={\n          position === 'fixed'\n            ? {\n                position: 'fixed',\n                top: 16,\n                right: 80, // Moved left to avoid profile overlap\n                zIndex: 1300,\n                '@media (max-width: 600px)': {\n                  right: 16, // On mobile, move closer to edge\n                  top: 80, // Move down to avoid mobile header\n                },\n              }\n            : {}\n        }\n      >\n        <Tooltip title={statusInfo.description}>\n          <Badge\n            variant=\"dot\"\n            color={isUpdateAvailable ? 'error' : 'default'}\n            invisible={!isUpdateAvailable}\n          >\n            <Chip\n              icon={statusInfo.icon}\n              label={statusInfo.label}\n              color={statusInfo.color}\n              size=\"small\"\n              onClick={isInstallable ? handleInstall : handleMenuClick}\n              clickable\n              sx={{\n                fontWeight: 500,\n                '& .MuiChip-icon': {\n                  marginLeft: 1,\n                },\n                '@media (max-width: 600px)': {\n                  fontSize: '0.75rem', // Smaller on mobile\n                  height: 28,\n                },\n              }}\n            />\n          </Badge>\n        </Tooltip>\n      </Box>\n    );\n  }\n\n  // Detailed version\n  return (\n    <Box>\n      <Box display=\"flex\" alignItems=\"center\" gap={2} flexWrap=\"wrap\">\n        {/* Connection Status */}\n        <Chip\n          icon={isOffline ? <OfflineIcon /> : <OnlineIcon />}\n          label={isOffline ? 'Offline' : `Online (${networkQuality})`}\n          color={isOffline ? 'error' : isSlowConnection ? 'warning' : 'success'}\n          variant=\"outlined\"\n        />\n\n        {/* PWA Status */}\n        <Chip\n          icon={statusInfo.icon}\n          label={statusInfo.label}\n          color={statusInfo.color}\n          onClick={isInstallable ? handleInstall : handleMenuClick}\n          clickable={isInstallable}\n        />\n\n        {/* Update Available */}\n        {isUpdateAvailable && (\n          <Chip\n            icon={<UpdateIcon />}\n            label=\"Update dostupn√Ω\"\n            color=\"info\"\n            onClick={handleUpdate}\n            clickable\n          />\n        )}\n\n        {/* Settings Menu */}\n        <IconButton onClick={handleMenuClick} size=\"small\">\n          <SettingsIcon />\n        </IconButton>\n      </Box>\n\n      {/* Context Menu */}\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleMenuClose}\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n      >\n        {isInstallable && (\n          <MenuItem onClick={handleInstall}>\n            <ListItemIcon>\n              <InstallIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText primary=\"Nain≈°talova≈• aplik√°ciu\" />\n          </MenuItem>\n        )}\n\n        {isUpdateAvailable && (\n          <MenuItem onClick={handleUpdate}>\n            <ListItemIcon>\n              <UpdateIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText primary=\"Aktualizova≈• aplik√°ciu\" />\n          </MenuItem>\n        )}\n\n        <MenuItem onClick={handleCheckUpdates}>\n          <ListItemIcon>\n            <RefreshIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText primary=\"Skontrolova≈• aktualiz√°cie\" />\n        </MenuItem>\n\n        <Divider />\n\n        <MenuItem onClick={handleClearCache}>\n          <ListItemIcon>\n            <ClearCacheIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText primary=\"Vymaza≈• cache\" />\n        </MenuItem>\n\n        <MenuItem onClick={handleShowInfo}>\n          <ListItemIcon>\n            <InfoIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText primary=\"Inform√°cie o aplik√°cii\" />\n        </MenuItem>\n      </Menu>\n\n      {/* Info Dialog */}\n      <Dialog\n        open={showDialog}\n        onClose={() => setShowDialog(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n            <InfoIcon color=\"primary\" />\n            Inform√°cie o BlackRent PWA\n          </Box>\n        </DialogTitle>\n\n        <DialogContent>\n          <Box sx={{ mb: 3 }}>\n            <Alert severity=\"info\" sx={{ mb: 2 }}>\n              BlackRent je Progressive Web App (PWA) s pokroƒçil√Ωmi funkciami\n            </Alert>\n\n            <Box sx={{ mb: 2 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Status aplik√°cie:\n              </Typography>\n              <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                {statusInfo.icon}\n                <Typography variant=\"body2\">\n                  {statusInfo.description}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Box sx={{ mb: 2 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Sie≈•ov√© pripojenie:\n              </Typography>\n              <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                {isOffline ? (\n                  <OfflineIcon color=\"error\" />\n                ) : (\n                  <OnlineIcon color=\"success\" />\n                )}\n                <Typography variant=\"body2\">\n                  {isOffline\n                    ? 'Offline re≈æim'\n                    : `Online - kvalita: ${networkQuality}`}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Box sx={{ mb: 2 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Verzia:\n              </Typography>\n              <Typography variant=\"body2\" fontFamily=\"monospace\">\n                {version || 'Naƒç√≠tavam...'}\n              </Typography>\n            </Box>\n\n            <Box sx={{ mb: 2 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Funkcie:\n              </Typography>\n              <Box sx={{ pl: 1 }}>\n                <Typography variant=\"body2\" sx={{ mb: 0.5 }}>\n                  ‚úÖ Offline podpora\n                </Typography>\n                <Typography variant=\"body2\" sx={{ mb: 0.5 }}>\n                  ‚úÖ Automatick√© cache\n                </Typography>\n                <Typography variant=\"body2\" sx={{ mb: 0.5 }}>\n                  ‚úÖ Background sync\n                </Typography>\n                <Typography variant=\"body2\" sx={{ mb: 0.5 }}>\n                  ‚úÖ R√Ωchle naƒç√≠tanie\n                </Typography>\n                {isInstalled && (\n                  <Typography variant=\"body2\" sx={{ mb: 0.5 }}>\n                    ‚úÖ Standalone re≈æim\n                  </Typography>\n                )}\n              </Box>\n            </Box>\n\n            {isInstalled && (\n              <Alert severity=\"success\">\n                üéâ Aplik√°cia je √∫spe≈°ne nain≈°talovan√° a be≈æ√≠ v standalone\n                re≈æime!\n              </Alert>\n            )}\n\n            {isInstallable && (\n              <Alert severity=\"info\">\n                üí° M√¥≈æete si nain≈°talova≈• aplik√°ciu pre lep≈°√≠ z√°≈æitok\n              </Alert>\n            )}\n          </Box>\n        </DialogContent>\n\n        <DialogActions>\n          <Button onClick={() => setShowDialog(false)}>Zavrie≈•</Button>\n          {isInstallable && (\n            <Button\n              variant=\"contained\"\n              onClick={handleInstall}\n              startIcon={<InstallIcon />}\n            >\n              Nain≈°talova≈•\n            </Button>\n          )}\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default PWAStatus;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/PerformanceOptimizedList.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1456,1459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1456,1459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isMobile' is assigned a value but never used.","line":67,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":209,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6048,6051],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6048,6051],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ‚ö° Performance Optimized List Component\n// Demonstrates all performance optimization techniques\n\nimport {\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  Visibility as ViewIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Grid,\n  useTheme,\n  useMediaQuery,\n  IconButton,\n  Tooltip,\n  Chip,\n} from '@mui/material';\nimport React, { memo, useMemo, useCallback, useState, useEffect } from 'react';\n\n// Import our performance optimization tools\nimport {\n  usePerformanceMonitor,\n  useVirtualScrolling,\n  useImagePreloader,\n  useThrottledCallback,\n  useShallowMemo,\n} from '../../hooks/usePerformanceOptimization';\nimport { createLazyComponentWithLoader } from '../../utils/lazyComponents';\n\nimport { OptimizedImage } from './OptimizedImage';\nimport { SkeletonLoader } from './SkeletonLoader';\n\n// Lazy load heavy components\nconst EditDialog = createLazyComponentWithLoader(\n  () => import('./LazyEditDialog'), // This would be a heavy edit dialog\n  <SkeletonLoader variant=\"form\" />\n);\n\nconst DetailView = createLazyComponentWithLoader(\n  () => import('./LazyDetailView'), // This would be a detailed view\n  <SkeletonLoader variant=\"card\" count={1} />\n);\n\n// Memoized item component with shallow comparison\ninterface ListItemProps {\n  item: {\n    id: string;\n    title: string;\n    subtitle?: string;\n    image?: string;\n    status: 'active' | 'inactive' | 'pending';\n    category: string;\n    metadata?: Record<string, any>;\n  };\n  onEdit: (id: string) => void;\n  onDelete: (id: string) => void;\n  onView: (id: string) => void;\n  index: number;\n}\n\nconst OptimizedListItem = memo<ListItemProps>(\n  ({ item, onEdit, onDelete, onView, index }) => {\n    const theme = useTheme();\n    const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n    const { getStats } = usePerformanceMonitor(`ListItem-${item.id}`);\n\n    // Memoize style calculations\n    const itemStyles = useShallowMemo(\n      () => ({\n        card: {\n          height: '100%',\n          transition: 'all 0.2s ease',\n          '&:hover': {\n            transform: 'translateY(-2px)',\n            boxShadow: theme.customShadows?.lg || theme.shadows[6],\n          },\n        },\n        statusChip: {\n          backgroundColor:\n            item.status === 'active'\n              ? theme.palette.success.light\n              : item.status === 'pending'\n                ? theme.palette.warning.light\n                : theme.palette.error.light,\n        },\n      }),\n      [item.status, theme]\n    );\n\n    // Throttled event handlers\n    const handleEdit = useThrottledCallback(() => {\n      onEdit(item.id);\n    }, 300);\n\n    const handleDelete = useThrottledCallback(() => {\n      onDelete(item.id);\n    }, 300);\n\n    const handleView = useThrottledCallback(() => {\n      onView(item.id);\n    }, 300);\n\n    // Performance logging in development\n    useEffect(() => {\n      if (process.env.NODE_ENV === 'development') {\n        const stats = getStats();\n        if (stats.maxRenderTime > 16) {\n          console.warn(`Slow list item render: ${item.id}`, stats);\n        }\n      }\n    }, [item.id, getStats]);\n\n    return (\n      <Grid item xs={12} sm={6} md={4} lg={3}>\n        <Card sx={itemStyles.card}>\n          <CardContent>\n            {/* Optimized image with lazy loading */}\n            {item.image && (\n              <OptimizedImage\n                src={item.image}\n                alt={item.title}\n                width=\"100%\"\n                height={200}\n                aspectRatio={16 / 9}\n                placeholder=\"skeleton\"\n                lazy={index > 6} // First 6 images load immediately\n                priority={index < 3} // First 3 are high priority\n              />\n            )}\n\n            {/* Content */}\n            <Box sx={{ mt: item.image ? 2 : 0 }}>\n              <Typography variant=\"h6\" noWrap>\n                {item.title}\n              </Typography>\n\n              {item.subtitle && (\n                <Typography variant=\"body2\" color=\"text.secondary\" noWrap>\n                  {item.subtitle}\n                </Typography>\n              )}\n\n              {/* Status and category */}\n              <Box\n                sx={{ mt: 1, display: 'flex', gap: 1, alignItems: 'center' }}\n              >\n                <Chip\n                  label={item.status}\n                  size=\"small\"\n                  sx={itemStyles.statusChip}\n                />\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {item.category}\n                </Typography>\n              </Box>\n\n              {/* Action buttons */}\n              <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>\n                <Tooltip title=\"Zobrazi≈•\">\n                  <IconButton size=\"small\" onClick={handleView}>\n                    <ViewIcon />\n                  </IconButton>\n                </Tooltip>\n\n                <Tooltip title=\"Upravi≈•\">\n                  <IconButton size=\"small\" onClick={handleEdit}>\n                    <EditIcon />\n                  </IconButton>\n                </Tooltip>\n\n                <Tooltip title=\"Odstr√°ni≈•\">\n                  <IconButton size=\"small\" onClick={handleDelete}>\n                    <DeleteIcon />\n                  </IconButton>\n                </Tooltip>\n              </Box>\n            </Box>\n          </CardContent>\n        </Card>\n      </Grid>\n    );\n  },\n  (prevProps, nextProps) => {\n    // Custom comparison function for better memoization\n    return (\n      prevProps.item.id === nextProps.item.id &&\n      prevProps.item.title === nextProps.item.title &&\n      prevProps.item.status === nextProps.item.status &&\n      prevProps.item.category === nextProps.item.category &&\n      prevProps.index === nextProps.index\n    );\n  }\n);\n\nOptimizedListItem.displayName = 'OptimizedListItem';\n\n// Main list component\ninterface PerformanceOptimizedListProps {\n  items: Array<{\n    id: string;\n    title: string;\n    subtitle?: string;\n    image?: string;\n    status: 'active' | 'inactive' | 'pending';\n    category: string;\n    metadata?: Record<string, any>;\n  }>;\n  onEdit?: (id: string) => void;\n  onDelete?: (id: string) => void;\n  onView?: (id: string) => void;\n  enableVirtualScrolling?: boolean;\n  containerHeight?: number;\n  itemHeight?: number;\n}\n\nexport const PerformanceOptimizedList: React.FC<\n  PerformanceOptimizedListProps\n> = ({\n  items,\n  onEdit = () => {},\n  onDelete = () => {},\n  onView = () => {},\n  enableVirtualScrolling = false,\n  containerHeight = 800,\n  itemHeight = 300,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const { getStats } = usePerformanceMonitor('PerformanceOptimizedList');\n\n  // State for lazy components\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [detailViewOpen, setDetailViewOpen] = useState(false);\n  const [selectedItemId, setSelectedItemId] = useState<string>('');\n\n  // Preload images for visible items\n  const { preloadImages, isLoading: imagesLoading } = useImagePreloader();\n\n  // Virtual scrolling for large lists\n  const { visibleItems, totalHeight, offsetY, handleScroll, visibleRange } =\n    useVirtualScrolling(items, itemHeight, containerHeight);\n\n  // Memoize filtered and sorted items\n  const processedItems = useMemo(() => {\n    if (enableVirtualScrolling) {\n      return visibleItems.map((item, index) => ({\n        ...item,\n        originalIndex: visibleRange.startIndex + index,\n      }));\n    }\n    return items.map((item, index) => ({ ...item, originalIndex: index }));\n  }, [items, visibleItems, visibleRange, enableVirtualScrolling]);\n\n  // Preload images when component mounts\n  useEffect(() => {\n    const imageSources = items\n      .filter(item => item.image)\n      .map(item => item.image!)\n      .slice(0, 10); // Preload first 10 images\n\n    if (imageSources.length > 0) {\n      preloadImages(imageSources);\n    }\n  }, [items, preloadImages]);\n\n  // Optimized event handlers\n  const handleEditItem = useCallback(\n    (id: string) => {\n      setSelectedItemId(id);\n      setEditDialogOpen(true);\n      onEdit(id);\n    },\n    [onEdit]\n  );\n\n  const handleDeleteItem = useCallback(\n    (id: string) => {\n      onDelete(id);\n    },\n    [onDelete]\n  );\n\n  const handleViewItem = useCallback(\n    (id: string) => {\n      setSelectedItemId(id);\n      setDetailViewOpen(true);\n      onView(id);\n    },\n    [onView]\n  );\n\n  // Performance monitoring\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      const stats = getStats();\n      console.log('List performance stats:', {\n        ...stats,\n        itemCount: items.length,\n        virtualScrolling: enableVirtualScrolling,\n        imagesLoading: imagesLoading,\n      });\n    }\n  }, [getStats, items.length, enableVirtualScrolling, imagesLoading]);\n\n  // Render loading state\n  if (items.length === 0) {\n    return (\n      <SkeletonLoader\n        variant=\"card\"\n        count={isMobile ? 2 : 4}\n        showText={true}\n        showButtons={true}\n      />\n    );\n  }\n\n  const content = (\n    <Grid container spacing={3}>\n      {processedItems.map(item => (\n        <OptimizedListItem\n          key={item.id}\n          item={item}\n          index={item.originalIndex}\n          onEdit={handleEditItem}\n          onDelete={handleDeleteItem}\n          onView={handleViewItem}\n        />\n      ))}\n    </Grid>\n  );\n\n  return (\n    <Box>\n      {/* Virtual scrolling container */}\n      {enableVirtualScrolling ? (\n        <Box\n          sx={{\n            height: containerHeight,\n            overflow: 'auto',\n            position: 'relative',\n          }}\n          onScroll={handleScroll}\n        >\n          <Box sx={{ height: totalHeight, position: 'relative' }}>\n            <Box\n              sx={{\n                transform: `translateY(${offsetY}px)`,\n                position: 'relative',\n              }}\n            >\n              {content}\n            </Box>\n          </Box>\n        </Box>\n      ) : (\n        content\n      )}\n\n      {/* Lazy loaded dialogs */}\n      {editDialogOpen && (\n        <EditDialog\n          itemId={selectedItemId}\n          open={editDialogOpen}\n          onClose={() => setEditDialogOpen(false)}\n        />\n      )}\n\n      {detailViewOpen && (\n        <DetailView\n          itemId={selectedItemId}\n          open={detailViewOpen}\n          onClose={() => setDetailViewOpen(false)}\n        />\n      )}\n\n      {/* Performance info in development */}\n      {process.env.NODE_ENV === 'development' && (\n        <Box sx={{ mt: 2, p: 2, bgcolor: 'grey.100', borderRadius: 1 }}>\n          <Typography variant=\"caption\">\n            üîß Performance: {items.length} items, Virtual:{' '}\n            {enableVirtualScrolling ? 'ON' : 'OFF'}\n            {enableVirtualScrolling &&\n              ` (${visibleRange.startIndex}-${visibleRange.endIndex} visible)`}\n          </Typography>\n        </Box>\n      )}\n    </Box>\n  );\n};\n\nexport default PerformanceOptimizedList;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/PermissionGuard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2562,2565],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2562,2565],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Alert, Box, Typography } from '@mui/material';\nimport React from 'react';\n\nimport { usePermissions } from '../../hooks/usePermissions';\nimport type { Permission } from '../../types';\n\n// üõ°Ô∏è PERMISSION GUARD COMPONENT\ninterface PermissionGuardProps {\n  resource: Permission['resource'];\n  action: Permission['actions'][0];\n  context?: {\n    companyId?: string;\n    amount?: number;\n  };\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n  showAccessDeniedMessage?: boolean;\n}\n\nexport function PermissionGuard({\n  resource,\n  action,\n  context,\n  children,\n  fallback,\n  showAccessDeniedMessage = false,\n}: PermissionGuardProps) {\n  const permissions = usePermissions();\n  const permissionResult = permissions.hasPermission(resource, action, context);\n\n  // Ak nem√° pr√≠stup, zobraz fallback alebo nothing\n  if (!permissionResult.hasAccess) {\n    if (showAccessDeniedMessage) {\n      return (\n        <Alert severity=\"warning\" sx={{ my: 2 }}>\n          <Typography variant=\"body2\">\n            üö´ {permissionResult.reason || 'Nem√°te opr√°vnenie pre t√∫to akciu'}\n          </Typography>\n        </Alert>\n      );\n    }\n    return fallback ? <>{fallback}</> : <></>;\n  }\n\n  // Ak vy≈æaduje schv√°lenie, zobraz warning\n  if (permissionResult.requiresApproval) {\n    return (\n      <Box>\n        <Alert severity=\"info\" sx={{ mb: 2 }}>\n          <Typography variant=\"body2\">\n            ‚ö†Ô∏è {permissionResult.reason || 'T√°to akcia vy≈æaduje schv√°lenie'}\n          </Typography>\n        </Alert>\n        {children}\n      </Box>\n    );\n  }\n\n  // M√° pr√≠stup, zobraz obsah\n  return <>{children}</>;\n}\n\n// üéØ ROLE-BASED GUARD\ninterface RoleGuardProps {\n  allowedRoles: string[];\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n  showAccessDeniedMessage?: boolean;\n}\n\nexport function RoleGuard({\n  allowedRoles,\n  children,\n  fallback,\n  showAccessDeniedMessage = false,\n}: RoleGuardProps) {\n  const { currentUser } = usePermissions();\n\n  if (!currentUser || !allowedRoles.includes(currentUser.role)) {\n    if (showAccessDeniedMessage) {\n      return (\n        <Alert severity=\"warning\" sx={{ my: 2 }}>\n          <Typography variant=\"body2\">\n            üö´ T√∫to sekciu m√¥≈æu vidie≈• len: {allowedRoles.join(', ')}\n          </Typography>\n        </Alert>\n      );\n    }\n    return fallback ? <>{fallback}</> : <></>;\n  }\n\n  return <>{children}</>;\n}\n\n// üîç SIMPLE PERMISSION CHECKS\ninterface CanProps {\n  read?: Permission['resource'];\n  create?: Permission['resource'];\n  update?: Permission['resource'];\n  delete?: Permission['resource'];\n  context?: any;\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n}\n\nexport function Can({\n  read,\n  create,\n  update,\n  delete: deleteResource,\n  context,\n  children,\n  fallback,\n}: CanProps) {\n  const permissions = usePermissions();\n\n  let hasAccess = false;\n\n  if (read && permissions.canRead(read, context)) hasAccess = true;\n  if (create && permissions.canCreate(create, context)) hasAccess = true;\n  if (update && permissions.canUpdate(update, context)) hasAccess = true;\n  if (deleteResource && permissions.canDelete(deleteResource, context))\n    hasAccess = true;\n\n  return hasAccess ? <>{children}</> : fallback ? <>{fallback}</> : <></>;\n}\n\n// üè¢ COMPANY OWNER GUARD\ninterface CompanyOnlyProps {\n  resource: Permission['resource'];\n  companyId?: string;\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n}\n\nexport function CompanyOnly({\n  resource,\n  companyId,\n  children,\n  fallback,\n}: CompanyOnlyProps) {\n  const { currentUser, canRead } = usePermissions();\n\n  // Company owner m√¥≈æe vidie≈• len svoje company resources\n  if (currentUser?.role === 'company_owner') {\n    const canAccess = canRead(resource, { companyId });\n    return canAccess ? <>{children}</> : fallback ? <>{fallback}</> : <></>;\n  }\n\n  // In√© role m√¥≈æu vidie≈• v≈°etko (ak maj√∫ permission)\n  const canAccess = canRead(resource);\n  return canAccess ? <>{children}</> : fallback ? <>{fallback}</> : <></>;\n}\n\n// üî® MECHANIC ONLY GUARD\ninterface MechanicOnlyProps {\n  companyId?: string;\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n}\n\nexport function MechanicOnly({\n  companyId,\n  children,\n  fallback,\n}: MechanicOnlyProps) {\n  const { currentUser, canUpdate } = usePermissions();\n\n  // Mechanic m√¥≈æe vidie≈• len vozidl√° v firm√°ch kde m√° opr√°vnenia\n  if (currentUser?.role === 'mechanic') {\n    const canAccess = canUpdate('vehicles', { companyId });\n    return canAccess ? <>{children}</> : fallback ? <>{fallback}</> : <></>;\n  }\n\n  // In√© role m√¥≈æu vidie≈• v≈°etko (ak maj√∫ permission)\n  const canAccess = canUpdate('vehicles');\n  return canAccess ? <>{children}</> : fallback ? <>{fallback}</> : <></>;\n}\n\n// üí∞ AMOUNT LIMIT GUARD\ninterface AmountLimitProps {\n  amount: number;\n  children: React.ReactNode;\n  onApprovalRequired?: () => void;\n}\n\nexport function AmountLimitGuard({\n  amount,\n  children,\n  onApprovalRequired,\n}: AmountLimitProps) {\n  const permissions = usePermissions();\n  const permissionResult = permissions.hasPermission('pricing', 'update', {\n    amount,\n  });\n\n  if (!permissionResult.hasAccess) {\n    return (\n      <Alert severity=\"error\" sx={{ my: 2 }}>\n        <Typography variant=\"body2\">üö´ {permissionResult.reason}</Typography>\n      </Alert>\n    );\n  }\n\n  if (permissionResult.requiresApproval) {\n    return (\n      <Box>\n        <Alert\n          severity=\"warning\"\n          sx={{ mb: 2, cursor: onApprovalRequired ? 'pointer' : 'default' }}\n          onClick={onApprovalRequired}\n        >\n          <Typography variant=\"body2\">\n            ‚ö†Ô∏è {permissionResult.reason} - Kliknite pre vy≈æiadanie schv√°lenia\n          </Typography>\n        </Alert>\n        {children}\n      </Box>\n    );\n  }\n\n  return <>{children}</>;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/ProtocolGallery.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/PushNotificationManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/QuickFilters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PopularIcon' is defined but never used.","line":10,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ‚ö° QUICK FILTERS\n *\n * Reusable quick filter chips pre ƒçast√© vyhƒæad√°vania\n */\n\nimport {\n  FilterList as FilterIcon,\n  Clear as ClearIcon,\n  Star as PopularIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Chip,\n  Typography,\n  Stack,\n  useTheme,\n  useMediaQuery,\n  Tooltip,\n} from '@mui/material';\nimport React, { memo } from 'react';\n\nimport type { QuickFilter } from '../../hooks/useEnhancedSearch';\n\ninterface QuickFiltersProps {\n  filters: QuickFilter[];\n  activeFilter: string | null;\n  onFilterSelect: (filterId: string | null) => void;\n  showTitle?: boolean;\n  compact?: boolean;\n  maxVisible?: number;\n}\n\nconst QuickFilters: React.FC<QuickFiltersProps> = ({\n  filters,\n  activeFilter,\n  onFilterSelect,\n  showTitle = true,\n  compact = false,\n  maxVisible,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  if (!filters || filters.length === 0) {\n    return null;\n  }\n\n  // Limit visible filters on mobile\n  const visibleFilters =\n    maxVisible && isMobile ? filters.slice(0, maxVisible) : filters;\n\n  const handleFilterClick = (filterId: string) => {\n    if (activeFilter === filterId) {\n      onFilterSelect(null); // Deselect if already active\n    } else {\n      onFilterSelect(filterId);\n    }\n  };\n\n  return (\n    <Box sx={{ mb: compact ? 1 : 2 }}>\n      {showTitle && (\n        <Typography\n          variant={compact ? 'caption' : 'body2'}\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            mb: 1,\n            color: 'text.secondary',\n            fontWeight: 600,\n          }}\n        >\n          <FilterIcon sx={{ fontSize: 16, mr: 0.5 }} />\n          R√Ωchle filtre:\n        </Typography>\n      )}\n\n      <Stack\n        direction=\"row\"\n        spacing={1}\n        sx={{\n          flexWrap: 'wrap',\n          gap: 1,\n        }}\n      >\n        {visibleFilters.map(filter => (\n          <Tooltip\n            key={filter.id}\n            title={filter.count ? `${filter.count} v√Ωsledkov` : filter.label}\n            placement=\"top\"\n          >\n            <Chip\n              label={\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                  {filter.label}\n                  {filter.count && (\n                    <Typography\n                      variant=\"caption\"\n                      sx={{\n                        fontSize: '0.7rem',\n                        opacity: 0.8,\n                        fontWeight: 600,\n                      }}\n                    >\n                      ({filter.count})\n                    </Typography>\n                  )}\n                </Box>\n              }\n              size={compact || isMobile ? 'small' : 'medium'}\n              color={activeFilter === filter.id ? filter.color : 'default'}\n              variant={activeFilter === filter.id ? 'filled' : 'outlined'}\n              onClick={() => handleFilterClick(filter.id)}\n              onDelete={\n                activeFilter === filter.id\n                  ? () => onFilterSelect(null)\n                  : undefined\n              }\n              deleteIcon={<ClearIcon />}\n              sx={{\n                transition: 'all 0.2s ease',\n                cursor: 'pointer',\n                '&:hover': {\n                  transform: 'translateY(-1px)',\n                  boxShadow: theme.shadows[2],\n                  borderColor:\n                    activeFilter === filter.id\n                      ? theme.palette[filter.color].main\n                      : theme.palette.primary.main,\n                },\n                '&:active': {\n                  transform: 'translateY(0px)',\n                },\n                // Highlight popular filters\n                ...(filter.count &&\n                  filter.count > 10 && {\n                    position: 'relative',\n                    '&::after': {\n                      content: '\"\"',\n                      position: 'absolute',\n                      top: -2,\n                      right: -2,\n                      width: 8,\n                      height: 8,\n                      borderRadius: '50%',\n                      backgroundColor: theme.palette.warning.main,\n                      display: activeFilter !== filter.id ? 'block' : 'none',\n                    },\n                  }),\n              }}\n            />\n          </Tooltip>\n        ))}\n\n        {/* Show more indicator */}\n        {maxVisible && isMobile && filters.length > maxVisible && (\n          <Chip\n            label={`+${filters.length - maxVisible}`}\n            size=\"small\"\n            variant=\"outlined\"\n            sx={{\n              opacity: 0.6,\n              cursor: 'default',\n            }}\n          />\n        )}\n      </Stack>\n    </Box>\n  );\n};\n\n// Pre-defined quick filters pre r√¥zne entity\nexport const RENTAL_QUICK_FILTERS: QuickFilter[] = [\n  {\n    id: 'active',\n    label: 'Akt√≠vne',\n    value: 'active',\n    color: 'success',\n    icon: 'üü¢',\n  },\n  {\n    id: 'pending',\n    label: 'ƒåakaj√∫ce',\n    value: 'pending',\n    color: 'warning',\n    icon: '‚è≥',\n  },\n  {\n    id: 'overdue',\n    label: 'Preterminovan√©',\n    value: 'overdue',\n    color: 'error',\n    icon: '‚ö†Ô∏è',\n  },\n  {\n    id: 'this_month',\n    label: 'Tento mesiac',\n    value: 'this_month',\n    color: 'primary',\n    icon: 'üìÖ',\n  },\n  {\n    id: 'high_value',\n    label: 'Vysok√° suma',\n    value: 'high_value',\n    color: 'secondary',\n    icon: 'üí∞',\n  },\n];\n\nexport const VEHICLE_QUICK_FILTERS: QuickFilter[] = [\n  {\n    id: 'available',\n    label: 'Dostupn√©',\n    value: 'available',\n    color: 'success',\n    icon: '‚úÖ',\n  },\n  {\n    id: 'rented',\n    label: 'Prenajat√©',\n    value: 'rented',\n    color: 'warning',\n    icon: 'üöó',\n  },\n  {\n    id: 'maintenance',\n    label: 'Servis',\n    value: 'maintenance',\n    color: 'error',\n    icon: 'üîß',\n  },\n  {\n    id: 'premium',\n    label: 'Premium',\n    value: 'premium',\n    color: 'secondary',\n    icon: '‚≠ê',\n  },\n];\n\nexport const CUSTOMER_QUICK_FILTERS: QuickFilter[] = [\n  {\n    id: 'vip',\n    label: 'VIP',\n    value: 'vip',\n    color: 'secondary',\n    icon: 'üëë',\n  },\n  {\n    id: 'active_rentals',\n    label: 'Akt√≠vni',\n    value: 'active_rentals',\n    color: 'success',\n    icon: 'üéØ',\n  },\n  {\n    id: 'new',\n    label: 'Nov√≠',\n    value: 'new',\n    color: 'info',\n    icon: 'üÜï',\n  },\n  {\n    id: 'corporate',\n    label: 'Firemn√≠',\n    value: 'corporate',\n    color: 'primary',\n    icon: 'üè¢',\n  },\n];\n\nexport default memo(QuickFilters);\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/R2FileUpload.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showUploadedFiles' is assigned a value but never used.","line":47,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":316,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":316,"endColumn":42}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CloudUpload, Delete, Visibility } from '@mui/icons-material';\nimport { Typography, Box, CircularProgress, Alert } from '@mui/material';\nimport React, { useState, useRef } from 'react';\n\nimport { getApiBaseUrl } from '../../utils/apiUrl';\nimport { SecondaryButton, TextButton, ErrorButton } from '../ui';\n\n// Railway backend URL\n\ninterface R2FileUploadProps {\n  type: 'vehicle' | 'protocol' | 'document' | 'company-document';\n  entityId: string;\n  mediaType?: string; // pre ≈°pecializovan√© organizovanie s√∫borov\n  onUploadSuccess?: (\n    fileData:\n      | { url: string; key: string; filename: string }\n      | { url: string; key: string; filename: string }[]\n  ) => void;\n  onUploadError?: (error: string) => void;\n  acceptedTypes?: string[];\n  maxSize?: number; // v MB\n  multiple?: boolean;\n  label?: string;\n  disabled?: boolean;\n  showUploadedFiles?: boolean; // zobrazova≈• zoznam nahran√Ωch s√∫borov\n}\n\ninterface FileData {\n  url: string;\n  key: string;\n  filename: string;\n  size: number;\n  mimetype: string;\n}\n\nconst R2FileUpload: React.FC<R2FileUploadProps> = ({\n  type,\n  entityId,\n  mediaType,\n  onUploadSuccess,\n  onUploadError,\n  acceptedTypes = ['image/jpeg', 'image/png', 'image/webp', 'application/pdf'],\n  maxSize = 10, // 10MB default\n  multiple = false,\n  label = 'Nahra≈• s√∫bor',\n  disabled = false,\n  showUploadedFiles = true,\n}) => {\n  const [uploading, setUploading] = useState(false);\n  const [uploadedFiles, setUploadedFiles] = useState<FileData[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Funkcia pre kompresiu obr√°zkov\n  const compressImage = async (file: File): Promise<File> => {\n    return new Promise(resolve => {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n\n      img.onload = () => {\n        // V√Ωpoƒçet nov√Ωch rozmerov (max 1920px ≈°√≠rka)\n        const maxWidth = 1920;\n        const maxHeight = 1080;\n        let { width, height } = img;\n\n        if (width > maxWidth) {\n          height = (height * maxWidth) / width;\n          width = maxWidth;\n        }\n\n        if (height > maxHeight) {\n          width = (width * maxHeight) / height;\n          height = maxHeight;\n        }\n\n        canvas.width = width;\n        canvas.height = height;\n\n        // Kreslenie obr√°zka s nov√Ωmi rozmermi\n        ctx?.drawImage(img, 0, 0, width, height);\n\n        // Konverzia na blob s kompresiou\n        canvas.toBlob(\n          blob => {\n            if (blob) {\n              const compressedFile = new File([blob], file.name, {\n                type: 'image/jpeg',\n                lastModified: Date.now(),\n              });\n              resolve(compressedFile);\n            } else {\n              resolve(file); // Fallback na origin√°l\n            }\n          },\n          'image/jpeg',\n          0.8\n        ); // 80% kvalita\n      };\n\n      img.onerror = () => {\n        resolve(file); // Fallback na origin√°l pri chybe\n      };\n\n      img.src = URL.createObjectURL(file);\n    });\n  };\n\n  const handleFileSelect = async (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    console.log('üîç R2 FILE SELECT - Files selected:', files.length);\n\n    setError(null);\n    setUploading(true);\n\n    try {\n      const uploadPromises = Array.from(files).map(async file => {\n        console.log(\n          'üîç R2 UPLOAD START - File:',\n          file.name,\n          'Type:',\n          file.type,\n          'Size:',\n          file.size\n        );\n\n        // Valid√°cia typu s√∫boru\n        if (!acceptedTypes.includes(file.type)) {\n          throw new Error(`Nepodporovan√Ω typ s√∫boru: ${file.type}`);\n        }\n\n        // Valid√°cia veƒækosti\n        if (file.size > maxSize * 1024 * 1024) {\n          throw new Error(`S√∫bor je pr√≠li≈° veƒæk√Ω. Maximum: ${maxSize}MB`);\n        }\n\n        // Automatick√° kompresia obr√°zkov\n        let processedFile = file;\n        if (file.type.startsWith('image/')) {\n          console.log('üîç R2 COMPRESS - Compressing image...');\n          processedFile = await compressImage(file);\n          console.log('üîç R2 COMPRESS - Compressed size:', processedFile.size);\n        }\n\n        // Upload do R2\n        const formData = new FormData();\n        formData.append('file', processedFile);\n        formData.append('type', type);\n        formData.append('entityId', entityId);\n        if (mediaType) {\n          formData.append('mediaType', mediaType);\n        }\n\n        console.log(\n          'üîç R2 UPLOAD - Sending to backend:',\n          `${getApiBaseUrl()}/files/upload`\n        );\n\n        // Get auth token\n        const token =\n          localStorage.getItem('blackrent_token') ||\n          sessionStorage.getItem('blackrent_token');\n\n        const response = await fetch(`${getApiBaseUrl()}/files/upload`, {\n          method: 'POST',\n          headers: {\n            ...(token && { Authorization: `Bearer ${token}` }),\n          },\n          body: formData,\n        });\n\n        console.log('üîç R2 UPLOAD - Response status:', response.status);\n\n        const data = await response.json();\n        console.log('üîç R2 UPLOAD - Response data:', data);\n\n        if (!response.ok || !data.success) {\n          throw new Error(data.error || 'Upload zlyhal');\n        }\n\n        return data;\n      });\n\n      const results = await Promise.all(uploadPromises);\n      console.log('üîç R2 UPLOAD - All uploads completed:', results);\n\n      if (multiple) {\n        setUploadedFiles(prev => [...prev, ...results]);\n      } else {\n        setUploadedFiles(results);\n      }\n\n      // Callback pre rodiƒça\n      if (onUploadSuccess) {\n        if (multiple) {\n          // Pre multiple s√∫bory vr√°≈• array\n          console.log(\n            'üîç R2 CALLBACK - Calling onUploadSuccess with multiple files:',\n            results\n          );\n          onUploadSuccess(results);\n        } else {\n          // Pre single s√∫bor vr√°≈• jeden objekt\n          console.log(\n            'üîç R2 CALLBACK - Calling onUploadSuccess with single file:',\n            results[0]\n          );\n          onUploadSuccess(results[0]);\n        }\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Upload zlyhal';\n      console.error('üîç R2 UPLOAD ERROR:', errorMessage);\n      setError(errorMessage);\n      onUploadError?.(errorMessage);\n    } finally {\n      setUploading(false);\n      // Reset file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handleDeleteFile = async (fileKey: string) => {\n    try {\n      const token =\n        localStorage.getItem('blackrent_token') ||\n        sessionStorage.getItem('blackrent_token');\n\n      const response = await fetch(\n        `${getApiBaseUrl()}/files/${encodeURIComponent(fileKey)}`,\n        {\n          method: 'DELETE',\n          headers: {\n            ...(token && { Authorization: `Bearer ${token}` }),\n          },\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error('Chyba pri mazan√≠ s√∫boru');\n      }\n\n      setUploadedFiles(prev => prev.filter(file => file.key !== fileKey));\n    } catch (err) {\n      setError('Chyba pri mazan√≠ s√∫boru');\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getFileIcon = (mimetype: string) => {\n    if (mimetype.startsWith('image/')) return 'üñºÔ∏è';\n    if (mimetype === 'application/pdf') return 'üìÑ';\n    return 'üìé';\n  };\n\n  return (\n    <Box sx={{ width: '100%' }}>\n      {/* Upload Button */}\n      <Box sx={{ mb: 2 }}>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          multiple={multiple}\n          accept={acceptedTypes.join(',')}\n          onChange={handleFileSelect}\n          style={{ display: 'none' }}\n          disabled={disabled || uploading}\n        />\n        <SecondaryButton\n          startIcon={\n            uploading ? <CircularProgress size={20} /> : <CloudUpload />\n          }\n          onClick={() => fileInputRef.current?.click()}\n          disabled={disabled || uploading}\n          fullWidth\n          sx={{\n            py: 2,\n            borderStyle: 'dashed',\n            borderWidth: 2,\n            '&:hover': {\n              borderWidth: 2,\n              backgroundColor: 'rgba(25, 118, 210, 0.04)',\n            },\n          }}\n        >\n          {uploading ? 'Nahr√°vam...' : label}\n        </SecondaryButton>\n      </Box>\n\n      {/* Error Message */}\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          {error}\n        </Alert>\n      )}\n\n      {/* Uploaded Files */}\n      {uploadedFiles.length > 0 && (\n        <Box sx={{ mt: 2 }}>\n          <Typography variant=\"subtitle2\" sx={{ mb: 1, color: 'white' }}>\n            Nahran√© s√∫bory:\n          </Typography>\n          {uploadedFiles.map((file, index) => (\n            <Box\n              key={file.key}\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                p: 1,\n                mb: 1,\n                border: '1px solid rgba(255, 255, 255, 0.2)',\n                borderRadius: 1,\n                backgroundColor: 'rgba(255, 255, 255, 0.05)',\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <span>{getFileIcon(file.mimetype)}</span>\n                <Box>\n                  <Typography variant=\"body2\" sx={{ color: 'white' }}>\n                    {file.filename}\n                  </Typography>\n                  <Typography\n                    variant=\"caption\"\n                    sx={{ color: 'rgba(255, 255, 255, 0.7)' }}\n                  >\n                    {formatFileSize(file.size)}\n                  </Typography>\n                </Box>\n              </Box>\n\n              <Box sx={{ display: 'flex', gap: 1 }}>\n                <TextButton\n                  size=\"small\"\n                  startIcon={<Visibility />}\n                  onClick={() => window.open(file.url, '_blank')}\n                  sx={{ color: 'white' }}\n                >\n                  Zobrazi≈•\n                </TextButton>\n                <ErrorButton\n                  size=\"small\"\n                  startIcon={<Delete />}\n                  onClick={() => handleDeleteFile(file.key)}\n                >\n                  Zmaza≈•\n                </ErrorButton>\n              </Box>\n            </Box>\n          ))}\n        </Box>\n      )}\n\n      {/* File Type Info */}\n      <Box sx={{ mt: 1 }}>\n        <Typography\n          variant=\"caption\"\n          sx={{ color: 'rgba(255, 255, 255, 0.7)' }}\n        >\n          Podporovan√© typy:{' '}\n          {acceptedTypes\n            .map(type => {\n              if (type.startsWith('image/')) return 'Obr√°zky';\n              if (type === 'application/pdf') return 'PDF';\n              return type;\n            })\n            .join(', ')}\n        </Typography>\n        <Typography\n          variant=\"caption\"\n          sx={{ display: 'block', color: 'rgba(255, 255, 255, 0.7)' }}\n        >\n          Max veƒækos≈•: {maxSize}MB\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n\nexport default R2FileUpload;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/RealTimeNotifications.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'WarningIcon' is defined but never used.","line":13,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorIcon' is defined but never used.","line":14,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MenuItem' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Paper' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getNotificationColor' is assigned a value but never used.","line":91,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":29}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üî¥ REAL-TIME NOTIFICATIONS - BlackRent\n// Komponent pre zobrazenie WebSocket notifik√°ci√≠\n\nimport {\n  Notifications as NotificationsIcon,\n  NotificationsActive as NotificationsActiveIcon,\n  Add as AddIcon,\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  DirectionsCar as CarIcon,\n  Person as PersonIcon,\n  Info as InfoIcon,\n  Warning as WarningIcon,\n  Error as ErrorIcon,\n  Wifi as WiFiIcon,\n  WifiOff as WiFiOffIcon,\n  Clear as ClearIcon,\n  CheckCircle as CheckIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Badge,\n  IconButton,\n  Menu,\n  MenuItem,\n  Typography,\n  Paper,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Divider,\n  Button,\n  Chip,\n  Tooltip,\n  Alert,\n} from '@mui/material';\nimport { formatDistanceToNow } from 'date-fns';\nimport { sk } from 'date-fns/locale';\nimport React, { useState } from 'react';\n\nimport { useWebSocket } from '../../hooks/useWebSocket';\n\nconst RealTimeNotifications: React.FC = () => {\n  const {\n    isConnected,\n    connectedUsers,\n    notifications,\n    unreadCount,\n    markNotificationRead,\n    clearNotifications,\n  } = useWebSocket();\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleNotificationClick = (id: string) => {\n    markNotificationRead(id);\n  };\n\n  const handleClearAll = () => {\n    clearNotifications();\n    handleClose();\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'rental_created':\n        return <AddIcon color=\"success\" />;\n      case 'rental_updated':\n        return <EditIcon color=\"info\" />;\n      case 'rental_deleted':\n        return <DeleteIcon color=\"error\" />;\n      case 'vehicle_updated':\n        return <CarIcon color=\"primary\" />;\n      case 'customer_created':\n        return <PersonIcon color=\"success\" />;\n      case 'system':\n        return <InfoIcon color=\"warning\" />;\n      default:\n        return <NotificationsIcon />;\n    }\n  };\n\n  const getNotificationColor = (type: string) => {\n    switch (type) {\n      case 'rental_created':\n      case 'customer_created':\n        return 'success';\n      case 'rental_updated':\n      case 'vehicle_updated':\n        return 'info';\n      case 'rental_deleted':\n        return 'error';\n      case 'system':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n\n  return (\n    <Box>\n      {/* Connection Status Indicator */}\n      <Tooltip\n        title={\n          isConnected\n            ? `Pripojen√© - ${connectedUsers.count} u≈æ√≠vateƒæov online`\n            : 'Odpojen√© od real-time updates'\n        }\n      >\n        <Chip\n          icon={isConnected ? <WiFiIcon /> : <WiFiOffIcon />}\n          label={isConnected ? 'Live' : 'Offline'}\n          color={isConnected ? 'success' : 'error'}\n          size=\"small\"\n          variant=\"outlined\"\n          sx={{ mr: 1 }}\n        />\n      </Tooltip>\n\n      {/* Notifications Button */}\n      <Tooltip title=\"Real-time notifik√°cie\">\n        <IconButton\n          onClick={handleClick}\n          color={unreadCount > 0 ? 'primary' : 'default'}\n          size=\"large\"\n        >\n          <Badge badgeContent={unreadCount} color=\"error\">\n            {unreadCount > 0 ? (\n              <NotificationsActiveIcon />\n            ) : (\n              <NotificationsIcon />\n            )}\n          </Badge>\n        </IconButton>\n      </Tooltip>\n\n      {/* Notifications Menu */}\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n        PaperProps={{\n          sx: {\n            width: 400,\n            maxHeight: 600,\n          },\n        }}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n      >\n        {/* Header */}\n        <Box sx={{ p: 2, borderBottom: 1, borderColor: 'divider' }}>\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n            }}\n          >\n            <Typography variant=\"h6\" component=\"div\">\n              üî¥ Real-time Updates\n            </Typography>\n            {notifications.length > 0 && (\n              <Button\n                size=\"small\"\n                startIcon={<ClearIcon />}\n                onClick={handleClearAll}\n              >\n                Vymaza≈• v≈°etko\n              </Button>\n            )}\n          </Box>\n\n          {/* Status */}\n          <Box sx={{ display: 'flex', alignItems: 'center', mt: 1, gap: 1 }}>\n            <Chip\n              icon={isConnected ? <WiFiIcon /> : <WiFiOffIcon />}\n              label={isConnected ? `${connectedUsers.count} online` : 'Offline'}\n              color={isConnected ? 'success' : 'error'}\n              size=\"small\"\n            />\n            {unreadCount > 0 && (\n              <Chip\n                label={`${unreadCount} nov√Ωch`}\n                color=\"primary\"\n                size=\"small\"\n              />\n            )}\n          </Box>\n        </Box>\n\n        {/* Connection Warning */}\n        {!isConnected && (\n          <Alert severity=\"warning\" sx={{ m: 1 }}>\n            Real-time updates s√∫ moment√°lne nedostupn√©. Obnovte str√°nku pre\n            op√§tovn√© pripojenie.\n          </Alert>\n        )}\n\n        {/* Notifications List */}\n        <Box sx={{ maxHeight: 400, overflow: 'auto' }}>\n          {notifications.length === 0 ? (\n            <Box sx={{ p: 3, textAlign: 'center' }}>\n              <NotificationsIcon\n                sx={{ fontSize: 48, color: 'text.secondary', mb: 1 }}\n              />\n              <Typography color=\"text.secondary\">≈Ωiadne notifik√°cie</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Real-time updates sa zobrazia tu\n              </Typography>\n            </Box>\n          ) : (\n            <List sx={{ p: 0 }}>\n              {notifications.map((notification, index) => (\n                <React.Fragment key={notification.id}>\n                  <ListItem\n                    sx={{\n                      bgcolor: notification.read\n                        ? 'transparent'\n                        : 'action.hover',\n                      cursor: 'pointer',\n                      '&:hover': {\n                        bgcolor: 'action.selected',\n                      },\n                    }}\n                    onClick={() => handleNotificationClick(notification.id)}\n                  >\n                    <ListItemIcon>\n                      {getNotificationIcon(notification.type)}\n                    </ListItemIcon>\n                    <ListItemText\n                      primary={\n                        <Box\n                          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                        >\n                          <Typography variant=\"subtitle2\" component=\"span\">\n                            {notification.title}\n                          </Typography>\n                          {!notification.read && (\n                            <Chip\n                              label=\"NOV√â\"\n                              color=\"primary\"\n                              size=\"small\"\n                              sx={{ height: 20, fontSize: '0.7rem' }}\n                            />\n                          )}\n                        </Box>\n                      }\n                      secondary={\n                        <Box>\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            {notification.message}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {formatDistanceToNow(\n                              new Date(notification.timestamp),\n                              {\n                                addSuffix: true,\n                                locale: sk,\n                              }\n                            )}\n                          </Typography>\n                        </Box>\n                      }\n                    />\n                    {!notification.read && (\n                      <Box sx={{ ml: 1 }}>\n                        <CheckIcon color=\"primary\" fontSize=\"small\" />\n                      </Box>\n                    )}\n                  </ListItem>\n                  {index < notifications.length - 1 && <Divider />}\n                </React.Fragment>\n              ))}\n            </List>\n          )}\n        </Box>\n\n        {/* Footer */}\n        {notifications.length > 0 && (\n          <Box\n            sx={{\n              p: 1,\n              borderTop: 1,\n              borderColor: 'divider',\n              textAlign: 'center',\n            }}\n          >\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              Zobrazen√Ωch {Math.min(notifications.length, 50)} zo v≈°etk√Ωch\n              notifik√°ci√≠\n            </Typography>\n          </Box>\n        )}\n      </Menu>\n    </Box>\n  );\n};\n\nexport default RealTimeNotifications;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/ResponsiveTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/SerialPhotoCapture.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/SignaturePad.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/SkeletonLoader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/SuccessToast.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":92,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1977,1980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1977,1980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üéâ SUCCESS TOAST COMPONENT\n *\n * Pleasant success notifications:\n * - Protocol status loaded\n * - Data synced\n * - Actions completed\n * - Smooth animations\n */\n\nimport {\n  Close as CloseIcon,\n  CheckCircle as CheckCircleIcon,\n  Speed as SpeedIcon,\n  CloudDone as CloudDoneIcon,\n  Refresh as RefreshIcon,\n} from '@mui/icons-material';\nimport {\n  Alert,\n  Snackbar,\n  Box,\n  Typography,\n  IconButton,\n  Chip,\n  Fade,\n  Slide,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n\ninterface SuccessToastProps {\n  message: string | null;\n  onClose: () => void;\n  icon?: 'check' | 'speed' | 'cloud' | 'refresh';\n  autoHideDuration?: number;\n  showStats?: {\n    count?: number;\n    duration?: number;\n  };\n}\n\nexport const SuccessToast: React.FC<SuccessToastProps> = ({\n  message,\n  onClose,\n  icon = 'check',\n  autoHideDuration = 4000,\n  showStats,\n}) => {\n  const [open, setOpen] = useState(false);\n\n  // Show toast when message appears\n  useEffect(() => {\n    if (message) {\n      setOpen(true);\n    }\n  }, [message]);\n\n  // Handle close\n  const handleClose = (\n    event?: React.SyntheticEvent | Event,\n    reason?: string\n  ) => {\n    if (reason === 'clickaway') return;\n    setOpen(false);\n    setTimeout(onClose, 300); // Wait for animation\n  };\n\n  // Get icon based on type\n  const getIcon = () => {\n    const iconProps = { fontSize: 'small' as const };\n\n    switch (icon) {\n      case 'speed':\n        return <SpeedIcon {...iconProps} />;\n      case 'cloud':\n        return <CloudDoneIcon {...iconProps} />;\n      case 'refresh':\n        return <RefreshIcon {...iconProps} />;\n      default:\n        return <CheckCircleIcon {...iconProps} />;\n    }\n  };\n\n  if (!message) return null;\n\n  return (\n    <Snackbar\n      open={open}\n      autoHideDuration={autoHideDuration}\n      onClose={handleClose}\n      anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n      TransitionComponent={Slide}\n      TransitionProps={{ direction: 'left' } as any}\n    >\n      <Alert\n        severity=\"success\"\n        variant=\"filled\"\n        onClose={handleClose}\n        icon={getIcon()}\n        sx={{\n          minWidth: 280,\n          maxWidth: 400,\n          '& .MuiAlert-message': {\n            width: '100%',\n          },\n          '& .MuiAlert-icon': {\n            animation: 'pulse 1.5s ease-in-out',\n            '@keyframes pulse': {\n              '0%': { transform: 'scale(1)' },\n              '50%': { transform: 'scale(1.1)' },\n              '100%': { transform: 'scale(1)' },\n            },\n          },\n        }}\n        action={\n          <IconButton\n            size=\"small\"\n            onClick={handleClose}\n            sx={{ color: 'inherit' }}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        }\n      >\n        <Box>\n          <Typography variant=\"body2\" fontWeight=\"medium\">\n            {message}\n          </Typography>\n\n          {/* Stats display */}\n          {showStats && (\n            <Box sx={{ mt: 1, display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n              {showStats.count !== undefined && (\n                <Fade in timeout={800}>\n                  <Chip\n                    size=\"small\"\n                    label={`${showStats.count} z√°znamov`}\n                    variant=\"outlined\"\n                    sx={{\n                      bgcolor: 'rgba(255,255,255,0.1)',\n                      color: 'inherit',\n                      borderColor: 'rgba(255,255,255,0.3)',\n                      fontSize: '0.7rem',\n                    }}\n                  />\n                </Fade>\n              )}\n\n              {showStats.duration !== undefined && (\n                <Fade in timeout={1000}>\n                  <Chip\n                    size=\"small\"\n                    label={`${showStats.duration}ms`}\n                    variant=\"outlined\"\n                    icon={<SpeedIcon fontSize=\"small\" />}\n                    sx={{\n                      bgcolor: 'rgba(255,255,255,0.1)',\n                      color: 'inherit',\n                      borderColor: 'rgba(255,255,255,0.3)',\n                      fontSize: '0.7rem',\n                    }}\n                  />\n                </Fade>\n              )}\n            </Box>\n          )}\n        </Box>\n      </Alert>\n    </Snackbar>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/UnifiedDocumentForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/common/v2/SerialPhotoCaptureV2.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/companies/CompanyDocumentManager.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DownloadIcon' is defined but never used.","line":5,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DocumentIcon' is defined but never used.","line":7,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardContent' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":10},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has a missing dependency: 'loadDocuments'. Either include it or remove the dependency array.","line":120,"column":6,"nodeType":"ArrayExpression","endLine":120,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [companyId, loadDocuments]","fix":{"range":[3145,3156],"text":"[companyId, loadDocuments]"}}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Add as AddIcon,\n  Delete as DeleteIcon,\n  Visibility as ViewIcon,\n  Download as DownloadIcon,\n  ExpandMore as ExpandMoreIcon,\n  Description as DocumentIcon,\n  Receipt as InvoiceIcon,\n  Assignment as ContractIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Grid,\n  Chip,\n  IconButton,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  Divider,\n  Alert,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n\nimport type { CompanyDocument } from '../../types';\nimport { getApiBaseUrl } from '../../utils/apiUrl';\nimport BulkDownload from '../common/BulkDownload';\nimport R2FileUpload from '../common/R2FileUpload';\n\ninterface CompanyDocumentManagerProps {\n  companyId: string | number;\n  companyName: string;\n}\n\ninterface DocumentUploadData {\n  documentType: 'contract' | 'invoice';\n  documentName: string;\n  description: string;\n  documentMonth?: number;\n  documentYear?: number;\n}\n\nexport default function CompanyDocumentManager({\n  companyId,\n  companyName,\n}: CompanyDocumentManagerProps) {\n  const [documents, setDocuments] = useState<CompanyDocument[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\n  const [uploadData, setUploadData] = useState<DocumentUploadData>({\n    documentType: 'contract',\n    documentName: '',\n    description: '',\n    documentYear: new Date().getFullYear(),\n    documentMonth: new Date().getMonth() + 1,\n  });\n  const [uploadedFiles, setUploadedFiles] = useState<\n    Array<{ url: string; key: string; filename: string }>\n  >([]);\n\n  // Naƒç√≠tanie dokumentov\n  const loadDocuments = async () => {\n    try {\n      setLoading(true);\n      const token =\n        localStorage.getItem('blackrent_token') ||\n        sessionStorage.getItem('blackrent_token');\n\n      console.log('üìÑ Loading documents for company:', companyId);\n      console.log('üìÑ Using token:', token ? 'EXISTS' : 'MISSING');\n\n      const response = await fetch(\n        `${getApiBaseUrl()}/company-documents/${companyId}`,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            ...(token && { Authorization: `Bearer ${token}` }),\n          },\n        }\n      );\n\n      console.log('üìÑ Response status:', response.status);\n\n      const result = await response.json();\n      console.log('üìÑ Response data:', result);\n      console.log('üìÑ Documents array length:', result.data?.length);\n      console.log('üìÑ First document:', result.data?.[0]);\n\n      if (result.success) {\n        setDocuments(result.data || []);\n        console.log('üìÑ Documents set to state:', result.data?.length || 0);\n      } else {\n        console.error('Error loading documents:', result.error);\n      }\n    } catch (error) {\n      console.error('Error loading company documents:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadDocuments();\n  }, [companyId]);\n\n  // Upload s√∫borov\n  const handleFileUploadSuccess = (\n    fileData:\n      | { url: string; key: string; filename: string }\n      | { url: string; key: string; filename: string }[]\n  ) => {\n    console.log('üìÑ Files uploaded successfully:', fileData);\n\n    if (Array.isArray(fileData)) {\n      setUploadedFiles(prev => [...prev, ...fileData]);\n    } else {\n      setUploadedFiles(prev => [...prev, fileData]);\n    }\n  };\n\n  // Ulo≈æenie dokumentov\n  const handleSaveDocuments = async () => {\n    if (uploadedFiles.length === 0 || !uploadData.documentName.trim()) {\n      alert('Nahrajte s√∫bory a zadajte n√°zov dokumentu');\n      return;\n    }\n\n    try {\n      const token =\n        localStorage.getItem('blackrent_token') ||\n        sessionStorage.getItem('blackrent_token');\n\n      console.log('üìÑ Saving documents metadata:', {\n        companyId,\n        documentType: uploadData.documentType,\n        documentName: uploadData.documentName,\n        fileCount: uploadedFiles.length,\n        hasToken: !!token,\n      });\n\n      // Ulo≈æ√≠me ka≈æd√Ω s√∫bor osobne\n      const savePromises = uploadedFiles.map(async (file, index) => {\n        const documentName =\n          uploadedFiles.length > 1\n            ? `${uploadData.documentName} (${index + 1})`\n            : uploadData.documentName;\n\n        const response = await fetch(\n          `${getApiBaseUrl()}/company-documents/save-metadata`,\n          {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              ...(token && { Authorization: `Bearer ${token}` }),\n            },\n            body: JSON.stringify({\n              companyId:\n                typeof companyId === 'string' ? parseInt(companyId) : companyId,\n              documentType: uploadData.documentType,\n              documentName: documentName,\n              description: uploadData.description,\n              documentMonth:\n                uploadData.documentType === 'invoice'\n                  ? uploadData.documentMonth\n                  : null,\n              documentYear:\n                uploadData.documentType === 'invoice'\n                  ? uploadData.documentYear\n                  : null,\n              filePath: file.url,\n            }),\n          }\n        );\n\n        return response.json();\n      });\n\n      const results = await Promise.all(savePromises);\n      const successfulSaves = results.filter(result => result.success);\n\n      if (successfulSaves.length === uploadedFiles.length) {\n        console.log('‚úÖ All documents saved successfully');\n        setUploadDialogOpen(false);\n        setUploadData({\n          documentType: 'contract',\n          documentName: '',\n          description: '',\n          documentYear: new Date().getFullYear(),\n          documentMonth: new Date().getMonth() + 1,\n        });\n        setUploadedFiles([]);\n        loadDocuments();\n      } else {\n        console.error('Some documents failed to save');\n        alert(\n          `Ulo≈æen√Ωch ${successfulSaves.length}/${uploadedFiles.length} s√∫borov`\n        );\n      }\n    } catch (error) {\n      console.error('Error saving document:', error);\n      alert('Chyba pri ukladan√≠ dokumentov');\n    }\n  };\n\n  // Zmazanie dokumentu\n  const handleDeleteDocument = async (documentId: string) => {\n    if (!window.confirm('Naozaj chcete vymaza≈• tento dokument?')) return;\n\n    try {\n      const token =\n        localStorage.getItem('blackrent_token') ||\n        sessionStorage.getItem('blackrent_token');\n\n      console.log('üìÑ Deleting document:', documentId);\n\n      const response = await fetch(\n        `${getApiBaseUrl()}/company-documents/${documentId}`,\n        {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            ...(token && { Authorization: `Bearer ${token}` }),\n          },\n        }\n      );\n\n      console.log('üìÑ Delete response status:', response.status);\n\n      const result = await response.json();\n\n      if (result.success) {\n        console.log('‚úÖ Document deleted successfully');\n        loadDocuments();\n      } else {\n        console.error('Error deleting document:', result.error);\n        alert(`Chyba pri mazan√≠: ${result.error}`);\n      }\n    } catch (error) {\n      console.error('Error deleting document:', error);\n      alert('Chyba pri mazan√≠ dokumentu');\n    }\n  };\n\n  // Rozdelenie dokumentov podƒæa typu\n  const contracts = documents.filter(doc => doc.documentType === 'contract');\n  const invoices = documents.filter(doc => doc.documentType === 'invoice');\n\n  // Zoskupenie fakt√∫r podƒæa rokov a mesiacov\n  const invoicesByYear = invoices.reduce(\n    (acc, invoice) => {\n      const year = invoice.documentYear || new Date().getFullYear();\n      const month = invoice.documentMonth || 1;\n\n      if (!acc[year]) acc[year] = {};\n      if (!acc[year][month]) acc[year][month] = [];\n\n      acc[year][month].push(invoice);\n      return acc;\n    },\n    {} as Record<number, Record<number, CompanyDocument[]>>\n  );\n\n  const getMonthName = (month: number) => {\n    const months = [\n      'Janu√°r',\n      'Febru√°r',\n      'Marec',\n      'Apr√≠l',\n      'M√°j',\n      'J√∫n',\n      'J√∫l',\n      'August',\n      'September',\n      'Okt√≥ber',\n      'November',\n      'December',\n    ];\n    return months[month - 1] || `Mesiac ${month}`;\n  };\n\n  return (\n    <Box sx={{ mt: 3, pt: 2, borderTop: '1px solid', borderColor: 'divider' }}>\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 2,\n        }}\n      >\n        <Typography\n          variant=\"subtitle1\"\n          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n        >\n          üìÑ Dokumenty majiteƒæa\n        </Typography>\n        <Button\n          variant=\"outlined\"\n          startIcon={<AddIcon />}\n          onClick={() => setUploadDialogOpen(true)}\n          size=\"small\"\n          sx={{ borderRadius: 2 }}\n        >\n          Prida≈• dokument\n        </Button>\n      </Box>\n\n      {loading ? (\n        <Typography\n          variant=\"body2\"\n          color=\"text.secondary\"\n          sx={{ textAlign: 'center', py: 2 }}\n        >\n          Naƒç√≠tavam dokumenty...\n        </Typography>\n      ) : (\n        <Box>\n          {/* ZMLUVY O SPOLUPR√ÅCI */}\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n              >\n                <ContractIcon sx={{ color: '#1976d2' }} />\n                Zmluvy o spolupr√°ci ({contracts.length})\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              {contracts.length > 0 ? (\n                <Box>\n                  <BulkDownload\n                    files={contracts.map(doc => ({\n                      url: doc.filePath,\n                      filename: doc.documentName,\n                    }))}\n                    zipFilename={`zmluvy_${companyName}_${new Date().toISOString().split('T')[0]}.zip`}\n                    label=\"Stiahnu≈• v≈°etky zmluvy\"\n                  />\n                  <List dense>\n                    {contracts.map(contract => (\n                      <ListItem key={contract.id} divider>\n                        <ListItemText\n                          primary={contract.documentName}\n                          secondary={\n                            <Box>\n                              <Typography\n                                variant=\"caption\"\n                                color=\"text.secondary\"\n                              >\n                                {contract.description}\n                              </Typography>\n                              <br />\n                              <Typography\n                                variant=\"caption\"\n                                color=\"text.secondary\"\n                              >\n                                Nahran√Ω:{' '}\n                                {new Date(\n                                  contract.createdAt\n                                ).toLocaleDateString('sk-SK')}\n                              </Typography>\n                            </Box>\n                          }\n                        />\n                        <ListItemSecondaryAction>\n                          <IconButton\n                            size=\"small\"\n                            onClick={() =>\n                              window.open(contract.filePath, '_blank')\n                            }\n                            title=\"Zobrazi≈• dokument\"\n                          >\n                            <ViewIcon fontSize=\"small\" />\n                          </IconButton>\n                          <IconButton\n                            size=\"small\"\n                            onClick={() => handleDeleteDocument(contract.id)}\n                            title=\"Zmaza≈• dokument\"\n                            color=\"error\"\n                          >\n                            <DeleteIcon fontSize=\"small\" />\n                          </IconButton>\n                        </ListItemSecondaryAction>\n                      </ListItem>\n                    ))}\n                  </List>\n                </Box>\n              ) : (\n                <Typography\n                  variant=\"body2\"\n                  color=\"text.secondary\"\n                  sx={{ textAlign: 'center', py: 2 }}\n                >\n                  ≈Ωiadne zmluvy o spolupr√°ci\n                </Typography>\n              )}\n            </AccordionDetails>\n          </Accordion>\n\n          {/* FAKT√öRY ROZDELEN√â PO MESIACOCH */}\n          <Accordion defaultExpanded sx={{ mt: 1 }}>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n              >\n                <InvoiceIcon sx={{ color: '#4caf50' }} />\n                Fakt√∫ry ({invoices.length})\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              {Object.keys(invoicesByYear).length > 0 ? (\n                <Box>\n                  {Object.entries(invoicesByYear)\n                    .sort(([a], [b]) => parseInt(b) - parseInt(a)) // Najnov≈°ie roky najprv\n                    .map(([year, months]) => (\n                      <Box key={year} sx={{ mb: 2 }}>\n                        <Typography\n                          variant=\"subtitle2\"\n                          sx={{ mb: 1, color: 'primary.main' }}\n                        >\n                          üìÖ Rok {year}\n                        </Typography>\n\n                        {Object.entries(months)\n                          .sort(([a], [b]) => parseInt(b) - parseInt(a)) // Najnov≈°ie mesiace najprv\n                          .map(([month, monthInvoices]) => (\n                            <Box key={month} sx={{ ml: 2, mb: 1 }}>\n                              <Typography\n                                variant=\"body2\"\n                                sx={{ mb: 1, fontWeight: 600 }}\n                              >\n                                {getMonthName(parseInt(month))} (\n                                {monthInvoices.length})\n                              </Typography>\n\n                              <List dense sx={{ ml: 2 }}>\n                                {monthInvoices.map(invoice => (\n                                  <ListItem key={invoice.id} divider>\n                                    <ListItemText\n                                      primary={invoice.documentName}\n                                      secondary={\n                                        <Box>\n                                          <Typography\n                                            variant=\"caption\"\n                                            color=\"text.secondary\"\n                                          >\n                                            {invoice.description}\n                                          </Typography>\n                                          <br />\n                                          <Typography\n                                            variant=\"caption\"\n                                            color=\"text.secondary\"\n                                          >\n                                            Nahran√Ω:{' '}\n                                            {new Date(\n                                              invoice.createdAt\n                                            ).toLocaleDateString('sk-SK')}\n                                          </Typography>\n                                        </Box>\n                                      }\n                                    />\n                                    <ListItemSecondaryAction>\n                                      <IconButton\n                                        size=\"small\"\n                                        onClick={() =>\n                                          window.open(\n                                            invoice.filePath,\n                                            '_blank'\n                                          )\n                                        }\n                                        title=\"Zobrazi≈• fakt√∫ru\"\n                                      >\n                                        <ViewIcon fontSize=\"small\" />\n                                      </IconButton>\n                                      <IconButton\n                                        size=\"small\"\n                                        onClick={() =>\n                                          handleDeleteDocument(invoice.id)\n                                        }\n                                        title=\"Zmaza≈• fakt√∫ru\"\n                                        color=\"error\"\n                                      >\n                                        <DeleteIcon fontSize=\"small\" />\n                                      </IconButton>\n                                    </ListItemSecondaryAction>\n                                  </ListItem>\n                                ))}\n                              </List>\n                            </Box>\n                          ))}\n                      </Box>\n                    ))}\n                </Box>\n              ) : (\n                <Typography\n                  variant=\"body2\"\n                  color=\"text.secondary\"\n                  sx={{ textAlign: 'center', py: 2 }}\n                >\n                  ≈Ωiadne fakt√∫ry\n                </Typography>\n              )}\n            </AccordionDetails>\n          </Accordion>\n        </Box>\n      )}\n\n      {/* UPLOAD DIALOG */}\n      <Dialog\n        open={uploadDialogOpen}\n        onClose={() => setUploadDialogOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>üìÑ Prida≈• dokument pre {companyName}</DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12}>\n              <FormControl fullWidth size=\"small\">\n                <InputLabel>Typ dokumentu</InputLabel>\n                <Select\n                  value={uploadData.documentType}\n                  onChange={e =>\n                    setUploadData(prev => ({\n                      ...prev,\n                      documentType: e.target.value as 'contract' | 'invoice',\n                    }))\n                  }\n                  label=\"Typ dokumentu\"\n                >\n                  <MenuItem value=\"contract\">\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <ContractIcon fontSize=\"small\" />\n                      Zmluva o spolupr√°ci\n                    </Box>\n                  </MenuItem>\n                  <MenuItem value=\"invoice\">\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      <InvoiceIcon fontSize=\"small\" />\n                      Fakt√∫ra\n                    </Box>\n                  </MenuItem>\n                </Select>\n              </FormControl>\n            </Grid>\n\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"N√°zov dokumentu\"\n                value={uploadData.documentName}\n                onChange={e =>\n                  setUploadData(prev => ({\n                    ...prev,\n                    documentName: e.target.value,\n                  }))\n                }\n                size=\"small\"\n                required\n                placeholder={\n                  uploadData.documentType === 'contract'\n                    ? 'napr. Zmluva o spolupr√°ci 2024'\n                    : 'napr. Fakt√∫ra janu√°r 2024'\n                }\n              />\n            </Grid>\n\n            {/* Pre fakt√∫ry - v√Ωber mesiaca a roku */}\n            {uploadData.documentType === 'invoice' && (\n              <>\n                <Grid item xs={6}>\n                  <FormControl fullWidth size=\"small\">\n                    <InputLabel>Rok</InputLabel>\n                    <Select\n                      value={uploadData.documentYear}\n                      onChange={e =>\n                        setUploadData(prev => ({\n                          ...prev,\n                          documentYear: parseInt(e.target.value as string),\n                        }))\n                      }\n                      label=\"Rok\"\n                    >\n                      {Array.from(\n                        { length: 5 },\n                        (_, i) => new Date().getFullYear() - i\n                      ).map(year => (\n                        <MenuItem key={year} value={year}>\n                          {year}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={6}>\n                  <FormControl fullWidth size=\"small\">\n                    <InputLabel>Mesiac</InputLabel>\n                    <Select\n                      value={uploadData.documentMonth}\n                      onChange={e =>\n                        setUploadData(prev => ({\n                          ...prev,\n                          documentMonth: parseInt(e.target.value as string),\n                        }))\n                      }\n                      label=\"Mesiac\"\n                    >\n                      {Array.from({ length: 12 }, (_, i) => i + 1).map(\n                        month => (\n                          <MenuItem key={month} value={month}>\n                            {getMonthName(month)}\n                          </MenuItem>\n                        )\n                      )}\n                    </Select>\n                  </FormControl>\n                </Grid>\n              </>\n            )}\n\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"Popis (nepovinn√©)\"\n                value={uploadData.description}\n                onChange={e =>\n                  setUploadData(prev => ({\n                    ...prev,\n                    description: e.target.value,\n                  }))\n                }\n                size=\"small\"\n                multiline\n                rows={2}\n                placeholder=\"Dodatoƒçn√© inform√°cie o dokumente...\"\n              />\n            </Grid>\n\n            <Grid item xs={12}>\n              <Box sx={{ mt: 2 }}>\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                  Nahra≈• s√∫bor:\n                </Typography>\n                <R2FileUpload\n                  type=\"company-document\"\n                  entityId={companyId.toString()}\n                  onUploadSuccess={handleFileUploadSuccess}\n                  onUploadError={error => console.error('Upload error:', error)}\n                  acceptedTypes={[\n                    'application/pdf',\n                    'image/jpeg',\n                    'image/png',\n                    'image/webp',\n                  ]}\n                  maxSize={50}\n                  multiple={true}\n                  label=\"Vybra≈• s√∫bor (PDF, obr√°zok)\"\n                />\n\n                {uploadedFiles.length > 0 && (\n                  <Alert severity=\"success\" sx={{ mt: 1 }}>\n                    ‚úÖ {uploadedFiles.length} s√∫borov √∫spe≈°ne nahran√Ωch a\n                    pripraven√Ωch na ulo≈æenie\n                    <Box sx={{ mt: 1 }}>\n                      {uploadedFiles.map((file, index) => (\n                        <Chip\n                          key={index}\n                          label={file.filename}\n                          size=\"small\"\n                          variant=\"outlined\"\n                          sx={{ mr: 1, mb: 1 }}\n                          onDelete={() =>\n                            setUploadedFiles(prev =>\n                              prev.filter((_, i) => i !== index)\n                            )\n                          }\n                        />\n                      ))}\n                    </Box>\n                  </Alert>\n                )}\n              </Box>\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions sx={{ p: 3, gap: 1 }}>\n          <Button\n            variant=\"outlined\"\n            onClick={() => {\n              setUploadDialogOpen(false);\n              setUploadedFiles([]);\n            }}\n          >\n            Zru≈°i≈•\n          </Button>\n          <Button\n            variant=\"contained\"\n            onClick={handleSaveDocuments}\n            disabled={\n              uploadedFiles.length === 0 || !uploadData.documentName.trim()\n            }\n          >\n            üíæ Ulo≈æi≈•{' '}\n            {uploadedFiles.length > 1\n              ? `${uploadedFiles.length} s√∫borov`\n              : 'dokument'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/customers/CustomerCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BusinessIcon' is defined but never used.","line":12,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isMobile' is assigned a value but never used.","line":44,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used.","line":46,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":16}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üë§ CUSTOMER CARD COMPONENT\n *\n * Optimalizovan√Ω customer card s React.memo pre lep≈°√≠ performance\n */\n\nimport {\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  Phone as PhoneIcon,\n  Email as EmailIcon,\n  Business as BusinessIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Chip,\n  IconButton,\n  Tooltip,\n  useTheme,\n} from '@mui/material';\nimport React, { memo, useCallback } from 'react';\n\nimport type { Customer } from '../../types';\n\ninterface CustomerCardProps {\n  customer: Customer;\n  index: number;\n  totalCustomers: number;\n  onEdit: (customer: Customer) => void;\n  onDelete: (id: string) => void;\n  getCustomerRentalCount: (customerId: string) => number;\n  isMobile?: boolean;\n}\n\nconst CustomerCard = memo<CustomerCardProps>(\n  ({\n    customer,\n    index,\n    totalCustomers,\n    onEdit,\n    onDelete,\n    getCustomerRentalCount,\n    isMobile = false,\n  }) => {\n    const theme = useTheme();\n\n    // Memoized handlers\n    const handleEdit = useCallback(() => onEdit(customer), [onEdit, customer]);\n    const handleDelete = useCallback(\n      () => onDelete(customer.id),\n      [onDelete, customer.id]\n    );\n\n    const rentalCount = getCustomerRentalCount(customer.id);\n\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          borderBottom:\n            index < totalCustomers - 1 ? '1px solid #e0e0e0' : 'none',\n          '&:hover': { backgroundColor: '#f8f9fa' },\n          minHeight: 80,\n          cursor: 'pointer',\n        }}\n        onClick={handleEdit}\n      >\n        {/* Customer Info - sticky left */}\n        <Box\n          sx={{\n            width: { xs: 140, sm: 160 },\n            maxWidth: { xs: 140, sm: 160 },\n            p: { xs: 1, sm: 1.5 },\n            borderRight: '2px solid #e0e0e0',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            backgroundColor: '#ffffff',\n            position: 'sticky',\n            left: 0,\n            zIndex: 10,\n            overflow: 'hidden',\n          }}\n        >\n          <Typography\n            variant=\"subtitle2\"\n            sx={{\n              fontWeight: 600,\n              fontSize: { xs: '0.75rem', sm: '0.8rem' },\n              color: '#1976d2',\n              lineHeight: 1.2,\n              wordWrap: 'break-word',\n              mb: { xs: 0.25, sm: 0.5 },\n            }}\n          >\n            {customer.name}\n          </Typography>\n          <Typography\n            variant=\"caption\"\n            sx={{\n              color: 'text.secondary',\n              fontSize: { xs: '0.65rem', sm: '0.7rem' },\n              lineHeight: 1.1,\n            }}\n          >\n            {customer.email\n              ? customer.email.substring(0, 20) +\n                (customer.email.length > 20 ? '...' : '')\n              : 'Bez emailu'}\n          </Typography>\n        </Box>\n\n        {/* Contact Info */}\n        <Box\n          sx={{\n            flex: 1,\n            p: { xs: 1, sm: 1.5 },\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            overflow: 'hidden',\n          }}\n        >\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 0.5 }}>\n            {customer.phone && (\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                <PhoneIcon\n                  sx={{ fontSize: { xs: 14, sm: 16 }, color: 'text.secondary' }}\n                />\n                <Typography\n                  variant=\"body2\"\n                  sx={{\n                    fontSize: { xs: '0.7rem', sm: '0.75rem' },\n                    color: 'text.primary',\n                  }}\n                >\n                  {customer.phone}\n                </Typography>\n              </Box>\n            )}\n            {customer.email && (\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\n                <EmailIcon\n                  sx={{ fontSize: { xs: 14, sm: 16 }, color: 'text.secondary' }}\n                />\n                <Typography\n                  variant=\"body2\"\n                  sx={{\n                    fontSize: { xs: '0.7rem', sm: '0.75rem' },\n                    color: 'text.primary',\n                    maxWidth: 120,\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis',\n                    whiteSpace: 'nowrap',\n                  }}\n                >\n                  {customer.email}\n                </Typography>\n              </Box>\n            )}\n          </Box>\n\n          {/* Company field removed - not in Customer type */}\n        </Box>\n\n        {/* Rental Count */}\n        <Box\n          sx={{\n            width: { xs: 60, sm: 80 },\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            borderRight: '1px solid #e0e0e0',\n          }}\n        >\n          <Chip\n            label={rentalCount}\n            size=\"small\"\n            sx={{\n              height: 24,\n              fontSize: { xs: '0.7rem', sm: '0.75rem' },\n              bgcolor: rentalCount > 0 ? '#e3f2fd' : '#f5f5f5',\n              color: rentalCount > 0 ? '#1976d2' : '#666',\n              fontWeight: 600,\n              minWidth: { xs: 28, sm: 32 },\n            }}\n          />\n        </Box>\n\n        {/* Actions */}\n        <Box\n          sx={{\n            width: { xs: 80, sm: 100 },\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            gap: 0.5,\n          }}\n        >\n          <Tooltip title=\"Upravi≈• z√°kazn√≠ka\">\n            <IconButton\n              size=\"small\"\n              onClick={e => {\n                e.stopPropagation();\n                handleEdit();\n              }}\n              sx={{\n                width: { xs: 32, sm: 36 },\n                height: { xs: 32, sm: 36 },\n                color: '#1976d2',\n                '&:hover': { bgcolor: 'rgba(25, 118, 210, 0.08)' },\n              }}\n            >\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Zmaza≈• z√°kazn√≠ka\">\n            <IconButton\n              size=\"small\"\n              onClick={e => {\n                e.stopPropagation();\n                handleDelete();\n              }}\n              sx={{\n                width: { xs: 32, sm: 36 },\n                height: { xs: 32, sm: 36 },\n                color: '#d32f2f',\n                '&:hover': { bgcolor: 'rgba(211, 47, 47, 0.08)' },\n              }}\n            >\n              <DeleteIcon fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </Box>\n    );\n  }\n);\n\nCustomerCard.displayName = 'CustomerCard';\n\nexport default CustomerCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/customers/CustomerForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/customers/CustomerListNew.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/customers/CustomerRentalHistory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/debug/NullChildrenDetector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/demo/SvgDemo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/EmailManagementLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/EmailArchiveTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/EmailFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/EmailHistoryTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/EmailStatsCards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/ImapStatusCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/PendingRentalsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/StatusChip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/dialogs/EmailDetailDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/components/dialogs/RejectDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/hooks/useEmailApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/hooks/useImapStatus.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/hooks/usePendingRentals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/types/email-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/utils/email-constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/email-management/utils/email-formatters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/expenses/ExpenseCategoryManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/expenses/ExpenseForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/expenses/ExpenseListNew.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":257,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":257,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7405,7408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7405,7408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":333,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":333,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9854,9857],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9854,9857],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'id' is assigned a value but never used.","line":339,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":339,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'vehicleLicensePlate' is assigned a value but never used.","line":353,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":353,"endColumn":38}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Add as AddIcon,\n  Business as CompanyIcon,\n  DateRange as DateIcon,\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  Euro as EuroIcon,\n  FilterList as FilterListIcon,\n  LocalGasStation as FuelIcon,\n  Security as InsuranceIcon,\n  Category as OtherIcon,\n  Receipt as ReceiptIcon,\n  Repeat as RepeatIcon,\n  Search as SearchIcon,\n  Build as ServiceIcon,\n  Settings as SettingsIcon,\n  DirectionsCar as VehicleIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  CircularProgress,\n  Dialog,\n  Divider,\n  FormControl,\n  Grid,\n  IconButton,\n  InputLabel,\n  MenuItem,\n  Select,\n  TextField,\n  Tooltip,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@mui/material';\nimport { format } from 'date-fns';\nimport { saveAs } from 'file-saver';\nimport * as Papa from 'papaparse';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport { useApp } from '../../context/AppContext';\nimport { apiService } from '../../services/api';\nimport type { Expense, ExpenseCategory, Vehicle } from '../../types';\n\nimport ExpenseCategoryManager from './ExpenseCategoryManager';\nimport ExpenseForm from './ExpenseForm';\nimport RecurringExpenseManager from './RecurringExpenseManager';\n\n// Helper funkcie pre dynamick√© kateg√≥rie\nconst getCategoryIcon = (\n  categoryName: string,\n  categories: ExpenseCategory[]\n) => {\n  const category = categories.find(c => c.name === categoryName);\n  if (!category) return <ReceiptIcon fontSize=\"small\" />;\n\n  // Mapovanie ikon na Material UI komponenty\n  const iconMap: Record<string, React.ReactElement> = {\n    local_gas_station: <FuelIcon fontSize=\"small\" />,\n    build: <ServiceIcon fontSize=\"small\" />,\n    security: <InsuranceIcon fontSize=\"small\" />,\n    category: <OtherIcon fontSize=\"small\" />,\n    receipt: <ReceiptIcon fontSize=\"small\" />,\n  };\n\n  return iconMap[category.icon] || <ReceiptIcon fontSize=\"small\" />;\n};\n\nconst getCategoryText = (\n  categoryName: string,\n  categories: ExpenseCategory[]\n) => {\n  const category = categories.find(c => c.name === categoryName);\n  return category?.displayName || categoryName;\n};\n\nconst getCategoryColor = (\n  categoryName: string,\n  categories: ExpenseCategory[]\n): 'primary' | 'secondary' | 'success' | 'error' | 'warning' | 'info' => {\n  const category = categories.find(c => c.name === categoryName);\n  return category?.color || 'primary';\n};\n\nconst ExpenseListNew: React.FC = () => {\n  const {\n    getFilteredExpenses,\n    getFilteredVehicles,\n    deleteExpense,\n    createExpense,\n    updateExpense,\n  } = useApp();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'), { noSsr: true });\n\n  // Get data from context\n  const expenses = getFilteredExpenses();\n  const vehicles = getFilteredVehicles();\n\n  // States\n  const [searchQuery, setSearchQuery] = useState('');\n  const [categoryFilter, setCategoryFilter] = useState<string | 'all'>('all');\n  const [companyFilter, setCompanyFilter] = useState('');\n  const [vehicleFilter, setVehicleFilter] = useState('');\n  const [showFilters, setShowFilters] = useState(false);\n  const [formOpen, setFormOpen] = useState(false);\n  const [editingExpense, setEditingExpense] = useState<Expense | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [categoriesManagerOpen, setCategoriesManagerOpen] = useState(false);\n  const [recurringManagerOpen, setRecurringManagerOpen] = useState(false);\n\n  // Dynamick√© kateg√≥rie\n  const [expenseCategories, setExpenseCategories] = useState<ExpenseCategory[]>(\n    []\n  );\n\n  // Get unique values for filters\n  const uniqueCompanies = useMemo(\n    () =>\n      Array.from(\n        new Set(expenses.map((e: Expense) => e.company).filter(Boolean))\n      ).sort(),\n    [expenses]\n  );\n\n  // Naƒç√≠tanie kateg√≥ri√≠ z API\n  const loadCategories = async () => {\n    try {\n      const categories = await apiService.getExpenseCategories();\n      setExpenseCategories(categories);\n    } catch (error) {\n      console.error('Error loading expense categories:', error);\n    }\n  };\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  // Filtered expenses\n  const filteredExpenses = useMemo(() => {\n    return expenses.filter((expense: Expense) => {\n      const matchesSearch =\n        !searchQuery ||\n        expense.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        expense.note?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        expense.company.toLowerCase().includes(searchQuery.toLowerCase());\n\n      const matchesCategory =\n        categoryFilter === 'all' || expense.category === categoryFilter;\n      const matchesCompany =\n        !companyFilter || expense.company === companyFilter;\n      const matchesVehicle =\n        !vehicleFilter || expense.vehicleId === vehicleFilter;\n\n      return (\n        matchesSearch && matchesCategory && matchesCompany && matchesVehicle\n      );\n    });\n  }, [expenses, searchQuery, categoryFilter, companyFilter, vehicleFilter]);\n\n  // Calculate totals\n  const totalAmount = useMemo(\n    () =>\n      filteredExpenses.reduce(\n        (sum: number, expense: Expense) => sum + expense.amount,\n        0\n      ),\n    [filteredExpenses]\n  );\n\n  const categoryTotals = useMemo(() => {\n    const totals: Record<string, number> = {};\n\n    // Inicializuj v≈°etky kateg√≥rie na 0\n    expenseCategories.forEach(category => {\n      totals[category.name] = 0;\n    });\n\n    // Spoƒç√≠taj sumy pre ka≈æd√∫ kateg√≥riu\n    filteredExpenses.forEach((expense: Expense) => {\n      if (totals[expense.category] !== undefined) {\n        totals[expense.category] += expense.amount;\n      }\n    });\n\n    return totals;\n  }, [filteredExpenses, expenseCategories]);\n\n  // Handlers\n  const handleAddExpense = () => {\n    setEditingExpense(null);\n    setFormOpen(true);\n  };\n\n  const handleEditExpense = (expense: Expense) => {\n    setEditingExpense(expense);\n    setFormOpen(true);\n  };\n\n  const handleDeleteExpense = async (expense: Expense) => {\n    if (\n      window.confirm(`Naozaj chcete zmaza≈• n√°klad \"${expense.description}\"?`)\n    ) {\n      setLoading(true);\n      try {\n        await deleteExpense(expense.id);\n      } catch (error) {\n        console.error('Error deleting expense:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  const handleFormSubmit = async (expenseData: Partial<Expense>) => {\n    setLoading(true);\n    try {\n      if (editingExpense && expenseData.id) {\n        await updateExpense({ ...editingExpense, ...expenseData } as Expense);\n      } else {\n        await createExpense(expenseData as Expense);\n      }\n      setFormOpen(false);\n      setEditingExpense(null);\n    } catch (error) {\n      console.error('Error saving expense:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // CSV funkcionalita\n  const handleExportCSV = async () => {\n    try {\n      const { apiService } = await import('../../services/api');\n      const blob = await apiService.exportExpensesCSV();\n      const filename = `naklady-${new Date().toISOString().split('T')[0]}.csv`;\n      saveAs(blob, filename);\n\n      alert('CSV export √∫spe≈°n√Ω');\n    } catch (error) {\n      console.error('CSV export error:', error);\n      alert('Chyba pri CSV exporte');\n    }\n  };\n\n  const handleImportCSV = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    Papa.parse(file, {\n      complete: async (results: any) => {\n        try {\n          console.log('üì• Parsing CSV file for batch expense import...');\n\n          if (!results.data || results.data.length < 2) {\n            alert('CSV s√∫bor mus√≠ obsahova≈• aspo≈à hlaviƒçku a jeden riadok d√°t');\n            return;\n          }\n\n          // Z√≠skaj hlaviƒçku pre inteligentn√© mapovanie\n          const headers = results.data[0];\n          const dataRows = results.data.slice(1);\n          const batchExpenses = [];\n\n          console.log('üìã CSV Headers:', headers);\n          console.log(`üì¶ Processing ${dataRows.length} expense rows...`);\n\n          // Inteligentn√© mapovanie stƒ∫pcov\n          const getColumnIndex = (possibleNames: string[]) => {\n            for (const name of possibleNames) {\n              const index = headers.findIndex(\n                (h: string) =>\n                  h && h.toString().toLowerCase().trim() === name.toLowerCase()\n              );\n              if (index !== -1) return index;\n            }\n            return -1;\n          };\n\n          const columnMap = {\n            id: getColumnIndex(['id', 'ID']),\n            description: getColumnIndex([\n              'description',\n              'popis',\n              'Description',\n              'Popis',\n            ]),\n            amount: getColumnIndex([\n              'amount',\n              'suma',\n              'Amount',\n              'Suma',\n              'cena',\n              'Cena',\n            ]),\n            date: getColumnIndex(['date', 'datum', 'Date', 'D√°tum']),\n            category: getColumnIndex([\n              'category',\n              'kategoria',\n              'Category',\n              'Kateg√≥ria',\n            ]),\n            company: getColumnIndex(['company', 'firma', 'Company', 'Firma']),\n            vehicleId: getColumnIndex([\n              'vehicleId',\n              'vehicle_id',\n              'vozidlo_id',\n            ]),\n            vehicleLicensePlate: getColumnIndex([\n              'vehicleLicensePlate',\n              'spz',\n              'SPZ',\n              'license_plate',\n            ]),\n            note: getColumnIndex(['note', 'poznamka', 'Note', 'Pozn√°mka']),\n          };\n\n          console.log('üó∫Ô∏è Column mapping:', columnMap);\n\n          for (let i = 0; i < dataRows.length; i++) {\n            const row = dataRows[i];\n\n            // Preskoƒç√≠me pr√°zdne riadky\n            if (\n              !row ||\n              row.length === 0 ||\n              !row.some((cell: any) => cell && cell.toString().trim())\n            ) {\n              continue;\n            }\n\n            // Mapovanie pol√≠ pomocou inteligentn√©ho mapovania\n            const id = columnMap.id >= 0 ? row[columnMap.id] : undefined;\n            const description =\n              columnMap.description >= 0\n                ? row[columnMap.description]\n                : undefined;\n            const amount =\n              columnMap.amount >= 0 ? row[columnMap.amount] : undefined;\n            const date = columnMap.date >= 0 ? row[columnMap.date] : undefined;\n            const category =\n              columnMap.category >= 0 ? row[columnMap.category] : undefined;\n            const company =\n              columnMap.company >= 0 ? row[columnMap.company] : undefined;\n            const vehicleId =\n              columnMap.vehicleId >= 0 ? row[columnMap.vehicleId] : undefined;\n            const vehicleLicensePlate =\n              columnMap.vehicleLicensePlate >= 0\n                ? row[columnMap.vehicleLicensePlate]\n                : undefined;\n            const note = columnMap.note >= 0 ? row[columnMap.note] : undefined;\n\n            // Kontrola povinn√Ωch pol√≠\n            if (!description || description.toString().trim() === '') {\n              console.warn(`Riadok ${i + 2}: Preskakujem - ch√Ωba popis`);\n              continue;\n            }\n\n            // Parsuj sumu\n            let parsedAmount = 0;\n            if (amount && amount.toString().trim() !== '') {\n              parsedAmount = parseFloat(amount.toString().replace(',', '.'));\n              if (isNaN(parsedAmount)) {\n                console.warn(\n                  `Riadok ${i + 2}: Neplatn√° suma \"${amount}\", nastavujem na 0`\n                );\n                parsedAmount = 0;\n              }\n            }\n\n            // Parsuj d√°tum\n            let parsedDate = new Date();\n            if (date && date.toString().trim()) {\n              const dateStr = date.toString().trim();\n\n              // Form√°t MM/YYYY sa zmen√≠ na 01.MM.YYYY\n              if (/^\\d{1,2}\\/\\d{4}$/.test(dateStr)) {\n                const [month, year] = dateStr.split('/');\n                parsedDate = new Date(parseInt(year), parseInt(month) - 1, 1);\n              } else {\n                // ≈†tandardn√© parsovanie d√°tumu\n                const tempDate = new Date(dateStr);\n                if (!isNaN(tempDate.getTime())) {\n                  parsedDate = tempDate;\n                }\n              }\n            }\n\n            // Mapovanie kateg√≥ri√≠\n            let mappedCategory = 'other';\n            if (category && category.toString().trim()) {\n              const categoryStr = category.toString().toLowerCase().trim();\n              const categoryMap: { [key: string]: string } = {\n                fuel: 'fuel',\n                palivo: 'fuel',\n                benz√≠n: 'fuel',\n                nafta: 'fuel',\n                service: 'service',\n                servis: 'service',\n                oprava: 'service',\n                √∫dr≈æba: 'service',\n                insurance: 'insurance',\n                poistenie: 'insurance',\n                other: 'other',\n                ostatn√©: 'other',\n                in√©: 'other',\n              };\n              mappedCategory = categoryMap[categoryStr] || 'other';\n            }\n\n            // Vytvor expense objekt\n            const expenseData = {\n              id: '', // Bude vygenerovan√© na backend\n              description: description.toString().trim(),\n              amount: parsedAmount,\n              date: parsedDate,\n              category: mappedCategory,\n              vehicleId:\n                vehicleId && vehicleId.toString().trim() !== ''\n                  ? vehicleId.toString().trim()\n                  : undefined,\n              company:\n                company && company.toString().trim() !== ''\n                  ? company.toString().trim()\n                  : 'Black Holding',\n              note:\n                note && note.toString().trim() !== ''\n                  ? note.toString().trim()\n                  : undefined,\n            };\n\n            console.log(\n              `üí∞ Expense ${i + 2}: ${expenseData.description} - ${expenseData.amount}‚Ç¨ - Company: \"${expenseData.company}\"`\n            );\n\n            batchExpenses.push(expenseData);\n          }\n\n          console.log(\n            `üì¶ Pripraven√Ωch ${batchExpenses.length} n√°kladov pre batch import`\n          );\n\n          // Pou≈æij batch import namiesto CSV importu\n          const result = await apiService.batchImportExpenses(batchExpenses);\n\n          console.log('üì• CSV Import result:', result);\n\n          // Result u≈æ obsahuje priamo d√°ta, nie je wrapped v success/data\n          const {\n            created,\n            updated,\n            errorsCount,\n            successRate,\n            processed,\n            total,\n          } = result;\n\n          if (created > 0 || updated > 0) {\n            alert(\n              `üöÄ BATCH IMPORT √öSPE≈†N√ù!\\n\\nüìä V√Ωsledky:\\n‚Ä¢ Vytvoren√Ωch: ${created}\\n‚Ä¢ Aktualizovan√Ωch: ${updated}\\n‚Ä¢ Spracovan√Ωch: ${processed}/${total}\\n‚Ä¢ Ch√Ωb: ${errorsCount}\\n‚Ä¢ √öspe≈°nos≈•: ${successRate}\\n\\nStr√°nka sa obnov√≠ za 3 sekundy...`\n            );\n            setTimeout(() => window.location.reload(), 3000);\n          } else if (errorsCount > 0) {\n            alert(\n              `‚ö†Ô∏è Import dokonƒçen√Ω, ale ≈æiadne n√°klady neboli pridan√©.\\n\\nüìä V√Ωsledky:\\n‚Ä¢ Vytvoren√Ωch: ${created}\\n‚Ä¢ Aktualizovan√Ωch: ${updated}\\n‚Ä¢ Ch√Ωb: ${errorsCount}\\n‚Ä¢ √öspe≈°nos≈•: ${successRate}\\n\\nSkontrolujte form√°t CSV s√∫boru.`\n            );\n          } else {\n            alert(\n              `‚ö†Ô∏è Import dokonƒçen√Ω, ale ≈æiadne n√°klady neboli pridan√©.\\nSkontrolujte form√°t CSV s√∫boru.`\n            );\n          }\n        } catch (error) {\n          console.error('‚ùå CSV import error:', error);\n          // ‚úÖ ZLEP≈†EN√â ERROR HANDLING - menej dramatick√©\n          alert(\n            `‚ö†Ô∏è Import dokonƒçen√Ω s upozornen√≠m: ${error instanceof Error ? error.message : 'Sie≈•ov√° chyba'}\\n\\nSkontrolujte v√Ωsledok po obnoven√≠ str√°nky.`\n          );\n          // Aj tak sk√∫s refresh - mo≈æno sa import dokonƒçil\n          setTimeout(() => window.location.reload(), 2000);\n        }\n      },\n      header: false,\n      skipEmptyLines: true,\n    });\n\n    // Reset input\n    event.target.value = '';\n  };\n\n  const clearFilters = () => {\n    setSearchQuery('');\n    setCategoryFilter('all');\n    setCompanyFilter('');\n    setVehicleFilter('');\n  };\n\n  return (\n    <Box sx={{ p: { xs: 1, md: 3 } }}>\n      {/* Header */}\n      <Card sx={{ mb: 3, boxShadow: '0 4px 12px rgba(0,0,0,0.1)' }}>\n        <CardContent>\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              flexWrap: 'wrap',\n              gap: 2,\n            }}\n          >\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <ReceiptIcon sx={{ color: '#1976d2', fontSize: 28 }} />\n              <Typography\n                variant=\"h4\"\n                sx={{ fontWeight: 700, color: '#1976d2' }}\n              >\n                N√°klady\n              </Typography>\n            </Box>\n            <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n              <Button\n                variant=\"contained\"\n                startIcon={<AddIcon />}\n                onClick={handleAddExpense}\n                sx={{ minWidth: 120 }}\n              >\n                Prida≈•\n              </Button>\n              <Button\n                variant=\"outlined\"\n                startIcon={<RepeatIcon />}\n                onClick={() => setRecurringManagerOpen(true)}\n                sx={{\n                  borderColor: '#4caf50',\n                  color: '#4caf50',\n                  '&:hover': {\n                    borderColor: '#388e3c',\n                    bgcolor: 'rgba(76, 175, 80, 0.04)',\n                  },\n                }}\n              >\n                Pravideln√© n√°klady\n              </Button>\n              <Button\n                variant=\"outlined\"\n                startIcon={<SettingsIcon />}\n                onClick={() => setCategoriesManagerOpen(true)}\n                sx={{\n                  borderColor: '#1976d2',\n                  color: '#1976d2',\n                  '&:hover': {\n                    borderColor: '#1565c0',\n                    bgcolor: 'rgba(25, 118, 210, 0.04)',\n                  },\n                }}\n              >\n                Spravova≈• kateg√≥rie\n              </Button>\n              {/* CSV tlaƒçidl√° - len na desktope */}\n              {!isMobile && (\n                <>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={handleExportCSV}\n                    disabled={filteredExpenses.length === 0}\n                  >\n                    üìä Export CSV\n                  </Button>\n\n                  <Button\n                    variant=\"outlined\"\n                    component=\"label\"\n                    sx={{\n                      borderColor: '#1976d2',\n                      color: '#1976d2',\n                      '&:hover': {\n                        borderColor: '#1565c0',\n                        bgcolor: 'rgba(25, 118, 210, 0.04)',\n                      },\n                    }}\n                  >\n                    üì• Import CSV\n                    <input\n                      type=\"file\"\n                      accept=\".csv\"\n                      onChange={handleImportCSV}\n                      style={{ display: 'none' }}\n                    />\n                  </Button>\n                </>\n              )}\n            </Box>\n          </Box>\n        </CardContent>\n      </Card>\n\n      {/* Search and Filters */}\n      <Card sx={{ mb: 3, boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n        <CardContent>\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 2,\n              alignItems: 'center',\n              flexWrap: 'wrap',\n            }}\n          >\n            <TextField\n              placeholder=\"Hƒæada≈• n√°klady...\"\n              value={searchQuery}\n              onChange={e => setSearchQuery(e.target.value)}\n              InputProps={{\n                startAdornment: (\n                  <SearchIcon sx={{ color: 'text.secondary', mr: 1 }} />\n                ),\n              }}\n              sx={{ minWidth: 250, flexGrow: 1 }}\n            />\n\n            <Button\n              variant={showFilters ? 'contained' : 'outlined'}\n              startIcon={<FilterListIcon />}\n              onClick={() => setShowFilters(!showFilters)}\n            >\n              Filtre\n            </Button>\n\n            {(categoryFilter !== 'all' || companyFilter || vehicleFilter) && (\n              <Button variant=\"text\" onClick={clearFilters}>\n                Vymaza≈• filtre\n              </Button>\n            )}\n          </Box>\n\n          {showFilters && (\n            <Box sx={{ mt: 2, pt: 2, borderTop: '1px solid #e0e0e0' }}>\n              <Grid container spacing={2}>\n                <Grid item xs={12} sm={6} md={3}>\n                  <FormControl fullWidth>\n                    <InputLabel>Kateg√≥ria</InputLabel>\n                    <Select\n                      value={categoryFilter}\n                      onChange={e => setCategoryFilter(e.target.value)}\n                      label=\"Kateg√≥ria\"\n                    >\n                      <MenuItem value=\"all\">V≈°etky kateg√≥rie</MenuItem>\n                      {expenseCategories.map(category => (\n                        <MenuItem key={category.name} value={category.name}>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            {getCategoryIcon(category.name, expenseCategories)}\n                            {getCategoryText(category.name, expenseCategories)}\n                          </Box>\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12} sm={6} md={3}>\n                  <FormControl fullWidth>\n                    <InputLabel>Firma</InputLabel>\n                    <Select\n                      value={companyFilter}\n                      onChange={e => setCompanyFilter(e.target.value)}\n                      label=\"Firma\"\n                    >\n                      <MenuItem value=\"\">V≈°etky firmy</MenuItem>\n                      {uniqueCompanies.map((company: string) => (\n                        <MenuItem key={company} value={company}>\n                          {company}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12} sm={6} md={3}>\n                  <FormControl fullWidth>\n                    <InputLabel>Vozidlo</InputLabel>\n                    <Select\n                      value={vehicleFilter}\n                      onChange={e => setVehicleFilter(e.target.value)}\n                      label=\"Vozidlo\"\n                    >\n                      <MenuItem value=\"\">V≈°etky vozidl√°</MenuItem>\n                      {vehicles.map((vehicle: Vehicle) => (\n                        <MenuItem key={vehicle.id} value={vehicle.id}>\n                          {vehicle.brand} {vehicle.model} -{' '}\n                          {vehicle.licensePlate}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n              </Grid>\n            </Box>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Statistics Cards */}\n      <Grid container spacing={2} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card\n            sx={{\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              color: 'white',\n              boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n            }}\n          >\n            <CardContent>\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <Box>\n                  <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                    Celkom\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ fontWeight: 700 }}>\n                    {filteredExpenses.length}\n                  </Typography>\n                </Box>\n                <ReceiptIcon sx={{ fontSize: 40, opacity: 0.8 }} />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card\n            sx={{\n              background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n              color: 'white',\n              boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n            }}\n          >\n            <CardContent>\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <Box>\n                  <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                    Suma\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ fontWeight: 700 }}>\n                    {totalAmount.toFixed(2)}‚Ç¨\n                  </Typography>\n                </Box>\n                <EuroIcon sx={{ fontSize: 40, opacity: 0.8 }} />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        {/* Dynamick√© karty pre top 2 kateg√≥rie */}\n        {expenseCategories.slice(0, 2).map((category, index) => (\n          <Grid item xs={12} sm={6} md={3} key={category.name}>\n            <Card\n              sx={{\n                background:\n                  index === 0\n                    ? 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'\n                    : 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\n                color: 'white',\n                boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n              }}\n            >\n              <CardContent>\n                <Box\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'space-between',\n                  }}\n                >\n                  <Box>\n                    <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n                      {category.displayName}\n                    </Typography>\n                    <Typography variant=\"h4\" sx={{ fontWeight: 700 }}>\n                      {(categoryTotals[category.name] || 0).toFixed(2)}‚Ç¨\n                    </Typography>\n                  </Box>\n                  {getCategoryIcon(category.name, expenseCategories)}\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {loading && (\n        <Box sx={{ display: 'flex', justifyContent: 'center', my: 3 }}>\n          <CircularProgress />\n        </Box>\n      )}\n\n      {/* Mobile Layout */}\n      {isMobile ? (\n        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\n          {filteredExpenses.length === 0 ? (\n            <Card sx={{ boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n              <CardContent sx={{ textAlign: 'center', py: 4 }}>\n                <ReceiptIcon\n                  sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }}\n                />\n                <Typography variant=\"h6\" color=\"text.secondary\">\n                  ≈Ωiadne n√°klady nen√°jden√©\n                </Typography>\n              </CardContent>\n            </Card>\n          ) : (\n            filteredExpenses.map((expense: Expense) => {\n              const vehicle = expense.vehicleId\n                ? vehicles.find((v: Vehicle) => v.id === expense.vehicleId)\n                : null;\n\n              return (\n                <Card\n                  key={expense.id}\n                  sx={{\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                    borderRadius: 2,\n                    '&:hover': {\n                      boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n                      transform: 'translateY(-2px)',\n                    },\n                    transition: 'all 0.2s ease',\n                  }}\n                >\n                  <CardContent sx={{ p: 2 }}>\n                    <Box\n                      sx={{\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'flex-start',\n                        mb: 2,\n                      }}\n                    >\n                      <Box sx={{ flexGrow: 1, mr: 2 }}>\n                        <Typography\n                          variant=\"h6\"\n                          sx={{\n                            fontWeight: 600,\n                            mb: 0.5,\n                            wordWrap: 'break-word',\n                          }}\n                        >\n                          {expense.description}\n                        </Typography>\n                        <Box\n                          sx={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: 1,\n                            mb: 1,\n                          }}\n                        >\n                          <Chip\n                            icon={getCategoryIcon(\n                              expense.category,\n                              expenseCategories\n                            )}\n                            label={getCategoryText(\n                              expense.category,\n                              expenseCategories\n                            )}\n                            color={getCategoryColor(\n                              expense.category,\n                              expenseCategories\n                            )}\n                            size=\"small\"\n                            sx={{ fontWeight: 600 }}\n                          />\n                          <Typography\n                            variant=\"h6\"\n                            sx={{\n                              fontWeight: 700,\n                              color: '#1976d2',\n                            }}\n                          >\n                            {expense.amount.toFixed(2)}‚Ç¨\n                          </Typography>\n                        </Box>\n                      </Box>\n\n                      <Box sx={{ display: 'flex', gap: 0.5 }}>\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleEditExpense(expense)}\n                          sx={{\n                            backgroundColor: '#f5f5f5',\n                            '&:hover': { backgroundColor: '#e0e0e0' },\n                          }}\n                        >\n                          <EditIcon fontSize=\"small\" />\n                        </IconButton>\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleDeleteExpense(expense)}\n                          sx={{\n                            backgroundColor: '#ffebee',\n                            color: '#d32f2f',\n                            '&:hover': { backgroundColor: '#ffcdd2' },\n                          }}\n                        >\n                          <DeleteIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Box>\n                    </Box>\n\n                    <Divider sx={{ my: 1 }} />\n\n                    <Grid container spacing={1} sx={{ fontSize: '0.875rem' }}>\n                      <Grid item xs={6}>\n                        <Box\n                          sx={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: 0.5,\n                          }}\n                        >\n                          <DateIcon\n                            fontSize=\"small\"\n                            sx={{ color: 'text.secondary' }}\n                          />\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                            {format(new Date(expense.date), 'dd.MM.yyyy')}\n                          </Typography>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <Box\n                          sx={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: 0.5,\n                          }}\n                        >\n                          <CompanyIcon\n                            fontSize=\"small\"\n                            sx={{ color: 'text.secondary' }}\n                          />\n                          <Typography\n                            variant=\"body2\"\n                            color=\"text.secondary\"\n                            noWrap\n                          >\n                            {expense.company}\n                          </Typography>\n                        </Box>\n                      </Grid>\n                      {vehicle && (\n                        <Grid item xs={12}>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 0.5,\n                            }}\n                          >\n                            <VehicleIcon\n                              fontSize=\"small\"\n                              sx={{ color: 'text.secondary' }}\n                            />\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              {vehicle.brand} {vehicle.model} -{' '}\n                              {vehicle.licensePlate}\n                            </Typography>\n                          </Box>\n                        </Grid>\n                      )}\n                      {expense.note && (\n                        <Grid item xs={12}>\n                          <Typography\n                            variant=\"body2\"\n                            sx={{\n                              fontStyle: 'italic',\n                              color: 'text.secondary',\n                              mt: 1,\n                              p: 1,\n                              backgroundColor: '#f5f5f5',\n                              borderRadius: 1,\n                            }}\n                          >\n                            {expense.note}\n                          </Typography>\n                        </Grid>\n                      )}\n                    </Grid>\n                  </CardContent>\n                </Card>\n              );\n            })\n          )}\n        </Box>\n      ) : (\n        /* Desktop Layout */\n        <Card sx={{ boxShadow: '0 4px 12px rgba(0,0,0,0.1)' }}>\n          <Box\n            sx={{\n              position: 'sticky',\n              top: 0,\n              backgroundColor: 'white',\n              zIndex: 1,\n              borderBottom: '2px solid #f0f0f0',\n            }}\n          >\n            <Box\n              sx={{\n                display: 'grid',\n                gridTemplateColumns: '2fr 1fr 1fr 1fr 1fr 1fr 120px',\n                gap: 2,\n                p: 2,\n                fontWeight: 600,\n                color: '#1976d2',\n                backgroundColor: '#f8f9fa',\n              }}\n            >\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 700 }}>\n                Popis\n              </Typography>\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 700 }}>\n                Kateg√≥ria\n              </Typography>\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 700 }}>\n                Suma\n              </Typography>\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 700 }}>\n                D√°tum\n              </Typography>\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 700 }}>\n                Firma\n              </Typography>\n              <Typography variant=\"subtitle1\" sx={{ fontWeight: 700 }}>\n                Vozidlo\n              </Typography>\n              <Typography\n                variant=\"subtitle1\"\n                sx={{ fontWeight: 700, textAlign: 'center' }}\n              >\n                Akcie\n              </Typography>\n            </Box>\n          </Box>\n\n          <Box sx={{ maxHeight: '600px', overflow: 'auto' }}>\n            {filteredExpenses.length === 0 ? (\n              <Box sx={{ textAlign: 'center', py: 8 }}>\n                <ReceiptIcon\n                  sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }}\n                />\n                <Typography variant=\"h6\" color=\"text.secondary\">\n                  ≈Ωiadne n√°klady nen√°jden√©\n                </Typography>\n              </Box>\n            ) : (\n              filteredExpenses.map((expense: Expense, index: number) => {\n                const vehicle = expense.vehicleId\n                  ? vehicles.find((v: Vehicle) => v.id === expense.vehicleId)\n                  : null;\n\n                return (\n                  <Box\n                    key={expense.id}\n                    sx={{\n                      display: 'grid',\n                      gridTemplateColumns: '2fr 1fr 1fr 1fr 1fr 1fr 120px',\n                      gap: 2,\n                      p: 2,\n                      borderBottom: '1px solid #e0e0e0',\n                      backgroundColor: index % 2 === 0 ? '#fafafa' : 'white',\n                      '&:hover': {\n                        backgroundColor: '#f0f7ff',\n                        cursor: 'pointer',\n                      },\n                      transition: 'background-color 0.2s ease',\n                    }}\n                  >\n                    <Box>\n                      <Typography\n                        variant=\"body1\"\n                        sx={{ fontWeight: 600, mb: 0.5 }}\n                      >\n                        {expense.description}\n                      </Typography>\n                      {expense.note && (\n                        <Typography\n                          variant=\"body2\"\n                          sx={{\n                            color: 'text.secondary',\n                            fontStyle: 'italic',\n                          }}\n                        >\n                          {expense.note}\n                        </Typography>\n                      )}\n                    </Box>\n\n                    <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                      <Chip\n                        icon={getCategoryIcon(\n                          expense.category,\n                          expenseCategories\n                        )}\n                        label={getCategoryText(\n                          expense.category,\n                          expenseCategories\n                        )}\n                        color={getCategoryColor(\n                          expense.category,\n                          expenseCategories\n                        )}\n                        size=\"small\"\n                        sx={{ fontWeight: 600 }}\n                      />\n                    </Box>\n\n                    <Typography\n                      variant=\"body1\"\n                      sx={{\n                        fontWeight: 700,\n                        color: '#1976d2',\n                        display: 'flex',\n                        alignItems: 'center',\n                      }}\n                    >\n                      {expense.amount.toFixed(2)}‚Ç¨\n                    </Typography>\n\n                    <Typography\n                      variant=\"body2\"\n                      sx={{ display: 'flex', alignItems: 'center' }}\n                    >\n                      {format(new Date(expense.date), 'dd.MM.yyyy')}\n                    </Typography>\n\n                    <Typography\n                      variant=\"body2\"\n                      sx={{ display: 'flex', alignItems: 'center' }}\n                      noWrap\n                    >\n                      {expense.company}\n                    </Typography>\n\n                    <Typography\n                      variant=\"body2\"\n                      sx={{ display: 'flex', alignItems: 'center' }}\n                      noWrap\n                    >\n                      {vehicle\n                        ? `${vehicle.brand} ${vehicle.model} - ${vehicle.licensePlate}`\n                        : '-'}\n                    </Typography>\n\n                    <Box\n                      sx={{\n                        display: 'flex',\n                        gap: 0.5,\n                        justifyContent: 'center',\n                      }}\n                    >\n                      <Tooltip title=\"Upravi≈•\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleEditExpense(expense)}\n                          sx={{\n                            backgroundColor: '#f5f5f5',\n                            '&:hover': { backgroundColor: '#e0e0e0' },\n                          }}\n                        >\n                          <EditIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                      <Tooltip title=\"Zmaza≈•\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleDeleteExpense(expense)}\n                          sx={{\n                            backgroundColor: '#ffebee',\n                            color: '#d32f2f',\n                            '&:hover': { backgroundColor: '#ffcdd2' },\n                          }}\n                        >\n                          <DeleteIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Tooltip>\n                    </Box>\n                  </Box>\n                );\n              })\n            )}\n          </Box>\n        </Card>\n      )}\n\n      {/* Form Dialog */}\n      <Dialog\n        open={formOpen}\n        onClose={() => setFormOpen(false)}\n        maxWidth=\"md\"\n        fullWidth\n        fullScreen={isMobile}\n      >\n        <ExpenseForm\n          expense={editingExpense}\n          onSave={handleFormSubmit}\n          onCancel={() => setFormOpen(false)}\n          categories={expenseCategories}\n        />\n      </Dialog>\n\n      {/* Categories Manager Dialog */}\n      <ExpenseCategoryManager\n        open={categoriesManagerOpen}\n        onClose={() => setCategoriesManagerOpen(false)}\n        onCategoriesChanged={loadCategories}\n      />\n\n      {/* Recurring Expenses Manager Dialog */}\n      <RecurringExpenseManager\n        open={recurringManagerOpen}\n        onClose={() => setRecurringManagerOpen(false)}\n        onExpensesChanged={() => {\n          // Refresh expenses list when recurring expenses are generated\n          window.location.reload();\n        }}\n      />\n    </Box>\n  );\n};\n\nexport default ExpenseListNew;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/expenses/RecurringExpenseManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/firejet/FrameRoot3.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/firejet/MenuRoot3.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/firejet/assets/BlackrentLogoRoot3.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/firejet/assets/Icon24Px1Root3.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/firejet/assets/Icon24PxRoot3.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/firejet/assets/IkonyRoot3.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/insurances/InsuranceClaimForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getIncidentTypeInfo' is assigned a value but never used.","line":47,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5206,5209],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5206,5209],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":174,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5376,5379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5376,5379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":390,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":390,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13834,13837],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13834,13837],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":574,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":574,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20605,20608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20605,20608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Close as CloseIcon,\n  DirectionsCar as CarIcon,\n  Event as EventIcon,\n  Euro as EuroIcon,\n  LocationOn as LocationIcon,\n  Assignment as DocumentIcon,\n  Security as InsuranceIcon,\n  ReportProblem as ClaimIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Grid,\n  Typography,\n  Card,\n  CardContent,\n  Chip,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  IconButton,\n  Autocomplete,\n} from '@mui/material';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { sk } from 'date-fns/locale';\nimport React, { useState, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { useApp } from '../../context/AppContext';\nimport type { InsuranceClaim } from '../../types';\nimport R2FileUpload from '../common/R2FileUpload';\n\ninterface InsuranceClaimFormProps {\n  claim?: InsuranceClaim | null;\n  onSave: (claim: InsuranceClaim) => void;\n  onCancel: () => void;\n}\n\nconst getIncidentTypeInfo = (type: string) => {\n  switch (type) {\n    case 'accident':\n      return { label: 'Nehoda', color: '#d32f2f', icon: 'üöó' };\n    case 'theft':\n      return { label: 'Kr√°de≈æ', color: '#7b1fa2', icon: 'üîí' };\n    case 'vandalism':\n      return { label: 'Vandalizmus', color: '#f57c00', icon: 'üî®' };\n    case 'weather':\n      return { label: 'Poƒçasie', color: '#1976d2', icon: '‚õàÔ∏è' };\n    default:\n      return { label: 'In√©', color: '#616161', icon: '‚ùì' };\n  }\n};\n\nconst getStatusInfo = (status: string) => {\n  switch (status) {\n    case 'reported':\n      return { label: 'Nahl√°sen√©', color: '#f57c00' };\n    case 'investigating':\n      return { label: 'Vy≈°etruje sa', color: '#1976d2' };\n    case 'approved':\n      return { label: 'Schv√°len√©', color: '#388e3c' };\n    case 'rejected':\n      return { label: 'Zamietnut√©', color: '#d32f2f' };\n    case 'closed':\n      return { label: 'Uzavret√©', color: '#616161' };\n    default:\n      return { label: 'Nezn√°me', color: '#616161' };\n  }\n};\n\nexport default function InsuranceClaimForm({\n  claim,\n  onSave,\n  onCancel,\n}: InsuranceClaimFormProps) {\n  const { state, getEnhancedFilteredVehicles } = useApp();\n\n  const [formData, setFormData] = useState<Partial<InsuranceClaim>>({\n    vehicleId: claim?.vehicleId || '',\n    insuranceId: claim?.insuranceId || '',\n    incidentDate: claim?.incidentDate || new Date(),\n    description: claim?.description || '',\n    location: claim?.location || '',\n    incidentType: claim?.incidentType || 'accident',\n    estimatedDamage: claim?.estimatedDamage || 0,\n    deductible: claim?.deductible || 0,\n    payoutAmount: claim?.payoutAmount || 0,\n    status: claim?.status || 'reported',\n    claimNumber: claim?.claimNumber || '',\n    filePaths: claim?.filePaths || [],\n    policeReportNumber: claim?.policeReportNumber || '',\n    otherPartyInfo: claim?.otherPartyInfo || '',\n    notes: claim?.notes || '',\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [uploadedFiles, setUploadedFiles] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (claim) {\n      setFormData({\n        ...claim,\n        incidentDate: claim.incidentDate\n          ? new Date(claim.incidentDate)\n          : new Date(),\n      });\n      setUploadedFiles(claim.filePaths || []);\n    }\n  }, [claim]);\n\n  // Get available vehicles and their insurances (including private)\n  const availableVehicles =\n    getEnhancedFilteredVehicles({ includePrivate: true }) || [];\n  const vehicleInsurances = (state.insurances || []).filter(\n    ins => ins.vehicleId === formData.vehicleId\n  );\n\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!formData.vehicleId) {\n      newErrors.vehicleId = 'Vozidlo je povinn√©';\n    }\n    if (!formData.incidentDate) {\n      newErrors.incidentDate = 'D√°tum udalosti je povinn√Ω';\n    }\n    if (!formData.description || formData.description.trim() === '') {\n      newErrors.description = 'Popis udalosti je povinn√Ω';\n    }\n    if (!formData.incidentType) {\n      newErrors.incidentType = 'Typ udalosti je povinn√Ω';\n    }\n    if (formData.estimatedDamage && formData.estimatedDamage < 0) {\n      newErrors.estimatedDamage = 'Odhad ≈°kody nem√¥≈æe by≈• z√°porn√Ω';\n    }\n    if (formData.deductible && formData.deductible < 0) {\n      newErrors.deductible = 'Spolu√∫ƒças≈• nem√¥≈æe by≈• z√°porn√°';\n    }\n    if (formData.payoutAmount && formData.payoutAmount < 0) {\n      newErrors.payoutAmount = 'V√Ωplata nem√¥≈æe by≈• z√°porn√°';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    const claimData: InsuranceClaim = {\n      id: claim?.id || uuidv4(),\n      vehicleId: formData.vehicleId!,\n      insuranceId: formData.insuranceId,\n      incidentDate: formData.incidentDate!,\n      reportedDate: claim?.reportedDate || new Date(),\n      description: formData.description!,\n      location: formData.location,\n      incidentType: formData.incidentType! as any,\n      estimatedDamage: formData.estimatedDamage,\n      deductible: formData.deductible,\n      payoutAmount: formData.payoutAmount,\n      status: formData.status! as any,\n      claimNumber: formData.claimNumber,\n      filePaths: uploadedFiles,\n      policeReportNumber: formData.policeReportNumber,\n      otherPartyInfo: formData.otherPartyInfo,\n      notes: formData.notes,\n      createdAt: claim?.createdAt || new Date(),\n      updatedAt: new Date(),\n    };\n\n    onSave(claimData);\n  };\n\n  const handleFileUploadSuccess = (\n    fileData:\n      | { url: string; key: string; filename: string }\n      | { url: string; key: string; filename: string }[]\n  ) => {\n    if (Array.isArray(fileData)) {\n      setUploadedFiles(prev => [...prev, ...fileData.map(f => f.url)]);\n    } else {\n      setUploadedFiles(prev => [...prev, fileData.url]);\n    }\n  };\n\n  const handleRemoveFile = (fileUrl: string) => {\n    setUploadedFiles(prev => prev.filter(url => url !== fileUrl));\n  };\n\n  const statusInfo = getStatusInfo(formData.status || 'reported');\n\n  return (\n    <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={sk}>\n      <form onSubmit={handleSubmit}>\n        <DialogTitle\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            pb: 1,\n          }}\n        >\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <ClaimIcon sx={{ color: '#d32f2f' }} />\n            <Typography variant=\"h6\">\n              {claim ? 'Upravi≈• poistn√∫ udalos≈•' : 'Prida≈• poistn√∫ udalos≈•'}\n            </Typography>\n          </Box>\n          <IconButton onClick={onCancel} size=\"small\">\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n\n        <DialogContent dividers sx={{ p: 3 }}>\n          {/* Basic Information */}\n          <Card sx={{ mb: 3 }}>\n            <CardContent>\n              <Typography\n                variant=\"h6\"\n                sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n              >\n                <EventIcon sx={{ color: '#1976d2' }} />\n                Z√°kladn√© inform√°cie\n              </Typography>\n\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <Box sx={{ position: 'relative' }}>\n                    <Autocomplete\n                      fullWidth\n                      options={availableVehicles.slice().sort((a, b) => {\n                        const aText = `${a.brand} ${a.model} (${a.licensePlate})`;\n                        const bText = `${b.brand} ${b.model} (${b.licensePlate})`;\n                        return aText.localeCompare(bText, 'sk', {\n                          sensitivity: 'base',\n                        });\n                      })}\n                      getOptionLabel={vehicle =>\n                        `${vehicle.brand} ${vehicle.model} (${vehicle.licensePlate})`\n                      }\n                      value={\n                        availableVehicles.find(\n                          v => v.id === formData.vehicleId\n                        ) || null\n                      }\n                      onChange={(_, newValue) =>\n                        setFormData(prev => ({\n                          ...prev,\n                          vehicleId: newValue?.id || '',\n                          insuranceId: '',\n                        }))\n                      }\n                      renderInput={params => (\n                        <TextField\n                          {...params}\n                          label=\"Vozidlo *\"\n                          required\n                          error={!!errors.vehicleId}\n                          placeholder=\"Zaƒçnite p√≠sa≈• pre vyhƒæadanie vozidla...\"\n                          InputProps={{\n                            ...params.InputProps,\n                            startAdornment: (\n                              <>\n                                <CarIcon\n                                  sx={{ fontSize: 16, color: '#1976d2', mr: 1 }}\n                                />\n                                {params.InputProps.startAdornment}\n                              </>\n                            ),\n                          }}\n                        />\n                      )}\n                      renderOption={(props, vehicle) => (\n                        <Box component=\"li\" {...props}>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <CarIcon sx={{ fontSize: 16, color: '#1976d2' }} />\n                            {vehicle.brand} {vehicle.model} (\n                            {vehicle.licensePlate})\n                          </Box>\n                        </Box>\n                      )}\n                      noOptionsText=\"≈Ωiadne vozidl√° nen√°jden√©\"\n                      filterOptions={(options, { inputValue }) => {\n                        const filtered = options.filter(option => {\n                          const searchText =\n                            `${option.brand} ${option.model} ${option.licensePlate}`.toLowerCase();\n                          return searchText.includes(inputValue.toLowerCase());\n                        });\n                        return filtered;\n                      }}\n                    />\n                    {errors.vehicleId && (\n                      <Typography\n                        variant=\"caption\"\n                        color=\"error\"\n                        sx={{ mt: 0.5, display: 'block' }}\n                      >\n                        {errors.vehicleId}\n                      </Typography>\n                    )}\n                  </Box>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <FormControl fullWidth>\n                    <InputLabel>S√∫visiaca poistka</InputLabel>\n                    <Select\n                      value={formData.insuranceId || ''}\n                      onChange={e =>\n                        setFormData(prev => ({\n                          ...prev,\n                          insuranceId: e.target.value,\n                        }))\n                      }\n                      label=\"S√∫visiaca poistka\"\n                      disabled={!formData.vehicleId}\n                    >\n                      <MenuItem value=\"\">≈Ωiadna</MenuItem>\n                      {vehicleInsurances.map(insurance => (\n                        <MenuItem key={insurance.id} value={insurance.id}>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <InsuranceIcon\n                              sx={{ fontSize: 16, color: '#1976d2' }}\n                            />\n                            {insurance.company} - {insurance.policyNumber}\n                          </Box>\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <DateTimePicker\n                    label=\"D√°tum a ƒças udalosti *\"\n                    value={\n                      formData.incidentDate\n                        ? new Date(formData.incidentDate)\n                        : null\n                    }\n                    onChange={newValue =>\n                      setFormData(prev => ({\n                        ...prev,\n                        incidentDate: newValue || new Date(),\n                      }))\n                    }\n                    slotProps={{\n                      textField: {\n                        fullWidth: true,\n                        error: !!errors.incidentDate,\n                        helperText: errors.incidentDate,\n                      },\n                    }}\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <FormControl fullWidth error={!!errors.incidentType}>\n                    <InputLabel>Typ udalosti *</InputLabel>\n                    <Select\n                      value={formData.incidentType || 'accident'}\n                      onChange={e =>\n                        setFormData(prev => ({\n                          ...prev,\n                          incidentType: e.target.value as any,\n                        }))\n                      }\n                      label=\"Typ udalosti *\"\n                    >\n                      <MenuItem value=\"accident\">\n                        <Box\n                          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                        >\n                          üöó Nehoda\n                        </Box>\n                      </MenuItem>\n                      <MenuItem value=\"theft\">\n                        <Box\n                          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                        >\n                          üîí Kr√°de≈æ\n                        </Box>\n                      </MenuItem>\n                      <MenuItem value=\"vandalism\">\n                        <Box\n                          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                        >\n                          üî® Vandalizmus\n                        </Box>\n                      </MenuItem>\n                      <MenuItem value=\"weather\">\n                        <Box\n                          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                        >\n                          ‚õàÔ∏è Poveternostn√° udalos≈•\n                        </Box>\n                      </MenuItem>\n                      <MenuItem value=\"other\">\n                        <Box\n                          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                        >\n                          ‚ùì In√©\n                        </Box>\n                      </MenuItem>\n                    </Select>\n                    {errors.incidentType && (\n                      <Typography\n                        variant=\"caption\"\n                        color=\"error\"\n                        sx={{ mt: 0.5 }}\n                      >\n                        {errors.incidentType}\n                      </Typography>\n                    )}\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Popis udalosti *\"\n                    multiline\n                    rows={3}\n                    value={formData.description || ''}\n                    onChange={e =>\n                      setFormData(prev => ({\n                        ...prev,\n                        description: e.target.value,\n                      }))\n                    }\n                    error={!!errors.description}\n                    helperText={errors.description}\n                    placeholder=\"Op√≠≈°te detailne ƒço sa stalo...\"\n                  />\n                </Grid>\n\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Miesto udalosti\"\n                    value={formData.location || ''}\n                    onChange={e =>\n                      setFormData(prev => ({\n                        ...prev,\n                        location: e.target.value,\n                      }))\n                    }\n                    placeholder=\"Ulica, mesto, GPS s√∫radnice...\"\n                    InputProps={{\n                      startAdornment: (\n                        <LocationIcon sx={{ mr: 1, color: 'text.secondary' }} />\n                      ),\n                    }}\n                  />\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n\n          {/* Financial Information */}\n          <Card sx={{ mb: 3 }}>\n            <CardContent>\n              <Typography\n                variant=\"h6\"\n                sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n              >\n                <EuroIcon sx={{ color: '#388e3c' }} />\n                Finanƒçn√© √∫daje\n              </Typography>\n\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={4}>\n                  <TextField\n                    fullWidth\n                    label=\"Odhad ≈°kody (‚Ç¨)\"\n                    type=\"number\"\n                    value={formData.estimatedDamage || ''}\n                    onChange={e =>\n                      setFormData(prev => ({\n                        ...prev,\n                        estimatedDamage: parseFloat(e.target.value) || 0,\n                      }))\n                    }\n                    error={!!errors.estimatedDamage}\n                    helperText={errors.estimatedDamage}\n                    inputProps={{ min: 0, step: 0.01 }}\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={4}>\n                  <TextField\n                    fullWidth\n                    label=\"Spolu√∫ƒças≈• (‚Ç¨)\"\n                    type=\"number\"\n                    value={formData.deductible || ''}\n                    onChange={e =>\n                      setFormData(prev => ({\n                        ...prev,\n                        deductible: parseFloat(e.target.value) || 0,\n                      }))\n                    }\n                    error={!!errors.deductible}\n                    helperText={errors.deductible}\n                    inputProps={{ min: 0, step: 0.01 }}\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={4}>\n                  <TextField\n                    fullWidth\n                    label=\"V√Ωplata pois≈•ovne (‚Ç¨)\"\n                    type=\"number\"\n                    value={formData.payoutAmount || ''}\n                    onChange={e =>\n                      setFormData(prev => ({\n                        ...prev,\n                        payoutAmount: parseFloat(e.target.value) || 0,\n                      }))\n                    }\n                    error={!!errors.payoutAmount}\n                    helperText={errors.payoutAmount}\n                    inputProps={{ min: 0, step: 0.01 }}\n                  />\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n\n          {/* Status and Additional Info */}\n          <Card sx={{ mb: 3 }}>\n            <CardContent>\n              <Typography\n                variant=\"h6\"\n                sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n              >\n                <DocumentIcon sx={{ color: '#f57c00' }} />\n                Stav a dodatoƒçn√© inform√°cie\n              </Typography>\n\n              <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                  <FormControl fullWidth>\n                    <InputLabel>Stav</InputLabel>\n                    <Select\n                      value={formData.status || 'reported'}\n                      onChange={e =>\n                        setFormData(prev => ({\n                          ...prev,\n                          status: e.target.value as any,\n                        }))\n                      }\n                      label=\"Stav\"\n                    >\n                      <MenuItem value=\"reported\">Nahl√°sen√©</MenuItem>\n                      <MenuItem value=\"investigating\">Vy≈°etruje sa</MenuItem>\n                      <MenuItem value=\"approved\">Schv√°len√©</MenuItem>\n                      <MenuItem value=\"rejected\">Zamietnut√©</MenuItem>\n                      <MenuItem value=\"closed\">Uzavret√©</MenuItem>\n                    </Select>\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <TextField\n                    fullWidth\n                    label=\"ƒå√≠slo ≈°kodovej udalosti\"\n                    value={formData.claimNumber || ''}\n                    onChange={e =>\n                      setFormData(prev => ({\n                        ...prev,\n                        claimNumber: e.target.value,\n                      }))\n                    }\n                    placeholder=\"ƒå√≠slo z pois≈•ovne...\"\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <TextField\n                    fullWidth\n                    label=\"ƒå√≠slo policajn√©ho protokolu\"\n                    value={formData.policeReportNumber || ''}\n                    onChange={e =>\n                      setFormData(prev => ({\n                        ...prev,\n                        policeReportNumber: e.target.value,\n                      }))\n                    }\n                    placeholder=\"Ak bol privolan√Ω...\"\n                  />\n                </Grid>\n\n                <Grid item xs={12} md={6}>\n                  <Box\n                    sx={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 1,\n                      mt: 1,\n                    }}\n                  >\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Aktu√°lny stav:\n                    </Typography>\n                    <Chip\n                      label={statusInfo.label}\n                      size=\"small\"\n                      sx={{\n                        backgroundColor: `${statusInfo.color}20`,\n                        color: statusInfo.color,\n                        fontWeight: 600,\n                      }}\n                    />\n                  </Box>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Inform√°cie o druhej strane\"\n                    multiline\n                    rows={2}\n                    value={formData.otherPartyInfo || ''}\n                    onChange={e =>\n                      setFormData(prev => ({\n                        ...prev,\n                        otherPartyInfo: e.target.value,\n                      }))\n                    }\n                    placeholder=\"√ödaje o druhom √∫ƒçastn√≠kovi nehody (meno, telef√≥n, poistka...)...\"\n                  />\n                </Grid>\n\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Pozn√°mky\"\n                    multiline\n                    rows={2}\n                    value={formData.notes || ''}\n                    onChange={e =>\n                      setFormData(prev => ({ ...prev, notes: e.target.value }))\n                    }\n                    placeholder=\"ƒéal≈°ie pozn√°mky...\"\n                  />\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n\n          {/* File Upload */}\n          <Card>\n            <CardContent>\n              <Typography\n                variant=\"h6\"\n                sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n              >\n                <DocumentIcon sx={{ color: '#7b1fa2' }} />\n                S√∫bory a dokumenty\n              </Typography>\n\n              <Box sx={{ mb: 2 }}>\n                <R2FileUpload\n                  type=\"document\"\n                  entityId={formData.vehicleId || 'temp'}\n                  onUploadSuccess={handleFileUploadSuccess}\n                  onUploadError={error => console.error('Upload error:', error)}\n                  acceptedTypes={[\n                    'image/jpeg',\n                    'image/png',\n                    'image/webp',\n                    'application/pdf',\n                  ]}\n                  maxSize={10}\n                  multiple={true}\n                  label=\"Nahra≈• s√∫bory (fotky, dokumenty)\"\n                />\n              </Box>\n\n              {uploadedFiles.length > 0 && (\n                <Box>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"text.secondary\"\n                    sx={{ mb: 1 }}\n                  >\n                    Nahran√© s√∫bory ({uploadedFiles.length}):\n                  </Typography>\n                  <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n                    {uploadedFiles.map((fileUrl, index) => (\n                      <Chip\n                        key={index}\n                        label={`S√∫bor ${index + 1}`}\n                        onDelete={() => handleRemoveFile(fileUrl)}\n                        onClick={() => window.open(fileUrl, '_blank')}\n                        size=\"small\"\n                        variant=\"outlined\"\n                        sx={{ cursor: 'pointer' }}\n                      />\n                    ))}\n                  </Box>\n                </Box>\n              )}\n            </CardContent>\n          </Card>\n        </DialogContent>\n\n        <DialogActions sx={{ p: 3, gap: 1 }}>\n          <Button onClick={onCancel} color=\"inherit\">\n            Zru≈°i≈•\n          </Button>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            sx={{\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              '&:hover': {\n                background: 'linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)',\n              },\n            }}\n          >\n            {claim ? 'Ulo≈æi≈• zmeny' : 'Vytvori≈• udalos≈•'}\n          </Button>\n        </DialogActions>\n      </form>\n    </LocalizationProvider>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/insurances/InsuranceClaimList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'List' is defined but never used.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListItem' is defined but never used.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListItemText' is defined but never used.","line":47,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListItemIcon' is defined but never used.","line":48,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":49,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Collapse' is defined but never used.","line":50,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used.","line":51,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":8},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"The 'claims' logical expression could make the dependencies of useMemo Hook (at line 169) change on every render. To fix this, wrap the initialization of 'claims' in its own useMemo() Hook.","line":147,"column":9,"nodeType":"VariableDeclarator","endLine":147,"endColumn":45}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Add as AddIcon,\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  Search as SearchIcon,\n  FilterList as FilterListIcon,\n  DirectionsCar as CarIcon,\n  Event as EventIcon,\n  Euro as EuroIcon,\n  Warning as WarningIcon,\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n  Schedule as ScheduleIcon,\n  ReportProblem as ClaimIcon,\n  Close as CloseIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  Dialog,\n  IconButton,\n  Typography,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Grid,\n  Tooltip,\n  CircularProgress,\n  Fab,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  TablePagination,\n  useMediaQuery,\n  useTheme,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Divider,\n  Collapse,\n  Stack,\n} from '@mui/material';\nimport { format } from 'date-fns';\nimport { sk } from 'date-fns/locale';\nimport React, { useState, useMemo } from 'react';\n\nimport { useApp } from '../../context/AppContext';\nimport type { InsuranceClaim } from '../../types';\n\nimport InsuranceClaimForm from './InsuranceClaimForm';\n\nconst getIncidentTypeInfo = (type: string) => {\n  switch (type) {\n    case 'accident':\n      return { label: 'Nehoda', color: '#d32f2f', bgColor: '#ffebee' };\n    case 'theft':\n      return { label: 'Kr√°de≈æ', color: '#7b1fa2', bgColor: '#f3e5f5' };\n    case 'vandalism':\n      return { label: 'Vandalizmus', color: '#f57c00', bgColor: '#fff3e0' };\n    case 'weather':\n      return { label: 'Poƒçasie', color: '#1976d2', bgColor: '#e3f2fd' };\n    default:\n      return { label: 'In√©', color: '#616161', bgColor: '#f5f5f5' };\n  }\n};\n\nconst getStatusInfo = (status: string) => {\n  switch (status) {\n    case 'reported':\n      return {\n        label: 'Nahl√°sen√©',\n        color: '#f57c00',\n        bgColor: '#fff3e0',\n        icon: <ScheduleIcon sx={{ fontSize: 14 }} />,\n      };\n    case 'investigating':\n      return {\n        label: 'Vy≈°etruje sa',\n        color: '#1976d2',\n        bgColor: '#e3f2fd',\n        icon: <SearchIcon sx={{ fontSize: 14 }} />,\n      };\n    case 'approved':\n      return {\n        label: 'Schv√°len√©',\n        color: '#388e3c',\n        bgColor: '#e8f5e8',\n        icon: <CheckCircleIcon sx={{ fontSize: 14 }} />,\n      };\n    case 'rejected':\n      return {\n        label: 'Zamietnut√©',\n        color: '#d32f2f',\n        bgColor: '#ffebee',\n        icon: <ErrorIcon sx={{ fontSize: 14 }} />,\n      };\n    case 'closed':\n      return {\n        label: 'Uzavret√©',\n        color: '#616161',\n        bgColor: '#f5f5f5',\n        icon: <CheckCircleIcon sx={{ fontSize: 14 }} />,\n      };\n    default:\n      return {\n        label: 'Nezn√°me',\n        color: '#616161',\n        bgColor: '#f5f5f5',\n        icon: <WarningIcon sx={{ fontSize: 14 }} />,\n      };\n  }\n};\n\nexport default function InsuranceClaimList() {\n  const {\n    state,\n    createInsuranceClaim,\n    updateInsuranceClaim,\n    deleteInsuranceClaim,\n  } = useApp();\n\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const isTablet = useMediaQuery(theme.breakpoints.down('lg'));\n\n  const [openDialog, setOpenDialog] = useState(false);\n  const [editingClaim, setEditingClaim] = useState<InsuranceClaim | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterVehicle, setFilterVehicle] = useState('');\n  const [filterStatus, setFilterStatus] = useState('');\n  const [filterType, setFilterType] = useState('');\n  const [showFilters, setShowFilters] = useState(false);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(isMobile ? 5 : 10);\n\n  // Get insurance claims from state\n  const claims = state.insuranceClaims || [];\n\n  // Filter claims\n  const filteredClaims = useMemo(() => {\n    return claims.filter(claim => {\n      const matchesSearch =\n        !searchQuery ||\n        claim.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (claim.claimNumber &&\n          claim.claimNumber\n            .toLowerCase()\n            .includes(searchQuery.toLowerCase())) ||\n        (claim.location &&\n          claim.location.toLowerCase().includes(searchQuery.toLowerCase()));\n\n      const matchesVehicle =\n        !filterVehicle || claim.vehicleId === filterVehicle;\n      const matchesStatus = !filterStatus || claim.status === filterStatus;\n      const matchesType = !filterType || claim.incidentType === filterType;\n\n      return matchesSearch && matchesVehicle && matchesStatus && matchesType;\n    });\n  }, [claims, searchQuery, filterVehicle, filterStatus, filterType]);\n\n  // Paginated claims\n  const paginatedClaims = useMemo(() => {\n    const startIndex = page * rowsPerPage;\n    return filteredClaims.slice(startIndex, startIndex + rowsPerPage);\n  }, [filteredClaims, page, rowsPerPage]);\n\n  const handleAdd = () => {\n    setEditingClaim(null);\n    setOpenDialog(true);\n  };\n\n  const handleEdit = (claim: InsuranceClaim) => {\n    setEditingClaim(claim);\n    setOpenDialog(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (window.confirm('Naozaj chcete vymaza≈• t√∫to poistn√∫ udalos≈•?')) {\n      try {\n        await deleteInsuranceClaim(id);\n      } catch (error) {\n        alert('Chyba pri mazan√≠ poistnej udalosti');\n      }\n    }\n  };\n\n  const handleSave = async (claimData: InsuranceClaim) => {\n    try {\n      if (editingClaim && editingClaim.id) {\n        await updateInsuranceClaim(claimData);\n      } else {\n        await createInsuranceClaim(claimData);\n      }\n      setOpenDialog(false);\n      setEditingClaim(null);\n    } catch (error) {\n      console.error('Chyba pri ukladan√≠ poistnej udalosti:', error);\n      alert(\n        'Chyba pri ukladan√≠ poistnej udalosti: ' +\n          (error instanceof Error ? error.message : 'Nezn√°ma chyba')\n      );\n    }\n  };\n\n  const clearFilters = () => {\n    setSearchQuery('');\n    setFilterVehicle('');\n    setFilterStatus('');\n    setFilterType('');\n  };\n\n  const hasActiveFilters =\n    searchQuery || filterVehicle || filterStatus || filterType;\n\n  const handleChangePage = (event: unknown, newPage: number) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  if (!state.insuranceClaims) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: 200,\n        }}\n      >\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box\n      sx={{\n        p: { xs: 1, sm: 2, md: 3 },\n        width: '100%',\n        maxWidth: '100%',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Responsive Header */}\n      <Card\n        sx={{\n          mb: { xs: 2, sm: 3 },\n          boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n          borderRadius: { xs: 2, sm: 3 },\n        }}\n      >\n        <CardContent\n          sx={{\n            background: 'linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%)',\n            color: 'white',\n            p: { xs: 2, sm: 2.5, md: 3 },\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: isMobile ? 'flex-start' : 'center',\n              flexDirection: isMobile ? 'column' : 'row',\n              gap: { xs: 2, sm: 2 },\n            }}\n          >\n            <Box\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: { xs: 1.5, sm: 2 },\n                width: isMobile ? '100%' : 'auto',\n              }}\n            >\n              <ClaimIcon\n                sx={{\n                  fontSize: { xs: 24, sm: 28, md: 32 },\n                  flexShrink: 0,\n                }}\n              />\n              <Box sx={{ minWidth: 0, flex: 1 }}>\n                <Typography\n                  variant={isMobile ? 'h6' : isTablet ? 'h5' : 'h4'}\n                  sx={{\n                    fontWeight: 700,\n                    mb: 0.5,\n                    fontSize: {\n                      xs: '1.1rem',\n                      sm: '1.25rem',\n                      md: '1.5rem',\n                      lg: '2rem',\n                    },\n                    lineHeight: 1.2,\n                  }}\n                >\n                  {isMobile ? 'Poistn√© udalosti' : 'Poistn√© udalosti'}\n                </Typography>\n                <Typography\n                  variant={isMobile ? 'body2' : 'body1'}\n                  sx={{\n                    opacity: 0.9,\n                    fontSize: { xs: '0.875rem', sm: '1rem' },\n                  }}\n                >\n                  {claims.length} udalost√≠ celkom\n                </Typography>\n              </Box>\n            </Box>\n\n            {!isMobile && (\n              <Button\n                variant=\"contained\"\n                startIcon={<AddIcon />}\n                onClick={handleAdd}\n                size={isTablet ? 'medium' : 'large'}\n                sx={{\n                  backgroundColor: 'rgba(255,255,255,0.2)',\n                  backdropFilter: 'blur(10px)',\n                  border: '1px solid rgba(255,255,255,0.3)',\n                  whiteSpace: 'nowrap',\n                  flexShrink: 0,\n                  '&:hover': {\n                    backgroundColor: 'rgba(255,255,255,0.3)',\n                  },\n                }}\n              >\n                Prida≈• udalos≈•\n              </Button>\n            )}\n          </Box>\n        </CardContent>\n      </Card>\n\n      {/* Responsive Statistics */}\n      <Grid container spacing={{ xs: 1, sm: 2 }} sx={{ mb: { xs: 2, sm: 3 } }}>\n        <Grid item xs={6} sm={6} md={3}>\n          <Card\n            sx={{\n              height: '100%',\n              background: 'linear-gradient(135deg, #ff9800 0%, #f57c00 100%)',\n              color: 'white',\n              minHeight: { xs: 80, sm: 100, md: 120 },\n              borderRadius: { xs: 2, sm: 3 },\n              transition: 'transform 0.2s ease-in-out',\n              '&:hover': {\n                transform: isMobile ? 'none' : 'translateY(-2px)',\n              },\n            }}\n          >\n            <CardContent\n              sx={{\n                p: { xs: 1.5, sm: 2, md: 2.5 },\n                '&:last-child': { pb: { xs: 1.5, sm: 2, md: 2.5 } },\n              }}\n            >\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  flexDirection: isMobile ? 'column' : 'row',\n                  textAlign: isMobile ? 'center' : 'left',\n                  gap: isMobile ? 1 : 0,\n                }}\n              >\n                <Box sx={{ order: isMobile ? 2 : 1 }}>\n                  <Typography\n                    variant={\n                      isMobile ? 'caption' : isTablet ? 'subtitle2' : 'h6'\n                    }\n                    sx={{\n                      fontWeight: 600,\n                      fontSize: { xs: '0.75rem', sm: '0.875rem', md: '1rem' },\n                      letterSpacing: 0.5,\n                      mb: { xs: 0.5, sm: 1 },\n                    }}\n                  >\n                    CELKOM\n                  </Typography>\n                  <Typography\n                    variant={isMobile ? 'h6' : isTablet ? 'h5' : 'h4'}\n                    sx={{\n                      fontWeight: 700,\n                      fontSize: { xs: '1.25rem', sm: '1.5rem', md: '2rem' },\n                    }}\n                  >\n                    {claims.length}\n                  </Typography>\n                </Box>\n                <ClaimIcon\n                  sx={{\n                    fontSize: { xs: 20, sm: 32, md: 40 },\n                    opacity: 0.8,\n                    order: isMobile ? 1 : 2,\n                  }}\n                />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={6} sm={6} md={3}>\n          <Card\n            sx={{\n              height: '100%',\n              background: 'linear-gradient(135deg, #2196f3 0%, #1976d2 100%)',\n              color: 'white',\n              minHeight: { xs: 100, sm: 120 },\n            }}\n          >\n            <CardContent sx={{ p: { xs: 1.5, sm: 2 } }}>\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  flexDirection: { xs: 'column', sm: 'row' },\n                  textAlign: { xs: 'center', sm: 'left' },\n                  gap: { xs: 1, sm: 0 },\n                }}\n              >\n                <Box>\n                  <Typography\n                    variant=\"h6\"\n                    sx={{\n                      fontWeight: 600,\n                      fontSize: { xs: '0.75rem', sm: '1.25rem' },\n                    }}\n                  >\n                    VY≈†ETRUJE SA\n                  </Typography>\n                  <Typography\n                    variant=\"h4\"\n                    sx={{\n                      fontWeight: 700,\n                      fontSize: { xs: '1.5rem', sm: '2.125rem' },\n                    }}\n                  >\n                    {claims.filter(c => c.status === 'investigating').length}\n                  </Typography>\n                </Box>\n                <SearchIcon\n                  sx={{\n                    fontSize: { xs: 24, sm: 40 },\n                    opacity: 0.8,\n                    display: { xs: 'none', sm: 'block' },\n                  }}\n                />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={6} sm={6} md={3}>\n          <Card\n            sx={{\n              height: '100%',\n              background: 'linear-gradient(135deg, #4caf50 0%, #388e3c 100%)',\n              color: 'white',\n              minHeight: { xs: 100, sm: 120 },\n            }}\n          >\n            <CardContent sx={{ p: { xs: 1.5, sm: 2 } }}>\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  flexDirection: { xs: 'column', sm: 'row' },\n                  textAlign: { xs: 'center', sm: 'left' },\n                  gap: { xs: 1, sm: 0 },\n                }}\n              >\n                <Box>\n                  <Typography\n                    variant=\"h6\"\n                    sx={{\n                      fontWeight: 600,\n                      fontSize: { xs: '0.75rem', sm: '1.25rem' },\n                    }}\n                  >\n                    SCHV√ÅLEN√â\n                  </Typography>\n                  <Typography\n                    variant=\"h4\"\n                    sx={{\n                      fontWeight: 700,\n                      fontSize: { xs: '1.5rem', sm: '2.125rem' },\n                    }}\n                  >\n                    {claims.filter(c => c.status === 'approved').length}\n                  </Typography>\n                </Box>\n                <CheckCircleIcon\n                  sx={{\n                    fontSize: { xs: 24, sm: 40 },\n                    opacity: 0.8,\n                    display: { xs: 'none', sm: 'block' },\n                  }}\n                />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={6} sm={6} md={3}>\n          <Card\n            sx={{\n              height: '100%',\n              background: 'linear-gradient(135deg, #f44336 0%, #d32f2f 100%)',\n              color: 'white',\n              minHeight: { xs: 100, sm: 120 },\n            }}\n          >\n            <CardContent sx={{ p: { xs: 1.5, sm: 2 } }}>\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  flexDirection: { xs: 'column', sm: 'row' },\n                  textAlign: { xs: 'center', sm: 'left' },\n                  gap: { xs: 1, sm: 0 },\n                }}\n              >\n                <Box>\n                  <Typography\n                    variant=\"h6\"\n                    sx={{\n                      fontWeight: 600,\n                      fontSize: { xs: '0.75rem', sm: '1.25rem' },\n                    }}\n                  >\n                    ZAMIETNUT√â\n                  </Typography>\n                  <Typography\n                    variant=\"h4\"\n                    sx={{\n                      fontWeight: 700,\n                      fontSize: { xs: '1.5rem', sm: '2.125rem' },\n                    }}\n                  >\n                    {claims.filter(c => c.status === 'rejected').length}\n                  </Typography>\n                </Box>\n                <ErrorIcon\n                  sx={{\n                    fontSize: { xs: 24, sm: 40 },\n                    opacity: 0.8,\n                    display: { xs: 'none', sm: 'block' },\n                  }}\n                />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Search and Filters */}\n      <Card sx={{ mb: 3, boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n        <CardContent sx={{ p: { xs: 2, sm: 3 } }}>\n          <Box\n            sx={{\n              display: 'flex',\n              gap: { xs: 1, sm: 2 },\n              mb: showFilters ? 2 : 0,\n              flexDirection: { xs: 'column', sm: 'row' },\n              alignItems: { xs: 'stretch', sm: 'center' },\n            }}\n          >\n            <TextField\n              placeholder=\"Vyhƒæada≈• udalos≈•...\"\n              value={searchQuery}\n              onChange={e => setSearchQuery(e.target.value)}\n              InputProps={{\n                startAdornment: (\n                  <SearchIcon sx={{ color: 'text.secondary', mr: 1 }} />\n                ),\n              }}\n              sx={{\n                flex: 1,\n                minWidth: { xs: 'auto', sm: '250px' },\n                mb: { xs: 1, sm: 0 },\n              }}\n              size=\"medium\"\n            />\n            <Box\n              sx={{\n                display: 'flex',\n                gap: 1,\n                flexDirection: { xs: 'row', sm: 'row' },\n                justifyContent: { xs: 'space-between', sm: 'flex-start' },\n              }}\n            >\n              <Button\n                variant={showFilters ? 'contained' : 'outlined'}\n                startIcon={\n                  <FilterListIcon sx={{ fontSize: { xs: 18, sm: 20 } }} />\n                }\n                onClick={() => setShowFilters(!showFilters)}\n                sx={{\n                  whiteSpace: 'nowrap',\n                  fontSize: { xs: '0.875rem', sm: '1rem' },\n                  px: { xs: 2, sm: 3 },\n                  flex: { xs: 1, sm: 'none' },\n                }}\n                size=\"medium\"\n              >\n                <Box\n                  component=\"span\"\n                  sx={{ display: { xs: 'none', sm: 'inline' } }}\n                >\n                  Filtre{' '}\n                  {hasActiveFilters &&\n                    `(${[searchQuery, filterVehicle, filterStatus, filterType].filter(Boolean).length})`}\n                </Box>\n                <Box\n                  component=\"span\"\n                  sx={{ display: { xs: 'inline', sm: 'none' } }}\n                >\n                  Filtre\n                </Box>\n              </Button>\n              {hasActiveFilters && (\n                <Button\n                  variant=\"outlined\"\n                  startIcon={\n                    <CloseIcon sx={{ fontSize: { xs: 18, sm: 20 } }} />\n                  }\n                  onClick={clearFilters}\n                  sx={{\n                    whiteSpace: 'nowrap',\n                    fontSize: { xs: '0.875rem', sm: '1rem' },\n                    px: { xs: 2, sm: 3 },\n                    flex: { xs: 1, sm: 'none' },\n                  }}\n                  size=\"medium\"\n                >\n                  <Box\n                    component=\"span\"\n                    sx={{ display: { xs: 'none', sm: 'inline' } }}\n                  >\n                    Vyƒçisti≈•\n                  </Box>\n                  <Box\n                    component=\"span\"\n                    sx={{ display: { xs: 'inline', sm: 'none' } }}\n                  >\n                    Reset\n                  </Box>\n                </Button>\n              )}\n            </Box>\n          </Box>\n\n          {showFilters && (\n            <Grid container spacing={{ xs: 1, sm: 2 }}>\n              <Grid item xs={12} sm={6} md={3}>\n                <FormControl fullWidth size=\"small\">\n                  <InputLabel>Vozidlo</InputLabel>\n                  <Select\n                    value={filterVehicle}\n                    onChange={e => setFilterVehicle(e.target.value)}\n                    label=\"Vozidlo\"\n                  >\n                    <MenuItem value=\"\">V≈°etky</MenuItem>\n                    {state.vehicles?.map(vehicle => (\n                      <MenuItem key={vehicle.id} value={vehicle.id}>\n                        <Box\n                          sx={{\n                            display: 'flex',\n                            flexDirection: 'column',\n                            fontSize: { xs: '0.875rem', sm: '1rem' },\n                          }}\n                        >\n                          <span>\n                            {vehicle.brand} {vehicle.model}\n                          </span>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {vehicle.licensePlate}\n                          </Typography>\n                        </Box>\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <FormControl fullWidth size=\"small\">\n                  <InputLabel>Stav</InputLabel>\n                  <Select\n                    value={filterStatus}\n                    onChange={e => setFilterStatus(e.target.value)}\n                    label=\"Stav\"\n                  >\n                    <MenuItem value=\"\">V≈°etky</MenuItem>\n                    <MenuItem value=\"reported\">Nahl√°sen√©</MenuItem>\n                    <MenuItem value=\"investigating\">Vy≈°etruje sa</MenuItem>\n                    <MenuItem value=\"approved\">Schv√°len√©</MenuItem>\n                    <MenuItem value=\"rejected\">Zamietnut√©</MenuItem>\n                    <MenuItem value=\"closed\">Uzavret√©</MenuItem>\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <FormControl fullWidth size=\"small\">\n                  <InputLabel>Typ udalosti</InputLabel>\n                  <Select\n                    value={filterType}\n                    onChange={e => setFilterType(e.target.value)}\n                    label=\"Typ udalosti\"\n                  >\n                    <MenuItem value=\"\">V≈°etky</MenuItem>\n                    <MenuItem value=\"accident\">Nehoda</MenuItem>\n                    <MenuItem value=\"theft\">Kr√°de≈æ</MenuItem>\n                    <MenuItem value=\"vandalism\">Vandalizmus</MenuItem>\n                    <MenuItem value=\"weather\">Poƒçasie</MenuItem>\n                    <MenuItem value=\"other\">In√©</MenuItem>\n                  </Select>\n                </FormControl>\n              </Grid>\n            </Grid>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Claims Table/Cards */}\n      {filteredClaims.length === 0 ? (\n        <Card sx={{ textAlign: 'center', py: { xs: 4, sm: 6 } }}>\n          <CardContent>\n            <ClaimIcon\n              sx={{\n                fontSize: { xs: 48, sm: 64 },\n                color: 'text.secondary',\n                mb: 2,\n              }}\n            />\n            <Typography\n              variant=\"h6\"\n              sx={{ mb: 1, fontSize: { xs: '1rem', sm: '1.25rem' } }}\n              color=\"text.secondary\"\n            >\n              {hasActiveFilters ? '≈Ωiadne v√Ωsledky' : '≈Ωiadne poistn√© udalosti'}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\n              {hasActiveFilters\n                ? 'Sk√∫ste zmeni≈• filter alebo vyhƒæad√°vac√≠ v√Ωraz'\n                : 'Zatiaƒæ neboli vytvoren√© ≈æiadne poistn√© udalosti'}\n            </Typography>\n            {!hasActiveFilters && (\n              <Button\n                variant=\"contained\"\n                startIcon={<AddIcon />}\n                onClick={handleAdd}\n                size=\"medium\"\n              >\n                Prida≈• prv√∫ udalos≈•\n              </Button>\n            )}\n          </CardContent>\n        </Card>\n      ) : (\n        <>\n          {/* Desktop Table */}\n          <Box sx={{ display: { xs: 'none', md: 'block' } }}>\n            <TableContainer\n              component={Paper}\n              sx={{ boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}\n            >\n              <Table>\n                <TableHead>\n                  <TableRow sx={{ backgroundColor: '#f5f5f5' }}>\n                    <TableCell sx={{ fontWeight: 600 }}>\n                      D√°tum udalosti\n                    </TableCell>\n                    <TableCell sx={{ fontWeight: 600 }}>Vozidlo</TableCell>\n                    <TableCell sx={{ fontWeight: 600 }}>Typ</TableCell>\n                    <TableCell sx={{ fontWeight: 600 }}>Popis</TableCell>\n                    <TableCell sx={{ fontWeight: 600 }}>Stav</TableCell>\n                    <TableCell sx={{ fontWeight: 600 }}>≈†koda</TableCell>\n                    <TableCell sx={{ fontWeight: 600 }}>Akcie</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {paginatedClaims.map(claim => {\n                    const vehicle = state.vehicles?.find(\n                      v => v.id === claim.vehicleId\n                    );\n                    const typeInfo = getIncidentTypeInfo(claim.incidentType);\n                    const statusInfo = getStatusInfo(claim.status);\n\n                    return (\n                      <TableRow key={claim.id} hover>\n                        <TableCell>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <EventIcon\n                              sx={{ fontSize: 18, color: 'text.secondary' }}\n                            />\n                            {format(\n                              new Date(claim.incidentDate),\n                              'dd.MM.yyyy',\n                              { locale: sk }\n                            )}\n                          </Box>\n                        </TableCell>\n                        <TableCell>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <CarIcon sx={{ fontSize: 18, color: '#1976d2' }} />\n                            {vehicle\n                              ? `${vehicle.brand} ${vehicle.model}`\n                              : 'Nezn√°me vozidlo'}\n                            <br />\n                            <Typography\n                              variant=\"caption\"\n                              color=\"text.secondary\"\n                            >\n                              {vehicle?.licensePlate}\n                            </Typography>\n                          </Box>\n                        </TableCell>\n                        <TableCell>\n                          <Chip\n                            label={typeInfo.label}\n                            size=\"small\"\n                            sx={{\n                              backgroundColor: typeInfo.bgColor,\n                              color: typeInfo.color,\n                              fontWeight: 600,\n                            }}\n                          />\n                        </TableCell>\n                        <TableCell>\n                          <Typography variant=\"body2\" sx={{ maxWidth: 200 }}>\n                            {claim.description.length > 50\n                              ? `${claim.description.substring(0, 50)}...`\n                              : claim.description}\n                          </Typography>\n                          {claim.location && (\n                            <Typography\n                              variant=\"caption\"\n                              color=\"text.secondary\"\n                            >\n                              üìç {claim.location}\n                            </Typography>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          <Chip\n                            icon={statusInfo.icon}\n                            label={statusInfo.label}\n                            size=\"small\"\n                            sx={{\n                              backgroundColor: statusInfo.bgColor,\n                              color: statusInfo.color,\n                              fontWeight: 600,\n                            }}\n                          />\n                        </TableCell>\n                        <TableCell>\n                          {claim.estimatedDamage ? (\n                            <Box\n                              sx={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: 1,\n                              }}\n                            >\n                              <EuroIcon\n                                sx={{ fontSize: 16, color: 'text.secondary' }}\n                              />\n                              {claim.estimatedDamage.toLocaleString()} ‚Ç¨\n                            </Box>\n                          ) : (\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              -\n                            </Typography>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          <Box sx={{ display: 'flex', gap: 1 }}>\n                            <Tooltip title=\"Upravi≈•\">\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleEdit(claim)}\n                                sx={{ color: '#1976d2' }}\n                              >\n                                <EditIcon sx={{ fontSize: 18 }} />\n                              </IconButton>\n                            </Tooltip>\n                            <Tooltip title=\"Vymaza≈•\">\n                              <IconButton\n                                size=\"small\"\n                                onClick={() => handleDelete(claim.id)}\n                                sx={{ color: '#d32f2f' }}\n                              >\n                                <DeleteIcon sx={{ fontSize: 18 }} />\n                              </IconButton>\n                            </Tooltip>\n                          </Box>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </Box>\n\n          {/* Mobile Cards */}\n          <Box sx={{ display: { xs: 'block', md: 'none' } }}>\n            <Grid container spacing={2}>\n              {paginatedClaims.map(claim => {\n                const vehicle = state.vehicles?.find(\n                  v => v.id === claim.vehicleId\n                );\n                const typeInfo = getIncidentTypeInfo(claim.incidentType);\n                const statusInfo = getStatusInfo(claim.status);\n\n                return (\n                  <Grid item xs={12} key={claim.id}>\n                    <Card\n                      sx={{\n                        boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                        border: '1px solid #e0e0e0',\n                        '&:hover': {\n                          boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n                        },\n                      }}\n                    >\n                      <CardContent sx={{ p: 2 }}>\n                        {/* Header with date and actions */}\n                        <Box\n                          sx={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'flex-start',\n                            mb: 2,\n                          }}\n                        >\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <EventIcon\n                              sx={{ fontSize: 18, color: 'text.secondary' }}\n                            />\n                            <Typography variant=\"body2\" fontWeight={600}>\n                              {format(\n                                new Date(claim.incidentDate),\n                                'dd.MM.yyyy',\n                                { locale: sk }\n                              )}\n                            </Typography>\n                          </Box>\n                          <Box sx={{ display: 'flex', gap: 0.5 }}>\n                            <IconButton\n                              size=\"small\"\n                              onClick={() => handleEdit(claim)}\n                              sx={{ color: '#1976d2' }}\n                            >\n                              <EditIcon sx={{ fontSize: 16 }} />\n                            </IconButton>\n                            <IconButton\n                              size=\"small\"\n                              onClick={() => handleDelete(claim.id)}\n                              sx={{ color: '#d32f2f' }}\n                            >\n                              <DeleteIcon sx={{ fontSize: 16 }} />\n                            </IconButton>\n                          </Box>\n                        </Box>\n\n                        {/* Vehicle info */}\n                        <Box\n                          sx={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: 1,\n                            mb: 2,\n                          }}\n                        >\n                          <CarIcon sx={{ fontSize: 18, color: '#1976d2' }} />\n                          <Box>\n                            <Typography variant=\"body2\" fontWeight={600}>\n                              {vehicle\n                                ? `${vehicle.brand} ${vehicle.model}`\n                                : 'Nezn√°me vozidlo'}\n                            </Typography>\n                            <Typography\n                              variant=\"caption\"\n                              color=\"text.secondary\"\n                            >\n                              {vehicle?.licensePlate}\n                            </Typography>\n                          </Box>\n                        </Box>\n\n                        {/* Type and Status */}\n                        <Box\n                          sx={{\n                            display: 'flex',\n                            gap: 1,\n                            mb: 2,\n                            flexWrap: 'wrap',\n                          }}\n                        >\n                          <Chip\n                            label={typeInfo.label}\n                            size=\"small\"\n                            sx={{\n                              backgroundColor: typeInfo.bgColor,\n                              color: typeInfo.color,\n                              fontWeight: 600,\n                              fontSize: '0.75rem',\n                            }}\n                          />\n                          <Chip\n                            icon={statusInfo.icon}\n                            label={statusInfo.label}\n                            size=\"small\"\n                            sx={{\n                              backgroundColor: statusInfo.bgColor,\n                              color: statusInfo.color,\n                              fontWeight: 600,\n                              fontSize: '0.75rem',\n                            }}\n                          />\n                        </Box>\n\n                        {/* Description */}\n                        <Typography\n                          variant=\"body2\"\n                          sx={{ mb: 1, lineHeight: 1.4 }}\n                        >\n                          {claim.description}\n                        </Typography>\n\n                        {/* Location */}\n                        {claim.location && (\n                          <Typography\n                            variant=\"caption\"\n                            color=\"text.secondary\"\n                            sx={{ mb: 2, display: 'block' }}\n                          >\n                            üìç {claim.location}\n                          </Typography>\n                        )}\n\n                        {/* Damage amount */}\n                        {claim.estimatedDamage && (\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                              mt: 1,\n                            }}\n                          >\n                            <EuroIcon\n                              sx={{ fontSize: 16, color: 'text.secondary' }}\n                            />\n                            <Typography\n                              variant=\"body2\"\n                              fontWeight={600}\n                              color=\"primary\"\n                            >\n                              {claim.estimatedDamage.toLocaleString()} ‚Ç¨\n                            </Typography>\n                          </Box>\n                        )}\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                );\n              })}\n            </Grid>\n          </Box>\n\n          <TablePagination\n            component=\"div\"\n            count={filteredClaims.length}\n            page={page}\n            onPageChange={handleChangePage}\n            rowsPerPage={rowsPerPage}\n            onRowsPerPageChange={handleChangeRowsPerPage}\n            labelRowsPerPage=\"Riadkov na str√°nku:\"\n            labelDisplayedRows={({ from, to, count }) =>\n              `${from}‚Äì${to} z ${count}`\n            }\n            sx={{\n              mt: 2,\n              '& .MuiTablePagination-toolbar': {\n                fontSize: { xs: '0.875rem', sm: '1rem' },\n                px: { xs: 1, sm: 2 },\n              },\n              '& .MuiTablePagination-selectLabel, & .MuiTablePagination-displayedRows':\n                {\n                  fontSize: { xs: '0.875rem', sm: '1rem' },\n                },\n            }}\n          />\n        </>\n      )}\n\n      {/* Responsive Floating Action Button for Mobile */}\n      {isMobile && (\n        <Fab\n          color=\"primary\"\n          aria-label=\"add\"\n          onClick={handleAdd}\n          sx={{\n            position: 'fixed',\n            bottom: 24,\n            right: 24,\n            background: 'linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%)',\n            '&:hover': {\n              background: 'linear-gradient(135deg, #c62828 0%, #a00000 100%)',\n            },\n            zIndex: 1000,\n            boxShadow: '0 4px 12px rgba(211, 47, 47, 0.3)',\n          }}\n        >\n          <AddIcon />\n        </Fab>\n      )}\n\n      {/* Responsive Insurance Claim Form Dialog */}\n      {openDialog && (\n        <Dialog\n          open={openDialog}\n          onClose={() => setOpenDialog(false)}\n          maxWidth=\"lg\"\n          fullWidth\n          fullScreen={isMobile}\n          disableRestoreFocus\n          keepMounted={false}\n          sx={{\n            '& .MuiDialog-paper': {\n              borderRadius: isMobile ? 0 : { xs: 2, sm: 3 },\n              margin: isMobile ? 0 : { xs: 1, sm: 2 },\n            },\n          }}\n        >\n          <InsuranceClaimForm\n            claim={editingClaim}\n            onSave={handleSave}\n            onCancel={() => setOpenDialog(false)}\n          />\n        </Dialog>\n      )}\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/insurances/InsuranceForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dispatch' is assigned a value but never used.","line":28,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1176,1179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1176,1179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Box,\n  Button,\n  FormControl,\n  InputLabel,\n  MenuItem,\n  Select,\n  TextField,\n  Autocomplete,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { useApp } from '../../context/AppContext';\nimport type { Insurance, PaymentFrequency } from '../../types';\n\ninterface InsuranceFormProps {\n  insurance?: Insurance | null;\n  onSave: (insurance: Insurance) => void;\n  onCancel: () => void;\n}\n\nexport default function InsuranceForm({\n  insurance,\n  onSave,\n  onCancel,\n}: InsuranceFormProps) {\n  const { state, dispatch, createInsurer, getEnhancedFilteredVehicles } =\n    useApp();\n  const [addingInsurer, setAddingInsurer] = useState(false);\n  const [newInsurerName, setNewInsurerName] = useState('');\n  const [formData, setFormData] = useState<Partial<Insurance>>({\n    vehicleId: '',\n    type: '',\n    policyNumber: '',\n    validFrom: new Date(),\n    validTo: new Date(),\n    price: 0,\n    company: '',\n    paymentFrequency: 'yearly',\n  });\n\n  useEffect(() => {\n    if (insurance) {\n      setFormData(insurance);\n    }\n  }, [insurance]);\n\n  const handleInputChange = (field: keyof Insurance, value: any) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const completeInsurance: Insurance = {\n      id: insurance?.id || uuidv4(),\n      vehicleId: formData.vehicleId || '',\n      type: formData.type || '',\n      policyNumber: formData.policyNumber || '',\n      validFrom: formData.validFrom || new Date(),\n      validTo: formData.validTo || new Date(),\n      price: formData.price || 0,\n      company: formData.company || '',\n      paymentFrequency: formData.paymentFrequency || 'yearly',\n    };\n    onSave(completeInsurance);\n  };\n\n  return (\n    <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 2 }}>\n      <Box\n        sx={{\n          display: 'grid',\n          gridTemplateColumns: { xs: '1fr', md: '1fr 1fr' },\n          gap: 3,\n        }}\n      >\n        <Autocomplete\n          fullWidth\n          options={getEnhancedFilteredVehicles({ includePrivate: true })\n            .slice()\n            .sort((a, b) => {\n              const aText = `${a.brand} ${a.model} (${a.licensePlate})`;\n              const bText = `${b.brand} ${b.model} (${b.licensePlate})`;\n              return aText.localeCompare(bText, 'sk', { sensitivity: 'base' });\n            })}\n          getOptionLabel={vehicle =>\n            `${vehicle.brand} ${vehicle.model} (${vehicle.licensePlate})`\n          }\n          value={\n            getEnhancedFilteredVehicles({ includePrivate: true }).find(\n              v => v.id === formData.vehicleId\n            ) || null\n          }\n          onChange={(_, newValue) =>\n            handleInputChange('vehicleId', newValue?.id || '')\n          }\n          renderInput={params => (\n            <TextField\n              {...params}\n              label=\"Vozidlo\"\n              required\n              placeholder=\"Zaƒçnite p√≠sa≈• pre vyhƒæadanie vozidla...\"\n            />\n          )}\n          noOptionsText=\"≈Ωiadne vozidl√° nen√°jden√©\"\n          filterOptions={(options, { inputValue }) => {\n            const filtered = options.filter(option => {\n              const searchText =\n                `${option.brand} ${option.model} ${option.licensePlate}`.toLowerCase();\n              return searchText.includes(inputValue.toLowerCase());\n            });\n            return filtered;\n          }}\n        />\n\n        {/* Typ poistky - Select s pridanou mo≈ænos≈•ou PZP + Kasko */}\n        <FormControl fullWidth required>\n          <InputLabel>Typ poistky</InputLabel>\n          <Select\n            value={formData.type || ''}\n            label=\"Typ poistky\"\n            onChange={e => handleInputChange('type', e.target.value)}\n          >\n            <MenuItem value=\"PZP\">PZP</MenuItem>\n            <MenuItem value=\"PZP + Kasko\">PZP + Kasko</MenuItem>\n            <MenuItem value=\"Havarijn√°\">Havarijn√°</MenuItem>\n            <MenuItem value=\"GAP\">GAP</MenuItem>\n            <MenuItem value=\"Asistenƒçn√© slu≈æby\">Asistenƒçn√© slu≈æby</MenuItem>\n            <MenuItem value=\"In√©\">In√©</MenuItem>\n          </Select>\n        </FormControl>\n\n        {/* ƒå√≠slo poistky - nov√© pole */}\n        <TextField\n          fullWidth\n          label=\"ƒå√≠slo poistky\"\n          value={formData.policyNumber}\n          onChange={e => handleInputChange('policyNumber', e.target.value)}\n          required\n        />\n\n        {/* Poistov≈àa - Select s mo≈ænos≈•ou prida≈• */}\n        <FormControl fullWidth required>\n          <InputLabel>Poistov≈àa</InputLabel>\n          <Select\n            value={formData.company || ''}\n            label=\"Poistov≈àa\"\n            onChange={e => handleInputChange('company', e.target.value)}\n            renderValue={selected => selected || 'Vyberte pois≈•ov≈àu'}\n          >\n            {state.insurers.map(insurer => (\n              <MenuItem key={insurer.id} value={insurer.name}>\n                {insurer.name}\n              </MenuItem>\n            ))}\n            <MenuItem\n              value=\"__add_new__\"\n              onClick={() => setAddingInsurer(true)}\n            >\n              <em>+ Prida≈• nov√∫ pois≈•ov≈àu</em>\n            </MenuItem>\n          </Select>\n          {addingInsurer && (\n            <Box sx={{ display: 'flex', gap: 1, mt: 1 }}>\n              <TextField\n                autoFocus\n                size=\"small\"\n                label=\"Nov√° pois≈•ov≈àa\"\n                value={newInsurerName}\n                onChange={e => setNewInsurerName(e.target.value)}\n              />\n              <Button\n                variant=\"contained\"\n                size=\"small\"\n                disabled={!newInsurerName.trim()}\n                onClick={async () => {\n                  try {\n                    const id = uuidv4();\n                    await createInsurer({ id, name: newInsurerName.trim() });\n                    setFormData(prev => ({\n                      ...prev,\n                      company: newInsurerName.trim(),\n                    }));\n                    setNewInsurerName('');\n                    setAddingInsurer(false);\n                  } catch (error) {\n                    console.error('Chyba pri vytv√°ran√≠ pois≈•ovne:', error);\n                    alert('Chyba pri vytv√°ran√≠ pois≈•ovne');\n                  }\n                }}\n              >\n                Prida≈•\n              </Button>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                onClick={() => {\n                  setAddingInsurer(false);\n                  setNewInsurerName('');\n                }}\n              >\n                Zru≈°i≈•\n              </Button>\n            </Box>\n          )}\n        </FormControl>\n\n        <TextField\n          fullWidth\n          label=\"Cena (‚Ç¨)\"\n          type=\"number\"\n          value={formData.price}\n          onChange={e => handleInputChange('price', parseFloat(e.target.value))}\n          required\n        />\n\n        <TextField\n          fullWidth\n          label=\"Platn√° od\"\n          type=\"date\"\n          value={\n            formData.validFrom && !isNaN(new Date(formData.validFrom).getTime())\n              ? new Date(formData.validFrom).toISOString().split('T')[0]\n              : ''\n          }\n          onChange={e =>\n            handleInputChange('validFrom', new Date(e.target.value))\n          }\n          InputLabelProps={{ shrink: true }}\n          required\n        />\n\n        <TextField\n          fullWidth\n          label=\"Platn√° do\"\n          type=\"date\"\n          value={\n            formData.validTo && !isNaN(new Date(formData.validTo).getTime())\n              ? new Date(formData.validTo).toISOString().split('T')[0]\n              : ''\n          }\n          onChange={e => handleInputChange('validTo', new Date(e.target.value))}\n          InputLabelProps={{ shrink: true }}\n          required\n        />\n\n        <FormControl fullWidth>\n          <InputLabel>Frekvencia platenia</InputLabel>\n          <Select\n            value={formData.paymentFrequency || 'yearly'}\n            onChange={e =>\n              handleInputChange(\n                'paymentFrequency',\n                e.target.value as PaymentFrequency\n              )\n            }\n            label=\"Frekvencia platenia\"\n            required\n          >\n            <MenuItem value=\"monthly\">Mesaƒçne</MenuItem>\n            <MenuItem value=\"quarterly\">≈†tvr≈•roƒçne</MenuItem>\n            <MenuItem value=\"biannual\">Polroƒçne</MenuItem>\n            <MenuItem value=\"yearly\">Roƒçne</MenuItem>\n          </Select>\n        </FormControl>\n      </Box>\n\n      <Box\n        sx={{\n          gridColumn: '1 / -1',\n          display: 'flex',\n          gap: 2,\n          justifyContent: 'flex-end',\n          mt: 3,\n        }}\n      >\n        <Button variant=\"outlined\" onClick={onCancel}>\n          Zru≈°i≈•\n        </Button>\n        <Button type=\"submit\" variant=\"contained\">\n          {insurance ? 'Ulo≈æi≈• zmeny' : 'Prida≈• poistku'}\n        </Button>\n      </Box>\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/insurances/InsuranceList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isTablet' is assigned a value but never used.","line":15,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Security as SecurityIcon,\n  Warning as WarningIcon,\n} from '@mui/icons-material';\nimport { Box, Tabs, Tab, useMediaQuery, useTheme, Paper } from '@mui/material';\nimport React, { useState } from 'react';\n\nimport InsuranceClaimList from './InsuranceClaimList';\nimport VehicleCentricInsuranceList from './VehicleCentricInsuranceList';\n\nexport default function InsuranceList() {\n  const [activeTab, setActiveTab] = useState(0);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const isTablet = useMediaQuery(theme.breakpoints.down('lg'));\n\n  return (\n    <Box\n      sx={{\n        width: '100%',\n        maxWidth: '100%',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Responsive Tab Navigation */}\n      <Paper\n        elevation={0}\n        sx={{\n          borderBottom: 1,\n          borderColor: 'divider',\n          mb: { xs: 1, sm: 2, md: 3 },\n          backgroundColor: 'background.paper',\n        }}\n      >\n        <Tabs\n          value={activeTab}\n          onChange={(event, newValue) => setActiveTab(newValue)}\n          variant={isMobile ? 'fullWidth' : 'standard'}\n          scrollButtons={isMobile ? false : 'auto'}\n          allowScrollButtonsMobile={!isMobile}\n          sx={{\n            minHeight: { xs: 48, sm: 56 },\n            '& .MuiTab-root': {\n              fontWeight: 600,\n              textTransform: 'none',\n              fontSize: { xs: '0.875rem', sm: '1rem' },\n              minHeight: { xs: 48, sm: 56 },\n              padding: {\n                xs: '8px 12px',\n                sm: '12px 16px',\n                md: '12px 24px',\n              },\n              '&.Mui-selected': {\n                color: 'primary.main',\n                fontWeight: 700,\n              },\n            },\n            '& .MuiTabs-indicator': {\n              height: 3,\n              borderRadius: '3px 3px 0 0',\n            },\n            '& .MuiTab-iconWrapper': {\n              fontSize: { xs: 18, sm: 20, md: 24 },\n              marginRight: { xs: 0.5, sm: 1 },\n              marginBottom: 0,\n            },\n          }}\n        >\n          <Tab\n            label={isMobile ? 'Dokumenty' : 'Poistky & Dokumenty'}\n            icon={<SecurityIcon />}\n            iconPosition={isMobile ? 'top' : 'start'}\n            sx={{\n              flexDirection: isMobile ? 'column' : 'row',\n              gap: isMobile ? 0.5 : 1,\n            }}\n          />\n          <Tab\n            label={isMobile ? 'Udalosti' : 'Poistn√© udalosti'}\n            icon={<WarningIcon />}\n            iconPosition={isMobile ? 'top' : 'start'}\n            sx={{\n              flexDirection: isMobile ? 'column' : 'row',\n              gap: isMobile ? 0.5 : 1,\n            }}\n          />\n        </Tabs>\n      </Paper>\n\n      {/* Responsive Tab Content */}\n      <Box\n        sx={{\n          width: '100%',\n          minHeight: 'calc(100vh - 200px)',\n          overflow: 'hidden',\n        }}\n      >\n        {activeTab === 0 && <VehicleCentricInsuranceList />}\n        {activeTab === 1 && <InsuranceClaimList />}\n      </Box>\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/insurances/VehicleCentricInsuranceList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/protocols/HandoverProtocolForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/protocols/ProtocolDetailViewer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":10},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[595,598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[595,598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[640,643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[640,643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[758,761],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[758,761],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[779,782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[779,782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedImage' is assigned a value but never used.","line":54,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSelectedImage' is assigned a value but never used.","line":54,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":41},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has a missing dependency: 'loadProtocol'. Either include it or remove the dependency array.","line":60,"column":6,"nodeType":"ArrayExpression","endLine":60,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [loadProtocol, protocolId]","fix":{"range":[1275,1287],"text":"[loadProtocol, protocolId]"}}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Visibility as VisibilityIcon,\n  Download as DownloadIcon,\n  Image as ImageIcon,\n  Description as DescriptionIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Paper,\n  Grid,\n  Card,\n  CardMedia,\n  CardContent,\n  IconButton,\n  Chip,\n  CircularProgress,\n  Alert,\n  Divider,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n\nimport type { ProtocolImage } from '../../types';\n\ninterface ProtocolDetailViewerProps {\n  protocolId: string;\n  onClose?: () => void;\n}\n\ninterface ProtocolData {\n  id: string;\n  type: 'handover' | 'return';\n  rental: any;\n  location: string;\n  vehicleCondition: any;\n  vehicleImages: ProtocolImage[];\n  documentImages: ProtocolImage[];\n  damageImages: ProtocolImage[];\n  damages: any[];\n  signatures: any[];\n  notes: string;\n  createdAt: Date;\n  completedAt: Date;\n  pdfUrl?: string;\n}\n\nexport function ProtocolDetailViewer({\n  protocolId,\n  onClose,\n}: ProtocolDetailViewerProps) {\n  const [protocol, setProtocol] = useState<ProtocolData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedImage, setSelectedImage] = useState<ProtocolImage | null>(\n    null\n  );\n\n  useEffect(() => {\n    loadProtocol();\n  }, [protocolId]);\n\n  const loadProtocol = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`/api/protocols/${protocolId}`);\n      if (!response.ok) {\n        throw new Error('Protokol sa nena≈°iel');\n      }\n\n      const data = await response.json();\n      setProtocol(data);\n    } catch (error) {\n      console.error('‚ùå Chyba pri naƒç√≠tan√≠ protokolu:', error);\n      setError(error instanceof Error ? error.message : 'Nezn√°ma chyba');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDownloadPDF = async () => {\n    if (!protocol?.pdfUrl) {\n      // Ak nem√°me PDF URL, vygenerujeme nov√© PDF\n      try {\n        const response = await fetch(`/api/protocols/${protocolId}/pdf`);\n        if (!response.ok) {\n          throw new Error('Nepodarilo sa vygenerova≈• PDF');\n        }\n\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `protokol-${protocolId}.pdf`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n      } catch (error) {\n        console.error('‚ùå Chyba pri s≈•ahovan√≠ PDF:', error);\n        // üî¥ REMOVED: Alert notification that was causing UI issues\n      }\n    } else {\n      // Stiahnutie existuj√∫ceho PDF\n      const a = document.createElement('a');\n      a.href = protocol.pdfUrl;\n      a.download = `protokol-${protocolId}.pdf`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n    }\n  };\n\n  const handleViewOriginalImage = (image: ProtocolImage) => {\n    window.open(image.url, '_blank');\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  if (loading) {\n    return (\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        minHeight=\"400px\"\n      >\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert severity=\"error\" sx={{ m: 2 }}>\n        {error}\n      </Alert>\n    );\n  }\n\n  if (!protocol) {\n    return (\n      <Alert severity=\"warning\" sx={{ m: 2 }}>\n        Protokol sa nena≈°iel\n      </Alert>\n    );\n  }\n\n  return (\n    <Box sx={{ p: 2 }}>\n      {/* Z√°hlavie */}\n      <Box\n        sx={{\n          mb: 3,\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n      >\n        <Typography variant=\"h4\" component=\"h1\" color=\"primary\">\n          {protocol.type === 'handover' ? 'Preberac√≠' : 'Vratn√Ω'} Protokol\n        </Typography>\n        <Box>\n          <IconButton\n            onClick={handleDownloadPDF}\n            color=\"primary\"\n            title=\"Stiahnu≈• PDF\"\n          >\n            <DownloadIcon />\n          </IconButton>\n          {onClose && (\n            <IconButton onClick={onClose} color=\"secondary\">\n              <VisibilityIcon />\n            </IconButton>\n          )}\n        </Box>\n      </Box>\n\n      {/* Z√°kladn√© inform√°cie */}\n      <Paper sx={{ p: 2, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Z√°kladn√© inform√°cie\n        </Typography>\n        <Grid container spacing={2}>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              <strong>ID Protokolu:</strong> {protocol.id}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              <strong>D√°tum:</strong>{' '}\n              {new Date(protocol.createdAt).toLocaleDateString('sk-SK')}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              <strong>Miesto:</strong> {protocol.location || 'N/A'}\n            </Typography>\n          </Grid>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              <strong>Vozidlo:</strong> {protocol.rental?.vehicle?.brand}{' '}\n              {protocol.rental?.vehicle?.model}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              <strong>≈†PZ:</strong> {protocol.rental?.vehicle?.licensePlate}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              <strong>Z√°kazn√≠k:</strong> {protocol.rental?.customer?.name}\n            </Typography>\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Stav vozidla */}\n      <Paper sx={{ p: 2, mb: 3 }}>\n        <Typography variant=\"h6\" gutterBottom>\n          Stav vozidla\n        </Typography>\n        <Grid container spacing={2}>\n          <Grid item xs={12} md={3}>\n            <Chip\n              label={`${protocol.vehicleCondition?.odometer || 0} km`}\n              icon={<DescriptionIcon />}\n              color=\"primary\"\n              variant=\"outlined\"\n            />\n          </Grid>\n          <Grid item xs={12} md={3}>\n            <Chip\n              label={`${protocol.vehicleCondition?.fuelLevel || 100}%`}\n              icon={<ImageIcon />}\n              color=\"secondary\"\n              variant=\"outlined\"\n            />\n          </Grid>\n          <Grid item xs={12} md={3}>\n            <Chip\n              label={protocol.vehicleCondition?.fuelType || 'N/A'}\n              color=\"info\"\n              variant=\"outlined\"\n            />\n          </Grid>\n          <Grid item xs={12} md={3}>\n            <Chip\n              label={protocol.vehicleCondition?.condition || 'V√Ωborn√Ω'}\n              color=\"success\"\n              variant=\"outlined\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n\n      {/* Obr√°zky vozidla */}\n      {protocol.vehicleImages && protocol.vehicleImages.length > 0 && (\n        <Paper sx={{ p: 2, mb: 3 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Fotky vozidla ({protocol.vehicleImages.length})\n          </Typography>\n          <Grid container spacing={2}>\n            {protocol.vehicleImages.map((image, index) => (\n              <Grid item xs={12} sm={6} md={4} lg={3} key={index}>\n                <Card>\n                  <CardMedia\n                    component=\"img\"\n                    height=\"200\"\n                    image={image.url}\n                    alt={`Fotka vozidla ${index + 1}`}\n                    sx={{ cursor: 'pointer' }}\n                    onClick={() => handleViewOriginalImage(image)}\n                  />\n                  <CardContent sx={{ py: 1 }}>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {image.type} -{' '}\n                      {new Date(image.timestamp).toLocaleString('sk-SK')}\n                    </Typography>\n                    <Typography\n                      variant=\"caption\"\n                      display=\"block\"\n                      color=\"text.secondary\"\n                    >\n                      {image.originalSize\n                        ? formatFileSize(image.originalSize)\n                        : 'N/A'}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </Paper>\n      )}\n\n      {/* Dokumenty */}\n      {protocol.documentImages && protocol.documentImages.length > 0 && (\n        <Paper sx={{ p: 2, mb: 3 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Dokumenty ({protocol.documentImages.length})\n          </Typography>\n          <Grid container spacing={2}>\n            {protocol.documentImages.map((image, index) => (\n              <Grid item xs={12} sm={6} md={4} lg={3} key={index}>\n                <Card>\n                  <CardMedia\n                    component=\"img\"\n                    height=\"150\"\n                    image={image.url}\n                    alt={`Dokument ${index + 1}`}\n                    sx={{ cursor: 'pointer' }}\n                    onClick={() => handleViewOriginalImage(image)}\n                  />\n                  <CardContent sx={{ py: 1 }}>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {image.type} -{' '}\n                      {new Date(image.timestamp).toLocaleString('sk-SK')}\n                    </Typography>\n                    <Typography\n                      variant=\"caption\"\n                      display=\"block\"\n                      color=\"text.secondary\"\n                    >\n                      {image.originalSize\n                        ? formatFileSize(image.originalSize)\n                        : 'N/A'}\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </Paper>\n      )}\n\n      {/* ≈†kody */}\n      {protocol.damages && protocol.damages.length > 0 && (\n        <Paper sx={{ p: 2, mb: 3 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            ≈†kody a po≈°kodenia ({protocol.damages.length})\n          </Typography>\n          {protocol.damages.map((damage, index) => (\n            <Box\n              key={index}\n              sx={{ mb: 2, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}\n            >\n              <Typography variant=\"subtitle2\" color=\"primary\">\n                ≈†koda {index + 1}\n              </Typography>\n              <Typography variant=\"body2\">\n                {damage.description || 'N/A'}\n              </Typography>\n              {damage.location && (\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Lokaliz√°cia: {damage.location}\n                </Typography>\n              )}\n            </Box>\n          ))}\n        </Paper>\n      )}\n\n      {/* Pozn√°mky */}\n      {protocol.notes && (\n        <Paper sx={{ p: 2, mb: 3 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Pozn√°mky\n          </Typography>\n          <Typography variant=\"body2\">{protocol.notes}</Typography>\n        </Paper>\n      )}\n\n      {/* Podpisy */}\n      {protocol.signatures && protocol.signatures.length > 0 && (\n        <Paper sx={{ p: 2 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Podpisy ({protocol.signatures.length})\n          </Typography>\n          <Grid container spacing={2}>\n            {protocol.signatures.map((signature, index) => (\n              <Grid item xs={12} sm={6} md={4} key={index}>\n                <Card>\n                  <CardMedia\n                    component=\"img\"\n                    height=\"100\"\n                    image={signature.signature || signature.url}\n                    alt={`Podpis ${signature.signerName || index + 1}`}\n                  />\n                  <CardContent sx={{ py: 1 }}>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {signature.signerName || `Podpis ${index + 1}`}\n                    </Typography>\n                    {signature.signerRole && (\n                      <Typography\n                        variant=\"caption\"\n                        display=\"block\"\n                        color=\"text.secondary\"\n                      >\n                        {signature.signerRole}\n                      </Typography>\n                    )}\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </Paper>\n      )}\n    </Box>\n  );\n}\n\nexport default ProtocolDetailViewer;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/protocols/ReturnProtocolForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/protocols/v2/HandoverProtocolFormV2.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/protocols/v2/HandoverProtocolFormV2Wrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/protocols/v2/ReturnProtocolFormV2.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/protocols/v2/ReturnProtocolFormV2Wrapper.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_rental' is defined but never used.","line":19,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_handoverProtocol' is defined but never used.","line":21,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_onSave' is defined but never used.","line":23,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/EditRentalDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/EmailParser.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'vehicleFound' is assigned a value but never used.","line":419,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":419,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import AutoFixHighIcon from '@mui/icons-material/AutoFixHigh';\nimport CloseIcon from '@mui/icons-material/Close';\nimport ContentPasteIcon from '@mui/icons-material/ContentPaste';\nimport {\n  Box,\n  Button,\n  TextField,\n  Typography,\n  Card,\n  CardContent,\n  Alert,\n  Collapse,\n  IconButton,\n} from '@mui/material';\nimport React, { useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport type { Rental, Customer, Vehicle } from '../../types';\n\ninterface EmailParserProps {\n  onParseSuccess: (\n    rentalData: Partial<Rental>,\n    customerData?: Customer\n  ) => void;\n  vehicles: Vehicle[];\n  customers: Customer[];\n}\n\ninterface ParsedData {\n  orderNumber?: string;\n  orderDate?: string;\n  paymentMethod?: string;\n  customerName?: string;\n  customerEmail?: string;\n  customerPhone?: string;\n  customerAddress?: string;\n  pickupPlace?: string;\n  returnPlace?: string;\n  reservationTime?: string;\n  deposit?: number;\n  totalAmount?: number;\n  vehicleName?: string;\n  vehicleCode?: string;\n  vehiclePrice?: number;\n  // Roz≈°√≠ren√© polia\n  allowedKilometers?: number;\n  dailyKilometers?: number; // NEW: Daily km\n  extraKilometerRate?: number;\n  fuelLevel?: number;\n  returnConditions?: string;\n  startOdometer?: number;\n  notes?: string;\n  insuranceInfo?: string;\n  additionalServices?: string[];\n}\n\nexport default function EmailParser({\n  onParseSuccess,\n  vehicles,\n  customers,\n}: EmailParserProps) {\n  const [emailText, setEmailText] = useState('');\n  const [parsedData, setParsedData] = useState<ParsedData | null>(null);\n  const [error, setError] = useState<string>('');\n  const [showAlert, setShowAlert] = useState(false);\n  const [vehicleFound, setVehicleFound] = useState<boolean>(false);\n\n  const parseEmailText = (text: string): ParsedData => {\n    const data: ParsedData = {};\n\n    // Parsovanie ƒç√≠sla objedn√°vky\n    const orderNumberMatch = text.match(/ƒå√≠slo objedn√°vky\\s+([A-Z]+\\d+)/i);\n    if (orderNumberMatch) {\n      data.orderNumber = orderNumberMatch[1];\n    }\n\n    // Parsovanie d√°tumu objedn√°vky\n    const orderDateMatch = text.match(\n      /Objedn√°vka prijat√°\\s+(\\d{2}\\.\\d{2}\\.\\d{4})/\n    );\n    if (orderDateMatch) {\n      data.orderDate = orderDateMatch[1];\n    }\n\n    // Parsovanie sp√¥sobu √∫hrady\n    const paymentMethodMatch = text.match(/Sp√¥sob √∫hrady\\s+(.+)/);\n    if (paymentMethodMatch) {\n      data.paymentMethod = paymentMethodMatch[1].trim();\n    }\n\n    // Parsovanie odoberateƒæa (z√°kazn√≠ka)\n    const customerMatch = text.match(/Odoberateƒæ\\s+(.+)/);\n    if (customerMatch) {\n      data.customerName = customerMatch[1].trim();\n    }\n\n    // Parsovanie emailu\n    const emailMatch = text.match(/E-mail\\s+(.+)/);\n    if (emailMatch) {\n      data.customerEmail = emailMatch[1].trim();\n    }\n\n    // Parsovanie telef√≥nu\n    const phoneMatch = text.match(/Telefon\\s+(.+)/);\n    if (phoneMatch) {\n      data.customerPhone = phoneMatch[1].trim();\n    }\n\n    // Parsovanie kontaktnej adresy\n    const addressMatch = text.match(/Kontaktn√° adresa\\s+(.+)/);\n    if (addressMatch) {\n      data.customerAddress = addressMatch[1].trim();\n    }\n\n    // Parsovanie miesta vyzdvihnutia\n    const pickupMatch = text.match(/Miesto vyzdvihnutia\\s+(.+)/);\n    if (pickupMatch) {\n      data.pickupPlace = pickupMatch[1].trim();\n    }\n\n    // Parsovanie miesta odovzdania\n    const returnMatch = text.match(/Miesto odovzdania\\s+(.+)/);\n    if (returnMatch) {\n      data.returnPlace = returnMatch[1].trim();\n    }\n\n    // Parsovanie ƒçasu rezerv√°cie\n    const reservationMatch = text.match(/ƒåas rezervacie\\s+(.+)/);\n    if (reservationMatch) {\n      data.reservationTime = reservationMatch[1].trim();\n    }\n\n    // Parsovanie depozitu\n    const depositMatch = text.match(/Depozit\\s+([\\d\\s,]+)\\s*‚Ç¨/);\n    if (depositMatch) {\n      const depositStr = depositMatch[1].replace(/\\s/g, '').replace(',', '.');\n      data.deposit = parseFloat(depositStr);\n    }\n\n    // Parsovanie sumy k √∫hrade\n    const totalMatch = text.match(/Suma k √∫hrade\\s+([\\d\\s,]+)\\s*‚Ç¨/);\n    if (totalMatch) {\n      const totalStr = totalMatch[1].replace(/\\s/g, '').replace(',', '.');\n      data.totalAmount = parseFloat(totalStr);\n    }\n\n    // Parsovanie vozidla z polo≈æiek objedn√°vky\n    const vehicleMatch = text.match(\n      /Polo≈æky objedn√°vky\\s*\\n\\s*N√°zov\\s+K√≥d\\s+Cena\\s+Spolu\\s*\\n([^\\n]+)/\n    );\n    if (!vehicleMatch) {\n      // Sk√∫s alternat√≠vny pattern bez diakritiky\n      const vehicleMatchAlt = text.match(\n        /Polo≈æky objedn√°vky\\s*\\n\\s*N√°zov\\s+K√≥d\\s+Cena\\s+Spolu\\s*\\n([^\\n]+)/\n      );\n      if (vehicleMatchAlt) {\n        const vehicleLine = vehicleMatchAlt[1].trim();\n        console.log('üîç Parsing vehicle line:', vehicleLine);\n\n        // Rozdeli≈• riadok podƒæa tabuliek alebo viacer√Ωch medzier\n        const parts = vehicleLine.split(/\\s+/).filter(part => part.trim());\n        console.log('üîç Vehicle parts:', parts);\n\n        // N√°jdi ≈†PZ (6-7 znakov, len p√≠smen√° a ƒç√≠sla)\n        const spzIndex = parts.findIndex(part =>\n          /^[A-Z0-9]{6,7}$/.test(part.trim())\n        );\n        console.log(\n          'üîç SPZ index:',\n          spzIndex,\n          'SPZ:',\n          spzIndex >= 0 ? parts[spzIndex] : 'not found'\n        );\n\n        if (spzIndex > 0) {\n          // N√°zov auta je v≈°etko pred ≈†PZ\n          data.vehicleName = parts.slice(0, spzIndex).join(' ');\n          data.vehicleCode = parts[spzIndex];\n\n          // Cena a suma s√∫ za ≈†PZ\n          if (parts.length > spzIndex + 2) {\n            const priceStr = parts[spzIndex + 1]\n              .replace(',', '.')\n              .replace('‚Ç¨', '')\n              .trim();\n            data.vehiclePrice = parseFloat(priceStr);\n          }\n\n          console.log('‚úÖ Parsed vehicle:', {\n            name: data.vehicleName,\n            code: data.vehicleCode,\n            price: data.vehiclePrice,\n          });\n        } else {\n          console.log('‚ùå Could not find SPZ in vehicle line');\n        }\n      }\n    } else {\n      const vehicleLine = vehicleMatch[1].trim();\n      console.log('üîç Parsing vehicle line:', vehicleLine);\n\n      // Rozdeli≈• riadok podƒæa tabuliek alebo viacer√Ωch medzier\n      const parts = vehicleLine.split(/\\s+/).filter(part => part.trim());\n      console.log('üîç Vehicle parts:', parts);\n\n      // N√°jdi ≈†PZ (6-7 znakov, len p√≠smen√° a ƒç√≠sla)\n      const spzIndex = parts.findIndex(part =>\n        /^[A-Z0-9]{6,7}$/.test(part.trim())\n      );\n      console.log(\n        'üîç SPZ index:',\n        spzIndex,\n        'SPZ:',\n        spzIndex >= 0 ? parts[spzIndex] : 'not found'\n      );\n\n      if (spzIndex > 0) {\n        // N√°zov auta je v≈°etko pred ≈†PZ\n        data.vehicleName = parts.slice(0, spzIndex).join(' ');\n        data.vehicleCode = parts[spzIndex];\n\n        // Cena a suma s√∫ za ≈†PZ\n        if (parts.length > spzIndex + 2) {\n          const priceStr = parts[spzIndex + 1]\n            .replace(',', '.')\n            .replace('‚Ç¨', '')\n            .trim();\n          data.vehiclePrice = parseFloat(priceStr);\n        }\n\n        console.log('‚úÖ Parsed vehicle:', {\n          name: data.vehicleName,\n          code: data.vehicleCode,\n          price: data.vehiclePrice,\n        });\n      } else {\n        console.log('‚ùå Could not find SPZ in vehicle line');\n      }\n    }\n\n    // Parsovanie kilometrov - V≈†ETKY sa pova≈æuj√∫ za denn√© km\n    console.log('üîç DEBUG: Searching for kilometers in text...');\n    console.log(\n      'üîç Text sample around km:',\n      text.substring(\n        text.indexOf('Poƒçet povolen√Ωch km') - 20,\n        text.indexOf('Poƒçet povolen√Ωch km') + 50\n      )\n    );\n\n    // NAJVY≈†≈†IA PRIORITA: ≈†pecifick√© patterny pre \"Poƒçet povolen√Ωch km\"\n    const specificKmMatch = text.match(/Poƒçet povolen√Ωch km\\s+(\\d+)\\s*km/i);\n    console.log('üîç DEBUG: specificKmMatch result:', specificKmMatch);\n\n    if (specificKmMatch) {\n      data.dailyKilometers = parseInt(specificKmMatch[1]);\n      console.log(\n        `üöó Parsed \"Poƒçet povolen√Ωch km\": ${data.dailyKilometers} km/day (interpreted as daily)`\n      );\n    } else {\n      console.log('üîç DEBUG: specificKmMatch failed, trying other patterns...');\n      // Prioritne hƒæad√°me explicitne denn√© km patterny\n      const explicitDailyKmMatch =\n        text.match(/(\\d+)\\s*km\\s*\\/\\s*de[≈àn]/i) ||\n        text.match(/(\\d+)\\s*km\\s*na\\s*de[≈àn]/i) ||\n        text.match(/denn√Ω\\s*limit[:\\s]*(\\d+)\\s*km/i) ||\n        text.match(/denne[:\\s]*(\\d+)\\s*km/i) ||\n        text.match(/(\\d+)\\s*km\\s*daily/i);\n      console.log(\n        'üîç DEBUG: explicitDailyKmMatch result:',\n        explicitDailyKmMatch\n      );\n\n      if (explicitDailyKmMatch) {\n        data.dailyKilometers = parseInt(explicitDailyKmMatch[1]);\n        console.log(\n          `üöó Parsed explicit daily km: ${data.dailyKilometers} km/day`\n        );\n      } else {\n        console.log(\n          'üîç DEBUG: explicitDailyKmMatch failed, trying general patterns...'\n        );\n        // Ak nie s√∫ explicitne denn√©, hƒæad√°me ostatn√© v≈°eobecn√© km patterny a pova≈æujeme ich za denn√©\n        const generalKmMatch =\n          text.match(/Povolen√©\\s+km[:\\s]+(\\d+)/i) ||\n          text.match(/Kilometrov[:\\s]+(\\d+)/i) ||\n          text.match(/Limit\\s+km[:\\s]+(\\d+)/i) ||\n          text.match(/(\\d+)\\s*km/i); // V≈°eobecn√Ω pattern pre ƒç√≠slo + km (najni≈æ≈°ia priorita)\n        console.log('üîç DEBUG: generalKmMatch result:', generalKmMatch);\n\n        if (generalKmMatch) {\n          data.dailyKilometers = parseInt(generalKmMatch[1]);\n          console.log(\n            `üöó Parsed general km as daily: ${data.dailyKilometers} km/day (interpreted as daily)`\n          );\n        } else {\n          console.log('üîç DEBUG: No kilometer patterns matched!');\n        }\n      }\n    }\n\n    // Parsovanie ceny za extra km\n    const extraKmMatch =\n      text.match(/Cena\\s+za\\s+km[:\\s]+([\\d,]+)\\s*‚Ç¨/i) ||\n      text.match(/Extra\\s+km[:\\s]+([\\d,]+)\\s*‚Ç¨/i) ||\n      text.match(/Nadlimitn[√Ω]\\s+km[:\\s]+([\\d,]+)\\s*‚Ç¨/i);\n    if (extraKmMatch) {\n      const extraKmStr = extraKmMatch[1].replace(',', '.');\n      data.extraKilometerRate = parseFloat(extraKmStr);\n    }\n\n    // Parsovanie √∫rovne paliva\n    const fuelMatch =\n      text.match(/Palivo[:\\s]+(\\d+)%/i) ||\n      text.match(/Fuel[:\\s]+(\\d+)%/i) ||\n      text.match(/N√°dr≈æ[:\\s]+(\\d+)%/i);\n    if (fuelMatch) {\n      data.fuelLevel = parseInt(fuelMatch[1]);\n    }\n\n    // Parsovanie stavu tachometra\n    const odometerMatch =\n      text.match(/Tachometer[:\\s]+([\\d\\s]+)\\s*km/i) ||\n      text.match(/Kilometrov[:\\s]+([\\d\\s]+)\\s*km/i) ||\n      text.match(/Stav[:\\s]+([\\d\\s]+)\\s*km/i);\n    if (odometerMatch) {\n      const odometerStr = odometerMatch[1].replace(/\\s/g, '');\n      data.startOdometer = parseInt(odometerStr);\n    }\n\n    // Parsovanie podmienok vr√°tenia\n    const conditionsMatch =\n      text.match(/Podmienky\\s+vr√°tenia[:\\s]+([^.]+)/i) ||\n      text.match(/Return\\s+conditions[:\\s]+([^.]+)/i);\n    if (conditionsMatch) {\n      data.returnConditions = conditionsMatch[1].trim();\n    }\n\n    // Parsovanie pozn√°mok\n    const notesMatch =\n      text.match(/Pozn√°mky[:\\s]+([^.]+)/i) ||\n      text.match(/Notes[:\\s]+([^.]+)/i) ||\n      text.match(/Dodatoƒçn√©\\s+inform√°cie[:\\s]+([^.]+)/i);\n    if (notesMatch) {\n      data.notes = notesMatch[1].trim();\n    }\n\n    // Parsovanie inform√°ci√≠ o poisten√≠\n    const insuranceMatch =\n      text.match(/Poistenie[:\\s]+([^.]+)/i) ||\n      text.match(/Insurance[:\\s]+([^.]+)/i);\n    if (insuranceMatch) {\n      data.insuranceInfo = insuranceMatch[1].trim();\n    }\n\n    return data;\n  };\n\n  const handleParse = () => {\n    if (!emailText.trim()) {\n      setError('Pros√≠m vlo≈æte text z emailu');\n      setShowAlert(true);\n      return;\n    }\n\n    try {\n      const parsed = parseEmailText(emailText);\n      setParsedData(parsed);\n\n      // Kontrola, ƒçi sa na≈°lo vozidlo\n      if (parsed.vehicleCode) {\n        const found = vehicles.some(v => v.licensePlate === parsed.vehicleCode);\n        setVehicleFound(found);\n      } else {\n        setVehicleFound(false);\n      }\n\n      setError('');\n      setShowAlert(false);\n    } catch (err) {\n      setError('Chyba pri parsovan√≠ textu');\n      setShowAlert(true);\n    }\n  };\n\n  const handleApplyData = () => {\n    if (!parsedData) return;\n\n    // Vytvorenie alebo n√°jdenie z√°kazn√≠ka\n    let customer: Customer | undefined;\n    if (parsedData.customerName) {\n      customer = customers.find(\n        c =>\n          (c.name &&\n            c.name.toLowerCase() === parsedData.customerName!.toLowerCase()) ||\n          c.email === parsedData.customerEmail\n      );\n\n      if (!customer && parsedData.customerName) {\n        customer = {\n          id: uuidv4(),\n          name: parsedData.customerName,\n          email: parsedData.customerEmail || '',\n          phone: parsedData.customerPhone || '',\n          createdAt: new Date(),\n        };\n      }\n    }\n\n    // Funkcia na normaliz√°ciu ≈†PZ - odstr√°ni medzery a prevede na veƒæk√© p√≠smen√°\n    const normalizeSpz = (spz: string): string => {\n      return spz?.trim().toUpperCase().replace(/\\s+/g, '') || '';\n    };\n\n    // Kontrola, ƒçi sa na≈°lo vozidlo - s normaliz√°ciou\n    let vehicleFound = false;\n    if (parsedData.vehicleCode) {\n      const normalizedCode = normalizeSpz(parsedData.vehicleCode);\n      vehicleFound = vehicles.some(\n        v => normalizeSpz(v.licensePlate || '') === normalizedCode\n      );\n    }\n\n    // N√°jdenie vozidla - prim√°rne podƒæa ≈†PZ, potom podƒæa n√°zvu\n    let selectedVehicle: Vehicle | undefined;\n\n    console.log('üöó Vehicle search START:', {\n      hasVehicleCode: !!parsedData.vehicleCode,\n      vehicleCode: parsedData.vehicleCode,\n      vehiclesAvailable: vehicles.length,\n      vehiclesList: vehicles.map(v => ({\n        id: v.id.substring(0, 8),\n        plate: v.licensePlate,\n        normalized: normalizeSpz(v.licensePlate || ''),\n        brand: v.brand,\n        model: v.model,\n      })),\n    });\n\n    if (parsedData.vehicleCode) {\n      // Najprv hƒæad√°m podƒæa ≈†PZ (k√≥du) s normaliz√°ciou\n      const normalizedCode = normalizeSpz(parsedData.vehicleCode);\n      selectedVehicle = vehicles.find(\n        v => normalizeSpz(v.licensePlate || '') === normalizedCode\n      );\n\n      // Debug: N√°jdi vozidl√° Lotus Emira alebo s podobnou ≈†PZ\n      const lotusVehicles = vehicles\n        .filter(\n          v =>\n            (v.brand === 'Lotus' && v.model === 'Emira') ||\n            (v.licensePlate && v.licensePlate.toLowerCase().includes('677'))\n        )\n        .map(v => ({\n          plate: `\"${v.licensePlate}\"`,\n          normalized: `\"${normalizeSpz(v.licensePlate || '')}\"`,\n          brand: v.brand,\n          model: v.model,\n          plateLength: v.licensePlate?.length || 0,\n          plateChars: v.licensePlate\n            ? Array.from(v.licensePlate).map(c => c.charCodeAt(0))\n            : [],\n        }));\n\n      console.log('üîç Vehicle search details:', {\n        searchingFor: parsedData.vehicleCode,\n        normalized: normalizedCode,\n        found: !!selectedVehicle,\n        foundVehicle: selectedVehicle\n          ? {\n              id: selectedVehicle.id,\n              plate: selectedVehicle.licensePlate,\n              brand: selectedVehicle.brand,\n              model: selectedVehicle.model,\n            }\n          : null,\n        vehicleCount: vehicles.length,\n        lotusVehicles: lotusVehicles,\n      });\n    }\n\n    // Ak sa nen√°jde podƒæa ≈†PZ, sk√∫sim podƒæa n√°zvu\n    if (!selectedVehicle && parsedData.vehicleName) {\n      console.log('üîç Searching by name fallback:', {\n        vehicleName: parsedData.vehicleName,\n        searchTerm: parsedData.vehicleName.toLowerCase(),\n      });\n\n      selectedVehicle = vehicles.find(\n        v =>\n          v.brand &&\n          v.model &&\n          `${v.brand} ${v.model}`\n            .toLowerCase()\n            .includes(parsedData.vehicleName!.toLowerCase())\n      );\n\n      console.log('üîç Name search result:', {\n        found: !!selectedVehicle,\n        foundVehicle: selectedVehicle\n          ? {\n              id: selectedVehicle.id.substring(0, 8),\n              plate: selectedVehicle.licensePlate,\n              brand: selectedVehicle.brand,\n              model: selectedVehicle.model,\n            }\n          : null,\n      });\n    }\n\n    // Parsovanie d√°tumu rezerv√°cie\n    let startDate = new Date();\n    let endDate = new Date();\n    if (parsedData.reservationTime) {\n      const timeMatch = parsedData.reservationTime.match(\n        /(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}) - (\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})/\n      );\n      if (timeMatch) {\n        startDate = new Date(timeMatch[1]);\n        endDate = new Date(timeMatch[2]);\n      }\n    }\n\n    // Urƒçenie sp√¥sobu platby\n    let paymentMethod: 'cash' | 'bank_transfer' | 'vrp' | 'direct_to_owner' =\n      'cash';\n    if (parsedData.paymentMethod) {\n      const paymentLower = parsedData.paymentMethod.toLowerCase();\n      if (paymentLower.includes('hotovos≈•') || paymentLower.includes('cash')) {\n        paymentMethod = 'cash';\n      } else if (\n        paymentLower.includes('bank') ||\n        paymentLower.includes('prevod')\n      ) {\n        paymentMethod = 'bank_transfer';\n      } else if (paymentLower.includes('vrp')) {\n        paymentMethod = 'vrp';\n      }\n    }\n\n    const rentalData: Partial<Rental> = {\n      vehicleId: selectedVehicle?.id || '',\n      customerName: parsedData.customerName || '',\n      startDate,\n      endDate,\n      totalPrice: parsedData.totalAmount || 0,\n      paymentMethod,\n      handoverPlace: parsedData.pickupPlace || '',\n      orderNumber: parsedData.orderNumber || '',\n      // Roz≈°√≠ren√© polia z emailu\n      deposit: parsedData.deposit || 0,\n      dailyKilometers: parsedData.dailyKilometers || 0,\n      allowedKilometers: parsedData.allowedKilometers || 0,\n      extraKilometerRate: parsedData.extraKilometerRate || 0,\n      fuelLevel: parsedData.fuelLevel || 100,\n      odometer: parsedData.startOdometer || 0,\n      returnConditions: parsedData.returnConditions || '',\n      notes: parsedData.notes || '',\n      // Kontaktn√© √∫daje zo syst√©mu\n      customerAddress: parsedData.customerAddress || '',\n      customerEmail: parsedData.customerEmail || '',\n      customerPhone: parsedData.customerPhone || '',\n      pickupLocation: parsedData.pickupPlace || '',\n      returnLocation: parsedData.returnPlace || '',\n      reservationTime: parsedData.reservationTime || '',\n      vehicleCode: parsedData.vehicleCode || '',\n      vehicleName: parsedData.vehicleName || '',\n    };\n\n    console.log('üì§ Sending rental data to form:', {\n      vehicleId: rentalData.vehicleId,\n      hasVehicleId: !!rentalData.vehicleId,\n      selectedVehicle: selectedVehicle\n        ? { id: selectedVehicle.id, plate: selectedVehicle.licensePlate }\n        : null,\n      vehicleCode: rentalData.vehicleCode,\n      vehicleName: rentalData.vehicleName,\n      dailyKilometers: rentalData.dailyKilometers,\n      allowedKilometers: rentalData.allowedKilometers,\n    });\n\n    onParseSuccess(rentalData, customer);\n\n    // Upozornenie ak sa nena≈°lo vozidlo (ani podƒæa ≈†PZ ani podƒæa n√°zvu)\n    if (parsedData.vehicleCode && !selectedVehicle) {\n      alert(\n        `Upozornenie: Vozidlo so ≈†PZ \"${parsedData.vehicleCode}\" sa nena≈°lo v datab√°ze. Pros√≠m vyberte vozidlo manu√°lne.`\n      );\n    }\n\n    // Vyƒçistenie formul√°ra\n    setEmailText('');\n    setParsedData(null);\n    setError('');\n    setShowAlert(false);\n  };\n\n  const handlePaste = async () => {\n    try {\n      const text = await navigator.clipboard.readText();\n      setEmailText(text);\n    } catch (err) {\n      setError('Nepodarilo sa vlo≈æi≈• text zo schr√°nky');\n      setShowAlert(true);\n    }\n  };\n\n  return (\n    <Card sx={{ mb: 2 }}>\n      <CardContent>\n        <Typography\n          variant=\"h6\"\n          gutterBottom\n          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n        >\n          <AutoFixHighIcon />\n          Automatick√© parsovanie z emailu\n        </Typography>\n\n        <Collapse in={showAlert}>\n          <Alert\n            severity={error ? 'error' : 'success'}\n            action={\n              <IconButton\n                aria-label=\"close\"\n                color=\"inherit\"\n                size=\"small\"\n                onClick={() => setShowAlert(false)}\n              >\n                <CloseIcon fontSize=\"inherit\" />\n              </IconButton>\n            }\n            sx={{ mb: 2 }}\n          >\n            {error || 'D√°ta boli √∫spe≈°ne spracovan√©'}\n          </Alert>\n        </Collapse>\n\n        <Box sx={{ mb: 2 }}>\n          <TextField\n            fullWidth\n            multiline\n            rows={8}\n            variant=\"outlined\"\n            label=\"Vlo≈æte text z emailu\"\n            value={emailText}\n            onChange={e => setEmailText(e.target.value)}\n            placeholder=\"Vlo≈æte sem text z emailu s detailmi objedn√°vky...\"\n          />\n        </Box>\n\n        <Box sx={{ display: 'flex', gap: 2, mb: 2 }}>\n          <Button\n            variant=\"outlined\"\n            startIcon={<ContentPasteIcon />}\n            onClick={handlePaste}\n          >\n            Vlo≈æi≈• zo schr√°nky\n          </Button>\n          <Button\n            variant=\"contained\"\n            startIcon={<AutoFixHighIcon />}\n            onClick={handleParse}\n            disabled={!emailText.trim()}\n          >\n            Spracova≈• d√°ta\n          </Button>\n        </Box>\n\n        {parsedData && (\n          <Card variant=\"outlined\" sx={{ mt: 2 }}>\n            <CardContent>\n              <Typography variant=\"subtitle1\" gutterBottom>\n                <strong>N√°jden√© d√°ta:</strong>\n              </Typography>\n              <Box\n                sx={{\n                  display: 'grid',\n                  gridTemplateColumns: '1fr 1fr',\n                  gap: 1,\n                  fontSize: '0.9rem',\n                }}\n              >\n                {parsedData.orderNumber && (\n                  <div>\n                    <strong>ƒå√≠slo objedn√°vky:</strong> {parsedData.orderNumber}\n                  </div>\n                )}\n                {parsedData.customerName && (\n                  <div>\n                    <strong>Z√°kazn√≠k:</strong> {parsedData.customerName}\n                  </div>\n                )}\n                {parsedData.customerEmail && (\n                  <div>\n                    <strong>Email:</strong> {parsedData.customerEmail}\n                  </div>\n                )}\n                {parsedData.customerPhone && (\n                  <div>\n                    <strong>Telef√≥n:</strong> {parsedData.customerPhone}\n                  </div>\n                )}\n                {parsedData.vehicleCode && (\n                  <div>\n                    <strong>≈†PZ vozidla:</strong> {parsedData.vehicleCode}\n                    {vehicleFound ? (\n                      <span style={{ color: 'green', marginLeft: '8px' }}>\n                        ‚úì N√°jden√©\n                      </span>\n                    ) : (\n                      <span style={{ color: 'red', marginLeft: '8px' }}>\n                        ‚úó Nen√°jden√©\n                      </span>\n                    )}\n                  </div>\n                )}\n                {parsedData.vehicleName && (\n                  <div>\n                    <strong>N√°zov vozidla:</strong> {parsedData.vehicleName}\n                  </div>\n                )}\n                {parsedData.totalAmount && (\n                  <div>\n                    <strong>Suma:</strong> {parsedData.totalAmount} ‚Ç¨\n                  </div>\n                )}\n                {parsedData.pickupPlace && (\n                  <div>\n                    <strong>Miesto vyzdvihnutia:</strong>{' '}\n                    {parsedData.pickupPlace}\n                  </div>\n                )}\n                {parsedData.reservationTime && (\n                  <div>\n                    <strong>ƒåas rezerv√°cie:</strong>{' '}\n                    {parsedData.reservationTime}\n                  </div>\n                )}\n                {parsedData.deposit && (\n                  <div>\n                    <strong>Depozit:</strong> {parsedData.deposit} ‚Ç¨\n                  </div>\n                )}\n                {parsedData.dailyKilometers && (\n                  <div>\n                    <strong>Denn√© km:</strong> {parsedData.dailyKilometers}{' '}\n                    km/de≈à\n                  </div>\n                )}\n                {parsedData.allowedKilometers && (\n                  <div>\n                    <strong>Povolen√© km:</strong> {parsedData.allowedKilometers}{' '}\n                    km\n                  </div>\n                )}\n                {parsedData.extraKilometerRate && (\n                  <div>\n                    <strong>Cena za extra km:</strong>{' '}\n                    {parsedData.extraKilometerRate} ‚Ç¨/km\n                  </div>\n                )}\n                {parsedData.fuelLevel && (\n                  <div>\n                    <strong>√örove≈à paliva:</strong> {parsedData.fuelLevel}%\n                  </div>\n                )}\n                {parsedData.startOdometer && (\n                  <div>\n                    <strong>Stav tachometra:</strong> {parsedData.startOdometer}{' '}\n                    km\n                  </div>\n                )}\n                {parsedData.returnConditions && (\n                  <div>\n                    <strong>Podmienky vr√°tenia:</strong>{' '}\n                    {parsedData.returnConditions}\n                  </div>\n                )}\n                {parsedData.notes && (\n                  <div>\n                    <strong>Pozn√°mky:</strong> {parsedData.notes}\n                  </div>\n                )}\n              </Box>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleApplyData}\n                sx={{ mt: 2 }}\n                fullWidth\n              >\n                Pou≈æi≈• d√°ta v formul√°ri\n              </Button>\n            </CardContent>\n          </Card>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/EnhancedRentalSearch.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FilterIcon' is defined but never used.","line":8,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'textContains' is defined but never used.","line":29,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1081,1084],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1081,1084],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'showMobileFilters' is assigned a value but never used.","line":57,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1659,1662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1659,1662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":88,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":88,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleAdvancedFiltersChange' is assigned a value but never used.","line":305,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":305,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":306,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9437,9440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9437,9440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mobileFilterSections' is assigned a value but never used.","line":314,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":314,"endColumn":29}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üîç ENHANCED RENTAL SEARCH\n *\n * Pokroƒçil√© vyhƒæad√°vanie pre pren√°jmy s kompletnou filter funkcionalitou\n */\n\nimport {\n  FilterList as FilterIcon,\n  Tune as TuneIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Stack,\n  IconButton,\n  Tooltip,\n  useTheme,\n  useMediaQuery,\n  Typography,\n  Button,\n} from '@mui/material';\nimport React, { useState, useMemo, useCallback, memo } from 'react';\n\nimport { useApp } from '../../context/AppContext';\nimport type {\n  QuickFilter,\n  SearchSuggestion,\n} from '../../hooks/useEnhancedSearch';\nimport type { Rental } from '../../types';\nimport { textContains, searchInTexts } from '../../utils/textNormalization';\nimport EnhancedSearchBar from '../common/EnhancedSearchBar';\nimport QuickFilters, { RENTAL_QUICK_FILTERS } from '../common/QuickFilters';\n// üîÑ MOBILE CLEANUP: MobileFilterDrawer removed\n// import MobileFilterDrawer from '../common/MobileFilterDrawer';\n\ninterface EnhancedRentalSearchProps {\n  onResults: (results: Rental[]) => void;\n  onQueryChange?: (query: string) => void;\n  onFiltersChange?: (filters: Record<string, any>) => void;\n  placeholder?: string;\n  showQuickFilters?: boolean;\n  compact?: boolean;\n}\n\nconst EnhancedRentalSearch: React.FC<EnhancedRentalSearchProps> = ({\n  onResults,\n  onQueryChange,\n  onFiltersChange,\n  placeholder = 'Hƒæada≈• pren√°jmy...',\n  showQuickFilters = true,\n  compact = false,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const { state } = useApp();\n\n  // State\n  const [showMobileFilters, setShowMobileFilters] = useState(false);\n  const [advancedFilters, setAdvancedFilters] = useState<Record<string, any>>(\n    {}\n  );\n  const [activeQuickFilter, setActiveQuickFilter] = useState<string | null>(\n    null\n  );\n\n  // Enhanced quick filters with counts\n  const enhancedQuickFilters = useMemo<QuickFilter[]>(() => {\n    if (!state.rentals) return RENTAL_QUICK_FILTERS;\n\n    return RENTAL_QUICK_FILTERS.map(filter => {\n      let count = 0;\n\n      switch (filter.id) {\n        case 'active':\n          count = state.rentals?.filter(r => r.status === 'active').length || 0;\n          break;\n        case 'pending':\n          count =\n            state.rentals?.filter(r => r.status === 'pending').length || 0;\n          break;\n        case 'overdue':\n          count =\n            state.rentals?.filter(r => {\n              const endDate = new Date(r.endDate);\n              return endDate < new Date() && r.status === 'active';\n            }).length || 0;\n          break;\n        case 'this_month':\n          const thisMonth = new Date();\n          count =\n            state.rentals?.filter(r => {\n              const startDate = new Date(r.startDate);\n              return (\n                startDate.getMonth() === thisMonth.getMonth() &&\n                startDate.getFullYear() === thisMonth.getFullYear()\n              );\n            }).length || 0;\n          break;\n        case 'high_value':\n          count =\n            state.rentals?.filter(r => r.totalPrice && r.totalPrice > 1000)\n              .length || 0;\n          break;\n      }\n\n      return { ...filter, count };\n    });\n  }, [state.rentals]);\n\n  // Search function\n  const searchRentals = useCallback(\n    async (query: string, quickFilter?: string): Promise<Rental[]> => {\n      if (!state.rentals) return [];\n\n      let filteredRentals = [...state.rentals];\n\n      // Apply text search with diacritics normalization\n      if (query.trim()) {\n        filteredRentals = filteredRentals.filter(rental => {\n          const customer = state.customers?.find(\n            c => c.id === rental.customerId\n          );\n          const vehicle = state.vehicles?.find(v => v.id === rental.vehicleId);\n\n          // üî§ DIACRITICS NORMALIZATION: Vyhƒæad√°vanie bez ohƒæadu na diakritiku\n          return searchInTexts(\n            [\n              customer?.name,\n              customer?.email,\n              customer?.phone,\n              rental.id,\n              rental.customerName, // Pridan√© pre priame vyhƒæad√°vanie v rental\n              rental.customerEmail,\n              rental.customerPhone,\n              vehicle?.brand,\n              vehicle?.model,\n              vehicle?.licensePlate,\n              vehicle?.company,\n              rental.notes,\n            ],\n            query\n          );\n        });\n      }\n\n      // Apply quick filter\n      if (quickFilter) {\n        const currentDate = new Date();\n\n        switch (quickFilter) {\n          case 'active':\n            filteredRentals = filteredRentals.filter(\n              r => r.status === 'active'\n            );\n            break;\n          case 'pending':\n            filteredRentals = filteredRentals.filter(\n              r => r.status === 'pending'\n            );\n            break;\n          case 'overdue':\n            filteredRentals = filteredRentals.filter(r => {\n              const endDate = new Date(r.endDate);\n              return endDate < currentDate && r.status === 'active';\n            });\n            break;\n          case 'this_month':\n            filteredRentals = filteredRentals.filter(r => {\n              const startDate = new Date(r.startDate);\n              return (\n                startDate.getMonth() === currentDate.getMonth() &&\n                startDate.getFullYear() === currentDate.getFullYear()\n              );\n            });\n            break;\n          case 'high_value':\n            filteredRentals = filteredRentals.filter(\n              r => r.totalPrice && r.totalPrice > 1000\n            );\n            break;\n        }\n      }\n\n      // Apply advanced filters\n      Object.entries(advancedFilters).forEach(([key, value]) => {\n        if (!value || value === 'all') return;\n\n        switch (key) {\n          case 'company':\n            filteredRentals = filteredRentals.filter(r => {\n              // Company filter - check rental.company property directly\n              return r.company?.toLowerCase().includes(value.toLowerCase());\n            });\n            break;\n          case 'vehicle_type':\n            filteredRentals = filteredRentals.filter(r => {\n              const vehicle = state.vehicles?.find(v => v.id === r.vehicleId);\n              return vehicle?.category === value;\n            });\n            break;\n          case 'date_from':\n            filteredRentals = filteredRentals.filter(\n              r => new Date(r.startDate) >= new Date(value)\n            );\n            break;\n          case 'date_to':\n            filteredRentals = filteredRentals.filter(\n              r => new Date(r.endDate) <= new Date(value)\n            );\n            break;\n          case 'price_min':\n            filteredRentals = filteredRentals.filter(\n              r => r.totalPrice && r.totalPrice >= parseFloat(value)\n            );\n            break;\n          case 'price_max':\n            filteredRentals = filteredRentals.filter(\n              r => r.totalPrice && r.totalPrice <= parseFloat(value)\n            );\n            break;\n        }\n      });\n\n      return filteredRentals;\n    },\n    [state.rentals, state.customers, state.vehicles, advancedFilters]\n  );\n\n  // Suggestions function\n  const getSuggestions = useCallback(\n    async (query: string): Promise<SearchSuggestion[]> => {\n      if (!state.rentals || !state.customers || !state.vehicles) return [];\n\n      const suggestions: SearchSuggestion[] = [];\n      const searchLower = query.toLowerCase();\n\n      // Customer suggestions\n      const matchingCustomers = state.customers\n        .filter(\n          c =>\n            c.name?.toLowerCase().includes(searchLower) ||\n            c.email?.toLowerCase().includes(searchLower)\n        )\n        .slice(0, 3);\n\n      matchingCustomers.forEach(customer => {\n        const rentalCount = state.rentals.filter(\n          r => r.customerId === customer.id\n        ).length;\n        suggestions.push({\n          id: `customer-${customer.id}`,\n          text: customer.name,\n          type: 'suggestion',\n          category: 'Z√°kazn√≠k',\n          count: rentalCount,\n        });\n      });\n\n      // Vehicle suggestions\n      const matchingVehicles = state.vehicles\n        .filter(\n          v =>\n            v.brand?.toLowerCase().includes(searchLower) ||\n            v.model?.toLowerCase().includes(searchLower) ||\n            v.licensePlate?.toLowerCase().includes(searchLower)\n        )\n        .slice(0, 3);\n\n      matchingVehicles.forEach(vehicle => {\n        const rentalCount = state.rentals.filter(\n          r => r.vehicleId === vehicle.id\n        ).length;\n        suggestions.push({\n          id: `vehicle-${vehicle.id}`,\n          text: `${vehicle.brand} ${vehicle.model} (${vehicle.licensePlate})`,\n          type: 'suggestion',\n          category: 'Vozidlo',\n          count: rentalCount,\n        });\n      });\n\n      return suggestions;\n    },\n    [state.rentals, state.customers, state.vehicles]\n  );\n\n  // Handlers\n\n  const handleQuickFilterChange = useCallback(\n    (filterId: string | null) => {\n      setActiveQuickFilter(filterId);\n\n      // Trigger search with current query\n      const searchBar = document.querySelector(\n        'input[type=\"text\"]'\n      ) as HTMLInputElement;\n      const currentQuery = searchBar?.value || '';\n\n      searchRentals(currentQuery, filterId || undefined).then(results => {\n        onResults(results);\n      });\n    },\n    [searchRentals, onResults]\n  );\n\n  const handleAdvancedFiltersChange = useCallback(\n    (filters: Record<string, any>) => {\n      setAdvancedFilters(filters);\n      onFiltersChange?.(filters);\n    },\n    [onFiltersChange]\n  );\n\n  // Mobile filter sections\n  const mobileFilterSections = useMemo(\n    () => [\n      {\n        id: 'company',\n        title: 'Firma',\n        type: 'text' as const,\n        placeholder: 'N√°zov firmy...',\n        icon: 'üè¢',\n      },\n      {\n        id: 'vehicle_type',\n        title: 'Typ vozidla',\n        type: 'select' as const,\n        options: [\n          { label: 'Osobn√©', value: 'car' },\n          { label: 'N√°kladn√©', value: 'truck' },\n          { label: 'Dod√°vka', value: 'van' },\n          { label: 'Motorka', value: 'motorcycle' },\n        ],\n        icon: 'üöó',\n      },\n      {\n        id: 'date_from',\n        title: 'Od d√°tumu',\n        type: 'date' as const,\n        icon: 'üìÖ',\n      },\n      {\n        id: 'date_to',\n        title: 'Do d√°tumu',\n        type: 'date' as const,\n        icon: 'üìÖ',\n      },\n      {\n        id: 'price_min',\n        title: 'Min. cena',\n        type: 'text' as const,\n        placeholder: '0',\n        icon: 'üí∞',\n      },\n      {\n        id: 'price_max',\n        title: 'Max. cena',\n        type: 'text' as const,\n        placeholder: '999999',\n        icon: 'üí∞',\n      },\n    ],\n    []\n  );\n\n  const hasActiveFilters =\n    activeQuickFilter ||\n    Object.values(advancedFilters).some(v => v && v !== 'all');\n\n  return (\n    <Box>\n      {/* Search Bar */}\n      <Stack direction=\"row\" spacing={1} alignItems=\"flex-start\">\n        <Box sx={{ flex: 1 }}>\n          <EnhancedSearchBar\n            onSearch={searchRentals}\n            suggestionFunction={getSuggestions}\n            placeholder={placeholder}\n            quickFilters={showQuickFilters ? enhancedQuickFilters : []}\n            onQuickFilterChange={handleQuickFilterChange}\n            onResultsChange={onResults}\n            onQueryChange={onQueryChange}\n            showResultCount\n            showPerformanceStats={!compact}\n            debounceDelay={300}\n            maxSuggestions={6}\n            enableHistory\n            storageKey=\"rental_search_history\"\n          />\n        </Box>\n\n        {/* Mobile Filter Button */}\n        {isMobile && (\n          <Tooltip title=\"Pokroƒçil√© filtre\">\n            <IconButton\n              onClick={() => setShowMobileFilters(true)}\n              sx={{\n                mt: 0.5,\n                bgcolor: hasActiveFilters ? 'primary.main' : 'background.paper',\n                color: hasActiveFilters\n                  ? 'primary.contrastText'\n                  : 'text.primary',\n                border: `1px solid ${theme.palette.divider}`,\n                '&:hover': {\n                  bgcolor: hasActiveFilters ? 'primary.dark' : 'action.hover',\n                },\n              }}\n            >\n              <TuneIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n      </Stack>\n\n      {/* Quick Filters - Desktop */}\n      {!isMobile && showQuickFilters && (\n        <Box sx={{ mt: 2 }}>\n          <QuickFilters\n            filters={enhancedQuickFilters}\n            activeFilter={activeQuickFilter}\n            onFilterSelect={handleQuickFilterChange}\n            compact={compact}\n          />\n        </Box>\n      )}\n\n      {/* üîÑ MOBILE CLEANUP: MobileFilterDrawer removed */}\n      {/* <MobileFilterDrawer\n        open={showMobileFilters}\n        onClose={() => setShowMobileFilters(false)}\n        title=\"Filtre pren√°jmov\"\n        quickFilters={enhancedQuickFilters}\n        activeQuickFilter={activeQuickFilter}\n        onQuickFilterChange={handleQuickFilterChange}\n        filterSections={mobileFilterSections}\n        filters={advancedFilters}\n        onFiltersChange={handleAdvancedFiltersChange}\n        onApply={handleAdvancedFiltersChange}\n        onReset={() => {\n          setAdvancedFilters({});\n          setActiveQuickFilter(null);\n        }}\n        resultCount={state.rentals?.length}\n        hasActiveFilters={Boolean(hasActiveFilters)}\n      /> */}\n\n      {/* Results info */}\n      {!compact && (\n        <Typography\n          variant=\"caption\"\n          sx={{\n            display: 'block',\n            mt: 1,\n            color: 'text.secondary',\n            textAlign: 'right',\n          }}\n        >\n          {hasActiveFilters\n            ? 'Filtrovan√© v√Ωsledky'\n            : `${state.rentals?.length || 0} pren√°jmov`}\n        </Typography>\n      )}\n    </Box>\n  );\n};\n\nexport default memo(EnhancedRentalSearch);\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/MobileRentalRow.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[884,887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[884,887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[900,903],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[900,903],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1080,1083],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1080,1083],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1125,1128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1125,1128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1197,1200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1197,1200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1267,1270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1267,1270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'totalRentals' is defined but never used.","line":57,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":17}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üì± MOBILE RENTAL ROW COMPONENT - ENHANCED VERSION\n *\n * Optimalizovan√Ω pre mobiln√© zariadenia s kartov√Ωm dizajnom:\n * - Zachov√°va v≈°etky existuj√∫ce funkcie\n * - V√§ƒç≈°ie fonty a tlaƒçidl√° (touch-friendly)\n * - Lep≈°ie rozlo≈æenie inform√°ci√≠\n * - Kartov√Ω dizajn namiesto tabuƒækov√©ho riadku\n * - React.memo pre performance\n */\n\nimport {\n  Business as BusinessIcon,\n  DirectionsCar as CarIcon,\n  Check as CheckIcon,\n  ContentCopy as ContentCopyIcon,\n  Delete as DeleteIcon,\n  Email as EmailIcon,\n  Phone as PhoneIcon,\n  Schedule as ScheduleIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  Fade,\n  IconButton,\n  Typography,\n} from '@mui/material';\nimport React, { memo } from 'react';\nimport { formatDateTime } from '../../utils/formatters';\nimport PriceDisplay from './components/PriceDisplay';\n\ninterface MobileRentalRowProps {\n  rental: any;\n  vehicle: any;\n  index: number;\n  totalRentals: number;\n  hasHandover: boolean;\n  hasReturn: boolean;\n  isLoadingProtocolStatus: boolean;\n  protocolStatusLoaded: boolean;\n  onEdit: (rental: any) => void;\n  onOpenProtocolMenu: (rental: any, type: 'handover' | 'return') => void;\n  onCheckProtocols: (rental: any) => void;\n  onDelete?: (id: string) => void;\n  onClone?: (rental: any) => void; // üîÑ NOV√â: Clone funkcionalita\n}\n\nexport const MobileRentalRow = memo<MobileRentalRowProps>(\n  ({\n    rental,\n    vehicle,\n    index,\n    totalRentals,\n    hasHandover,\n    hasReturn,\n    isLoadingProtocolStatus,\n    protocolStatusLoaded,\n    onEdit,\n    onOpenProtocolMenu,\n    onCheckProtocols,\n    onDelete,\n    onClone, // üîÑ NOV√â: Clone funkcionalita\n  }) => {\n    // üéØ Memoized handlers to prevent recreation\n    const handleCardClick = React.useCallback(() => {\n      onEdit(rental);\n    }, [rental, onEdit]);\n\n    const handleHandoverClick = React.useCallback(\n      (e: React.MouseEvent) => {\n        e.stopPropagation();\n        onOpenProtocolMenu(rental, 'handover');\n      },\n      [rental, onOpenProtocolMenu]\n    );\n\n    const handleReturnClick = React.useCallback(\n      (e: React.MouseEvent) => {\n        e.stopPropagation();\n        onOpenProtocolMenu(rental, 'return');\n      },\n      [rental, onOpenProtocolMenu]\n    );\n\n    const handleProtocolCheck = React.useCallback(\n      (e: React.MouseEvent) => {\n        e.stopPropagation();\n        onCheckProtocols(rental);\n      },\n      [rental, onCheckProtocols]\n    );\n\n    const handleDeleteClick = React.useCallback(\n      (e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (onDelete) onDelete(rental.id);\n      },\n      [rental.id, onDelete]\n    );\n\n    // üîÑ CLONE HANDLER\n    const handleCloneClick = React.useCallback(\n      (e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (onClone) onClone(rental);\n      },\n      [rental, onClone]\n    );\n\n    // üé® Status helpers\n    const getStatusColor = () => {\n      switch (rental.status) {\n        case 'active':\n          return '#4caf50';\n        case 'finished':\n          return '#2196f3';\n        case 'pending':\n          return '#ff9800';\n        default:\n          return '#757575';\n      }\n    };\n\n    const getStatusLabel = () => {\n      switch (rental.status) {\n        case 'active':\n          return 'AKT√çVNY';\n        case 'finished':\n          return 'UKONƒåEN√ù';\n        case 'pending':\n          return 'ƒåAKAJ√öCI';\n        default:\n          return 'NOV√ù';\n      }\n    };\n\n    // üîÑ Detekcia flexibiln√©ho pren√°jmu\n    const isFlexible = rental.isFlexible || false;\n\n    return (\n      <Fade in timeout={300 + index * 50}>\n        <Card\n          sx={{\n            mb: 1.5, // Men≈°√≠ spacing medzi kartami\n            borderRadius: 2, // Men≈°√≠ border radius\n            boxShadow: '0 2px 8px rgba(0,0,0,0.08)', // Jemnej≈°√≠ shadow\n            border: isFlexible\n              ? '2px solid #ff9800'\n              : '1px solid rgba(0,0,0,0.06)',\n            cursor: 'pointer',\n            transition: 'all 0.3s ease',\n            backgroundColor: isFlexible ? '#fff8f0' : 'white',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.12)',\n              transform: 'translateY(-1px)', // Men≈°√≠ hover efekt\n            },\n            '&:active': {\n              transform: 'translateY(0px)',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            },\n          }}\n          onClick={handleCardClick}\n        >\n          <CardContent sx={{ p: 2 }}>\n            {/* üöó HLAVIƒåKA S VOZIDLOM A STATUSOM */}\n            <Box\n              sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'flex-start',\n                mb: 1.5,\n              }}\n            >\n              <Box sx={{ flex: 1 }}>\n                <Typography\n                  variant=\"h6\"\n                  sx={{\n                    fontWeight: 700,\n                    fontSize: '1rem',\n                    color: '#1976d2',\n                    mb: 0.25,\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                  }}\n                >\n                  <CarIcon fontSize=\"small\" />\n                  {vehicle?.licensePlate || 'N/A'}\n                </Typography>\n                <Typography\n                  variant=\"body2\"\n                  sx={{\n                    color: '#666',\n                    fontSize: '0.85rem',\n                    mb: 0.25,\n                  }}\n                >\n                  {vehicle?.brand} {vehicle?.model}\n                </Typography>\n                {/* üè¢ FIRMA - V≈ΩDY VIDITEƒΩN√Å */}\n                {vehicle?.company && (\n                  <Typography\n                    variant=\"body2\"\n                    sx={{\n                      color: '#ff9800',\n                      fontSize: '0.8rem',\n                      fontWeight: 600,\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 0.5,\n                      mb: 0.25,\n                    }}\n                  >\n                    <BusinessIcon fontSize=\"small\" />\n                    {vehicle.company}\n                  </Typography>\n                )}\n              </Box>\n\n              <Box\n                sx={{\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'flex-end',\n                  gap: 1,\n                }}\n              >\n                <Chip\n                  label={getStatusLabel()}\n                  size=\"medium\" // V√§ƒç≈°√≠ chip\n                  sx={{\n                    bgcolor: getStatusColor(),\n                    color: 'white',\n                    fontWeight: 600,\n                    fontSize: '0.8rem', // V√§ƒç≈°√≠ font\n                    height: 32, // V√§ƒç≈°ia v√Ω≈°ka\n                  }}\n                />\n                {isFlexible && (\n                  <Chip\n                    label=\"FLEXIBILN√ù\"\n                    size=\"medium\"\n                    sx={{\n                      bgcolor: '#ff9800',\n                      color: 'white',\n                      fontWeight: 600,\n                      fontSize: '0.75rem',\n                      height: 28,\n                    }}\n                  />\n                )}\n              </Box>\n            </Box>\n\n            {/* üë§ Z√ÅKAZN√çK - KOMPAKTNEJ≈†IE */}\n            <Box sx={{ mb: 1.5 }}>\n              <Typography\n                variant=\"subtitle1\"\n                sx={{\n                  fontWeight: 600,\n                  fontSize: '0.95rem',\n                  color: '#333',\n                  mb: 0.25,\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 1,\n                }}\n              >\n                <Box\n                  sx={{\n                    width: 6,\n                    height: 6,\n                    borderRadius: '50%',\n                    bgcolor: '#4caf50',\n                  }}\n                />\n                {rental.customerName}\n              </Typography>\n\n              {/* üìû TELEF√ìN A EMAIL - V JEDNOM RIADKU */}\n              <Box\n                sx={{\n                  display: 'flex',\n                  flexWrap: 'wrap',\n                  gap: 2,\n                  alignItems: 'center',\n                }}\n              >\n                {(rental.customerPhone || rental.customer?.phone) && (\n                  <Typography\n                    variant=\"body2\"\n                    sx={{\n                      color: '#666',\n                      fontSize: '0.8rem',\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 0.5,\n                    }}\n                  >\n                    <PhoneIcon fontSize=\"small\" />\n                    {rental.customerPhone || rental.customer?.phone}\n                  </Typography>\n                )}\n\n                {(rental.customerEmail || rental.customer?.email) && (\n                  <Typography\n                    variant=\"body2\"\n                    sx={{\n                      color: '#666',\n                      fontSize: '0.8rem',\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 0.5,\n                    }}\n                  >\n                    <EmailIcon fontSize=\"small\" />\n                    {rental.customerEmail || rental.customer?.email}\n                  </Typography>\n                )}\n              </Box>\n            </Box>\n\n            {/* üìÖ D√ÅTUMY A CENA - KOMPAKTNEJ≈†IE */}\n            <Box\n              sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                mb: 2,\n                p: 1.5,\n                bgcolor: '#f8f9fa',\n                borderRadius: 2,\n              }}\n            >\n              <Box>\n                <Typography\n                  variant=\"body2\"\n                  sx={{\n                    color: '#666',\n                    fontSize: '0.75rem',\n                    mb: 0.25,\n                  }}\n                >\n                  Obdobie pren√°jmu\n                </Typography>\n                <Typography\n                  variant=\"body1\"\n                  sx={{\n                    fontWeight: 700,\n                    fontSize: '0.95rem',\n                    color: '#1976d2',\n                    lineHeight: 1.3,\n                    mb: 0.25,\n                  }}\n                >\n                  üìÖ {formatDateTime(rental.startDate)}\n                </Typography>\n                <Typography\n                  variant=\"body1\"\n                  sx={{\n                    fontWeight: 700,\n                    fontSize: '0.95rem',\n                    color: '#f57c00',\n                    lineHeight: 1.3,\n                  }}\n                >\n                  üèÅ {formatDateTime(rental.endDate)}\n                </Typography>\n              </Box>\n\n              <Box sx={{ textAlign: 'right' }}>\n                <Typography\n                  variant=\"body2\"\n                  sx={{\n                    color: '#666',\n                    fontSize: '0.75rem',\n                    mb: 0.25,\n                  }}\n                >\n                  Celkov√° cena\n                </Typography>\n                <PriceDisplay\n                  rental={rental}\n                  variant=\"mobile\"\n                  showExtraKm={true}\n                />\n              </Box>\n            </Box>\n\n            {/* üîß PROTOKOLY - KOMPAKTNEJ≈†IE TLAƒåIDL√Å */}\n            <Box\n              sx={{\n                display: 'flex',\n                gap: 1.5,\n                mb: 1.5,\n              }}\n            >\n              <Button\n                variant={hasHandover ? 'contained' : 'outlined'}\n                size=\"large\"\n                fullWidth\n                onClick={handleHandoverClick}\n                startIcon={hasHandover ? <CheckIcon /> : <ScheduleIcon />}\n                sx={{\n                  height: 42, // Kompaktnej≈°ie tlaƒçidlo\n                  fontSize: '0.85rem',\n                  fontWeight: 600,\n                  bgcolor: hasHandover ? '#4caf50' : 'transparent',\n                  borderColor: hasHandover ? '#4caf50' : '#ff9800',\n                  color: hasHandover ? 'white' : '#ff9800',\n                  '&:hover': {\n                    bgcolor: hasHandover ? '#388e3c' : 'rgba(255,152,0,0.1)',\n                    transform: 'scale(1.02)',\n                    boxShadow: hasHandover\n                      ? '0 4px 12px rgba(76,175,80,0.3)'\n                      : '0 4px 12px rgba(255,152,0,0.2)',\n                  },\n                  transition: 'all 0.2s ease',\n                }}\n              >\n                {hasHandover ? 'Odovzdan√©' : 'Odovzda≈•'}\n              </Button>\n\n              <Button\n                variant={hasReturn ? 'contained' : 'outlined'}\n                size=\"large\"\n                fullWidth\n                onClick={handleReturnClick}\n                startIcon={hasReturn ? <CheckIcon /> : <ScheduleIcon />}\n                sx={{\n                  height: 42, // Kompaktnej≈°ie tlaƒçidlo\n                  fontSize: '0.85rem',\n                  fontWeight: 600,\n                  bgcolor: hasReturn ? '#4caf50' : 'transparent',\n                  borderColor: hasReturn ? '#4caf50' : '#ff9800',\n                  color: hasReturn ? 'white' : '#ff9800',\n                  '&:hover': {\n                    bgcolor: hasReturn ? '#388e3c' : 'rgba(255,152,0,0.1)',\n                    transform: 'scale(1.02)',\n                    boxShadow: hasReturn\n                      ? '0 4px 12px rgba(76,175,80,0.3)'\n                      : '0 4px 12px rgba(255,152,0,0.2)',\n                  },\n                  transition: 'all 0.2s ease',\n                }}\n              >\n                {hasReturn ? 'Prevzat√©' : 'Prevzia≈•'}\n              </Button>\n            </Box>\n\n            {/* üìù POZN√ÅMKY - AK EXISTUJ√ö */}\n            {rental.notes && (\n              <Box sx={{ mb: 1.5 }}>\n                <Typography\n                  variant=\"body2\"\n                  sx={{\n                    color: '#333',\n                    bgcolor: '#f5f5f5',\n                    p: 1.5,\n                    borderRadius: 1,\n                    fontSize: '0.8rem',\n                    border: '1px solid #e0e0e0',\n                  }}\n                >\n                  üìù {rental.notes}\n                </Typography>\n              </Box>\n            )}\n\n            {/* üîç PROTOKOL CHECK & PLATBA STATUS & DELETE - KOMPAKTNE V JEDNOM RIADKU */}\n            <Box\n              sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n              }}\n            >\n              {/* Protokol check */}\n              {isLoadingProtocolStatus ? (\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  disabled\n                  sx={{\n                    borderColor: '#ff9800',\n                    color: '#ff9800',\n                    fontSize: '0.75rem',\n                    height: 32,\n                  }}\n                >\n                  Naƒç√≠tavam...\n                </Button>\n              ) : !protocolStatusLoaded ? (\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  onClick={handleProtocolCheck}\n                  sx={{\n                    borderColor: '#2196f3',\n                    color: '#2196f3',\n                    fontSize: '0.75rem',\n                    height: 32,\n                    '&:hover': {\n                      bgcolor: 'rgba(33,150,243,0.1)',\n                    },\n                  }}\n                >\n                  Skontrolova≈•\n                </Button>\n              ) : (\n                <Box /> // Pr√°zdny box pre spacing\n              )}\n\n              {/* Platba status + Delete tlaƒçidlo v jednom riadku */}\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <Chip\n                  label={rental.paid ? 'Uhraden√©' : 'Neuhraden√©'}\n                  size=\"small\"\n                  sx={{\n                    height: 24,\n                    fontSize: '0.7rem',\n                    bgcolor: rental.paid ? '#4caf50' : '#f44336',\n                    color: 'white',\n                    fontWeight: 500,\n                  }}\n                />\n\n                {/* üîÑ CLONE TLAƒåIDLO - VEDƒΩA PLATBY */}\n                {onClone && (\n                  <IconButton\n                    onClick={handleCloneClick}\n                    title=\"Kop√≠rova≈• pren√°jom na ƒèal≈°ie obdobie\"\n                    sx={{\n                      color: '#4caf50',\n                      width: 32,\n                      height: 32,\n                      '&:hover': {\n                        bgcolor: 'rgba(76,175,80,0.1)',\n                        transform: 'scale(1.1)',\n                      },\n                      transition: 'all 0.2s ease',\n                    }}\n                  >\n                    <ContentCopyIcon fontSize=\"small\" />\n                  </IconButton>\n                )}\n\n                {/* üóëÔ∏è DELETE TLAƒåIDLO - VEDƒΩA PLATBY */}\n                {onDelete && (\n                  <IconButton\n                    onClick={handleDeleteClick}\n                    sx={{\n                      color: '#f44336',\n                      width: 32,\n                      height: 32,\n                      '&:hover': {\n                        bgcolor: 'rgba(244,67,54,0.1)',\n                        transform: 'scale(1.1)',\n                      },\n                      transition: 'all 0.2s ease',\n                    }}\n                  >\n                    <DeleteIcon fontSize=\"small\" />\n                  </IconButton>\n                )}\n              </Box>\n            </Box>\n          </CardContent>\n        </Card>\n      </Fade>\n    );\n  }\n);\n\nMobileRentalRow.displayName = 'MobileRentalRow';\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/OptimizedRentalRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/PendingRentalsManager.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Vehicle' is defined but never used.","line":44,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Customer' is defined but never used.","line":44,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":27}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  CheckCircle as ApproveIcon,\n  Cancel as RejectIcon,\n  Email as EmailIcon,\n  Schedule as PendingIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n  DirectionsCar as CarIcon,\n  Person as PersonIcon,\n  Euro as EuroIcon,\n  CalendarToday as CalendarIcon,\n  LocationOn as LocationIcon,\n  CheckCircle,\n  Edit as EditIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n  Alert,\n  Chip,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  TextField,\n  Grid,\n  Paper,\n  IconButton,\n  Collapse,\n  Divider,\n  Badge,\n  Tooltip,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n\nimport { useApp } from '../../context/AppContext';\nimport { useAuth } from '../../context/AuthContext';\nimport { apiService } from '../../services/api';\nimport type { Rental } from '../../types';\nimport { Vehicle, Customer } from '../../types';\n\nimport EditRentalDialog from './EditRentalDialog';\n\ninterface PendingRentalsManagerProps {\n  onRentalApproved?: (rentalId: string) => void;\n  onRentalRejected?: (rentalId: string) => void;\n}\n\ninterface RentalCardProps {\n  rental: Rental;\n  onApprove: (rentalId: string) => void;\n  onReject: (rentalId: string, reason: string) => void;\n  onEdit: (rental: Rental) => void;\n}\n\nconst RentalCard: React.FC<RentalCardProps> = ({\n  rental,\n  onApprove,\n  onReject,\n  onEdit,\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [showRejectDialog, setShowRejectDialog] = useState(false);\n  const [rejectReason, setRejectReason] = useState('');\n  const [processing, setProcessing] = useState(false);\n\n  const handleApprove = async () => {\n    setProcessing(true);\n    try {\n      await onApprove(rental.id);\n    } catch (error) {\n      console.error('Error approving rental:', error);\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const handleReject = async () => {\n    if (!rejectReason.trim()) {\n      return;\n    }\n    setProcessing(true);\n    try {\n      await onReject(rental.id, rejectReason);\n      setShowRejectDialog(false);\n      setRejectReason('');\n    } catch (error) {\n      console.error('Error rejecting rental:', error);\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const formatDate = (date: string | Date) => {\n    return new Date(date).toLocaleDateString('sk-SK', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  const formatCurrency = (amount: string | number) => {\n    return `${amount}‚Ç¨`;\n  };\n\n  return (\n    <>\n      <Card sx={{ mb: 2, border: '1px solid #e0e0e0' }}>\n        <CardContent>\n          {/* Header */}\n          <Box\n            display=\"flex\"\n            justifyContent=\"space-between\"\n            alignItems=\"center\"\n            mb={2}\n          >\n            <Box display=\"flex\" alignItems=\"center\" gap={1}>\n              <Badge\n                badgeContent={<EmailIcon sx={{ fontSize: 12 }} />}\n                color=\"primary\"\n              >\n                <PendingIcon color=\"warning\" />\n              </Badge>\n              <Typography variant=\"h6\" component=\"div\">\n                {rental.orderNumber || 'N/A'}\n              </Typography>\n              <Chip\n                label=\"Email Auto\"\n                size=\"small\"\n                color=\"info\"\n                icon={<EmailIcon />}\n              />\n            </Box>\n            <Box display=\"flex\" gap={1}>\n              <Tooltip title=\"Upravi≈• pren√°jom\">\n                <Button\n                  size=\"small\"\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  startIcon={<EditIcon />}\n                  onClick={() => onEdit(rental)}\n                  disabled={processing}\n                >\n                  Upravi≈•\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Schv√°li≈• pren√°jom\">\n                <Button\n                  size=\"small\"\n                  variant=\"contained\"\n                  color=\"success\"\n                  startIcon={<ApproveIcon />}\n                  onClick={handleApprove}\n                  disabled={processing}\n                >\n                  Schv√°li≈•\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Zamietnu≈• pren√°jom\">\n                <Button\n                  size=\"small\"\n                  variant=\"outlined\"\n                  color=\"error\"\n                  startIcon={<RejectIcon />}\n                  onClick={() => setShowRejectDialog(true)}\n                  disabled={processing}\n                >\n                  Zamietnu≈•\n                </Button>\n              </Tooltip>\n            </Box>\n          </Box>\n\n          {/* Main Info */}\n          <Grid container spacing={2} sx={{ mb: 2 }}>\n            <Grid item xs={12} md={6}>\n              <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                <PersonIcon color=\"primary\" fontSize=\"small\" />\n                <Typography variant=\"body1\" fontWeight=\"bold\">\n                  {rental.customerName}\n                </Typography>\n              </Box>\n              <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                <CarIcon color=\"primary\" fontSize=\"small\" />\n                <Typography variant=\"body2\">\n                  {rental.vehicleName || 'Vozidlo nen√°jden√©'}\n                  {rental.vehicleCode && ` (${rental.vehicleCode})`}\n                </Typography>\n              </Box>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                <EuroIcon color=\"primary\" fontSize=\"small\" />\n                <Typography variant=\"body1\">\n                  <strong>{formatCurrency(rental.totalPrice)}</strong>\n                  {rental.deposit && (\n                    <span style={{ marginLeft: '8px', color: '#666' }}>\n                      (Depozit: {formatCurrency(rental.deposit)})\n                    </span>\n                  )}\n                </Typography>\n              </Box>\n              <Box display=\"flex\" alignItems=\"center\" gap={1}>\n                <CalendarIcon color=\"primary\" fontSize=\"small\" />\n                <Typography variant=\"body2\">\n                  {formatDate(rental.startDate)} - {formatDate(rental.endDate)}\n                </Typography>\n              </Box>\n            </Grid>\n          </Grid>\n\n          {/* Expand/Collapse */}\n          <Box display=\"flex\" justifyContent=\"center\">\n            <IconButton onClick={() => setExpanded(!expanded)} size=\"small\">\n              {expanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n              <Typography variant=\"caption\" sx={{ ml: 1 }}>\n                {expanded ? 'Skry≈• detaily' : 'Zobrazi≈• detaily'}\n              </Typography>\n            </IconButton>\n          </Box>\n\n          {/* Expanded Details */}\n          <Collapse in={expanded}>\n            <Divider sx={{ my: 2 }} />\n            <Grid container spacing={2}>\n              <Grid item xs={12} md={6}>\n                <Typography variant=\"subtitle2\" color=\"primary\" gutterBottom>\n                  Detaily pren√°jmu\n                </Typography>\n                {rental.handoverPlace && (\n                  <Box display=\"flex\" alignItems=\"center\" gap={1} mb={1}>\n                    <LocationIcon fontSize=\"small\" />\n                    <Typography variant=\"body2\">\n                      Miesto: {rental.handoverPlace}\n                    </Typography>\n                  </Box>\n                )}\n                {rental.dailyKilometers && (\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    Denn√Ω limit km: {rental.dailyKilometers}\n                  </Typography>\n                )}\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Vytvoren√©:{' '}\n                  {formatDate(rental.autoProcessedAt || rental.createdAt)}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} md={6}>\n                <Typography variant=\"subtitle2\" color=\"primary\" gutterBottom>\n                  Obsah emailu\n                </Typography>\n                <Paper\n                  sx={{\n                    p: 2,\n                    backgroundColor: '#f5f5f5',\n                    maxHeight: 200,\n                    overflow: 'auto',\n                    fontFamily: 'monospace',\n                    fontSize: '0.8em',\n                    whiteSpace: 'pre-wrap',\n                  }}\n                >\n                  {rental.emailContent || 'Email obsah nedostupn√Ω'}\n                </Paper>\n              </Grid>\n            </Grid>\n          </Collapse>\n        </CardContent>\n      </Card>\n\n      {/* Reject Dialog */}\n      <Dialog\n        open={showRejectDialog}\n        onClose={() => setShowRejectDialog(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>Zamietnu≈• automatick√Ω pren√°jom</DialogTitle>\n        <DialogContent>\n          <DialogContentText sx={{ mb: 2 }}>\n            Preƒço zamietate tento pren√°jom? D√¥vod bude ulo≈æen√Ω pre bud√∫cu\n            referenciu.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            fullWidth\n            multiline\n            rows={3}\n            label=\"D√¥vod zamietnutia\"\n            value={rejectReason}\n            onChange={e => setRejectReason(e.target.value)}\n            placeholder=\"Napr.: Neplatn√© d√°tumy, ch√Ωbaj√∫ce inform√°cie, duplicitn√° objedn√°vka...\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setShowRejectDialog(false)}>Zru≈°i≈•</Button>\n          <Button\n            onClick={handleReject}\n            color=\"error\"\n            variant=\"contained\"\n            disabled={!rejectReason.trim() || processing}\n          >\n            Zamietnu≈•\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nconst PendingRentalsManager: React.FC<PendingRentalsManagerProps> = ({\n  onRentalApproved,\n  onRentalRejected,\n}) => {\n  const [pendingRentals, setPendingRentals] = useState<Rental[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [editingRental, setEditingRental] = useState<Rental | null>(null);\n  const { state } = useAuth();\n  const { state: appState } = useApp();\n\n  const fetchPendingRentals = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const rentals = await apiService.getPendingAutomaticRentals();\n      console.log('‚úÖ Loaded pending rentals:', rentals?.length || 0);\n      setPendingRentals(rentals);\n    } catch (error: unknown) {\n      console.error('‚ùå Error fetching pending rentals:', err);\n      setError('Nepodarilo sa naƒç√≠ta≈• ƒçakaj√∫ce pren√°jmy');\n      setPendingRentals([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleApproveRental = async (rentalId: string) => {\n    try {\n      await apiService.approveAutomaticRental(rentalId);\n      // Remove from pending list\n      setPendingRentals(prev => prev.filter(r => r.id !== rentalId));\n      onRentalApproved?.(rentalId);\n    } catch (error: unknown) {\n      console.error('Error approving rental:', err);\n      setError('Nepodarilo sa schv√°li≈• pren√°jom');\n    }\n  };\n\n  const handleRejectRental = async (rentalId: string, reason: string) => {\n    try {\n      await apiService.rejectAutomaticRental(rentalId, reason);\n      // Remove from pending list\n      setPendingRentals(prev => prev.filter(r => r.id !== rentalId));\n      onRentalRejected?.(rentalId);\n    } catch (error: unknown) {\n      console.error('Error rejecting rental:', err);\n      setError('Nepodarilo sa zamietnu≈• pren√°jom');\n    }\n  };\n\n  const handleEditRental = (rental: Rental) => {\n    setEditingRental(rental);\n    setEditDialogOpen(true);\n  };\n\n  const handleSaveEditedRental = (updatedData: Partial<Rental>) => {\n    if (!editingRental) return;\n\n    // Update rental in the list\n    setPendingRentals(prev =>\n      prev.map(rental =>\n        rental.id === editingRental.id ? { ...rental, ...updatedData } : rental\n      )\n    );\n\n    setEditDialogOpen(false);\n    setEditingRental(null);\n  };\n\n  useEffect(() => {\n    if (state.user && state.isAuthenticated) {\n      fetchPendingRentals();\n    }\n  }, [state.user, state.isAuthenticated]);\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" p={4}>\n        <Typography>Naƒç√≠tavam ƒçakaj√∫ce pren√°jmy...</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      {/* Header */}\n      <Box\n        display=\"flex\"\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        mb={3}\n      >\n        <Typography variant=\"h4\" component=\"h1\">\n          ƒåakaj√∫ce automatick√© pren√°jmy\n        </Typography>\n        <Box display=\"flex\" alignItems=\"center\" gap={2}>\n          <Badge badgeContent={pendingRentals?.length || 0} color=\"warning\">\n            <PendingIcon />\n          </Badge>\n          <Button\n            variant=\"outlined\"\n            onClick={fetchPendingRentals}\n            disabled={loading}\n          >\n            Obnovi≈•\n          </Button>\n        </Box>\n      </Box>\n\n      {/* Error Alert */}\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\n          {error}\n        </Alert>\n      )}\n\n      {/* Empty State */}\n      {pendingRentals?.length === 0 && !loading && (\n        <Card>\n          <CardContent sx={{ textAlign: 'center', py: 6 }}>\n            <CheckCircle fontSize=\"large\" color=\"success\" sx={{ mb: 2 }} />\n            <Typography variant=\"h6\" gutterBottom>\n              ≈Ωiadne ƒçakaj√∫ce pren√°jmy\n            </Typography>\n            <Typography variant=\"body2\" color=\"textSecondary\">\n              V≈°etky automatick√© pren√°jmy boli spracovan√© alebo ≈æiadne e≈°te\n              neprii≈°li.\n            </Typography>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Pending Rentals List */}\n      {pendingRentals?.map(rental => (\n        <RentalCard\n          key={rental.id}\n          rental={rental}\n          onApprove={handleApproveRental}\n          onReject={handleRejectRental}\n          onEdit={handleEditRental}\n        />\n      ))}\n\n      {/* Edit Rental Dialog */}\n      <EditRentalDialog\n        open={editDialogOpen}\n        rental={editingRental}\n        vehicles={appState.vehicles}\n        customers={appState.customers}\n        onClose={() => {\n          setEditDialogOpen(false);\n          setEditingRental(null);\n        }}\n        onSave={handleSaveEditedRental}\n      />\n    </Box>\n  );\n};\n\nexport default PendingRentalsManager;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalAdvancedFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalCardView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_isMobile' is assigned a value but never used.","line":72,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_isFinished' is assigned a value but never used.","line":118,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":118,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Business as BusinessIcon,\n  DirectionsCar as CarIcon,\n  CheckCircle as CheckCircleIcon,\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  Error as ErrorIcon,\n  PhotoLibrary as GalleryIcon,\n  Assignment as HandoverIcon,\n  PictureAsPdf as PDFIcon,\n  Payment as PaymentIcon,\n  Pending as PendingIcon,\n  Person as PersonIcon,\n  AssignmentReturn as ReturnIcon,\n  Schedule as ScheduleIcon,\n  Visibility as VisibilityIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  Divider,\n  Grid,\n  IconButton,\n  Tooltip,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@mui/material';\nimport React, { memo } from 'react';\nimport { formatDateTime } from '../../utils/formatters';\nimport PriceDisplay from './components/PriceDisplay';\n\nimport type { Rental } from '../../types';\n\nexport type CardViewMode = 'grid' | 'list' | 'compact' | 'detailed';\n\ninterface RentalCardViewProps {\n  rentals: Rental[];\n  viewMode: CardViewMode;\n  onEdit: (rental: Rental) => void;\n  onDelete: (rentalId: string) => void;\n  onCreateHandover: (rental: Rental) => void;\n  onCreateReturn: (rental: Rental) => void;\n  onViewPDF: (\n    protocolId: string,\n    type: 'handover' | 'return',\n    title: string\n  ) => void;\n  onOpenGallery: (rental: Rental, protocolType: 'handover' | 'return') => void;\n  onViewProtocols: (rental: Rental) => void;\n  protocols: Record<string, { handover?: unknown; return?: unknown }>;\n  loadingProtocols: string[];\n}\n\nconst RentalCardView: React.FC<RentalCardViewProps> = ({\n  rentals,\n  viewMode,\n  onEdit,\n  onDelete,\n  onCreateHandover,\n  onCreateReturn,\n  onViewPDF,\n  onOpenGallery,\n  onViewProtocols,\n  protocols,\n  loadingProtocols,\n}) => {\n  const theme = useTheme();\n  const _isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  const getStatusColor = (status: string | undefined) => {\n    switch (status?.toLowerCase()) {\n      case 'akt√≠vny':\n      case 'active':\n        return 'success';\n      case 'dokonƒçen√Ω':\n      case 'completed':\n        return 'default';\n      case 'zru≈°en√Ω':\n      case 'cancelled':\n        return 'error';\n      case 'po term√≠ne':\n      case 'overdue':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n\n  const getStatusIcon = (status: string | undefined) => {\n    switch (status?.toLowerCase()) {\n      case 'akt√≠vny':\n      case 'active':\n        return <CheckCircleIcon fontSize=\"small\" />;\n      case 'dokonƒçen√Ω':\n      case 'completed':\n        return <CheckCircleIcon fontSize=\"small\" />;\n      case 'zru≈°en√Ω':\n      case 'cancelled':\n        return <ErrorIcon fontSize=\"small\" />;\n      case 'po term√≠ne':\n      case 'overdue':\n        return <PendingIcon fontSize=\"small\" />;\n      default:\n        return <PendingIcon fontSize=\"small\" />;\n    }\n  };\n\n  const renderCompactCard = (rental: Rental) => {\n    const hasHandover = protocols[rental.id]?.handover;\n    const hasReturn = protocols[rental.id]?.return;\n    const isActive =\n      rental.status?.toLowerCase() === 'akt√≠vny' ||\n      rental.status?.toLowerCase() === 'active';\n    const _isFinished =\n      rental.status?.toLowerCase() === 'dokonƒçen√Ω' ||\n      rental.status?.toLowerCase() === 'completed';\n\n    return (\n      <Card\n        key={rental.id}\n        sx={{\n          height: '100%',\n          cursor: 'pointer',\n          transition: 'all 0.3s ease',\n          border: '1px solid',\n          borderColor: isActive ? '#4caf50' : 'divider',\n          '&:hover': {\n            transform: 'translateY(-4px)',\n            boxShadow: '0 8px 25px rgba(0,0,0,0.15)',\n            borderColor: isActive ? '#4caf50' : 'primary.main',\n          },\n          position: 'relative',\n          overflow: 'visible',\n        }}\n        onClick={() => onEdit(rental)}\n      >\n        {/* Status indicator */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: -8,\n            right: 16,\n            zIndex: 1,\n          }}\n        >\n          <Chip\n            label={rental.status}\n            color={getStatusColor(rental.status)}\n            size=\"small\"\n            icon={getStatusIcon(rental.status)}\n            sx={{\n              fontWeight: 'bold',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            }}\n          />\n        </Box>\n\n        {/* Protocol status indicator */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: 8,\n            left: 8,\n            zIndex: 1,\n          }}\n        >\n          <Box sx={{ display: 'flex', gap: 0.5 }}>\n            {hasHandover && (\n              <Chip\n                icon={<HandoverIcon />}\n                label=\"\"\n                color=\"success\"\n                size=\"small\"\n                sx={{\n                  minWidth: 32,\n                  height: 24,\n                  '& .MuiChip-icon': { fontSize: 16 },\n                }}\n              />\n            )}\n            {hasReturn && (\n              <Chip\n                icon={<ReturnIcon />}\n                label=\"\"\n                color=\"primary\"\n                size=\"small\"\n                sx={{\n                  minWidth: 32,\n                  height: 24,\n                  '& .MuiChip-icon': { fontSize: 16 },\n                }}\n              />\n            )}\n          </Box>\n        </Box>\n\n        <CardContent sx={{ p: 2, pt: 4 }}>\n          {/* Vehicle info */}\n          <Box sx={{ mb: 1.5 }}>\n            <Box\n              sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 0.5 }}\n            >\n              <CarIcon color=\"primary\" fontSize=\"small\" />\n              <Typography variant=\"subtitle1\" fontWeight=\"bold\" color=\"primary\">\n                {rental.vehicle\n                  ? `${rental.vehicle.brand} ${rental.vehicle.model}`\n                  : 'Bez vozidla'}\n              </Typography>\n            </Box>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 3 }}>\n              {rental.vehicle?.licensePlate || 'N/A'}\n            </Typography>\n          </Box>\n\n          {/* Customer */}\n          <Box sx={{ mb: 1.5 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <PersonIcon color=\"action\" fontSize=\"small\" />\n              <Typography variant=\"body2\" fontWeight=\"medium\">\n                {rental.customerName}\n              </Typography>\n            </Box>\n          </Box>\n\n          {/* Dates */}\n          <Box sx={{ mb: 1.5 }}>\n            <Box\n              sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 0.5 }}\n            >\n              <ScheduleIcon color=\"action\" fontSize=\"small\" />\n              <Typography variant=\"body2\" fontWeight=\"medium\">\n                {formatDateTime(rental.startDate)}\n              </Typography>\n            </Box>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 3 }}>\n              do {formatDateTime(rental.endDate)}\n            </Typography>\n          </Box>\n\n          {/* Price */}\n          <PriceDisplay rental={rental} variant=\"compact\" showExtraKm={false} />\n\n          {/* Protocol actions - v≈ædy zobrazen√© */}\n          <Box sx={{ display: 'flex', gap: 0.5, mb: 1, flexWrap: 'wrap' }}>\n            <Button\n              size=\"small\"\n              variant=\"outlined\"\n              startIcon={<VisibilityIcon />}\n              onClick={e => {\n                e.stopPropagation();\n                onViewProtocols(rental);\n              }}\n              disabled={loadingProtocols.includes(rental.id)}\n              sx={{ flex: 1, minWidth: 'fit-content' }}\n            >\n              {loadingProtocols.includes(rental.id)\n                ? 'Naƒç√≠tavam...'\n                : 'Zobrazi≈• protokoly'}\n            </Button>\n            {hasHandover && (\n              <Button\n                size=\"small\"\n                variant=\"outlined\"\n                startIcon={<PDFIcon />}\n                onClick={e => {\n                  e.stopPropagation();\n                  onViewPDF(hasHandover.id, 'handover', 'Preberac√≠ protokol');\n                }}\n                sx={{ minWidth: 'fit-content' }}\n              >\n                PDF\n              </Button>\n            )}\n            {hasReturn && (\n              <Button\n                size=\"small\"\n                variant=\"outlined\"\n                startIcon={<PDFIcon />}\n                onClick={e => {\n                  e.stopPropagation();\n                  onViewPDF(hasReturn.id, 'return', 'Preberac√≠ protokol');\n                }}\n                sx={{ minWidth: 'fit-content' }}\n              >\n                PDF\n              </Button>\n            )}\n          </Box>\n\n          {/* Protocol details when loaded */}\n          {protocols[rental.id] && (\n            <Box sx={{ mb: 1, p: 0.5, bgcolor: 'grey.50', borderRadius: 1 }}>\n              <Typography\n                variant=\"caption\"\n                sx={{ fontWeight: 600, fontSize: '0.65rem' }}\n              >\n                Detaily protokolov:\n              </Typography>\n              {hasHandover && (\n                <Box\n                  sx={{\n                    mt: 0.5,\n                    p: 0.5,\n                    bgcolor: 'success.light',\n                    borderRadius: 1,\n                  }}\n                >\n                  <Typography\n                    variant=\"caption\"\n                    sx={{\n                      fontWeight: 500,\n                      color: 'success.dark',\n                      fontSize: '0.6rem',\n                    }}\n                  >\n                    ‚úÖ Preberac√≠ protokol\n                  </Typography>\n                  <Typography\n                    variant=\"caption\"\n                    color=\"text.secondary\"\n                    sx={{ display: 'block', fontSize: '0.55rem' }}\n                  >\n                    {format(\n                      new Date(hasHandover.createdAt),\n                      'dd.MM.yyyy HH:mm',\n                      { locale: sk }\n                    )}\n                  </Typography>\n                </Box>\n              )}\n              {hasReturn && (\n                <Box\n                  sx={{\n                    mt: 0.5,\n                    p: 0.5,\n                    bgcolor: 'success.light',\n                    borderRadius: 1,\n                  }}\n                >\n                  <Typography\n                    variant=\"caption\"\n                    sx={{\n                      fontWeight: 500,\n                      color: 'success.dark',\n                      fontSize: '0.6rem',\n                    }}\n                  >\n                    ‚úÖ Preberac√≠ protokol\n                  </Typography>\n                  <Typography\n                    variant=\"caption\"\n                    color=\"text.secondary\"\n                    sx={{ display: 'block', fontSize: '0.55rem' }}\n                  >\n                    {format(new Date(hasReturn.createdAt), 'dd.MM.yyyy HH:mm', {\n                      locale: sk,\n                    })}\n                  </Typography>\n                </Box>\n              )}\n            </Box>\n          )}\n\n          {/* Actions */}\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 0.5,\n              mt: 2,\n              justifyContent: 'flex-end',\n            }}\n          >\n            <Tooltip title=\"Upravi≈•\">\n              <IconButton\n                size=\"small\"\n                onClick={e => {\n                  e.stopPropagation();\n                  onEdit(rental);\n                }}\n                sx={{\n                  bgcolor: 'primary.main',\n                  color: 'white',\n                  '&:hover': { bgcolor: 'primary.dark' },\n                }}\n              >\n                <EditIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Vymaza≈•\">\n              <IconButton\n                size=\"small\"\n                onClick={e => {\n                  e.stopPropagation();\n                  onDelete(rental.id);\n                }}\n                sx={{\n                  bgcolor: 'error.main',\n                  color: 'white',\n                  '&:hover': { bgcolor: 'error.dark' },\n                }}\n              >\n                <DeleteIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  const renderDetailedCard = (rental: Rental) => {\n    const hasHandover = protocols[rental.id]?.handover;\n    const hasReturn = protocols[rental.id]?.return;\n    const isActive =\n      rental.status?.toLowerCase() === 'akt√≠vny' ||\n      rental.status?.toLowerCase() === 'active';\n\n    return (\n      <Card\n        key={rental.id}\n        sx={{\n          height: '100%',\n          cursor: 'pointer',\n          transition: 'all 0.3s ease',\n          border: '1px solid',\n          borderColor: isActive ? '#4caf50' : 'divider',\n          '&:hover': {\n            transform: 'translateY(-4px)',\n            boxShadow: '0 8px 25px rgba(0,0,0,0.15)',\n            borderColor: isActive ? '#4caf50' : 'primary.main',\n          },\n          position: 'relative',\n          overflow: 'visible',\n        }}\n        onClick={() => onEdit(rental)}\n      >\n        {/* Status indicator */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: -8,\n            right: 16,\n            zIndex: 1,\n          }}\n        >\n          <Chip\n            label={rental.status}\n            color={getStatusColor(rental.status)}\n            size=\"small\"\n            icon={getStatusIcon(rental.status)}\n            sx={{\n              fontWeight: 'bold',\n              boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            }}\n          />\n        </Box>\n\n        {/* Protocol status indicator */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: 8,\n            left: 8,\n            zIndex: 1,\n          }}\n        >\n          <Box sx={{ display: 'flex', gap: 0.5 }}>\n            {hasHandover && (\n              <Chip\n                icon={<HandoverIcon />}\n                label=\"\"\n                color=\"success\"\n                size=\"small\"\n                sx={{\n                  minWidth: 32,\n                  height: 24,\n                  '& .MuiChip-icon': { fontSize: 16 },\n                }}\n              />\n            )}\n            {hasReturn && (\n              <Chip\n                icon={<ReturnIcon />}\n                label=\"\"\n                color=\"primary\"\n                size=\"small\"\n                sx={{\n                  minWidth: 32,\n                  height: 24,\n                  '& .MuiChip-icon': { fontSize: 16 },\n                }}\n              />\n            )}\n          </Box>\n        </Box>\n\n        <CardContent sx={{ p: 3, pt: 4 }}>\n          {/* Vehicle info */}\n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n              <CarIcon color=\"primary\" fontSize=\"small\" />\n              <Typography variant=\"h6\" fontWeight=\"bold\" color=\"primary\">\n                {rental.vehicle\n                  ? `${rental.vehicle.brand} ${rental.vehicle.model}`\n                  : 'Bez vozidla'}\n              </Typography>\n            </Box>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 3 }}>\n              {rental.vehicle?.licensePlate || 'N/A'}\n            </Typography>\n          </Box>\n\n          {/* Customer and company */}\n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n              <PersonIcon color=\"action\" fontSize=\"small\" />\n              <Typography variant=\"body1\" fontWeight=\"medium\">\n                {rental.customerName}\n              </Typography>\n            </Box>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <BusinessIcon color=\"action\" fontSize=\"small\" />\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {rental.vehicle?.company || 'N/A'}\n              </Typography>\n            </Box>\n          </Box>\n\n          {/* Dates */}\n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n              <ScheduleIcon color=\"action\" fontSize=\"small\" />\n              <Typography variant=\"body2\" fontWeight=\"medium\">\n                Obdobie pren√°jmu\n              </Typography>\n            </Box>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ ml: 3 }}>\n              {formatDateTime(rental.startDate)} -{' '}\n              {formatDateTime(rental.endDate)}\n            </Typography>\n          </Box>\n\n          {/* Price and commission */}\n          <PriceDisplay rental={rental} variant=\"detailed\" showExtraKm={true} />\n\n          {/* Payment info */}\n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <PaymentIcon color=\"action\" fontSize=\"small\" />\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {rental.paymentMethod} -{' '}\n                {rental.paid ? 'Uhraden√©' : 'Neuhraden√©'}\n              </Typography>\n            </Box>\n          </Box>\n\n          <Divider sx={{ my: 2 }} />\n\n          {/* Protocol actions */}\n          <Box sx={{ display: 'flex', gap: 1, mb: 2 }}>\n            {!hasHandover && (\n              <Button\n                size=\"small\"\n                variant=\"outlined\"\n                startIcon={<HandoverIcon />}\n                onClick={e => {\n                  e.stopPropagation();\n                  onCreateHandover(rental);\n                }}\n                sx={{ flex: 1 }}\n              >\n                Preberac√≠ protokol\n              </Button>\n            )}\n            {hasHandover && !hasReturn && (\n              <Button\n                size=\"small\"\n                variant=\"outlined\"\n                startIcon={<ReturnIcon />}\n                onClick={e => {\n                  e.stopPropagation();\n                  onCreateReturn(rental);\n                }}\n                sx={{ flex: 1 }}\n              >\n                Protokol vr√°tenia\n              </Button>\n            )}\n          </Box>\n\n          {/* Protocol actions for existing protocols */}\n          {/* Debug info */}\n          <Box sx={{ mb: 1, p: 0.5, bgcolor: 'info.light', borderRadius: 1 }}>\n            <Typography variant=\"caption\" color=\"info.dark\">\n              Debug: hasHandover={!!hasHandover}, hasReturn={!!hasReturn},\n              protocols={Object.keys(protocols).length}\n            </Typography>\n          </Box>\n\n          {(hasHandover || hasReturn) && (\n            <Box sx={{ display: 'flex', gap: 1, mb: 2 }}>\n              <Button\n                size=\"small\"\n                variant=\"outlined\"\n                startIcon={<VisibilityIcon />}\n                onClick={e => {\n                  e.stopPropagation();\n                  onViewProtocols(rental);\n                }}\n                disabled={loadingProtocols.includes(rental.id)}\n                sx={{ flex: 1 }}\n              >\n                Zobrazi≈• protokoly\n              </Button>\n              {hasHandover && (\n                <Button\n                  size=\"small\"\n                  variant=\"outlined\"\n                  startIcon={<PDFIcon />}\n                  onClick={e => {\n                    e.stopPropagation();\n                    onViewPDF(hasHandover.id, 'handover', 'Preberac√≠ protokol');\n                  }}\n                  sx={{ flex: 1 }}\n                >\n                  PDF\n                </Button>\n              )}\n              {hasReturn && (\n                <Button\n                  size=\"small\"\n                  variant=\"outlined\"\n                  startIcon={<PDFIcon />}\n                  onClick={e => {\n                    e.stopPropagation();\n                    onViewPDF(hasReturn.id, 'return', 'Preberac√≠ protokol');\n                  }}\n                  sx={{ flex: 1 }}\n                >\n                  PDF\n                </Button>\n              )}\n              {(hasHandover?.images?.length > 0 ||\n                hasReturn?.images?.length > 0) && (\n                <Button\n                  size=\"small\"\n                  variant=\"outlined\"\n                  startIcon={<GalleryIcon />}\n                  onClick={e => {\n                    e.stopPropagation();\n                    onOpenGallery(rental, hasHandover ? 'handover' : 'return');\n                  }}\n                  sx={{ flex: 1 }}\n                >\n                  Gal√©ria\n                </Button>\n              )}\n            </Box>\n          )}\n\n          {/* Protocol details when loaded */}\n          {protocols[rental.id] && (\n            <Box sx={{ mb: 2, p: 1, bgcolor: 'grey.50', borderRadius: 1 }}>\n              <Typography variant=\"subtitle2\" sx={{ mb: 1, fontWeight: 600 }}>\n                Detaily protokolov:\n              </Typography>\n              {hasHandover && (\n                <Box\n                  sx={{\n                    mb: 1,\n                    p: 1,\n                    bgcolor: 'success.light',\n                    borderRadius: 1,\n                  }}\n                >\n                  <Typography\n                    variant=\"body2\"\n                    sx={{ fontWeight: 500, color: 'success.dark' }}\n                  >\n                    ‚úÖ Preberac√≠ protokol\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Vytvoren√Ω:{' '}\n                    {format(\n                      new Date(hasHandover.createdAt),\n                      'dd.MM.yyyy HH:mm',\n                      { locale: sk }\n                    )}\n                  </Typography>\n                </Box>\n              )}\n              {hasReturn && (\n                <Box\n                  sx={{\n                    mb: 1,\n                    p: 1,\n                    bgcolor: 'success.light',\n                    borderRadius: 1,\n                  }}\n                >\n                  <Typography\n                    variant=\"body2\"\n                    sx={{ fontWeight: 500, color: 'success.dark' }}\n                  >\n                    ‚úÖ Preberac√≠ protokol\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    Vytvoren√Ω:{' '}\n                    {format(new Date(hasReturn.createdAt), 'dd.MM.yyyy HH:mm', {\n                      locale: sk,\n                    })}\n                  </Typography>\n                </Box>\n              )}\n            </Box>\n          )}\n\n          {/* Protocol details when loaded */}\n          {protocols[rental.id] && (\n            <Box sx={{ mb: 2, p: 1, bgcolor: 'grey.50', borderRadius: 1 }}>\n              <Typography\n                variant=\"subtitle2\"\n                sx={{ mb: 1, fontWeight: 600, fontSize: '0.75rem' }}\n              >\n                Detaily protokolov:\n              </Typography>\n              {hasHandover && (\n                <Box\n                  sx={{\n                    mb: 1,\n                    p: 0.5,\n                    bgcolor: 'success.light',\n                    borderRadius: 1,\n                  }}\n                >\n                  <Typography\n                    variant=\"caption\"\n                    sx={{ fontWeight: 500, color: 'success.dark' }}\n                  >\n                    ‚úÖ Preberac√≠ protokol\n                  </Typography>\n                  <Typography\n                    variant=\"caption\"\n                    color=\"text.secondary\"\n                    sx={{ display: 'block', fontSize: '0.65rem' }}\n                  >\n                    {format(\n                      new Date(hasHandover.createdAt),\n                      'dd.MM.yyyy HH:mm',\n                      { locale: sk }\n                    )}\n                  </Typography>\n                </Box>\n              )}\n              {hasReturn && (\n                <Box\n                  sx={{\n                    mb: 1,\n                    p: 0.5,\n                    bgcolor: 'success.light',\n                    borderRadius: 1,\n                  }}\n                >\n                  <Typography\n                    variant=\"caption\"\n                    sx={{ fontWeight: 500, color: 'success.dark' }}\n                  >\n                    ‚úÖ Preberac√≠ protokol\n                  </Typography>\n                  <Typography\n                    variant=\"caption\"\n                    color=\"text.secondary\"\n                    sx={{ display: 'block', fontSize: '0.65rem' }}\n                  >\n                    {format(new Date(hasReturn.createdAt), 'dd.MM.yyyy HH:mm', {\n                      locale: sk,\n                    })}\n                  </Typography>\n                </Box>\n              )}\n            </Box>\n          )}\n\n          {/* Actions */}\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 1,\n              justifyContent: 'flex-end',\n            }}\n          >\n            <Tooltip title=\"Upravi≈•\">\n              <IconButton\n                size=\"small\"\n                onClick={e => {\n                  e.stopPropagation();\n                  onEdit(rental);\n                }}\n                sx={{\n                  bgcolor: 'primary.main',\n                  color: 'white',\n                  '&:hover': { bgcolor: 'primary.dark' },\n                }}\n              >\n                <EditIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Vymaza≈•\">\n              <IconButton\n                size=\"small\"\n                onClick={e => {\n                  e.stopPropagation();\n                  onDelete(rental.id);\n                }}\n                sx={{\n                  bgcolor: 'error.main',\n                  color: 'white',\n                  '&:hover': { bgcolor: 'error.dark' },\n                }}\n              >\n                <DeleteIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  const renderCard = (rental: Rental) => {\n    switch (viewMode) {\n      case 'compact':\n        return renderCompactCard(rental);\n      case 'detailed':\n        return renderDetailedCard(rental);\n      default:\n        return renderCompactCard(rental);\n    }\n  };\n\n  const getGridSize = () => {\n    switch (viewMode) {\n      case 'compact':\n        return { xs: 12, sm: 6, md: 4, lg: 3, xl: 2 };\n      case 'detailed':\n        return { xs: 12, sm: 12, md: 6, lg: 4, xl: 3 };\n      default:\n        return { xs: 12, sm: 6, md: 4, lg: 3, xl: 2 };\n    }\n  };\n\n  return (\n    <Grid container spacing={{ xs: 1, md: 2 }}>\n      {rentals.map(rental => (\n        <Grid item key={rental.id} {...getGridSize()}>\n          {renderCard(rental)}\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n\nexport default memo(RentalCardView);\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalFilters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setFilterStatus' is defined but never used.","line":85,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  FilterList as FilterListIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Chip,\n  IconButton,\n  Collapse,\n  Grid,\n  Card,\n  CardContent,\n} from '@mui/material';\nimport React, { memo } from 'react';\n\nimport type { Vehicle, PaymentMethod } from '../../types';\n\ninterface RentalFiltersProps {\n  // Basic filters\n  filterVehicle: string;\n  setFilterVehicle: (value: string) => void;\n  filterCompany: string;\n  setFilterCompany: (value: string) => void;\n  filterCustomer: string;\n  setFilterCustomer: (value: string) => void;\n  filterStatus: string;\n  setFilterStatus: (value: string) => void;\n  filterPaid: string;\n  setFilterPaid: (value: string) => void;\n  filterDateFrom: string;\n  setFilterDateFrom: (value: string) => void;\n  filterDateTo: string;\n  setFilterDateTo: (value: string) => void;\n  filterPaymentMethod: string;\n  setFilterPaymentMethod: (value: string) => void;\n  searchQuery: string;\n  setSearchQuery: (value: string) => void;\n\n  // Priority filters\n  showActive: boolean;\n  setShowActive: (value: boolean) => void;\n  showTodayReturns: boolean;\n  setShowTodayReturns: (value: boolean) => void;\n  showTomorrowReturns: boolean;\n  setShowTomorrowReturns: (value: boolean) => void;\n  showUnconfirmed: boolean;\n  setShowUnconfirmed: (value: boolean) => void;\n  showFuture: boolean;\n  setShowFuture: (value: boolean) => void;\n  showOldConfirmed: boolean;\n  setShowOldConfirmed: (value: boolean) => void;\n  showConfirmed: boolean;\n  setShowConfirmed: (value: boolean) => void;\n  showAll: boolean;\n  setShowAll: (value: boolean) => void;\n\n  // Data\n  vehicles: Vehicle[];\n  companies: string[];\n\n  // Mobile\n  isMobile: boolean;\n  showFiltersMobile: boolean;\n  setShowFiltersMobile: (value: boolean) => void;\n}\n\nconst RentalFilters = memo<RentalFiltersProps>(\n  ({\n    filterVehicle,\n    setFilterVehicle,\n    filterCompany,\n    setFilterCompany,\n    filterCustomer,\n    setFilterCustomer,\n    filterStatus,\n    setFilterStatus,\n    filterPaid,\n    setFilterPaid,\n    filterDateFrom,\n    setFilterDateFrom,\n    filterDateTo,\n    setFilterDateTo,\n    filterPaymentMethod,\n    setFilterPaymentMethod,\n    searchQuery,\n    setSearchQuery,\n    showActive,\n    setShowActive,\n    showTodayReturns,\n    setShowTodayReturns,\n    showTomorrowReturns,\n    setShowTomorrowReturns,\n    showUnconfirmed,\n    setShowUnconfirmed,\n    showFuture,\n    setShowFuture,\n    showOldConfirmed,\n    setShowOldConfirmed,\n    showConfirmed,\n    setShowConfirmed,\n    showAll,\n    setShowAll,\n    vehicles,\n    companies,\n    isMobile,\n    showFiltersMobile,\n    setShowFiltersMobile,\n  }) => {\n    const paymentMethods: { value: PaymentMethod; label: string }[] = [\n      { value: 'cash', label: 'Hotovos≈•' },\n      { value: 'bank_transfer', label: 'Bankov√Ω prevod' },\n      { value: 'vrp', label: 'VRP' },\n      { value: 'direct_to_owner', label: 'Priamo majiteƒæovi' },\n    ];\n\n    const activeFiltersCount = [\n      filterVehicle,\n      filterCompany,\n      filterCustomer,\n      filterStatus,\n      filterPaid,\n      filterDateFrom,\n      filterDateTo,\n      filterPaymentMethod,\n      searchQuery,\n    ].filter(filter => filter !== '').length;\n\n    return (\n      <Card sx={{ mb: 2 }}>\n        <CardContent>\n          {/* Mobile filter toggle */}\n          {isMobile && (\n            <Box\n              sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                mb: 2,\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <FilterListIcon />\n                <Typography variant=\"h6\">Filtre</Typography>\n                {activeFiltersCount > 0 && (\n                  <Chip\n                    label={activeFiltersCount}\n                    size=\"small\"\n                    color=\"primary\"\n                  />\n                )}\n              </Box>\n              <IconButton\n                onClick={() => setShowFiltersMobile(!showFiltersMobile)}\n                size=\"small\"\n              >\n                {showFiltersMobile ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n              </IconButton>\n            </Box>\n          )}\n\n          {/* Priority Filters */}\n          <Box sx={{ mb: 2 }}>\n            <Typography variant=\"subtitle2\" sx={{ mb: 1, fontWeight: 600 }}>\n              Prioritn√© filtre\n            </Typography>\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={showAll}\n                    onChange={e => setShowAll(e.target.checked)}\n                    size=\"small\"\n                  />\n                }\n                label=\"Zobrazi≈• v≈°etko\"\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={showActive}\n                    onChange={e => setShowActive(e.target.checked)}\n                    size=\"small\"\n                  />\n                }\n                label=\"Akt√≠vne\"\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={showTodayReturns}\n                    onChange={e => setShowTodayReturns(e.target.checked)}\n                    size=\"small\"\n                  />\n                }\n                label=\"Dne≈°n√© vr√°tenia\"\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={showTomorrowReturns}\n                    onChange={e => setShowTomorrowReturns(e.target.checked)}\n                    size=\"small\"\n                  />\n                }\n                label=\"Zajtraj≈°ie vr√°tenia\"\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={showUnconfirmed}\n                    onChange={e => setShowUnconfirmed(e.target.checked)}\n                    size=\"small\"\n                  />\n                }\n                label=\"Nepotvrden√©\"\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={showFuture}\n                    onChange={e => setShowFuture(e.target.checked)}\n                    size=\"small\"\n                  />\n                }\n                label=\"Bud√∫ce\"\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={showOldConfirmed}\n                    onChange={e => setShowOldConfirmed(e.target.checked)}\n                    size=\"small\"\n                  />\n                }\n                label=\"Star√© potvrden√©\"\n              />\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={showConfirmed}\n                    onChange={e => setShowConfirmed(e.target.checked)}\n                    size=\"small\"\n                  />\n                }\n                label=\"Potvrden√©\"\n              />\n            </Box>\n          </Box>\n\n          {/* Detailed Filters */}\n          <Collapse in={!isMobile || showFiltersMobile}>\n            <Grid container spacing={2}>\n              {/* Search */}\n              <Grid item xs={12} md={4}>\n                <TextField\n                  fullWidth\n                  label=\"Vyhƒæada≈•\"\n                  value={searchQuery}\n                  onChange={e => setSearchQuery(e.target.value)}\n                  size=\"small\"\n                  placeholder=\"Meno z√°kazn√≠ka, ≈†PZ, pozn√°mka...\"\n                />\n              </Grid>\n\n              {/* Vehicle Filter */}\n              <Grid item xs={12} md={4}>\n                <FormControl fullWidth size=\"small\">\n                  <InputLabel>Vozidlo</InputLabel>\n                  <Select\n                    value={filterVehicle}\n                    onChange={e => setFilterVehicle(e.target.value)}\n                    label=\"Vozidlo\"\n                  >\n                    <MenuItem value=\"\">V≈°etky vozidl√°</MenuItem>\n                    {vehicles.map(vehicle => (\n                      <MenuItem key={vehicle.id} value={vehicle.id}>\n                        {vehicle.licensePlate} - {vehicle.brand} {vehicle.model}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              {/* Company Filter */}\n              <Grid item xs={12} md={4}>\n                <FormControl fullWidth size=\"small\">\n                  <InputLabel>Firma</InputLabel>\n                  <Select\n                    value={filterCompany}\n                    onChange={e => setFilterCompany(e.target.value)}\n                    label=\"Firma\"\n                  >\n                    <MenuItem value=\"\">V≈°etky firmy</MenuItem>\n                    {companies.map(company => (\n                      <MenuItem key={company} value={company}>\n                        {company}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              {/* Customer Filter */}\n              <Grid item xs={12} md={4}>\n                <TextField\n                  fullWidth\n                  label=\"Z√°kazn√≠k\"\n                  value={filterCustomer}\n                  onChange={e => setFilterCustomer(e.target.value)}\n                  size=\"small\"\n                />\n              </Grid>\n\n              {/* Payment Method Filter */}\n              <Grid item xs={12} md={4}>\n                <FormControl fullWidth size=\"small\">\n                  <InputLabel>Sp√¥sob platby</InputLabel>\n                  <Select\n                    value={filterPaymentMethod}\n                    onChange={e => setFilterPaymentMethod(e.target.value)}\n                    label=\"Sp√¥sob platby\"\n                  >\n                    <MenuItem value=\"\">V≈°etky</MenuItem>\n                    {paymentMethods.map(method => (\n                      <MenuItem key={method.value} value={method.value}>\n                        {method.label}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              {/* Paid Status Filter */}\n              <Grid item xs={12} md={4}>\n                <FormControl fullWidth size=\"small\">\n                  <InputLabel>Stav platby</InputLabel>\n                  <Select\n                    value={filterPaid}\n                    onChange={e => setFilterPaid(e.target.value)}\n                    label=\"Stav platby\"\n                  >\n                    <MenuItem value=\"\">V≈°etky</MenuItem>\n                    <MenuItem value=\"paid\">Zaplaten√©</MenuItem>\n                    <MenuItem value=\"unpaid\">Nezaplaten√©</MenuItem>\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              {/* Date From */}\n              <Grid item xs={12} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"D√°tum od\"\n                  type=\"date\"\n                  value={filterDateFrom}\n                  onChange={e => setFilterDateFrom(e.target.value)}\n                  size=\"small\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                />\n              </Grid>\n\n              {/* Date To */}\n              <Grid item xs={12} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"D√°tum do\"\n                  type=\"date\"\n                  value={filterDateTo}\n                  onChange={e => setFilterDateTo(e.target.value)}\n                  size=\"small\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                />\n              </Grid>\n            </Grid>\n          </Collapse>\n        </CardContent>\n      </Card>\n    );\n  }\n);\n\nRentalFilters.displayName = 'RentalFilters';\n\nexport default RentalFilters;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalMobileCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatPrice' is defined but never used.","line":44,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  Assignment as HandoverProtocolIcon,\n  Phone as PhoneIcon,\n  AssignmentReturn as ReturnProtocolIcon,\n  Visibility as VisibilityIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  Divider,\n  IconButton,\n  Typography,\n} from '@mui/material';\nimport { memo } from 'react';\nimport PriceDisplay from './components/PriceDisplay';\n\nimport type { Rental } from '../../types';\nimport { formatTime } from '../../utils/formatters';\n\ninterface RentalMobileCardProps {\n  rental: Rental;\n  onEdit: (rental: Rental) => void;\n  onDelete: (id: string) => void;\n  onShowDetail: (rental: Rental) => void;\n  onProtocol: (rental: Rental, type: 'handover' | 'return') => void;\n  formatPrice: (price: number | string | undefined) => string;\n  formatDate: (date: Date | string) => string;\n  getRentalPriority: (rental: Rental) => number;\n  getRentalBackgroundColor: (rental: Rental) => string;\n}\n\nconst RentalMobileCard = memo<RentalMobileCardProps>(\n  ({\n    rental,\n    onEdit,\n    onDelete,\n    onShowDetail,\n    onProtocol,\n    formatPrice,\n    formatDate,\n    getRentalPriority,\n    getRentalBackgroundColor,\n  }) => {\n    const priority = getRentalPriority(rental);\n\n    return (\n      <Card\n        sx={{\n          mb: 2,\n          background: getRentalBackgroundColor(rental),\n          border: '1px solid',\n          borderColor: priority <= 3 ? 'warning.main' : 'divider',\n          '&:hover': {\n            boxShadow: 3,\n            transform: 'translateY(-1px)',\n            transition: 'all 0.2s ease-in-out',\n          },\n        }}\n      >\n        <CardContent sx={{ pb: 1 }}>\n          {/* Header with priority and vehicle */}\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'flex-start',\n              mb: 1,\n            }}\n          >\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Chip\n                label={`P${priority}`}\n                size=\"small\"\n                color={\n                  priority <= 3\n                    ? 'error'\n                    : priority <= 5\n                      ? 'warning'\n                      : 'default'\n                }\n              />\n              {rental.vehicle ? (\n                <Box>\n                  <Typography\n                    variant=\"subtitle1\"\n                    sx={{ fontWeight: 600, fontSize: '0.9rem' }}\n                  >\n                    {rental.vehicle.licensePlate}\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    {rental.vehicle.brand} {rental.vehicle.model}\n                  </Typography>\n                </Box>\n              ) : (\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"error\"\n                  sx={{ fontSize: '0.9rem' }}\n                >\n                  Bez vozidla\n                </Typography>\n              )}\n            </Box>\n            <Box sx={{ display: 'flex', gap: 0.5 }}>\n              <IconButton size=\"small\" onClick={() => onShowDetail(rental)}>\n                <VisibilityIcon fontSize=\"small\" />\n              </IconButton>\n              <IconButton size=\"small\" onClick={() => onEdit(rental)}>\n                <EditIcon fontSize=\"small\" />\n              </IconButton>\n            </Box>\n          </Box>\n\n          {/* Customer info */}\n          <Box sx={{ mb: 1 }}>\n            <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n              üë§ {rental.customerName}\n            </Typography>\n            {(rental.customerPhone || rental.customer?.phone) && (\n              <Typography\n                variant=\"caption\"\n                color=\"text.secondary\"\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 0.5,\n                  mt: 0.5,\n                }}\n              >\n                <PhoneIcon sx={{ fontSize: 12 }} />\n                {rental.customerPhone || rental.customer?.phone}\n              </Typography>\n            )}\n          </Box>\n\n          {/* Company */}\n          {rental.vehicle?.company && (\n            <Typography\n              variant=\"caption\"\n              color=\"text.secondary\"\n              sx={{ display: 'block', mb: 1 }}\n            >\n              üè¢ {rental.vehicle.company}\n            </Typography>\n          )}\n\n          {/* Date range */}\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Od:\n              </Typography>\n              <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n                {formatDate(rental.startDate)}\n              </Typography>\n              <Typography\n                variant=\"caption\"\n                color=\"text.secondary\"\n                sx={{ fontSize: '0.65rem' }}\n              >\n                {formatTime(rental.startDate)}\n              </Typography>\n            </Box>\n            <Box>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                Do:\n              </Typography>\n              <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n                {formatDate(rental.endDate)}\n              </Typography>\n              <Typography\n                variant=\"caption\"\n                color=\"text.secondary\"\n                sx={{ fontSize: '0.65rem' }}\n              >\n                {formatTime(rental.endDate)}\n              </Typography>\n            </Box>\n          </Box>\n\n          <Divider sx={{ my: 1 }} />\n\n          {/* Price and status */}\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              mb: 1,\n            }}\n          >\n            <Box>\n              <PriceDisplay\n                rental={rental}\n                variant=\"mobile\"\n                showExtraKm={true}\n              />\n            </Box>\n            <Box\n              sx={{\n                display: 'flex',\n                flexDirection: 'column',\n                gap: 0.5,\n                alignItems: 'flex-end',\n              }}\n            >\n              <Chip\n                label={rental.paid ? 'Zaplaten√©' : 'Nezaplaten√©'}\n                size=\"small\"\n                color={rental.paid ? 'success' : 'error'}\n                variant={rental.paid ? 'filled' : 'outlined'}\n              />\n              <Chip\n                label={rental.confirmed ? 'Potvrden√©' : 'Nepotvrden√©'}\n                size=\"small\"\n                color={rental.confirmed ? 'success' : 'warning'}\n                variant={rental.confirmed ? 'filled' : 'outlined'}\n              />\n            </Box>\n          </Box>\n\n          {/* Order number and handover place */}\n          {(rental.orderNumber || rental.handoverPlace) && (\n            <Box sx={{ mb: 1 }}>\n              {rental.orderNumber && (\n                <Typography\n                  variant=\"caption\"\n                  color=\"text.secondary\"\n                  sx={{ display: 'block' }}\n                >\n                  üìã Obj. ƒç.: {rental.orderNumber}\n                </Typography>\n              )}\n              {rental.handoverPlace && (\n                <Typography\n                  variant=\"caption\"\n                  color=\"text.secondary\"\n                  sx={{ display: 'block' }}\n                >\n                  üìç {rental.handoverPlace}\n                </Typography>\n              )}\n            </Box>\n          )}\n\n          {/* Action buttons */}\n          <Box sx={{ display: 'flex', gap: 1, mt: 2 }}>\n            <Button\n              size=\"small\"\n              variant=\"outlined\"\n              startIcon={<HandoverProtocolIcon />}\n              onClick={() => onProtocol(rental, 'handover')}\n              sx={{ flex: 1 }}\n            >\n              Prevzatie\n            </Button>\n            <Button\n              size=\"small\"\n              variant=\"outlined\"\n              startIcon={<ReturnProtocolIcon />}\n              onClick={() => onProtocol(rental, 'return')}\n              sx={{ flex: 1 }}\n            >\n              Vr√°tenie\n            </Button>\n            <Button\n              size=\"small\"\n              variant=\"outlined\"\n              color=\"error\"\n              startIcon={<DeleteIcon />}\n              onClick={() => onDelete(rental.id)}\n            >\n              Zmaza≈•\n            </Button>\n          </Box>\n        </CardContent>\n      </Card>\n    );\n  }\n);\n\nRentalMobileCard.displayName = 'RentalMobileCard';\n\nexport default RentalMobileCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalStatusChip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalTableHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalTableRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/RentalViewToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/PriceDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/PriceSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":30,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":92,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2404,2407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2404,2407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Edit as EditIcon,\n  DirectionsCar as CarIcon,\n  Person as PersonIcon,\n  CalendarToday as CalendarIcon,\n  Euro as EuroIcon,\n} from '@mui/icons-material';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  Chip,\n  IconButton,\n  Stack,\n  Avatar,\n} from '@mui/material';\nimport React from 'react';\n\nimport { useApp } from '../../../context/AppContext';\nimport type { Rental } from '../../../types';\nimport { formatDate, formatCurrency } from '../../../utils/formatters';\n\ninterface RentalCardProps {\n  rental: Rental;\n  onEdit: (rental: Rental) => void;\n  index: number;\n}\n\nexport function RentalCard({ rental, onEdit, index }: RentalCardProps) {\n  const { state } = useApp();\n\n  // N√°jdi vehicle pre tento rental\n  const vehicle = state.vehicles.find(v => v.id === rental.vehicleId);\n\n  // Status color mapping\n  const getStatusColor = (status: string | undefined) => {\n    switch (status) {\n      case 'active':\n        return 'success';\n      case 'completed':\n        return 'default';\n      case 'pending':\n        return 'warning';\n      case 'cancelled':\n        return 'error';\n      default:\n        return 'default';\n    }\n  };\n\n  return (\n    <Card\n      variant=\"outlined\"\n      sx={{\n        position: 'relative',\n        '&:hover': {\n          boxShadow: 2,\n          transform: 'translateY(-1px)',\n        },\n        transition: 'all 0.2s ease-in-out',\n      }}\n    >\n      <CardContent sx={{ pb: 2 }}>\n        {/* Header */}\n        <Box\n          display=\"flex\"\n          justifyContent=\"space-between\"\n          alignItems=\"flex-start\"\n          mb={2}\n        >\n          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n            <Avatar sx={{ width: 32, height: 32, bgcolor: 'primary.main' }}>\n              <CarIcon fontSize=\"small\" />\n            </Avatar>\n            <Box>\n              <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                {vehicle\n                  ? `${vehicle.brand} ${vehicle.model}`\n                  : 'Nezn√°me vozidlo'}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {vehicle?.licensePlate || 'Bez ≈†PZ'}\n              </Typography>\n            </Box>\n          </Box>\n\n          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n            <Chip\n              label={rental.status}\n              size=\"small\"\n              color={getStatusColor(rental.status) as any}\n              variant=\"outlined\"\n            />\n            <IconButton\n              size=\"small\"\n              onClick={() => onEdit(rental)}\n              sx={{ ml: 1 }}\n            >\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n          </Box>\n        </Box>\n\n        {/* Customer info */}\n        <Box display=\"flex\" alignItems=\"center\" gap={1} mb={2}>\n          <PersonIcon fontSize=\"small\" color=\"action\" />\n          <Typography variant=\"body2\">\n            {rental.customerName || 'Nezn√°my z√°kazn√≠k'}\n          </Typography>\n        </Box>\n\n        {/* Date range */}\n        <Box display=\"flex\" alignItems=\"center\" gap={1} mb={2}>\n          <CalendarIcon fontSize=\"small\" color=\"action\" />\n          <Typography variant=\"body2\">\n            {formatDate(rental.startDate)} - {formatDate(rental.endDate)}\n          </Typography>\n        </Box>\n\n        {/* Price */}\n        <Box display=\"flex\" alignItems=\"center\" gap={1} mb={2}>\n          <EuroIcon fontSize=\"small\" color=\"action\" />\n          <Typography variant=\"body2\" fontWeight=\"medium\">\n            {formatCurrency(rental.totalPrice)}\n          </Typography>\n          {rental.paymentMethod && (\n            <Chip\n              label={rental.paymentMethod}\n              size=\"small\"\n              variant=\"outlined\"\n              sx={{ ml: 'auto' }}\n            />\n          )}\n        </Box>\n\n        {/* Company */}\n        {vehicle?.company && (\n          <Box>\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              Firma: {vehicle.company}\n            </Typography>\n          </Box>\n        )}\n\n        {/* Additional info for flexible rentals */}\n        {rental.isFlexible && (\n          <Chip\n            label=\"Flexibiln√Ω pren√°jom\"\n            size=\"small\"\n            color=\"info\"\n            variant=\"outlined\"\n            sx={{ mt: 1 }}\n          />\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalExport.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[533,536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[533,536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[555,558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[555,558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[576,579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[576,579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isMobile' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5360,5363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5360,5363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5408,5411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5408,5411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5456,5459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5456,5459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":171,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5736,5739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5736,5739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":617,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":617,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23651,23654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23651,23654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  FileUpload as DownloadIcon,\n  FileDownload as ExportIcon,\n} from '@mui/icons-material';\nimport { Box, Button } from '@mui/material';\nimport { saveAs } from 'file-saver';\nimport Papa from 'papaparse';\nimport React, { useCallback, useRef } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { apiService } from '../../../services/api';\nimport type { Rental } from '../../../types';\nimport { logger } from '../../../utils/logger';\n\ninterface RentalExportProps {\n  filteredRentals: Rental[];\n  state: {\n    customers: any[];\n    companies: any[];\n    vehicles: any[];\n    rentals: Rental[];\n  };\n  isMobile: boolean;\n  setImportError: (error: string) => void;\n}\n\nexport const RentalExport: React.FC<RentalExportProps> = ({\n  filteredRentals,\n  state,\n  isMobile,\n  setImportError,\n}) => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Export pren√°jmov do CSV\n  const exportRentalsToCSV = useCallback((rentals: Rental[]) => {\n    // Stƒ∫pce v CSV s√∫bori:\n    // - id: unik√°tne ID pren√°jmu\n    // - licensePlate: ≈†PZ vozidla (podƒæa ktorej sa n√°jde auto a firma)\n    // - company: n√°zov firmy vozidla\n    // - brand: znaƒçka vozidla\n    // - model: model vozidla\n    // - customerName: meno z√°kazn√≠ka\n    // - customerEmail: email z√°kazn√≠ka (voliteƒæn√©)\n    // - startDate: d√°tum zaƒçiatku pren√°jmu (form√°t ISO 8601 - 2025-01-03T23:00:00.000Z)\n    // - endDate: d√°tum konca pren√°jmu (form√°t ISO 8601 - 2025-01-03T23:00:00.000Z)\n    // - totalPrice: celkov√° cena pren√°jmu v ‚Ç¨\n    // - commission: prov√≠zia v ‚Ç¨ (vypoƒç√≠tan√° rovnako ako v UI)\n    // - paymentMethod: sp√¥sob platby (cash/bank_transfer/vrp/direct_to_owner)\n    // - discountType: typ zƒæavy (percentage/fixed) - voliteƒæn√©\n    // - discountValue: hodnota zƒæavy - voliteƒæn√©\n    // - customCommissionType: typ vlastnej prov√≠zie (percentage/fixed) - voliteƒæn√©\n    // - customCommissionValue: hodnota vlastnej prov√≠zie - voliteƒæn√©\n    // - extraKmCharge: doplatok za km v ‚Ç¨ - voliteƒæn√©\n    // - paid: ƒçi je uhraden√© (1=√°no, 0=nie)\n    // - handoverPlace: miesto prevzatia - voliteƒæn√©\n    // - confirmed: ƒçi je potvrden√© (1=√°no, 0=nie)\n\n    // üîß HELPER: V√Ωpoƒçet prov√≠zie rovnako ako v UI\n    const calculateCommission = (rental: Rental): number => {\n      // ‚úÖ OPRAVEN√â: totalPrice u≈æ obsahuje v≈°etko (z√°kladn√° cena + doplatok za km)\n      // Netreba prid√°va≈• extraKmCharge znovu!\n      const totalPrice = rental.totalPrice;\n\n      // Ak je nastaven√° customCommission, pou≈æije sa t√°\n      if (rental.customCommission?.value && rental.customCommission.value > 0) {\n        if (rental.customCommission.type === 'percentage') {\n          return (totalPrice * rental.customCommission.value) / 100;\n        } else {\n          return rental.customCommission.value;\n        }\n      }\n\n      // Inak sa pou≈æije commission z vozidla\n      if (rental.vehicle?.commission) {\n        if (rental.vehicle.commission.type === 'percentage') {\n          return (totalPrice * rental.vehicle.commission.value) / 100;\n        } else {\n          return rental.vehicle.commission.value;\n        }\n      }\n\n      // Fallback na ulo≈æen√∫ commission z datab√°zy\n      return rental.commission || 0;\n    };\n\n    const header = [\n      'id',\n      'licensePlate',\n      'company',\n      'brand',\n      'model',\n      'customerName',\n      'customerEmail',\n      'startDate',\n      'endDate',\n      'totalPrice',\n      'commission',\n      'paymentMethod',\n      'discountType',\n      'discountValue',\n      'customCommissionType',\n      'customCommissionValue',\n      'extraKmCharge',\n      'paid',\n      'handoverPlace',\n      'confirmed',\n    ];\n    const rows = rentals.map(r => [\n      r.id,\n      r.vehicle?.licensePlate || '',\n      r.vehicle?.company || '',\n      r.vehicle?.brand || '',\n      r.vehicle?.model || '',\n      r.customerName,\n      r.customer?.email || '',\n      (() => {\n        const startDate =\n          r.startDate instanceof Date ? r.startDate : new Date(r.startDate);\n        return !isNaN(startDate.getTime())\n          ? startDate.toISOString()\n          : String(r.startDate);\n      })(),\n      (() => {\n        const endDate =\n          r.endDate instanceof Date ? r.endDate : new Date(r.endDate);\n        return !isNaN(endDate.getTime())\n          ? endDate.toISOString()\n          : String(r.endDate);\n      })(),\n      r.totalPrice,\n      calculateCommission(r), // üîß OPRAVEN√â: Pou≈æ√≠va vypoƒç√≠tan√∫ prov√≠ziu\n      r.paymentMethod,\n      r.discount?.type || '',\n      r.discount?.value ?? '',\n      r.customCommission?.type || '',\n      r.customCommission?.value ?? '',\n      r.extraKmCharge ?? '',\n      r.paid ? '1' : '0',\n      r.handoverPlace || '',\n      r.confirmed ? '1' : '0',\n    ]);\n    const csv = [header, ...rows]\n      .map(row =>\n        row.map(val => '\"' + String(val).replace(/\"/g, '\"\"') + '\"').join(',')\n      )\n      .join('\\n');\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n    saveAs(blob, 'prenajmy.csv');\n  }, []);\n\n  // Import pren√°jmov z CSV\n  const handleImportCSV = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const file = e.target.files?.[0];\n      if (!file) return;\n      Papa.parse(file, {\n        header: true,\n        skipEmptyLines: true,\n        complete: async (results: ReturnType<typeof Papa.parse>) => {\n          try {\n            const imported = [];\n            const createdVehicles: any[] = [];\n            const createdCustomers: any[] = [];\n            const createdCompanies: any[] = [];\n\n            // üì¶ BATCH PROCESSING: Priprav√≠me v≈°etky pren√°jmy pre batch import\n            const batchRentals = [];\n\n            // Najsk√¥r spracujeme v≈°etky riadky a vytvor√≠me z√°kazn√≠kov, firmy a vozidl√° ak je potrebn√©\n            for (const row of results.data as any[]) {\n              logger.debug('Processing CSV row', {\n                rowIndex: results.data.indexOf(row),\n              });\n\n              // 1. VYTVORENIE Z√ÅKAZN√çKA AK NEEXISTUJE\n              const customerName = row.customerName || 'Nezn√°my z√°kazn√≠k';\n              const customerEmail = row.customerEmail || '';\n\n              // üîç DETAILN√â HƒΩADANIE Z√ÅKAZN√çKA S DIAKRITIKU\n              console.log(\n                `üîç CUSTOMER SEARCH [${results.data.indexOf(row)}]:`,\n                {\n                  csvCustomerName: customerName,\n                  csvCustomerNameLength: customerName.length,\n                  availableCustomers: state.customers\n                    .slice(0, 5)\n                    .map(c => c.name),\n                }\n              );\n\n              let existingCustomer = state.customers.find(\n                c =>\n                  c.name.toLowerCase() === customerName.toLowerCase() ||\n                  (customerEmail && c.email === customerEmail)\n              );\n\n              // Ak nena≈°iel exact match, sk√∫s fuzzy match pre diakritiku\n              if (!existingCustomer && customerName !== 'Nezn√°my z√°kazn√≠k') {\n                const normalizeString = (str: string) =>\n                  str\n                    .toLowerCase()\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '') // odstr√°ni diakritiku\n                    .trim();\n\n                const normalizedCustomerName = normalizeString(customerName);\n                console.log(\n                  `üîç FUZZY SEARCH for: \"${customerName}\" -> normalized: \"${normalizedCustomerName}\"`\n                );\n\n                existingCustomer = state.customers.find(c => {\n                  const normalizedDbName = normalizeString(c.name || '');\n                  const match = normalizedDbName === normalizedCustomerName;\n                  if (match) {\n                    console.log(\n                      `‚úÖ FUZZY MATCH: \"${customerName}\" -> \"${c.name}\" (ID: ${c.id})`\n                    );\n                  }\n                  return match;\n                });\n\n                if (!existingCustomer) {\n                  console.log(`‚ùå NO CUSTOMER FOUND for: \"${customerName}\"`);\n                }\n              } else if (existingCustomer) {\n                console.log(\n                  `‚úÖ EXACT MATCH: \"${customerName}\" -> ID: ${existingCustomer.id}`\n                );\n              }\n\n              // Skontroluj aj v aktu√°lne vytvoren√Ωch z√°kazn√≠koch\n              if (!existingCustomer) {\n                existingCustomer = createdCustomers.find(\n                  c =>\n                    c.name.toLowerCase() === customerName.toLowerCase() ||\n                    (customerEmail && c.email === customerEmail)\n                );\n\n                // Fuzzy match aj v vytvoren√Ωch z√°kazn√≠koch\n                if (!existingCustomer && customerName !== 'Nezn√°my z√°kazn√≠k') {\n                  const normalizeString = (str: string) =>\n                    str\n                      .toLowerCase()\n                      .normalize('NFD')\n                      .replace(/[\\u0300-\\u036f]/g, '')\n                      .trim();\n\n                  const normalizedCustomerName = normalizeString(customerName);\n                  existingCustomer = createdCustomers.find(c => {\n                    const normalizedDbName = normalizeString(c.name || '');\n                    return normalizedDbName === normalizedCustomerName;\n                  });\n\n                  if (existingCustomer) {\n                    console.log(\n                      `‚úÖ FUZZY MATCH in created customers: \"${customerName}\" -> \"${existingCustomer.name}\"`\n                    );\n                  }\n                }\n              }\n\n              // Ak z√°kazn√≠k neexistuje, vytvor ho\n              if (!existingCustomer && customerName !== 'Nezn√°my z√°kazn√≠k') {\n                try {\n                  const newCustomer = {\n                    id: uuidv4(),\n                    name: customerName,\n                    email: customerEmail,\n                    phone: '',\n                    address: '',\n                    notes: '',\n                    createdAt: new Date(),\n                  };\n                  await apiService.createCustomer(newCustomer);\n                  createdCustomers.push(newCustomer);\n                  logger.info('Customer created during import', {\n                    customerName,\n                  });\n                } catch (error) {\n                  logger.error('Failed to create customer during import', {\n                    customerName,\n                    error,\n                  });\n                }\n              }\n\n              // 2. VYTVORENIE FIRMY AK NEEXISTUJE\n              const companyName = row.company || 'Nezn√°ma firma';\n              let existingCompany = state.companies.find(\n                c => c.name.toLowerCase() === companyName.toLowerCase()\n              );\n\n              if (!existingCompany) {\n                existingCompany = createdCompanies.find(\n                  c => c.name.toLowerCase() === companyName.toLowerCase()\n                );\n              }\n\n              if (!existingCompany && companyName !== 'Nezn√°ma firma') {\n                try {\n                  const newCompany = {\n                    id: uuidv4(),\n                    name: companyName,\n                    address: '',\n                    phone: '',\n                    email: '',\n                    commissionRate: 20.0,\n                    isActive: true,\n                    createdAt: new Date(),\n                  };\n                  await apiService.createCompany(newCompany);\n                  createdCompanies.push(newCompany);\n                  logger.info('Company created during import', { companyName });\n                } catch (error) {\n                  logger.error('Failed to create company during import', {\n                    companyName,\n                    error,\n                  });\n                }\n              }\n\n              // 3. VYTVORENIE VOZIDLA AK NEEXISTUJE\n              const licensePlate = row.licensePlate;\n              if (!licensePlate) {\n                logger.warn('Missing license plate, skipping row', {\n                  rowIndex: results.data.indexOf(row),\n                });\n                continue;\n              }\n\n              let vehicle = state.vehicles.find(\n                v => v.licensePlate.toLowerCase() === licensePlate.toLowerCase()\n              );\n\n              if (!vehicle) {\n                vehicle = createdVehicles.find(\n                  v =>\n                    v.licensePlate.toLowerCase() === licensePlate.toLowerCase()\n                );\n              }\n\n              if (!vehicle) {\n                try {\n                  const finalCompany =\n                    existingCompany ||\n                    createdCompanies.find(\n                      c => c.name.toLowerCase() === companyName.toLowerCase()\n                    );\n\n                  if (!finalCompany) {\n                    logger.warn('Missing company for vehicle, skipping', {\n                      licensePlate,\n                    });\n                    continue;\n                  }\n\n                  const newVehicle = {\n                    id: uuidv4(),\n                    licensePlate: licensePlate,\n                    brand: row.brand || 'Nezn√°ma znaƒçka',\n                    model: row.model || 'Nezn√°my model',\n                    companyId: finalCompany.id,\n                    company: finalCompany.name,\n                    year: new Date().getFullYear(),\n                    fuelType: 'benz√≠n',\n                    transmission: 'manu√°l',\n                    seats: 5,\n                    dailyRate: Number(row.totalPrice) || 50,\n                    commission: {\n                      type: 'percentage' as const,\n                      value: 20,\n                    },\n                    pricing: [],\n                    status: 'available' as const,\n                    notes: '',\n                  };\n                  await apiService.createVehicle(newVehicle);\n                  createdVehicles.push(newVehicle);\n                  logger.info('Vehicle created during import', {\n                    licensePlate,\n                    brand: row.brand,\n                    model: row.model,\n                  });\n                } catch (error) {\n                  logger.error('Failed to create vehicle during import', {\n                    licensePlate,\n                    error,\n                  });\n                  continue;\n                }\n              }\n\n              // Parsuje d√°tumy - iba d√°tum bez ƒçasu, zachov√°va form√°t pre export\n              const parseDate = (dateStr: string) => {\n                if (!dateStr) return new Date();\n\n                // Sk√∫si ISO 8601 form√°t (YYYY-MM-DDTHH:mm:ss.sssZ alebo YYYY-MM-DD)\n                // Ale iba ak m√° spr√°vny form√°t (obsahuje - alebo T)\n                if (dateStr.includes('-') || dateStr.includes('T')) {\n                  const isoDate = new Date(dateStr);\n                  if (!isNaN(isoDate.getTime())) {\n                    // ‚úÖ OPRAVEN√â: Extrahuje d√°tum z UTC ƒçasu, nie lok√°lneho\n                    return new Date(\n                      Date.UTC(\n                        isoDate.getUTCFullYear(),\n                        isoDate.getUTCMonth(),\n                        isoDate.getUTCDate()\n                      )\n                    );\n                  }\n                }\n\n                // Fallback na form√°t s bodkami - podporuje \"14.1.\" alebo \"14.1.2025\"\n                let cleanDateStr = dateStr.trim();\n\n                // Odstr√°ni koncov√∫ bodku ak je tam (\"14.1.\" -> \"14.1\")\n                if (cleanDateStr.endsWith('.')) {\n                  cleanDateStr = cleanDateStr.slice(0, -1);\n                }\n\n                const parts = cleanDateStr.split('.');\n                if (parts.length === 2) {\n                  // Form√°t dd.M - automaticky prid√° rok 2025\n                  const day = Number(parts[0]);\n                  const month = Number(parts[1]) - 1; // janu√°r = 0, febru√°r = 1, atƒè.\n\n                  // Valid√°cia d√°tumu\n                  if (day >= 1 && day <= 31 && month >= 0 && month <= 11) {\n                    // Vytvor d√°tum v UTC aby sa predi≈°lo timezone konverzii\n                    return new Date(Date.UTC(2025, month, day));\n                  }\n                } else if (parts.length === 3) {\n                  // Form√°t dd.M.yyyy - ak je tam rok\n                  const day = Number(parts[0]);\n                  const month = Number(parts[1]) - 1;\n                  const year = Number(parts[2]);\n\n                  // Valid√°cia d√°tumu\n                  if (\n                    day >= 1 &&\n                    day <= 31 &&\n                    month >= 0 &&\n                    month <= 11 &&\n                    year >= 1900 &&\n                    year <= 2100\n                  ) {\n                    // Vytvor d√°tum v UTC aby sa predi≈°lo timezone konverzii\n                    return new Date(Date.UTC(year, month, day));\n                  }\n                }\n\n                // Ak niƒç nefunguje, vr√°ti dne≈°n√Ω d√°tum\n                console.warn(\n                  `Nepodarilo sa parsova≈• d√°tum: \"${dateStr}\", pou≈æ√≠vam dne≈°n√Ω d√°tum`\n                );\n                return new Date();\n              };\n\n              // Priradenie z√°kazn√≠ka na z√°klade existuj√∫ceho alebo novo vytvoren√©ho\n              let finalCustomer =\n                existingCustomer ||\n                createdCustomers.find(\n                  c =>\n                    c.name.toLowerCase() === customerName.toLowerCase() ||\n                    (customerEmail && c.email === customerEmail)\n                );\n\n              // Posledn√° ≈°anca - fuzzy match pre fin√°lne priradenie\n              if (!finalCustomer && customerName !== 'Nezn√°my z√°kazn√≠k') {\n                const normalizeString = (str: string) =>\n                  str\n                    .toLowerCase()\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '')\n                    .trim();\n\n                const normalizedCustomerName = normalizeString(customerName);\n                finalCustomer = [...state.customers, ...createdCustomers].find(\n                  c => {\n                    const normalizedDbName = normalizeString(c.name || '');\n                    return normalizedDbName === normalizedCustomerName;\n                  }\n                );\n\n                if (finalCustomer) {\n                  console.log(\n                    `‚úÖ FINAL FUZZY MATCH: \"${customerName}\" -> \"${finalCustomer.name}\" (ID: ${finalCustomer.id})`\n                  );\n                } else {\n                  console.log(\n                    `‚ùå FINAL: NO CUSTOMER FOUND for: \"${customerName}\"`\n                  );\n                }\n              }\n\n              // Automatick√© priradenie majiteƒæa na z√°klade vozidla\n              // Ak existuje vozidlo a nie je zadan√Ω sp√¥sob platby, nastav platbu priamo majiteƒæovi\n              let finalPaymentMethod = row.paymentMethod || 'cash';\n\n              // Ak je n√°jden√© vozidlo na z√°klade ≈†PZ a nie je zadan√Ω paymentMethod,\n              // automaticky nastav platbu priamo majiteƒæovi vozidla\n              if (vehicle && !row.paymentMethod) {\n                finalPaymentMethod = 'direct_to_owner';\n                logger.info('Auto-assigned direct payment to vehicle owner', {\n                  licensePlate: vehicle.licensePlate,\n                  company: vehicle.company,\n                });\n              }\n\n              // ‚úÖ OPRAVEN√â: V√Ωpoƒçet prov√≠zie rovnako ako v exporte\n              const finalCommission = (() => {\n                const totalPrice = Number(row.totalPrice) || 0;\n\n                // 1. Ak je zadan√° commission priamo v CSV, pou≈æije sa t√°\n                if (row.commission && Number(row.commission) > 0) {\n                  return Number(row.commission);\n                }\n\n                // 2. Ak je zadan√° customCommission v CSV, pou≈æije sa t√°\n                if (row.customCommissionType && row.customCommissionValue) {\n                  if (row.customCommissionType === 'percentage') {\n                    return (\n                      (totalPrice * Number(row.customCommissionValue)) / 100\n                    );\n                  } else {\n                    return Number(row.customCommissionValue);\n                  }\n                }\n\n                // 3. Inak sa pou≈æije commission z vozidla\n                if (vehicle?.commission) {\n                  if (vehicle.commission.type === 'percentage') {\n                    return (totalPrice * vehicle.commission.value) / 100;\n                  } else {\n                    return vehicle.commission.value;\n                  }\n                }\n\n                // 4. Fallback na 0\n                return 0;\n              })();\n\n              if (!row.commission && vehicle?.commission) {\n                logger.info('Auto-calculated commission for vehicle', {\n                  licensePlate: vehicle.licensePlate,\n                  commission: finalCommission,\n                  type: vehicle.commission.type,\n                  value: vehicle.commission.value,\n                });\n              }\n\n              // Log inform√°ci√≠ o majiteƒæovi/firme vozidla\n              if (vehicle) {\n                logger.debug('Vehicle assigned to rental', {\n                  licensePlate: vehicle.licensePlate,\n                  owner: vehicle.company,\n                });\n              }\n\n              const startDate = parseDate(row.startDate);\n              const endDate = parseDate(row.endDate);\n\n              // KONTROLA DUPLIC√çT PREN√ÅJMU\n              // Skontroluj, ƒçi u≈æ existuje pren√°jom s t√Ωmito parametrami\n              const duplicateRental = state.rentals.find(existingRental => {\n                // Kontrola podƒæa vozidla a d√°tumov\n                if (vehicle?.id && existingRental.vehicleId === vehicle.id) {\n                  const existingStart = new Date(existingRental.startDate);\n                  const existingEnd = new Date(existingRental.endDate);\n\n                  // Ak sa d√°tumy zhoduj√∫ (rovnak√Ω de≈à)\n                  if (\n                    existingStart.toDateString() === startDate.toDateString() &&\n                    existingEnd.toDateString() === endDate.toDateString()\n                  ) {\n                    return true;\n                  }\n                }\n                return false;\n              });\n\n              if (duplicateRental) {\n                logger.warn('Duplicate rental detected, skipping', {\n                  licensePlate: vehicle?.licensePlate,\n                  startDate: startDate.toLocaleDateString(),\n                  endDate: endDate.toLocaleDateString(),\n                });\n                continue;\n              }\n\n              // üîç DEBUG: Parsovanie ceny z CSV\n              const rawTotalPrice = row.totalPrice;\n              const parsedTotalPrice = Number(row.totalPrice) || 0;\n\n              console.log('üîç CSV PRICE DEBUG:', {\n                rowIndex: results.data.indexOf(row),\n                customerName,\n                rawTotalPrice,\n                parsedTotalPrice,\n                typeOfRaw: typeof rawTotalPrice,\n                isNaN: isNaN(Number(rawTotalPrice)),\n              });\n\n              // Vytvorenie pren√°jmu\n              const newRental = {\n                id: row.id || uuidv4(),\n                vehicleId: vehicle?.id || undefined,\n                vehicle: vehicle,\n                customerId: finalCustomer?.id || undefined,\n                customer: finalCustomer,\n                customerName: customerName,\n                startDate: startDate,\n                endDate: endDate,\n                totalPrice: parsedTotalPrice,\n                commission: finalCommission,\n                paymentMethod: finalPaymentMethod as any,\n                discount: row.discountType\n                  ? {\n                      type: row.discountType as 'percentage' | 'fixed',\n                      value: Number(row.discountValue) || 0,\n                    }\n                  : undefined,\n                customCommission: row.customCommissionType\n                  ? {\n                      type: row.customCommissionType as 'percentage' | 'fixed',\n                      value: Number(row.customCommissionValue) || 0,\n                    }\n                  : undefined,\n                extraKmCharge: Number(row.extraKmCharge) || 0,\n                paid: row.paid === '1' || row.paid === true,\n                handoverPlace: row.handoverPlace || '',\n                confirmed: row.confirmed === '1' || row.confirmed === true,\n                status: 'active' as const,\n                notes: '',\n                createdAt: new Date(),\n              };\n\n              // üì¶ BATCH: Pridaj pren√°jom do batch zoznamu namiesto okam≈æit√©ho vytvorenia\n              batchRentals.push(newRental);\n              logger.debug('Rental prepared for batch import', {\n                customer: customerName,\n                licensePlate: vehicle?.licensePlate,\n                totalPrice: parsedTotalPrice,\n                startDate: startDate.toLocaleDateString(),\n                endDate: endDate.toLocaleDateString(),\n              });\n            }\n\n            // üöÄ BATCH IMPORT: Vytvor v≈°etky pren√°jmy naraz\n            if (batchRentals.length > 0) {\n              try {\n                logger.info(\n                  `üöÄ Starting batch import of ${batchRentals.length} rentals...`\n                );\n                const batchResult =\n                  await apiService.batchImportRentals(batchRentals);\n\n                logger.info('‚úÖ Batch import completed', {\n                  processed: batchResult.processed,\n                  total: batchResult.total,\n                  successRate: batchResult.successRate,\n                  errors: batchResult.errors.length,\n                });\n\n                // Log errors if any\n                if (batchResult.errors.length > 0) {\n                  logger.warn('Batch import errors:', batchResult.errors);\n                }\n\n                imported.push(...batchResult.results);\n              } catch (error) {\n                logger.error('Batch import failed', { error });\n                throw error;\n              }\n            }\n\n            logger.info('CSV import completed successfully', {\n              importedCount: imported.length,\n              totalRows: results.data.length,\n            });\n            setImportError('');\n\n            // Refresh d√°t\n            window.location.reload();\n          } catch (error) {\n            logger.error('CSV import failed', { error });\n            setImportError('Chyba pri importe CSV s√∫boru');\n          }\n\n          // Reset file input\n          if (fileInputRef.current) fileInputRef.current.value = '';\n        },\n      });\n    },\n    [state, setImportError]\n  );\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        gap: { xs: 1, md: 2 },\n        mb: 3,\n        mx: { xs: 1, md: 0 }, // Men≈°√≠ symetrick√Ω margin na mobile\n        flexWrap: 'wrap',\n        alignItems: 'center',\n      }}\n    >\n      {/* Export CSV */}\n      <Button\n        variant=\"outlined\"\n        startIcon={<ExportIcon />}\n        onClick={() => exportRentalsToCSV(filteredRentals)}\n        sx={{\n          minWidth: { xs: 'auto', md: '120px' },\n          fontSize: { xs: '0.8rem', md: '0.875rem' },\n          px: { xs: 2, md: 3 },\n          py: { xs: 1, md: 1.5 },\n          borderRadius: 2,\n          display: { xs: 'none', md: 'inline-flex' }, // Skryt√© na mobile\n        }}\n      >\n        Export CSV\n      </Button>\n\n      {/* Import CSV */}\n      <Button\n        variant=\"outlined\"\n        startIcon={<DownloadIcon />}\n        onClick={() => fileInputRef.current?.click()}\n        sx={{\n          minWidth: { xs: 'auto', md: '120px' },\n          fontSize: { xs: '0.8rem', md: '0.875rem' },\n          px: { xs: 2, md: 3 },\n          py: { xs: 1, md: 1.5 },\n          borderRadius: 2,\n          display: { xs: 'none', md: 'inline-flex' }, // Skryt√© na mobile\n        }}\n      >\n        Import CSV\n      </Button>\n      <input\n        type=\"file\"\n        accept=\".csv\"\n        hidden\n        onChange={handleImportCSV}\n        ref={fileInputRef}\n      />\n    </Box>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalFilters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'uniqueVehicleBrands' is defined but never used.","line":114,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":114,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  FilterList as FilterListIcon,\n  Refresh as RefreshIcon,\n  Search as SearchIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  Collapse,\n  Divider,\n  FormControl,\n  Grid,\n  IconButton,\n  InputLabel,\n  MenuItem,\n  Select,\n  TextField,\n  Typography,\n} from '@mui/material';\nimport React from 'react';\n\n// Types - PRESNE TIE IST√â ako v RentalListNew.tsx\ninterface FilterState {\n  // Z√°kladn√© filtre - arrays pre multi-select\n  status: string[];\n  paymentMethod: string[];\n  company: string[];\n  dateFrom: string;\n  dateTo: string;\n  priceMin: string;\n  priceMax: string;\n  protocolStatus: string[];\n\n  // Roz≈°√≠ren√© filtre\n  customerName: string;\n  vehicleBrand: string;\n  vehicleModel: string;\n  licensePlate: string;\n  customerEmail: string;\n  customerPhone: string;\n  customerCompany: string;\n  insuranceCompany: string;\n  insuranceType: string;\n\n  // ƒåasov√© filtre\n  timeFilter: string;\n\n  // Cenov√© filtre\n  priceRange: string;\n\n  // Stav platby\n  paymentStatus: string;\n\n  // Zobrazenie\n  showOnlyActive: boolean;\n  showOnlyOverdue: boolean;\n  showOnlyCompleted: boolean;\n}\n\ninterface RentalFiltersProps {\n  // Search state\n  searchQuery: string;\n  setSearchQuery: (value: string) => void;\n\n  // Filter visibility\n  showFilters: boolean;\n  setShowFilters: (value: boolean) => void;\n\n  // Advanced filters\n  advancedFilters: FilterState;\n  handleAdvancedFiltersChange: (filters: FilterState) => void;\n\n  // Helper functions\n  toggleFilterValue: (filterKey: keyof FilterState, value: string) => void;\n  isFilterValueSelected: (\n    filterKey: keyof FilterState,\n    value: string\n  ) => boolean;\n  resetAllFilters: () => void;\n\n  // Unique values for dropdowns\n  uniquePaymentMethods: string[];\n  uniqueCompanies: string[];\n  uniqueStatuses: string[];\n  uniqueVehicleBrands: string[];\n  uniqueInsuranceCompanies: string[];\n  uniqueInsuranceTypes: string[];\n\n  // Filtered rentals count\n  filteredRentalsCount: number;\n  totalRentalsCount: number;\n\n  // Mobile filters\n  showFiltersMobile: boolean;\n  setShowFiltersMobile: () => void;\n}\n\nexport const RentalFilters: React.FC<RentalFiltersProps> = ({\n  searchQuery,\n  setSearchQuery,\n  showFilters,\n  setShowFilters,\n  advancedFilters,\n  handleAdvancedFiltersChange,\n  toggleFilterValue,\n  isFilterValueSelected,\n  resetAllFilters,\n  uniquePaymentMethods,\n  uniqueCompanies,\n  uniqueStatuses,\n  uniqueVehicleBrands,\n  filteredRentalsCount,\n  totalRentalsCount,\n}) => {\n  return (\n    <Card\n      sx={{\n        mb: 3,\n        mx: { xs: 1, md: 0 }, // Men≈°√≠ symetrick√Ω margin na mobile\n        backgroundColor: 'background.paper',\n        boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\n        border: '1px solid rgba(0,0,0,0.06)',\n      }}\n    >\n      <CardContent sx={{ p: { xs: 2, md: 3 } }}>\n        {/* Hlavn√Ω riadok s vyhƒæad√°van√≠m a tlaƒçidlami */}\n        <Box\n          sx={{\n            display: 'flex',\n            flexDirection: { xs: 'column', md: 'row' },\n            gap: 2,\n            alignItems: { xs: 'stretch', md: 'center' },\n            mb: 2,\n          }}\n        >\n          {/* Search Input */}\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              flex: { xs: 'none', md: 1 },\n              minWidth: { xs: '100%', md: 250 },\n            }}\n          >\n            <TextField\n              placeholder=\"Hƒæada≈• pren√°jmy...\"\n              variant=\"outlined\"\n              size=\"small\"\n              value={searchQuery}\n              onChange={e => setSearchQuery(e.target.value)}\n              fullWidth\n              sx={{\n                '& .MuiOutlinedInput-root': {\n                  borderRadius: 3,\n                  backgroundColor: 'background.default',\n                  transition: 'all 0.3s ease',\n                  '&:hover': {\n                    backgroundColor: 'action.hover',\n                    transform: 'translateY(-1px)',\n                    boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n                  },\n                  '&.Mui-focused': {\n                    backgroundColor: 'background.paper',\n                    transform: 'translateY(-2px)',\n                    boxShadow: '0 6px 20px rgba(0,0,0,0.15)',\n                  },\n                },\n              }}\n              InputProps={{\n                startAdornment: (\n                  <Box sx={{ mr: 1, color: 'text.secondary' }}>\n                    <SearchIcon fontSize=\"small\" />\n                  </Box>\n                ),\n              }}\n            />\n          </Box>\n\n          {/* Sorting controls */}\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 1,\n              alignItems: 'center',\n              minWidth: { xs: '100%', md: 'auto' },\n            }}\n          >\n            <FormControl size=\"small\" sx={{ minWidth: 140 }}>\n              <InputLabel>Zoradi≈• podƒæa</InputLabel>\n              <Select\n                value={advancedFilters.sortBy}\n                label=\"Zoradi≈• podƒæa\"\n                onChange={e =>\n                  handleAdvancedFiltersChange({\n                    ...advancedFilters,\n                    sortBy: e.target.value as\n                      | 'created_at'\n                      | 'start_date'\n                      | 'end_date',\n                  })\n                }\n                sx={{\n                  borderRadius: 2,\n                  backgroundColor: 'background.default',\n                  '&:hover': {\n                    backgroundColor: 'action.hover',\n                  },\n                }}\n              >\n                <MenuItem value=\"created_at\">D√°tumu vytvorenia</MenuItem>\n                <MenuItem value=\"start_date\">D√°tumu zaƒçiatku</MenuItem>\n                <MenuItem value=\"end_date\">D√°tumu konca</MenuItem>\n              </Select>\n            </FormControl>\n\n            <FormControl size=\"small\" sx={{ minWidth: 100 }}>\n              <Select\n                value={advancedFilters.sortOrder}\n                onChange={e =>\n                  handleAdvancedFiltersChange({\n                    ...advancedFilters,\n                    sortOrder: e.target.value as 'asc' | 'desc',\n                  })\n                }\n                sx={{\n                  borderRadius: 2,\n                  backgroundColor: 'background.default',\n                  '&:hover': {\n                    backgroundColor: 'action.hover',\n                  },\n                }}\n              >\n                <MenuItem value=\"desc\">\n                  {advancedFilters.sortBy === 'created_at'\n                    ? 'Najnov≈°ie'\n                    : 'Zostupne'}\n                </MenuItem>\n                <MenuItem value=\"asc\">\n                  {advancedFilters.sortBy === 'created_at'\n                    ? 'Najstar≈°ie'\n                    : 'Vzostupne'}\n                </MenuItem>\n              </Select>\n            </FormControl>\n          </Box>\n\n          {/* Tlaƒçidl√° v riadku na mobile, vedƒæa seba na desktop */}\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: { xs: 'row', md: 'row' },\n              gap: 1,\n              flexWrap: 'wrap',\n              justifyContent: { xs: 'space-between', md: 'flex-start' },\n            }}\n          >\n            {/* üöÄ KOMPAKTN√â FILTRE - len ikonka */}\n            <IconButton\n              onClick={() => setShowFilters(!showFilters)}\n              size=\"small\"\n              sx={{\n                borderRadius: 2,\n                border: '1px solid',\n                borderColor: showFilters ? 'primary.main' : 'rgba(0,0,0,0.23)',\n                bgcolor: showFilters ? 'primary.main' : 'transparent',\n                color: showFilters ? 'white' : 'inherit',\n                transition: 'all 0.3s ease',\n                '&:hover': {\n                  bgcolor: showFilters ? 'primary.dark' : 'rgba(0,0,0,0.04)',\n                  transform: 'translateY(-1px)',\n                  boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n                },\n              }}\n            >\n              <FilterListIcon fontSize=\"small\" />\n            </IconButton>\n\n            {/* Reset Button */}\n            <Button\n              variant=\"outlined\"\n              startIcon={<RefreshIcon />}\n              onClick={resetAllFilters}\n              size=\"small\"\n              sx={{\n                borderRadius: 2,\n                textTransform: 'none',\n                fontWeight: 500,\n                transition: 'all 0.3s ease',\n                fontSize: { xs: '0.75rem', md: '0.875rem' },\n                px: { xs: 1, md: 2 },\n                '&:hover': {\n                  bgcolor: 'error.light',\n                  color: 'white',\n                  borderColor: 'error.main',\n                  transform: 'translateY(-1px)',\n                  boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n                },\n              }}\n            >\n              Reset\n            </Button>\n          </Box>\n        </Box>\n\n        {/* Search results info */}\n        {(searchQuery ||\n          (Array.isArray(advancedFilters.status) &&\n            advancedFilters.status.length > 0) ||\n          (Array.isArray(advancedFilters.paymentMethod) &&\n            advancedFilters.paymentMethod.length > 0) ||\n          (Array.isArray(advancedFilters.company) &&\n            advancedFilters.company.length > 0) ||\n          advancedFilters.dateFrom ||\n          advancedFilters.dateTo ||\n          advancedFilters.priceMin ||\n          advancedFilters.priceMax ||\n          (Array.isArray(advancedFilters.protocolStatus) &&\n            advancedFilters.protocolStatus.length > 0)) && (\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n            Zobrazen√Ωch: {filteredRentalsCount} z {totalRentalsCount} pren√°jmov\n          </Typography>\n        )}\n\n        {/* üöÄ R√ùCHLE FILTRE - len tie najd√¥le≈æitej≈°ie */}\n        <Box\n          sx={{\n            display: 'flex',\n            gap: 1,\n            flexWrap: 'wrap',\n            mb: 2,\n            alignItems: 'center',\n          }}\n        >\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mr: 1 }}>\n            R√Ωchle filtre:\n            {/* Poƒçet oznaƒçen√Ωch filtrov */}\n            {(() => {\n              const totalSelected =\n                (Array.isArray(advancedFilters.paymentMethod)\n                  ? advancedFilters.paymentMethod.length\n                  : 0) +\n                (Array.isArray(advancedFilters.status)\n                  ? advancedFilters.status.length\n                  : 0) +\n                (Array.isArray(advancedFilters.protocolStatus)\n                  ? advancedFilters.protocolStatus.length\n                  : 0);\n              return totalSelected > 0 ? (\n                <Chip\n                  label={totalSelected}\n                  size=\"small\"\n                  color=\"primary\"\n                  variant=\"filled\"\n                  sx={{\n                    ml: 1,\n                    height: 20,\n                    fontSize: '0.7rem',\n                    fontWeight: 'bold',\n                  }}\n                />\n              ) : null;\n            })()}\n          </Typography>\n\n          {/* Sp√¥sob platby */}\n          {uniquePaymentMethods.slice(0, 3).map(method => {\n            const getPaymentMethodLabel = (method: string) => {\n              switch (method) {\n                case 'cash':\n                  return 'Hotovos≈•';\n                case 'bank_transfer':\n                  return 'Bankov√Ω prevod';\n                case 'direct_to_owner':\n                  return 'Priamo majiteƒæovi';\n                case 'card':\n                  return 'Kartou';\n                case 'crypto':\n                  return 'Kryptomeny';\n                default:\n                  return method;\n              }\n            };\n\n            return (\n              <Chip\n                key={method}\n                label={getPaymentMethodLabel(method)}\n                size=\"small\"\n                variant={\n                  isFilterValueSelected('paymentMethod', method)\n                    ? 'filled'\n                    : 'outlined'\n                }\n                color={\n                  isFilterValueSelected('paymentMethod', method)\n                    ? 'primary'\n                    : 'default'\n                }\n                onClick={() => toggleFilterValue('paymentMethod', method)}\n                sx={{\n                  borderRadius: 2,\n                  '&:hover': { transform: 'translateY(-1px)' },\n                  transition: 'all 0.2s ease',\n                  // V√Ωrazn√© zv√Ωraznenie oznaƒçen√Ωch filtrov\n                  ...(isFilterValueSelected('paymentMethod', method) && {\n                    fontWeight: 'bold',\n                    boxShadow: '0 2px 8px rgba(25, 118, 210, 0.3)',\n                    border: '2px solid',\n                    borderColor: 'primary.main',\n                  }),\n                }}\n              />\n            );\n          })}\n\n          <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n          {/* Stav pren√°jmu */}\n          <Chip\n            label=\"Akt√≠vne\"\n            size=\"small\"\n            variant={\n              isFilterValueSelected('status', 'active') ? 'filled' : 'outlined'\n            }\n            color={\n              isFilterValueSelected('status', 'active') ? 'success' : 'default'\n            }\n            onClick={() => toggleFilterValue('status', 'active')}\n            sx={{\n              borderRadius: 2,\n              '&:hover': { transform: 'translateY(-1px)' },\n              transition: 'all 0.2s ease',\n              // V√Ωrazn√© zv√Ωraznenie oznaƒçen√Ωch filtrov\n              ...(isFilterValueSelected('status', 'active') && {\n                fontWeight: 'bold',\n                boxShadow: '0 2px 8px rgba(46, 125, 50, 0.3)',\n                border: '2px solid',\n                borderColor: 'success.main',\n              }),\n            }}\n          />\n          <Chip\n            label=\"ƒåakaj√∫ci\"\n            size=\"small\"\n            variant={\n              isFilterValueSelected('status', 'pending') ? 'filled' : 'outlined'\n            }\n            color={\n              isFilterValueSelected('status', 'pending') ? 'warning' : 'default'\n            }\n            onClick={() => toggleFilterValue('status', 'pending')}\n            sx={{\n              borderRadius: 2,\n              '&:hover': { transform: 'translateY(-1px)' },\n              transition: 'all 0.2s ease',\n              // V√Ωrazn√© zv√Ωraznenie oznaƒçen√Ωch filtrov\n              ...(isFilterValueSelected('status', 'pending') && {\n                fontWeight: 'bold',\n                boxShadow: '0 2px 8px rgba(237, 108, 2, 0.3)',\n                border: '2px solid',\n                borderColor: 'warning.main',\n              }),\n            }}\n          />\n          <Chip\n            label=\"Ukonƒçen√©\"\n            size=\"small\"\n            variant={\n              isFilterValueSelected('status', 'completed')\n                ? 'filled'\n                : 'outlined'\n            }\n            color={\n              isFilterValueSelected('status', 'completed') ? 'info' : 'default'\n            }\n            onClick={() => toggleFilterValue('status', 'completed')}\n            sx={{\n              borderRadius: 2,\n              '&:hover': { transform: 'translateY(-1px)' },\n              transition: 'all 0.2s ease',\n              // V√Ωrazn√© zv√Ωraznenie oznaƒçen√Ωch filtrov\n              ...(isFilterValueSelected('status', 'completed') && {\n                fontWeight: 'bold',\n                boxShadow: '0 2px 8px rgba(2, 136, 209, 0.3)',\n                border: '2px solid',\n                borderColor: 'info.main',\n              }),\n            }}\n          />\n\n          <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n          {/* Platobn√© filtre */}\n          <Chip\n            label=\"Zaplaten√©\"\n            size=\"small\"\n            variant={\n              isFilterValueSelected('paymentStatus', 'paid')\n                ? 'filled'\n                : 'outlined'\n            }\n            color={\n              isFilterValueSelected('paymentStatus', 'paid')\n                ? 'success'\n                : 'default'\n            }\n            onClick={() => toggleFilterValue('paymentStatus', 'paid')}\n            sx={{\n              borderRadius: 2,\n              '&:hover': { transform: 'translateY(-1px)' },\n              transition: 'all 0.2s ease',\n              ...(isFilterValueSelected('paymentStatus', 'paid') && {\n                fontWeight: 'bold',\n                boxShadow: '0 2px 8px rgba(46, 125, 50, 0.3)',\n                border: '2px solid',\n                borderColor: 'success.main',\n              }),\n            }}\n          />\n          <Chip\n            label=\"Nezaplaten√©\"\n            size=\"small\"\n            variant={\n              isFilterValueSelected('paymentStatus', 'unpaid')\n                ? 'filled'\n                : 'outlined'\n            }\n            color={\n              isFilterValueSelected('paymentStatus', 'unpaid')\n                ? 'error'\n                : 'default'\n            }\n            onClick={() => toggleFilterValue('paymentStatus', 'unpaid')}\n            sx={{\n              borderRadius: 2,\n              '&:hover': { transform: 'translateY(-1px)' },\n              transition: 'all 0.2s ease',\n              ...(isFilterValueSelected('paymentStatus', 'unpaid') && {\n                fontWeight: 'bold',\n                boxShadow: '0 2px 8px rgba(211, 47, 47, 0.3)',\n                border: '2px solid',\n                borderColor: 'error.main',\n              }),\n            }}\n          />\n\n          <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\n\n          {/* Stavy protokolov */}\n          <Chip\n            label=\"Bez protokolu\"\n            size=\"small\"\n            variant={\n              isFilterValueSelected('protocolStatus', 'none')\n                ? 'filled'\n                : 'outlined'\n            }\n            color={\n              isFilterValueSelected('protocolStatus', 'none')\n                ? 'warning'\n                : 'default'\n            }\n            onClick={() => toggleFilterValue('protocolStatus', 'none')}\n            sx={{\n              borderRadius: 2,\n              '&:hover': { transform: 'translateY(-1px)' },\n              transition: 'all 0.2s ease',\n              ...(isFilterValueSelected('protocolStatus', 'none') && {\n                fontWeight: 'bold',\n                boxShadow: '0 2px 8px rgba(237, 108, 2, 0.3)',\n                border: '2px solid',\n                borderColor: 'warning.main',\n              }),\n            }}\n          />\n          <Chip\n            label=\"S protokolom\"\n            size=\"small\"\n            variant={\n              isFilterValueSelected('protocolStatus', 'with_handover')\n                ? 'filled'\n                : 'outlined'\n            }\n            color={\n              isFilterValueSelected('protocolStatus', 'with_handover')\n                ? 'success'\n                : 'default'\n            }\n            onClick={() => toggleFilterValue('protocolStatus', 'with_handover')}\n            sx={{\n              borderRadius: 2,\n              '&:hover': { transform: 'translateY(-1px)' },\n              transition: 'all 0.2s ease',\n              ...(isFilterValueSelected('protocolStatus', 'with_handover') && {\n                fontWeight: 'bold',\n                boxShadow: '0 2px 8px rgba(46, 125, 50, 0.3)',\n                border: '2px solid',\n                borderColor: 'success.main',\n              }),\n            }}\n          />\n        </Box>\n\n        {/* Pokroƒçil√© filtre */}\n        <Collapse in={showFilters}>\n          <Divider sx={{ my: 2 }} />\n          <Box sx={{ p: 3 }}>\n            <Typography\n              variant=\"h6\"\n              sx={{ mb: 3, display: 'flex', alignItems: 'center', gap: 1 }}\n            >\n              <FilterListIcon fontSize=\"small\" />\n              Filtre\n            </Typography>\n\n            <Grid container spacing={3}>\n              {/* Sp√¥sob platby */}\n              <Grid item xs={12} sm={6} md={4}>\n                <FormControl size=\"small\" fullWidth>\n                  <InputLabel>Sp√¥sob platby</InputLabel>\n                  <Select\n                    multiple\n                    value={\n                      Array.isArray(advancedFilters.paymentMethod)\n                        ? advancedFilters.paymentMethod\n                        : []\n                    }\n                    onChange={e =>\n                      handleAdvancedFiltersChange({\n                        ...advancedFilters,\n                        paymentMethod: Array.isArray(e.target.value)\n                          ? e.target.value\n                          : [e.target.value],\n                      })\n                    }\n                    label=\"Sp√¥sob platby\"\n                    renderValue={selected => (\n                      <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                        {(selected as string[]).map(value => {\n                          const getPaymentMethodLabel = (method: string) => {\n                            switch (method) {\n                              case 'cash':\n                                return 'Hotovos≈•';\n                              case 'bank_transfer':\n                                return 'Bankov√Ω prevod';\n                              case 'direct_to_owner':\n                                return 'Priamo majiteƒæovi';\n                              case 'card':\n                                return 'Kartou';\n                              case 'crypto':\n                                return 'Kryptomeny';\n                              default:\n                                return method;\n                            }\n                          };\n                          return (\n                            <Chip\n                              key={value}\n                              label={getPaymentMethodLabel(value)}\n                              size=\"small\"\n                            />\n                          );\n                        })}\n                      </Box>\n                    )}\n                  >\n                    {uniquePaymentMethods.map(method => {\n                      const getPaymentMethodLabel = (method: string) => {\n                        switch (method) {\n                          case 'cash':\n                            return 'Hotovos≈•';\n                          case 'bank_transfer':\n                            return 'Bankov√Ω prevod';\n                          case 'direct_to_owner':\n                            return 'Priamo majiteƒæovi';\n                          case 'card':\n                            return 'Kartou';\n                          case 'crypto':\n                            return 'Kryptomeny';\n                          default:\n                            return method;\n                        }\n                      };\n                      return (\n                        <MenuItem key={method} value={method}>\n                          {getPaymentMethodLabel(method)}\n                        </MenuItem>\n                      );\n                    })}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              {/* Firma */}\n              <Grid item xs={12} sm={6} md={4}>\n                <FormControl size=\"small\" fullWidth>\n                  <InputLabel>Firma</InputLabel>\n                  <Select\n                    multiple\n                    value={\n                      Array.isArray(advancedFilters.company)\n                        ? advancedFilters.company\n                        : []\n                    }\n                    onChange={e =>\n                      handleAdvancedFiltersChange({\n                        ...advancedFilters,\n                        company: Array.isArray(e.target.value)\n                          ? e.target.value\n                          : [e.target.value],\n                      })\n                    }\n                    label=\"Firma\"\n                    renderValue={selected => (\n                      <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                        {(selected as string[]).map(value => (\n                          <Chip key={value} label={value} size=\"small\" />\n                        ))}\n                      </Box>\n                    )}\n                  >\n                    {uniqueCompanies.map(company => (\n                      <MenuItem key={company} value={company}>\n                        {company}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              {/* Stav pren√°jmu */}\n              <Grid item xs={12} sm={6} md={4}>\n                <FormControl size=\"small\" fullWidth>\n                  <InputLabel>Stav pren√°jmu</InputLabel>\n                  <Select\n                    multiple\n                    value={\n                      Array.isArray(advancedFilters.status)\n                        ? advancedFilters.status\n                        : []\n                    }\n                    onChange={e =>\n                      handleAdvancedFiltersChange({\n                        ...advancedFilters,\n                        status: Array.isArray(e.target.value)\n                          ? e.target.value\n                          : [e.target.value],\n                      })\n                    }\n                    label=\"Stav pren√°jmu\"\n                    renderValue={selected => (\n                      <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                        {(selected as string[]).map(value => (\n                          <Chip key={value} label={value} size=\"small\" />\n                        ))}\n                      </Box>\n                    )}\n                  >\n                    {uniqueStatuses.map(status => (\n                      <MenuItem key={status} value={status}>\n                        {status}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              {/* D√°tum od */}\n              <Grid item xs={12} sm={6} md={4}>\n                <TextField\n                  size=\"small\"\n                  fullWidth\n                  label=\"D√°tum od\"\n                  type=\"date\"\n                  value={advancedFilters.dateFrom || ''}\n                  onChange={e =>\n                    handleAdvancedFiltersChange({\n                      ...advancedFilters,\n                      dateFrom: e.target.value,\n                    })\n                  }\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n\n              {/* D√°tum do */}\n              <Grid item xs={12} sm={6} md={4}>\n                <TextField\n                  size=\"small\"\n                  fullWidth\n                  label=\"D√°tum do\"\n                  type=\"date\"\n                  value={advancedFilters.dateTo || ''}\n                  onChange={e =>\n                    handleAdvancedFiltersChange({\n                      ...advancedFilters,\n                      dateTo: e.target.value,\n                    })\n                  }\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n            </Grid>\n          </Box>\n        </Collapse>\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalListHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalProtocols.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1588,1591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1588,1591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1602,1605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1602,1605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1905,1908],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1905,1908],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1980,1983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1980,1983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2025,2028],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2025,2028],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  PhotoLibrary as GalleryIcon,\n  PictureAsPdf as PDFIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  CircularProgress,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  Typography,\n} from '@mui/material';\nimport React from 'react';\n\nimport type { ProtocolImage, ProtocolVideo, Rental } from '../../../types';\nimport PDFViewer from '../../common/PDFViewer';\nimport ProtocolGallery from '../../common/ProtocolGallery';\nimport ReturnProtocolForm from '../../protocols/ReturnProtocolForm';\nimport RentalForm from '../RentalForm';\n\n// üöÄ LAZY LOADING: Protocols loaded only when needed\nconst HandoverProtocolForm = React.lazy(\n  () => import('../../protocols/HandoverProtocolForm')\n);\n\n// üöÄ V2 PROTOCOL FORMS - loaded when V2 is enabled\nconst HandoverProtocolFormV2 = React.lazy(\n  () => import('../../protocols/v2/HandoverProtocolFormV2Wrapper')\n);\nconst ReturnProtocolFormV2 = React.lazy(\n  () => import('../../protocols/v2/ReturnProtocolFormV2Wrapper')\n);\n\ninterface RentalDialogsProps {\n  // Dialog states\n  openDialog: boolean;\n  openHandoverDialog: boolean;\n  openReturnDialog: boolean;\n  openProtocolMenu: boolean;\n  pdfViewerOpen: boolean;\n  galleryOpen: boolean;\n\n  // Selected data\n  editingRental: Rental | null;\n  selectedRentalForProtocol: Rental | null;\n  selectedProtocolType: 'handover' | 'return' | null;\n  selectedPdf: {\n    url: string;\n    type: 'handover' | 'return';\n    title: string;\n  } | null;\n  galleryImages: ProtocolImage[];\n  galleryVideos: ProtocolVideo[];\n  galleryTitle: string;\n\n  // Protocols data\n  protocols: Record<string, { handover?: any; return?: any }>;\n  protocolStatusMap: Record<\n    string,\n    { hasHandoverProtocol: boolean; hasReturnProtocol: boolean }\n  >;\n\n  // Event handlers\n  setOpenDialog: (open: boolean) => void;\n  setOpenHandoverDialog: (open: boolean) => void;\n  setOpenReturnDialog: (open: boolean) => void;\n  handleSave: (rental: any) => void;\n  handleCancel: () => void;\n  handleSaveHandover: (protocol: any) => void;\n  handleSaveReturn: (protocol: any) => void;\n  handleClosePDF: () => void;\n  handleCloseGallery: () => void;\n  handleCloseProtocolMenu: () => void;\n  handleDownloadPDF: () => void;\n  handleViewGallery: () => void;\n}\n\nexport const RentalProtocols: React.FC<RentalDialogsProps> = ({\n  // Dialog states\n  openDialog,\n  openHandoverDialog,\n  openReturnDialog,\n  openProtocolMenu,\n  pdfViewerOpen,\n  galleryOpen,\n\n  // Selected data\n  editingRental,\n  selectedRentalForProtocol,\n  selectedProtocolType,\n  selectedPdf,\n  galleryImages,\n  galleryVideos,\n  galleryTitle,\n\n  // Protocols data\n  protocols,\n  protocolStatusMap,\n\n  // Event handlers\n  setOpenDialog,\n  setOpenHandoverDialog,\n  setOpenReturnDialog,\n  handleSave,\n  handleCancel,\n  handleSaveHandover,\n  handleSaveReturn,\n  handleClosePDF,\n  handleCloseGallery,\n  handleCloseProtocolMenu,\n  handleDownloadPDF,\n  handleViewGallery,\n}) => {\n  // üöÄ V2 Feature Flag Check\n  const [isV2Enabled, setIsV2Enabled] = React.useState(false);\n\n  React.useEffect(() => {\n    const checkV2Feature = async () => {\n      const { featureManager } = await import('../../../config/featureFlags');\n      const enabled = await featureManager.isEnabled('PROTOCOL_V2_ENABLED');\n      setIsV2Enabled(enabled);\n    };\n    checkV2Feature();\n  }, []);\n\n  // Select correct form components based on feature flag\n  const HandoverForm = isV2Enabled\n    ? HandoverProtocolFormV2\n    : HandoverProtocolForm;\n  const ReturnForm = isV2Enabled ? ReturnProtocolFormV2 : ReturnProtocolForm;\n\n  return (\n    <>\n      {/* Rental Form Dialog */}\n      <Dialog\n        open={openDialog}\n        onClose={() => setOpenDialog(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          {editingRental ? 'Upravi≈• pren√°jom' : 'Nov√Ω pren√°jom'}\n        </DialogTitle>\n        <DialogContent>\n          <RentalForm\n            rental={editingRental}\n            onSave={handleSave}\n            onCancel={handleCancel}\n          />\n        </DialogContent>\n      </Dialog>\n\n      {/* Handover Protocol Dialog */}\n      <Dialog\n        open={openHandoverDialog}\n        onClose={() => {\n          console.log('üö® MOBILE DEBUG: Dialog onClose triggered!');\n          console.log(\n            'üö® MOBILE DEBUG: Modal closing via backdrop click or ESC'\n          );\n          console.log('üö® MOBILE DEBUG: timestamp:', new Date().toISOString());\n\n          // logMobile('WARN', 'RentalList', 'Handover modal closing via Dialog onClose', {\n          //   timestamp: Date.now(),\n          //   selectedRentalId: selectedRentalForProtocol?.id,\n          //   reason: 'dialog_onClose'\n          // });\n          setOpenHandoverDialog(false);\n        }}\n        maxWidth=\"lg\"\n        fullWidth\n        sx={{\n          '& .MuiDialog-paper': {\n            // Mobile responsive fixes\n            margin: { xs: 1, sm: 2 },\n            maxHeight: { xs: '95vh', sm: '90vh' },\n            width: { xs: 'calc(100vw - 16px)', sm: '100%' },\n            // Ensure proper scrolling on mobile\n            overflow: 'hidden',\n            display: 'flex',\n            flexDirection: 'column',\n          },\n        }}\n      >\n        <DialogTitle\n          sx={{\n            flexShrink: 0,\n            borderBottom: 1,\n            borderColor: 'divider',\n            padding: { xs: 1, sm: 2 },\n          }}\n        >\n          Odovzd√°vac√≠ protokol (V1)\n        </DialogTitle>\n        <DialogContent\n          sx={{\n            flex: 1,\n            overflow: 'auto',\n            padding: { xs: 1, sm: 2 },\n          }}\n        >\n          {selectedRentalForProtocol && (\n            <React.Suspense\n              fallback={\n                <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\n                  <CircularProgress />\n                  <Typography sx={{ ml: 2 }}>Naƒç√≠tavam protokol...</Typography>\n                </Box>\n              }\n            >\n              <HandoverForm\n                open={openHandoverDialog}\n                rental={selectedRentalForProtocol}\n                onSave={handleSaveHandover}\n                onClose={() => {\n                  console.log(\n                    'üö® MOBILE DEBUG: HandoverProtocolForm onClose triggered!'\n                  );\n                  console.log(\n                    'üö® MOBILE DEBUG: Modal closing via form close button'\n                  );\n                  console.log(\n                    'üö® MOBILE DEBUG: timestamp:',\n                    new Date().toISOString()\n                  );\n\n                  // logMobile('WARN', 'RentalList', 'Handover modal closing via HandoverProtocolForm onClose', {\n                  //   timestamp: Date.now(),\n                  //   selectedRentalId: selectedRentalForProtocol?.id,\n                  //   reason: 'form_onClose'\n                  // });\n                  setOpenHandoverDialog(false);\n                }}\n              />\n            </React.Suspense>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Return Protocol Dialog */}\n      <Dialog\n        open={openReturnDialog}\n        onClose={() => setOpenReturnDialog(false)}\n        maxWidth=\"lg\"\n        fullWidth\n        sx={{\n          '& .MuiDialog-paper': {\n            // Mobile responsive fixes\n            margin: { xs: 1, sm: 2 },\n            maxHeight: { xs: '95vh', sm: '90vh' },\n            width: { xs: 'calc(100vw - 16px)', sm: '100%' },\n            // Ensure proper scrolling on mobile\n            overflow: 'hidden',\n            display: 'flex',\n            flexDirection: 'column',\n          },\n        }}\n      >\n        <DialogTitle\n          sx={{\n            flexShrink: 0,\n            borderBottom: 1,\n            borderColor: 'divider',\n            padding: { xs: 1, sm: 2 },\n          }}\n        >\n          Preberac√≠ protokol (V1)\n        </DialogTitle>\n        <DialogContent\n          sx={{\n            flex: 1,\n            overflow: 'auto',\n            padding: { xs: 1, sm: 2 },\n          }}\n        >\n          {selectedRentalForProtocol && (\n            <>\n              {/* ‚úÖ LOADING STATE: Zobraz loading k√Ωm sa naƒç√≠taj√∫ protokoly */}\n              {(() => {\n                // ‚úÖ POU≈ΩI≈§ PROTOCOL STATUS MAP: R√Ωchlej≈°ia kontrola existencie protokolu\n                const backgroundStatus =\n                  protocolStatusMap[selectedRentalForProtocol.id];\n                const fallbackProtocols =\n                  protocols[selectedRentalForProtocol.id];\n\n                const hasHandover = backgroundStatus\n                  ? backgroundStatus.hasHandoverProtocol\n                  : !!fallbackProtocols?.handover;\n\n                return !hasHandover;\n              })() ? (\n                <Box\n                  sx={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    p: 4,\n                  }}\n                >\n                  <CircularProgress sx={{ mb: 2 }} />\n                  <Typography variant=\"body1\" color=\"text.secondary\">\n                    Naƒç√≠tavam odovzd√°vac√≠ protokol...\n                  </Typography>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"text.secondary\"\n                    sx={{ mt: 1 }}\n                  >\n                    Pre vytvorenie preberacieho protokolu je potrebn√Ω\n                    odovzd√°vac√≠ protokol.\n                  </Typography>\n                </Box>\n              ) : (\n                <ReturnForm\n                  open={openReturnDialog}\n                  onClose={() => setOpenReturnDialog(false)}\n                  rental={selectedRentalForProtocol}\n                  handoverProtocol={\n                    protocols[selectedRentalForProtocol.id]?.handover\n                  }\n                  onSave={handleSaveReturn}\n                />\n              )}\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* PDF Viewer */}\n      {selectedPdf && (\n        <PDFViewer\n          open={pdfViewerOpen}\n          onClose={handleClosePDF}\n          protocolId={selectedPdf.url}\n          protocolType={selectedPdf.type}\n          title={selectedPdf.title}\n        />\n      )}\n\n      {/* New Protocol Gallery */}\n      <ProtocolGallery\n        open={galleryOpen}\n        onClose={handleCloseGallery}\n        images={galleryImages}\n        videos={galleryVideos}\n        title={galleryTitle}\n      />\n\n      {/* Protocol Menu Dialog */}\n      <Dialog\n        open={openProtocolMenu}\n        onClose={handleCloseProtocolMenu}\n        maxWidth=\"xs\"\n        fullWidth\n      >\n        <DialogTitle\n          sx={{\n            bgcolor: 'primary.main',\n            color: 'white',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1,\n          }}\n        >\n          {selectedProtocolType === 'handover' ? 'üöó‚Üí' : '‚Üêüöó'}\n          {selectedProtocolType === 'handover'\n            ? 'Odovzd√°vac√≠ protokol'\n            : 'Preberac√≠ protokol'}\n        </DialogTitle>\n        <DialogContent sx={{ p: { xs: 2, sm: 3 } }}>\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: { xs: 1.5, sm: 2 },\n            }}\n          >\n            <Button\n              fullWidth\n              variant=\"contained\"\n              startIcon={<PDFIcon />}\n              onClick={handleDownloadPDF}\n              sx={{\n                bgcolor: '#f44336',\n                py: { xs: 2, sm: 1.5 },\n                fontSize: { xs: '1rem', sm: '0.875rem' },\n                fontWeight: 600,\n                borderRadius: 2,\n                boxShadow: '0 4px 12px rgba(244,67,54,0.3)',\n                '&:hover': {\n                  bgcolor: '#d32f2f',\n                  transform: 'translateY(-2px)',\n                  boxShadow: '0 6px 16px rgba(244,67,54,0.4)',\n                },\n                transition: 'all 0.2s ease',\n              }}\n            >\n              üìÑ Stiahnu≈• PDF protokol\n            </Button>\n\n            <Button\n              fullWidth\n              variant=\"contained\"\n              startIcon={<GalleryIcon />}\n              onClick={handleViewGallery}\n              sx={{\n                bgcolor: '#2196f3',\n                py: { xs: 2, sm: 1.5 },\n                fontSize: { xs: '1rem', sm: '0.875rem' },\n                fontWeight: 600,\n                borderRadius: 2,\n                boxShadow: '0 4px 12px rgba(33,150,243,0.3)',\n                '&:hover': {\n                  bgcolor: '#1976d2',\n                  transform: 'translateY(-2px)',\n                  boxShadow: '0 6px 16px rgba(33,150,243,0.4)',\n                },\n                transition: 'all 0.2s ease',\n              }}\n            >\n              üñºÔ∏è Zobrazi≈• fotky\n            </Button>\n\n            <Button\n              fullWidth\n              variant=\"outlined\"\n              onClick={handleCloseProtocolMenu}\n              sx={{\n                py: { xs: 2, sm: 1.5 },\n                fontSize: { xs: '1rem', sm: '0.875rem' },\n                fontWeight: 500,\n                borderRadius: 2,\n                borderWidth: 2,\n                '&:hover': {\n                  borderWidth: 2,\n                  bgcolor: 'rgba(0,0,0,0.04)',\n                },\n              }}\n            >\n              Zavrie≈•\n            </Button>\n          </Box>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalRow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":18,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3283,3286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3283,3286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Edit as EditIcon,\n  DirectionsCar as CarIcon,\n} from '@mui/icons-material';\nimport { Box, Typography, Chip, IconButton, Paper, Grid } from '@mui/material';\nimport React from 'react';\n\nimport { useApp } from '../../../context/AppContext';\nimport type { Rental } from '../../../types';\nimport { formatDate, formatCurrency } from '../../../utils/formatters';\n\ninterface RentalRowProps {\n  rental: Rental;\n  onEdit: (rental: Rental) => void;\n  index: number;\n}\n\nexport function RentalRow({ rental, onEdit, index }: RentalRowProps) {\n  const { state } = useApp();\n\n  // N√°jdi vehicle pre tento rental\n  const vehicle = state.vehicles.find(v => v.id === rental.vehicleId);\n\n  // Status color mapping\n  const getStatusColor = (status: string | undefined) => {\n    switch (status) {\n      case 'active':\n        return 'success';\n      case 'completed':\n        return 'default';\n      case 'pending':\n        return 'warning';\n      case 'cancelled':\n        return 'error';\n      default:\n        return 'default';\n    }\n  };\n\n  return (\n    <Paper\n      variant=\"outlined\"\n      sx={{\n        p: 2,\n        '&:hover': {\n          backgroundColor: 'action.hover',\n          boxShadow: 1,\n        },\n        transition: 'all 0.2s ease-in-out',\n        cursor: 'pointer',\n      }}\n      onClick={() => onEdit(rental)}\n    >\n      <Grid container spacing={2} alignItems=\"center\">\n        {/* Vehicle info */}\n        <Grid item xs={12} sm={3}>\n          <Box display=\"flex\" alignItems=\"center\" gap={1}>\n            <CarIcon color=\"action\" fontSize=\"small\" />\n            <Box>\n              <Typography variant=\"subtitle2\" fontWeight=\"medium\">\n                {vehicle\n                  ? `${vehicle.brand} ${vehicle.model}`\n                  : 'Nezn√°me vozidlo'}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                {vehicle?.licensePlate || 'Bez ≈†PZ'}\n              </Typography>\n            </Box>\n          </Box>\n        </Grid>\n\n        {/* Customer */}\n        <Grid item xs={12} sm={2}>\n          <Typography variant=\"body2\" noWrap>\n            {rental.customerName || 'Nezn√°my z√°kazn√≠k'}\n          </Typography>\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            Z√°kazn√≠k\n          </Typography>\n        </Grid>\n\n        {/* Date range */}\n        <Grid item xs={12} sm={2}>\n          <Typography variant=\"body2\" noWrap>\n            {formatDate(rental.startDate)}\n          </Typography>\n          <Typography variant=\"caption\" color=\"text.secondary\" noWrap>\n            - {formatDate(rental.endDate)}\n          </Typography>\n        </Grid>\n\n        {/* Price */}\n        <Grid item xs={12} sm={1.5}>\n          <Typography variant=\"body2\" fontWeight=\"medium\">\n            {formatCurrency(rental.totalPrice)}\n          </Typography>\n          {rental.paymentMethod && (\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              {rental.paymentMethod}\n            </Typography>\n          )}\n        </Grid>\n\n        {/* Status */}\n        <Grid item xs={12} sm={1.5}>\n          <Box display=\"flex\" flexDirection=\"column\" gap={0.5}>\n            <Chip\n              label={rental.status}\n              size=\"small\"\n              color={getStatusColor(rental.status) as any}\n              variant=\"outlined\"\n            />\n            {rental.isFlexible && (\n              <Chip\n                label=\"Flexibiln√Ω\"\n                size=\"small\"\n                color=\"info\"\n                variant=\"outlined\"\n              />\n            )}\n          </Box>\n        </Grid>\n\n        {/* Company */}\n        <Grid item xs={12} sm={1.5}>\n          <Typography variant=\"body2\" noWrap>\n            {vehicle?.company || 'N/A'}\n          </Typography>\n          <Typography variant=\"caption\" color=\"text.secondary\">\n            Firma\n          </Typography>\n        </Grid>\n\n        {/* Actions */}\n        <Grid item xs={12} sm={0.5}>\n          <Box display=\"flex\" justifyContent=\"flex-end\">\n            <IconButton\n              size=\"small\"\n              onClick={e => {\n                e.stopPropagation();\n                onEdit(rental);\n              }}\n            >\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n          </Box>\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalSearchAndFilters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":8}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Search as SearchIcon,\n  FilterList as FilterListIcon,\n  Clear as ClearIcon,\n  ExpandMore as ExpandMoreIcon,\n  ExpandLess as ExpandLessIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  TextField,\n  Button,\n  Collapse,\n  Card,\n  CardContent,\n  Typography,\n  InputAdornment,\n  Chip,\n  Stack,\n} from '@mui/material';\nimport React from 'react';\n\ninterface RentalSearchAndFiltersProps {\n  searchQuery: string;\n  onSearchChange: (query: string) => void;\n  showFilters: boolean;\n  onToggleFilters: () => void;\n  onClearFilters: () => void;\n  filtersComponent: React.ReactNode;\n  hasActiveFilters: boolean;\n  activeFiltersCount: number;\n  filteredCount: number;\n  totalCount: number;\n}\n\nexport function RentalSearchAndFilters({\n  searchQuery,\n  onSearchChange,\n  showFilters,\n  onToggleFilters,\n  onClearFilters,\n  filtersComponent,\n  hasActiveFilters,\n  activeFiltersCount,\n  filteredCount,\n  totalCount,\n}: RentalSearchAndFiltersProps) {\n  return (\n    <Box sx={{ mb: 3 }}>\n      {/* Search bar */}\n      <Box\n        sx={{\n          display: 'flex',\n          gap: 2,\n          mb: 2,\n          flexDirection: { xs: 'column', sm: 'row' },\n        }}\n      >\n        <TextField\n          fullWidth\n          placeholder=\"Hƒæada≈• pren√°jmy (z√°kazn√≠k, vozidlo, ≈†PZ, pozn√°mky...)\"\n          value={searchQuery}\n          onChange={e => onSearchChange(e.target.value)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <SearchIcon color=\"action\" />\n              </InputAdornment>\n            ),\n          }}\n          sx={{\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'background.paper',\n            },\n          }}\n        />\n\n        <Box\n          sx={{\n            display: 'flex',\n            gap: 1,\n            flexShrink: 0,\n            flexDirection: { xs: 'row', sm: 'row' },\n          }}\n        >\n          <Button\n            variant={showFilters ? 'contained' : 'outlined'}\n            startIcon={showFilters ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n            endIcon={\n              hasActiveFilters && (\n                <Chip\n                  label={activeFiltersCount}\n                  size=\"small\"\n                  color=\"primary\"\n                  sx={{ ml: 0.5, minWidth: 20, height: 20 }}\n                />\n              )\n            }\n            onClick={onToggleFilters}\n            sx={{ minWidth: 120 }}\n          >\n            <FilterListIcon sx={{ mr: 0.5 }} />\n            Filtre\n          </Button>\n\n          {hasActiveFilters && (\n            <Button\n              variant=\"outlined\"\n              color=\"secondary\"\n              startIcon={<ClearIcon />}\n              onClick={onClearFilters}\n              size=\"small\"\n            >\n              Vymaza≈•\n            </Button>\n          )}\n        </Box>\n      </Box>\n\n      {/* Filter results info */}\n      {(hasActiveFilters || searchQuery) && (\n        <Box sx={{ mb: 2 }}>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Zobrazen√Ωch: {filteredCount} z {totalCount} pren√°jmov\n            {searchQuery && ` pre \"${searchQuery}\"`}\n          </Typography>\n        </Box>\n      )}\n\n      {/* Advanced filters */}\n      <Collapse in={showFilters}>\n        <Card variant=\"outlined\" sx={{ mb: 2 }}>\n          <CardContent sx={{ p: 3 }}>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 1,\n                mb: 2,\n              }}\n            >\n              <FilterListIcon />\n              Pokroƒçil√© filtre\n            </Typography>\n            {filtersComponent}\n          </CardContent>\n        </Card>\n      </Collapse>\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalStats.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[382,385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[382,385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[396,399],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[396,399],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[474,477],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[474,477],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":302,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8905,8908],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8905,8908],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":302,"column":119,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":122,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8956,8959],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8956,8959],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":303,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9057,9060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9057,9060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":303,"column":119,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":122,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9108,9111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9108,9111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":304,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":304,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9200,9203],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9200,9203],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":312,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":312,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9604,9607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9604,9607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Box,\n  Card,\n  CardContent,\n  Divider,\n  Grid,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@mui/material';\nimport { isAfter, isBefore, isToday, isTomorrow, parseISO } from 'date-fns';\nimport React, { useMemo } from 'react';\n\nimport type { Rental } from '../../../types';\n\ninterface RentalStatsProps {\n  rentals: Rental[];\n  protocols?: Record<string, { handover?: any; return?: any }>;\n  isLoading?: boolean;\n  onQuickFilter?: (filterType: string, value?: any) => void;\n}\n\ninterface DashboardStats {\n  total: number;\n  active: number;\n  todayActivity: number;\n  tomorrowReturns: number;\n  weekActivity: number;\n  overdue: number;\n  newToday: number;\n  unpaid: number;\n  pending: number;\n  withHandover: number;\n  withReturn: number;\n  totalRevenue: number;\n  avgDailyRevenue: number;\n}\n\nexport const RentalStats: React.FC<RentalStatsProps> = ({\n  rentals,\n  protocols = {},\n  isLoading = false,\n  onQuickFilter,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  // üìä Vypoƒç√≠taj kƒæ√∫ƒçov√© metriky\n  const stats: DashboardStats = useMemo(() => {\n    const today = new Date();\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n\n    const active = rentals.filter(rental => {\n      // ZACHOVAJ PRESN√ù ƒåAS BEZ TIMEZONE KONVERZIE\n      const startDate =\n        typeof rental.startDate === 'string'\n          ? parseISO(rental.startDate)\n          : rental.startDate;\n      const endDate =\n        typeof rental.endDate === 'string'\n          ? parseISO(rental.endDate)\n          : rental.endDate;\n      // Pren√°jom je akt√≠vny len ak: zaƒçal a e≈°te neskonƒçil\n      return (\n        (isAfter(today, startDate) || isToday(startDate)) &&\n        (isBefore(today, endDate) || isToday(endDate))\n      );\n    });\n\n    // Dnes aktivita - pren√°jmy ktor√© sa dnes zaƒç√≠naj√∫ ALEBO konƒçia\n    const todayActivity = rentals.filter(rental => {\n      // ZACHOVAJ PRESN√ù ƒåAS BEZ TIMEZONE KONVERZIE\n      const startDate =\n        typeof rental.startDate === 'string'\n          ? parseISO(rental.startDate)\n          : rental.startDate;\n      const endDate =\n        typeof rental.endDate === 'string'\n          ? parseISO(rental.endDate)\n          : rental.endDate;\n      return isToday(startDate) || isToday(endDate);\n    });\n\n    const tomorrowReturns = rentals.filter(rental => {\n      // ZACHOVAJ PRESN√ù ƒåAS BEZ TIMEZONE KONVERZIE\n      const endDate =\n        typeof rental.endDate === 'string'\n          ? parseISO(rental.endDate)\n          : rental.endDate;\n      return isTomorrow(endDate);\n    });\n\n    // Tento t√Ω≈æde≈à aktivita - pren√°jmy ktor√© sa tento t√Ω≈æde≈à zaƒç√≠naj√∫ ALEBO konƒçia\n    const weekActivity = rentals.filter(rental => {\n      // ZACHOVAJ PRESN√ù ƒåAS BEZ TIMEZONE KONVERZIE\n      const startDate =\n        typeof rental.startDate === 'string'\n          ? parseISO(rental.startDate)\n          : rental.startDate;\n      const endDate =\n        typeof rental.endDate === 'string'\n          ? parseISO(rental.endDate)\n          : rental.endDate;\n      const endOfWeek = new Date(today);\n      endOfWeek.setDate(today.getDate() + (7 - today.getDay())); // Najbli≈æ≈°ia nedeƒæa\n      endOfWeek.setHours(23, 59, 59, 999);\n\n      const startsThisWeek =\n        isAfter(startDate, today) && isBefore(startDate, endOfWeek);\n      const endsThisWeek =\n        isAfter(endDate, today) && isBefore(endDate, endOfWeek);\n\n      return startsThisWeek || endsThisWeek;\n    });\n\n    // Preterminovan√© - pren√°jmy ktor√© mali skonƒçi≈• ale e≈°te sa nevr√°tili\n    const overdue = rentals.filter(rental => {\n      // ZACHOVAJ PRESN√ù ƒåAS BEZ TIMEZONE KONVERZIE\n      const endDate =\n        typeof rental.endDate === 'string'\n          ? parseISO(rental.endDate)\n          : rental.endDate;\n      // Preterminovan√© s√∫ tie ƒço skonƒçili pred dnes a nemaj√∫ return protokol\n      return isBefore(endDate, today) && !protocols[rental.id]?.return;\n    });\n\n    // Nov√© dnes - pren√°jmy vytvoren√© dnes\n    const newToday = rentals.filter(rental => {\n      const createdDate = new Date(rental.createdAt);\n      return isToday(createdDate);\n    });\n\n    const unpaid = rentals.filter(rental => !rental.paid);\n    const pending = rentals.filter(\n      rental => rental.status === 'pending' || !rental.confirmed\n    );\n\n    const withHandover = rentals.filter(\n      rental => protocols[rental.id]?.handover\n    );\n    const withReturn = rentals.filter(rental => protocols[rental.id]?.return);\n\n    const totalRevenue = rentals.reduce(\n      (sum, rental) => sum + (rental.totalPrice || 0),\n      0\n    );\n    const avgDailyRevenue =\n      rentals.length > 0 ? totalRevenue / Math.max(rentals.length, 1) : 0;\n\n    return {\n      total: rentals.length,\n      active: active.length,\n      todayActivity: todayActivity.length,\n      tomorrowReturns: tomorrowReturns.length,\n      weekActivity: weekActivity.length,\n      overdue: overdue.length,\n      newToday: newToday.length,\n      unpaid: unpaid.length,\n      pending: pending.length,\n      withHandover: withHandover.length,\n      withReturn: withReturn.length,\n      totalRevenue,\n      avgDailyRevenue,\n    };\n  }, [rentals, protocols]);\n\n  // üìä V≈°etky metriky v jednom kompaktnom riadku\n  const allMetrics = [\n    {\n      label: 'Preterminovan√©',\n      value: stats.overdue,\n      color: stats.overdue > 0 ? 'error' : 'success',\n      urgent: stats.overdue > 0,\n      filterType: 'overdue',\n      clickable: stats.overdue > 0,\n    },\n    {\n      label: 'Dnes odovzdanie/vr√°tenie',\n      value: stats.todayActivity,\n      color: stats.todayActivity > 0 ? 'warning' : 'success',\n      urgent: stats.todayActivity > 0,\n      filterType: 'todayActivity',\n      clickable: stats.todayActivity > 0,\n    },\n    {\n      label: 'Zajtra vr√°tenie',\n      value: stats.tomorrowReturns,\n      color: stats.tomorrowReturns > 0 ? 'warning' : 'success',\n      urgent: stats.tomorrowReturns > 0,\n      filterType: 'tomorrowReturns',\n      clickable: stats.tomorrowReturns > 0,\n    },\n    {\n      label: 'Tento t√Ω≈æde≈à odovzdanie/vr√°tenie',\n      value: stats.weekActivity,\n      color: 'info',\n      urgent: false,\n      filterType: 'weekActivity',\n      clickable: stats.weekActivity > 0,\n    },\n    {\n      label: 'Nov√© dnes',\n      value: stats.newToday,\n      color: 'success',\n      urgent: false,\n      filterType: 'newToday',\n      clickable: stats.newToday > 0,\n    },\n    {\n      label: 'Akt√≠vne pren√°jmy',\n      value: stats.active,\n      color: 'info',\n      urgent: false,\n      filterType: 'active',\n      clickable: stats.active > 0,\n    },\n    {\n      label: 'Nezaplaten√©',\n      value: stats.unpaid,\n      color: stats.unpaid > 0 ? 'warning' : 'success',\n      urgent: stats.unpaid > 0,\n      filterType: 'unpaid',\n      clickable: stats.unpaid > 0,\n    },\n    {\n      label: 'ƒåakaj√∫ce',\n      value: stats.pending,\n      color: stats.pending > 0 ? 'warning' : 'success',\n      urgent: stats.pending > 0,\n      filterType: 'pending',\n      clickable: stats.pending > 0,\n    },\n  ];\n\n  // üñ±Ô∏è Handler pre klik na metriku\n  const handleMetricClick = (filterType: string, value: number) => {\n    if (value > 0 && onQuickFilter) {\n      onQuickFilter(filterType);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Card sx={{ mb: 3, p: 2 }}>\n        <Typography variant=\"h6\" color=\"text.secondary\">\n          Naƒç√≠tavam ≈°tatistiky...\n        </Typography>\n      </Card>\n    );\n  }\n\n  return (\n    <Card\n      sx={{\n        mb: 3,\n        mx: { xs: 1, md: 0 }, // Men≈°√≠ symetrick√Ω margin na mobile\n        backgroundColor: 'background.paper',\n        boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\n        border: '1px solid rgba(0,0,0,0.06)',\n        borderRadius: 3,\n      }}\n    >\n      <CardContent sx={{ p: { xs: 2, md: 3 } }}>\n        {/* Header */}\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            mb: 3,\n          }}\n        >\n          <Typography\n            variant=\"h5\"\n            fontWeight=\"600\"\n            sx={{\n              color: 'primary.main',\n              display: 'flex',\n              alignItems: 'center',\n              gap: 1,\n            }}\n          >\n            üìä ≈†tatistiky pren√°jmov\n          </Typography>\n\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Celkom: <strong>{stats.total}</strong> pren√°jmov\n          </Typography>\n        </Box>\n\n        {/* üìä ULTRA KOMPAKTN√ù DASHBOARD - v≈°etko v jednom riadku */}\n        <Grid container spacing={0.25}>\n          {allMetrics.map((metric, index) => (\n            <Grid item xs={4} sm={3} md={2} lg={1.33} xl={1.2} key={index}>\n              <Card\n                onClick={() =>\n                  handleMetricClick(metric.filterType, metric.value)\n                }\n                sx={{\n                  background: metric.urgent\n                    ? `linear-gradient(135deg, ${(theme.palette as any)[metric.color].main}15 0%, ${(theme.palette as any)[metric.color].main}25 100%)`\n                    : `linear-gradient(135deg, ${(theme.palette as any)[metric.color].main}10 0%, ${(theme.palette as any)[metric.color].main}20 100%)`,\n                  border: `1px solid ${(theme.palette as any)[metric.color].main}30`,\n                  borderRadius: 1,\n                  transition: 'all 0.2s ease',\n                  cursor: metric.clickable ? 'pointer' : 'default',\n                  minHeight: 60,\n                  '&:hover': metric.clickable\n                    ? {\n                        transform: 'translateY(-1px)',\n                        boxShadow: `0 4px 15px ${(theme.palette as any)[metric.color].main}30`,\n                      }\n                    : {},\n                }}\n              >\n                <CardContent\n                  sx={{\n                    textAlign: 'center',\n                    py: 0.25,\n                    px: 0.25,\n                    '&:last-child': { pb: 0.25 },\n                  }}\n                >\n                  <Typography\n                    variant=\"h6\"\n                    fontWeight=\"700\"\n                    sx={{\n                      color: `${metric.color}.main`,\n                      fontSize: { xs: '0.9rem', sm: '1rem', md: '1.1rem' },\n                      lineHeight: 1.1,\n                    }}\n                  >\n                    {metric.value}\n                  </Typography>\n\n                  <Typography\n                    variant=\"caption\"\n                    sx={{\n                      color: 'text.secondary',\n                      fontSize: { xs: '0.55rem', sm: '0.6rem', md: '0.65rem' },\n                      display: 'block',\n                      lineHeight: 1,\n                      mt: 0.1,\n                    }}\n                  >\n                    {metric.label}\n                  </Typography>\n\n                  {metric.clickable && (\n                    <Typography\n                      variant=\"caption\"\n                      sx={{\n                        color: `${metric.color}.main`,\n                        fontSize: { xs: '0.5rem', sm: '0.55rem' },\n                        mt: 0.1,\n                      }}\n                    >\n                      üëÜ\n                    </Typography>\n                  )}\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n\n        {/* üí∞ FINANƒåN√ù PREHƒΩAD - len re√°lne d√°ta */}\n        {!isMobile && stats.totalRevenue > 0 && (\n          <>\n            <Divider sx={{ my: 2 }} />\n            <Box\n              sx={{\n                display: 'flex',\n                justifyContent: 'center',\n                gap: 4,\n              }}\n            >\n              <Box sx={{ textAlign: 'center' }}>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"600\"\n                  sx={{ color: 'success.main' }}\n                >\n                  {stats.totalRevenue.toLocaleString('sk-SK')}‚Ç¨\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Celkov√© tr≈æby\n                </Typography>\n              </Box>\n              <Box sx={{ textAlign: 'center' }}>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"600\"\n                  sx={{ color: 'info.main' }}\n                >\n                  {Math.round(stats.avgDailyRevenue).toLocaleString('sk-SK')}‚Ç¨\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Priemern√° cena\n                </Typography>\n              </Box>\n            </Box>\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalStatusChip.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'confirmed' is defined but never used.","line":18,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'paid' is defined but never used.","line":18,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  CheckCircle as CheckCircleIcon,\n  Error as ErrorIcon,\n  Pending as PendingIcon,\n} from '@mui/icons-material';\nimport React from 'react';\n\nimport { StatusChip } from '../../ui';\n\ninterface RentalStatusChipProps {\n  status: string;\n  confirmed?: boolean;\n  paid?: boolean;\n  size?: 'small' | 'medium';\n}\n\nconst RentalStatusChip = React.memo<RentalStatusChipProps>(\n  ({ status, confirmed, paid, size = 'small' }) => {\n    const getStatusProps = () => {\n      switch (status) {\n        case 'active':\n          return {\n            label: 'Akt√≠vny',\n            color: 'success' as const,\n            icon: <CheckCircleIcon sx={{ fontSize: 16 }} />,\n          };\n        case 'finished':\n          return {\n            label: 'Ukonƒçen√Ω',\n            color: 'neutral' as const,\n            icon: <CheckCircleIcon sx={{ fontSize: 16 }} />,\n          };\n        case 'pending':\n          return {\n            label: 'ƒåakaj√∫ci',\n            color: 'warning' as const,\n            icon: <PendingIcon sx={{ fontSize: 16 }} />,\n          };\n        case 'cancelled':\n          return {\n            label: 'Zru≈°en√Ω',\n            color: 'error' as const,\n            icon: <ErrorIcon sx={{ fontSize: 16 }} />,\n          };\n        default:\n          return {\n            label: status || 'Nezn√°my',\n            color: 'neutral' as const,\n            icon: <PendingIcon sx={{ fontSize: 16 }} />,\n          };\n      }\n    };\n\n    const statusProps = getStatusProps();\n\n    return (\n      <StatusChip\n        label={statusProps.label}\n        chipColor={statusProps.color}\n        size={size}\n        icon={statusProps.icon}\n        sx={{\n          fontWeight: 600,\n          borderRadius: 1.5,\n          '& .MuiChip-icon': {\n            fontSize: 16,\n          },\n        }}\n      />\n    );\n  }\n);\n\nRentalStatusChip.displayName = 'RentalStatusChip';\n\nexport default RentalStatusChip;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/components/RentalTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/rentals/utils/rentalUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isWithinInterval' is defined but never used.","line":4,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1979,1982],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1979,1982],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5140,5143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5140,5143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  format,\n  parseISO,\n  isWithinInterval,\n  startOfDay,\n  endOfDay,\n} from 'date-fns';\nimport { sk } from 'date-fns/locale';\n\nimport type { Rental, Vehicle } from '../../../types';\n\n// CSV Export utility\nexport const exportRentalsToCSV = (rentals: Rental[], vehicles: Vehicle[]) => {\n  const vehicleMap = new Map(vehicles.map(v => [v.id, v]));\n\n  const csvData = rentals.map(rental => {\n    const vehicle = vehicleMap.get(rental.vehicleId || '');\n    return {\n      ID: rental.id,\n      Z√°kazn√≠k: rental.customerName || '',\n      Vozidlo: vehicle ? `${vehicle.brand} ${vehicle.model}` : '',\n      ≈†PZ: vehicle?.licensePlate || '',\n      Firma: vehicle?.company || '',\n      Od: rental.startDate\n        ? format(\n            rental.startDate instanceof Date\n              ? rental.startDate\n              : parseISO(rental.startDate),\n            'dd.MM.yyyy',\n            { locale: sk }\n          )\n        : '',\n      Do: rental.endDate\n        ? format(\n            rental.endDate instanceof Date\n              ? rental.endDate\n              : parseISO(rental.endDate),\n            'dd.MM.yyyy',\n            { locale: sk }\n          )\n        : '',\n      Cena: rental.totalPrice || 0,\n      Stav: rental.status || '',\n      Platba: rental.paymentMethod || '',\n      Pozn√°mky: rental.notes || '',\n    };\n  });\n\n  const csv = [\n    Object.keys(csvData[0] || {}).join(','),\n    ...csvData.map(row => Object.values(row).join(',')),\n  ].join('\\n');\n\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const link = document.createElement('a');\n  const url = URL.createObjectURL(blob);\n  link.setAttribute('href', url);\n  link.setAttribute(\n    'download',\n    `prenajmy-${format(new Date(), 'yyyy-MM-dd')}.csv`\n  );\n  link.style.visibility = 'hidden';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};\n\n// Filter utilities\nexport const applyRentalFilters = (\n  rentals: Rental[],\n  searchQuery: string,\n  filters: any,\n  vehicles: Vehicle[]\n) => {\n  const vehicleMap = new Map(vehicles.map(v => [v.id, v]));\n\n  return rentals.filter(rental => {\n    const vehicle = vehicleMap.get(rental.vehicleId || '');\n\n    // Search filter\n    if (searchQuery) {\n      const searchLower = searchQuery.toLowerCase();\n      const searchableText = [\n        rental.customerName,\n        rental.notes,\n        vehicle?.brand,\n        vehicle?.model,\n        vehicle?.licensePlate,\n        vehicle?.company,\n        rental.customerEmail,\n        rental.customerPhone,\n      ]\n        .filter(Boolean)\n        .join(' ')\n        .toLowerCase();\n\n      if (!searchableText.includes(searchLower)) return false;\n    }\n\n    // Status filter\n    if (filters.status?.length > 0 && !filters.status.includes(rental.status)) {\n      return false;\n    }\n\n    // Payment method filter\n    if (\n      filters.paymentMethod?.length > 0 &&\n      !filters.paymentMethod.includes(rental.paymentMethod)\n    ) {\n      return false;\n    }\n\n    // Company filter\n    if (\n      filters.company?.length > 0 &&\n      vehicle &&\n      !filters.company.includes(vehicle.company)\n    ) {\n      return false;\n    }\n\n    // Date range filter\n    if (filters.dateFrom || filters.dateTo) {\n      if (!rental.startDate || !rental.endDate) return false;\n      const rentalStart =\n        rental.startDate instanceof Date\n          ? rental.startDate\n          : parseISO(rental.startDate);\n      const rentalEnd =\n        rental.endDate instanceof Date\n          ? rental.endDate\n          : parseISO(rental.endDate);\n\n      if (filters.dateFrom) {\n        const filterStart = startOfDay(parseISO(filters.dateFrom));\n        if (rentalEnd < filterStart) return false;\n      }\n\n      if (filters.dateTo) {\n        const filterEnd = endOfDay(parseISO(filters.dateTo));\n        if (rentalStart > filterEnd) return false;\n      }\n    }\n\n    // Price range filter\n    if (filters.priceMin && rental.totalPrice < parseFloat(filters.priceMin)) {\n      return false;\n    }\n\n    if (filters.priceMax && rental.totalPrice > parseFloat(filters.priceMax)) {\n      return false;\n    }\n\n    return true;\n  });\n};\n\n// Get unique values for filter dropdowns\nexport const getUniqueFilterValues = (\n  rentals: Rental[],\n  vehicles: Vehicle[]\n) => {\n  const vehicleMap = new Map(vehicles.map(v => [v.id, v]));\n\n  const statuses = new Set<string>();\n  const paymentMethods = new Set<string>();\n  const companies = new Set<string>();\n  const vehicleBrands = new Set<string>();\n\n  rentals.forEach(rental => {\n    if (rental.status) statuses.add(rental.status);\n    if (rental.paymentMethod) paymentMethods.add(rental.paymentMethod);\n\n    const vehicle = vehicleMap.get(rental.vehicleId || '');\n    if (vehicle?.company) companies.add(vehicle.company);\n    if (vehicle?.brand) vehicleBrands.add(vehicle.brand);\n  });\n\n  return {\n    statuses: Array.from(statuses).sort(),\n    paymentMethods: Array.from(paymentMethods).sort(),\n    companies: Array.from(companies).sort(),\n    vehicleBrands: Array.from(vehicleBrands).sort(),\n  };\n};\n\n// Protocol status utilities\nexport const getProtocolStatusText = (\n  rental: Rental,\n  protocols: Record<string, any>\n) => {\n  const hasHandover = !!protocols[rental.id]?.handover;\n  const hasReturn = !!protocols[rental.id]?.return;\n\n  if (hasHandover && hasReturn) return 'Kompletn√©';\n  if (hasHandover) return 'Odovzd√°vac√≠';\n  if (hasReturn) return 'Preberac√≠';\n  return '≈Ωiadne';\n};\n\n// Vehicle lookup utilities\nexport const createVehicleLookupMap = (vehicles: Vehicle[]) => {\n  const map = new Map();\n  vehicles.forEach(vehicle => {\n    map.set(vehicle.id, vehicle);\n  });\n  return map;\n};\n\nexport const getVehicleByRental = (\n  rental: Rental,\n  vehicleMap: Map<string, Vehicle>\n) => {\n  return rental.vehicleId ? vehicleMap.get(rental.vehicleId) || null : null;\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/settlements/SettlementDetail.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Paper' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isMobile' is assigned a value but never used.","line":56,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":17}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  PictureAsPdf as PdfIcon,\n  AccountBalance as BankIcon,\n  TrendingUp as ProfitIcon,\n  TrendingDown as LossIcon,\n  Euro as EuroIcon,\n  Business as CompanyIcon,\n  Assessment as ReportIcon,\n  CalendarToday as CalendarIcon,\n  Receipt as ReceiptIcon,\n  DirectionsCar as VehicleIcon,\n  Person as PersonIcon,\n  Payment as PaymentIcon,\n  Close as CloseIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Typography,\n  CircularProgress,\n  Grid,\n  Divider,\n  Chip,\n  useTheme,\n  useMediaQuery,\n} from '@mui/material';\nimport { format, parseISO } from 'date-fns';\nimport { sk } from 'date-fns/locale';\nimport React, { useState } from 'react';\n\nimport { useAuth } from '../../context/AuthContext';\nimport { getAPI_BASE_URL } from '../../services/api';\nimport type { Settlement } from '../../types';\n\ninterface SettlementDetailProps {\n  settlement: Settlement;\n  onClose: () => void;\n}\n\nexport default function SettlementDetail({\n  settlement,\n  onClose,\n}: SettlementDetailProps) {\n  const { state } = useAuth();\n  const [pdfLoading, setPdfLoading] = useState(false);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  // Poƒç√≠tame podƒæa sp√¥sobov platby\n  const rentalsByPaymentMethod = {\n    cash: settlement.rentals.filter(r => r.paymentMethod === 'cash'),\n    bank_transfer: settlement.rentals.filter(\n      r => r.paymentMethod === 'bank_transfer'\n    ),\n    vrp: settlement.rentals.filter(r => r.paymentMethod === 'vrp'),\n    direct_to_owner: settlement.rentals.filter(\n      r => r.paymentMethod === 'direct_to_owner'\n    ),\n  };\n\n  // V√Ωpoƒçty pre ka≈æd√Ω sp√¥sob platby\n  const paymentMethodStats = {\n    cash: {\n      count: rentalsByPaymentMethod.cash.length,\n      totalPrice: rentalsByPaymentMethod.cash.reduce(\n        (sum, r) => sum + r.totalPrice,\n        0\n      ),\n      totalCommission: rentalsByPaymentMethod.cash.reduce(\n        (sum, r) => sum + r.commission,\n        0\n      ),\n      netAmount: rentalsByPaymentMethod.cash.reduce(\n        (sum, r) => sum + r.totalPrice - r.commission,\n        0\n      ),\n    },\n    bank_transfer: {\n      count: rentalsByPaymentMethod.bank_transfer.length,\n      totalPrice: rentalsByPaymentMethod.bank_transfer.reduce(\n        (sum, r) => sum + r.totalPrice,\n        0\n      ),\n      totalCommission: rentalsByPaymentMethod.bank_transfer.reduce(\n        (sum, r) => sum + r.commission,\n        0\n      ),\n      netAmount: rentalsByPaymentMethod.bank_transfer.reduce(\n        (sum, r) => sum + r.totalPrice - r.commission,\n        0\n      ),\n    },\n    vrp: {\n      count: rentalsByPaymentMethod.vrp.length,\n      totalPrice: rentalsByPaymentMethod.vrp.reduce(\n        (sum, r) => sum + r.totalPrice,\n        0\n      ),\n      totalCommission: rentalsByPaymentMethod.vrp.reduce(\n        (sum, r) => sum + r.commission,\n        0\n      ),\n      netAmount: rentalsByPaymentMethod.vrp.reduce(\n        (sum, r) => sum + r.totalPrice - r.commission,\n        0\n      ),\n    },\n    direct_to_owner: {\n      count: rentalsByPaymentMethod.direct_to_owner.length,\n      totalPrice: rentalsByPaymentMethod.direct_to_owner.reduce(\n        (sum, r) => sum + r.totalPrice,\n        0\n      ),\n      totalCommission: rentalsByPaymentMethod.direct_to_owner.reduce(\n        (sum, r) => sum + r.commission,\n        0\n      ),\n      netAmount: rentalsByPaymentMethod.direct_to_owner.reduce(\n        (sum, r) => sum + r.totalPrice - r.commission,\n        0\n      ),\n    },\n  };\n\n  const getPaymentMethodLabel = (method: string) => {\n    switch (method) {\n      case 'cash':\n        return 'Hotovos≈•';\n      case 'bank_transfer':\n        return 'FA (Fakt√∫ra)';\n      case 'vrp':\n        return 'VRP';\n      case 'direct_to_owner':\n        return 'Majiteƒæ';\n      default:\n        return method;\n    }\n  };\n\n  const getPaymentMethodColor = (method: string) => {\n    switch (method) {\n      case 'cash':\n        return '#4caf50';\n      case 'bank_transfer':\n        return '#2196f3';\n      case 'vrp':\n        return '#ff9800';\n      case 'direct_to_owner':\n        return '#9e9e9e';\n      default:\n        return '#666';\n    }\n  };\n\n  // Server PDF generovanie (rovnak√Ω ako protokoly)\n  const handleDownloadPDF = async () => {\n    if (!state.token) {\n      alert('Nie ste prihl√°sen√Ω');\n      return;\n    }\n\n    setPdfLoading(true);\n    try {\n      const response = await fetch(\n        `${getAPI_BASE_URL()}/settlements/${settlement.id}/pdf`,\n        {\n          method: 'GET',\n          headers: {\n            Authorization: `Bearer ${state.token}`,\n          },\n        }\n      );\n\n      if (!response.ok) {\n        const errorData = await response\n          .json()\n          .catch(() => ({ error: 'Nezn√°ma chyba' }));\n        throw new Error(errorData.error || `HTTP ${response.status}`);\n      }\n\n      // Z√≠skaj PDF blob\n      const blob = await response.blob();\n\n      // Vytvor download link\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n\n      // N√°zov s√∫boru\n      const filename = `vyuctovanie_${settlement.company?.replace(/[^a-zA-Z0-9]/g, '_')}_${settlement.id.slice(-8)}.pdf`;\n      link.download = filename;\n\n      // Trigger download\n      document.body.appendChild(link);\n      link.click();\n\n      // Cleanup\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n\n      console.log('‚úÖ PDF √∫spe≈°ne stiahnut√©');\n    } catch (error) {\n      console.error('‚ùå Chyba pri s≈•ahovan√≠ PDF:', error);\n      alert(\n        `Chyba pri s≈•ahovan√≠ PDF: ${error instanceof Error ? error.message : 'Nezn√°ma chyba'}`\n      );\n    } finally {\n      setPdfLoading(false);\n    }\n  };\n\n  return (\n    <Box sx={{ p: { xs: 2, md: 3 } }}>\n      {/* Modern Header */}\n      <Card sx={{ mb: 3, boxShadow: '0 4px 12px rgba(0,0,0,0.1)' }}>\n        <CardContent\n          sx={{\n            background: 'linear-gradient(135deg, #1976d2 0%, #1565c0 100%)',\n            color: 'white',\n            position: 'relative',\n          }}\n        >\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'flex-start',\n            }}\n          >\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n              <ReportIcon sx={{ fontSize: 32 }} />\n              <Box>\n                <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: 0.5 }}>\n                  Detail vy√∫ƒçtovania\n                </Typography>\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <CompanyIcon sx={{ fontSize: 20 }} />\n                  <Typography variant=\"h6\">\n                    {settlement.company || 'N/A'}\n                  </Typography>\n                </Box>\n              </Box>\n            </Box>\n\n            <Button\n              variant=\"outlined\"\n              startIcon={<CloseIcon />}\n              onClick={onClose}\n              sx={{\n                color: 'white',\n                borderColor: 'white',\n                '&:hover': {\n                  borderColor: 'white',\n                  backgroundColor: 'rgba(255,255,255,0.1)',\n                },\n              }}\n            >\n              Zavrie≈•\n            </Button>\n          </Box>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <CalendarIcon sx={{ fontSize: 18 }} />\n            <Typography variant=\"body1\">\n              Obdobie:{' '}\n              {format(\n                settlement.period.from instanceof Date\n                  ? settlement.period.from\n                  : parseISO(settlement.period.from),\n                'dd.MM.yyyy',\n                { locale: sk }\n              )}{' '}\n              -{' '}\n              {format(\n                settlement.period.to instanceof Date\n                  ? settlement.period.to\n                  : parseISO(settlement.period.to),\n                'dd.MM.yyyy',\n                { locale: sk }\n              )}\n            </Typography>\n          </Box>\n        </CardContent>\n      </Card>\n\n      {/* Financial Summary Cards */}\n      <Grid container spacing={2} sx={{ mb: 3 }}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card\n            sx={{\n              background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n              color: 'white',\n              boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n              height: '100%',\n            }}\n          >\n            <CardContent>\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <Box>\n                  <Typography variant=\"h6\" sx={{ fontWeight: 600, mb: 1 }}>\n                    CELKOV√â PR√çJMY\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ fontWeight: 700 }}>\n                    {settlement.totalIncome.toFixed(2)}‚Ç¨\n                  </Typography>\n                </Box>\n                <BankIcon sx={{ fontSize: 40, opacity: 0.8 }} />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card\n            sx={{\n              background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n              color: 'white',\n              boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n              height: '100%',\n            }}\n          >\n            <CardContent>\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <Box>\n                  <Typography variant=\"h6\" sx={{ fontWeight: 600, mb: 1 }}>\n                    CELKOV√â N√ÅKLADY\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ fontWeight: 700 }}>\n                    {settlement.totalExpenses.toFixed(2)}‚Ç¨\n                  </Typography>\n                </Box>\n                <EuroIcon sx={{ fontSize: 40, opacity: 0.8 }} />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card\n            sx={{\n              background: 'linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%)',\n              color: 'white',\n              boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n              height: '100%',\n            }}\n          >\n            <CardContent>\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <Box>\n                  <Typography variant=\"h6\" sx={{ fontWeight: 600, mb: 1 }}>\n                    CELKOV√â PROV√çZIE\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ fontWeight: 700 }}>\n                    {settlement.totalCommission.toFixed(2)}‚Ç¨\n                  </Typography>\n                </Box>\n                <ReceiptIcon sx={{ fontSize: 40, opacity: 0.8 }} />\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card\n            sx={{\n              background:\n                settlement.profit >= 0\n                  ? 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)'\n                  : 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',\n              color: 'white',\n              boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n              height: '100%',\n            }}\n          >\n            <CardContent>\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <Box>\n                  <Typography variant=\"h6\" sx={{ fontWeight: 600, mb: 1 }}>\n                    {settlement.profit >= 0 ? 'CELKOV√ù ZISK' : 'CELKOV√Å STRATA'}\n                  </Typography>\n                  <Typography variant=\"h4\" sx={{ fontWeight: 700 }}>\n                    {settlement.profit.toFixed(2)}‚Ç¨\n                  </Typography>\n                </Box>\n                {settlement.profit >= 0 ? (\n                  <ProfitIcon sx={{ fontSize: 40, opacity: 0.8 }} />\n                ) : (\n                  <LossIcon sx={{ fontSize: 40, opacity: 0.8 }} />\n                )}\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Payment Methods Overview */}\n      <Card sx={{ mb: 3, boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n        <CardContent>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n            <PaymentIcon sx={{ color: '#1976d2' }} />\n            <Typography variant=\"h6\" sx={{ fontWeight: 600, color: '#1976d2' }}>\n              Prehƒæad podƒæa sp√¥sobov platby\n            </Typography>\n          </Box>\n\n          <TableContainer\n            sx={{\n              backgroundColor: 'transparent',\n              '& .MuiTableHead-root': {\n                '& .MuiTableCell-root': {\n                  backgroundColor: '#f8f9fa',\n                  fontWeight: 600,\n                  color: '#1976d2',\n                },\n              },\n            }}\n          >\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Sp√¥sob platby</TableCell>\n                  <TableCell align=\"center\">Poƒçet pren√°jmov</TableCell>\n                  <TableCell align=\"right\">Celkov√° cena (‚Ç¨)</TableCell>\n                  <TableCell align=\"right\">Prov√≠zie (‚Ç¨)</TableCell>\n                  <TableCell align=\"right\">\n                    Po odpoƒç√≠tan√≠ prov√≠zi√≠ (‚Ç¨)\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {Object.entries(paymentMethodStats).map(([method, stats]) => (\n                  <TableRow\n                    key={method}\n                    sx={{\n                      '&:hover': {\n                        backgroundColor: 'rgba(25, 118, 210, 0.04)',\n                      },\n                    }}\n                  >\n                    <TableCell>\n                      <Box\n                        sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                      >\n                        <Box\n                          sx={{\n                            width: 12,\n                            height: 12,\n                            borderRadius: '50%',\n                            backgroundColor: getPaymentMethodColor(method),\n                          }}\n                        />\n                        <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                          {getPaymentMethodLabel(method)}\n                        </Typography>\n                      </Box>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <Chip\n                        label={stats.count}\n                        size=\"small\"\n                        color=\"primary\"\n                        variant=\"outlined\"\n                      />\n                    </TableCell>\n                    <TableCell align=\"right\" sx={{ fontWeight: 600 }}>\n                      {stats.totalPrice.toFixed(2)}\n                    </TableCell>\n                    <TableCell\n                      align=\"right\"\n                      sx={{ fontWeight: 600, color: '#ff9800' }}\n                    >\n                      {stats.totalCommission.toFixed(2)}\n                    </TableCell>\n                    <TableCell\n                      align=\"right\"\n                      sx={{ fontWeight: 600, color: '#4caf50' }}\n                    >\n                      {stats.netAmount.toFixed(2)}\n                    </TableCell>\n                  </TableRow>\n                ))}\n                <TableRow\n                  sx={{\n                    backgroundColor: '#e3f2fd',\n                    '& .MuiTableCell-root': {\n                      fontWeight: 700,\n                      borderTop: '2px solid #1976d2',\n                    },\n                  }}\n                >\n                  <TableCell>SPOLU</TableCell>\n                  <TableCell align=\"center\">\n                    {settlement.rentals?.length || 0}\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    {settlement.totalIncome.toFixed(2)}\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    {settlement.totalCommission.toFixed(2)}\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    {(\n                      settlement.totalIncome - settlement.totalCommission\n                    ).toFixed(2)}\n                  </TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n\n      {/* Detailed Lists */}\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} lg={8}>\n          <Card\n            sx={{\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n              height: 'fit-content',\n            }}\n          >\n            <CardContent>\n              <Box\n                sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}\n              >\n                <VehicleIcon sx={{ color: '#4caf50' }} />\n                <Typography\n                  variant=\"h6\"\n                  sx={{ fontWeight: 600, color: '#4caf50' }}\n                >\n                  Pren√°jmy ({settlement.rentals?.length || 0})\n                </Typography>\n              </Box>\n\n              <TableContainer\n                sx={{\n                  maxHeight: 600,\n                  '& .MuiTableHead-root': {\n                    '& .MuiTableCell-root': {\n                      backgroundColor: '#e8f5e8',\n                      fontWeight: 600,\n                      position: 'sticky',\n                      top: 0,\n                      zIndex: 1,\n                    },\n                  },\n                }}\n              >\n                <Table size=\"small\">\n                  <TableHead>\n                    <TableRow>\n                      <TableCell>Vozidlo</TableCell>\n                      <TableCell>Z√°kazn√≠k</TableCell>\n                      <TableCell>D√°tum pren√°jmu</TableCell>\n                      <TableCell>Platba</TableCell>\n                      <TableCell align=\"right\">Cena (‚Ç¨)</TableCell>\n                      <TableCell align=\"right\">Prov√≠zia (‚Ç¨)</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {settlement.rentals.map((rental, index) => (\n                      <TableRow\n                        key={rental.id}\n                        sx={{\n                          backgroundColor:\n                            index % 2 === 0 ? 'transparent' : '#fafafa',\n                          '&:hover': {\n                            backgroundColor: 'rgba(76, 175, 80, 0.04)',\n                          },\n                        }}\n                      >\n                        <TableCell>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                            {rental.vehicle?.brand} {rental.vehicle?.model}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {rental.vehicle?.licensePlate}\n                          </Typography>\n                        </TableCell>\n                        <TableCell>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 0.5,\n                            }}\n                          >\n                            <PersonIcon\n                              sx={{ fontSize: 16, color: 'text.secondary' }}\n                            />\n                            <Typography variant=\"body2\">\n                              {rental.customerName}\n                            </Typography>\n                          </Box>\n                        </TableCell>\n                        <TableCell>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                            {format(new Date(rental.startDate), 'dd.MM.yyyy', {\n                              locale: sk,\n                            })}{' '}\n                            -{' '}\n                            {format(new Date(rental.endDate), 'dd.MM.yyyy', {\n                              locale: sk,\n                            })}\n                          </Typography>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {Math.max(\n                              1,\n                              Math.ceil(\n                                (new Date(rental.endDate).getTime() -\n                                  new Date(rental.startDate).getTime()) /\n                                  (1000 * 60 * 60 * 24)\n                              )\n                            )}{' '}\n                            dn√≠\n                          </Typography>\n                        </TableCell>\n                        <TableCell>\n                          <Chip\n                            label={getPaymentMethodLabel(rental.paymentMethod)}\n                            size=\"small\"\n                            sx={{\n                              backgroundColor: getPaymentMethodColor(\n                                rental.paymentMethod\n                              ),\n                              color: 'white',\n                              fontWeight: 600,\n                            }}\n                          />\n                        </TableCell>\n                        <TableCell align=\"right\" sx={{ fontWeight: 600 }}>\n                          {rental.totalPrice.toFixed(2)}\n                        </TableCell>\n                        <TableCell\n                          align=\"right\"\n                          sx={{ fontWeight: 600, color: '#ff9800' }}\n                        >\n                          {rental.commission.toFixed(2)}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} lg={4}>\n          <Card\n            sx={{\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n              height: 'fit-content',\n            }}\n          >\n            <CardContent>\n              <Box\n                sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}\n              >\n                <EuroIcon sx={{ color: '#f44336' }} />\n                <Typography\n                  variant=\"h6\"\n                  sx={{ fontWeight: 600, color: '#f44336' }}\n                >\n                  N√°klady {settlement.company || 'N/A'} (\n                  {settlement.expenses?.length || 0})\n                </Typography>\n              </Box>\n\n              <TableContainer\n                sx={{\n                  maxHeight: 400,\n                  '& .MuiTableHead-root': {\n                    '& .MuiTableCell-root': {\n                      backgroundColor: '#ffebee',\n                      fontWeight: 600,\n                      position: 'sticky',\n                      top: 0,\n                      zIndex: 1,\n                    },\n                  },\n                }}\n              >\n                <Table size=\"small\">\n                  <TableHead>\n                    <TableRow>\n                      <TableCell>Popis</TableCell>\n                      <TableCell>Kateg√≥ria</TableCell>\n                      <TableCell align=\"right\">Suma (‚Ç¨)</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {settlement.expenses.map((expense, index) => (\n                      <TableRow\n                        key={expense.id}\n                        sx={{\n                          backgroundColor:\n                            index % 2 === 0 ? 'transparent' : '#fafafa',\n                          '&:hover': {\n                            backgroundColor: 'rgba(244, 67, 54, 0.04)',\n                          },\n                        }}\n                      >\n                        <TableCell>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                            {expense.description}\n                          </Typography>\n                        </TableCell>\n                        <TableCell>\n                          <Chip\n                            label={expense.category}\n                            size=\"small\"\n                            color=\"secondary\"\n                            variant=\"outlined\"\n                          />\n                        </TableCell>\n                        <TableCell\n                          align=\"right\"\n                          sx={{ fontWeight: 600, color: '#f44336' }}\n                        >\n                          {expense.amount.toFixed(2)}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      {/* Action Buttons */}\n      <Card sx={{ boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n        <CardContent>\n          <Box\n            sx={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              flexDirection: { xs: 'column', sm: 'row' },\n              gap: 2,\n            }}\n          >\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              startIcon={\n                pdfLoading ? (\n                  <CircularProgress size={20} color=\"inherit\" />\n                ) : (\n                  <PdfIcon />\n                )\n              }\n              onClick={handleDownloadPDF}\n              disabled={pdfLoading}\n              sx={{\n                background: 'linear-gradient(135deg, #d32f2f 0%, #f44336 100%)',\n                px: 4,\n                py: 1.5,\n                fontSize: '1.1rem',\n                fontWeight: 600,\n                borderRadius: 2,\n                boxShadow: '0 4px 12px rgba(211, 47, 47, 0.3)',\n                '&:hover': {\n                  background:\n                    'linear-gradient(135deg, #c62828 0%, #e53935 100%)',\n                  transform: 'translateY(-2px)',\n                  boxShadow: '0 6px 16px rgba(211, 47, 47, 0.4)',\n                },\n                '&:disabled': {\n                  background:\n                    'linear-gradient(135deg, #bdbdbd 0%, #9e9e9e 100%)',\n                },\n                transition: 'all 0.2s ease',\n              }}\n            >\n              {pdfLoading ? 'Generujem PDF...' : 'Stiahnu≈• PDF'}\n            </Button>\n\n            <Typography\n              variant=\"body2\"\n              color=\"text.secondary\"\n              sx={{\n                fontStyle: 'italic',\n                textAlign: { xs: 'center', sm: 'right' },\n              }}\n            >\n              ID vy√∫ƒçtovania: {settlement.id.slice(-8).toUpperCase()}\n            </Typography>\n          </Box>\n        </CardContent>\n      </Card>\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/settlements/SettlementListNew.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/ChartsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[353,356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[353,356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2399,2402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2399,2402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Typography, Card, CardContent, Grid } from '@mui/material';\nimport React from 'react';\nimport {\n  BarChart,\n  Bar,\n  LineChart,\n  Line,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from 'recharts';\n\nimport CustomTooltip from './CustomTooltip';\n\ninterface ChartsTabProps {\n  stats: any;\n  COLORS: string[];\n}\n\nconst ChartsTab: React.FC<ChartsTabProps> = ({ stats, COLORS }) => {\n  return (\n    <Grid container spacing={3}>\n      {/* Stƒ∫pcov√Ω graf - mesiaƒçn√© pren√°jmy */}\n      <Grid item xs={12} lg={6}>\n        <Card\n          sx={{\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n            },\n          }}\n        >\n          <CardContent>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{ fontWeight: 700, color: '#667eea' }}\n            >\n              Poƒçet pren√°jmov podƒæa mesiacov\n            </Typography>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={stats.monthlyData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"month\" />\n                <YAxis />\n                <Tooltip />\n                <Bar\n                  dataKey=\"rentals\"\n                  fill=\"#667eea\"\n                  name=\"Pren√°jmy\"\n                  radius={[4, 4, 0, 0]}\n                />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </Grid>\n\n      {/* Kol√°ƒçov√Ω graf - sp√¥soby platby */}\n      <Grid item xs={12} lg={6}>\n        <Card\n          sx={{\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n            },\n          }}\n        >\n          <CardContent>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{ fontWeight: 700, color: '#667eea' }}\n            >\n              Rozdelenie podƒæa sp√¥sobu platby\n            </Typography>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <PieChart>\n                <Pie\n                  data={Object.entries(stats.paymentMethodStats).map(\n                    ([method, data]) => ({\n                      name: method,\n                      value: (data as any).count,\n                    })\n                  )}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  labelLine={false}\n                  label={({ name, percent }) =>\n                    `${name} ${((percent || 0) * 100).toFixed(0)}%`\n                  }\n                  outerRadius={80}\n                  fill=\"#667eea\"\n                  dataKey=\"value\"\n                >\n                  {Object.entries(stats.paymentMethodStats).map(\n                    (entry, index) => (\n                      <Cell\n                        key={`cell-${index}`}\n                        fill={COLORS[index % COLORS.length]}\n                      />\n                    )\n                  )}\n                </Pie>\n                <Tooltip />\n              </PieChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </Grid>\n\n      {/* L√≠nov√Ω graf - trend pr√≠jmov vs prov√≠zi√≠ */}\n      <Grid item xs={12}>\n        <Card\n          sx={{\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n            },\n          }}\n        >\n          <CardContent>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{ fontWeight: 700, color: '#667eea' }}\n            >\n              Trend pr√≠jmov vs prov√≠zi√≠\n            </Typography>\n            <ResponsiveContainer width=\"100%\" height={400}>\n              <LineChart data={stats.monthlyData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"month\" />\n                <YAxis />\n                <Tooltip content={<CustomTooltip />} />\n                <Legend />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"revenue\"\n                  stroke=\"#667eea\"\n                  strokeWidth={3}\n                  name=\"Pr√≠jmy\"\n                  dot={{ fill: '#667eea', strokeWidth: 2, r: 6 }}\n                />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"commission\"\n                  stroke=\"#11998e\"\n                  strokeWidth={3}\n                  name=\"Prov√≠zie\"\n                  dot={{ fill: '#11998e', strokeWidth: 2, r: 6 }}\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ChartsTab;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/CollapsibleSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/CompaniesTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[222,225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[222,225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[421,424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[421,424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[442,445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[442,445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1400,1403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1400,1403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2151,2154],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2151,2154],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2856,2859],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2856,2859],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Person as PersonIcon } from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Avatar,\n} from '@mui/material';\nimport React from 'react';\n\ninterface CompaniesTabProps {\n  stats: any;\n}\n\nconst CompaniesTab: React.FC<CompaniesTabProps> = ({ stats }) => {\n  return (\n    <Grid container spacing={3}>\n      {Object.entries(stats.companyStats)\n        .sort(([, a], [, b]) => (b as any).revenue - (a as any).revenue)\n        .map(([company, data]) => (\n          <Grid item xs={12} md={6} lg={4} key={company}>\n            <Card\n              sx={{\n                boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  boxShadow: '0 8px 24px rgba(0,0,0,0.15)',\n                  transform: 'translateY(-4px)',\n                },\n              }}\n            >\n              <CardContent>\n                <Box\n                  sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}\n                >\n                  <Avatar sx={{ bgcolor: '#667eea' }}>\n                    <PersonIcon />\n                  </Avatar>\n                  <Box>\n                    <Typography variant=\"h6\" fontWeight=\"bold\">\n                      {company}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {(data as any).count} pren√°jmov\n                    </Typography>\n                  </Box>\n                </Box>\n\n                <Box\n                  sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    mb: 1,\n                    p: 1.5,\n                    borderRadius: 1,\n                    backgroundColor: '#f8f9fa',\n                  }}\n                >\n                  <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                    Pr√≠jmy:\n                  </Typography>\n                  <Typography\n                    variant=\"body2\"\n                    fontWeight=\"bold\"\n                    sx={{ color: '#11998e' }}\n                  >\n                    {(data as any).revenue.toLocaleString()} ‚Ç¨\n                  </Typography>\n                </Box>\n\n                <Box\n                  sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    p: 1.5,\n                    borderRadius: 1,\n                    backgroundColor: '#fff3e0',\n                  }}\n                >\n                  <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                    Prov√≠zia:\n                  </Typography>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"warning.main\"\n                    fontWeight=\"bold\"\n                  >\n                    {(data as any).commission.toLocaleString()} ‚Ç¨\n                  </Typography>\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n    </Grid>\n  );\n};\n\nexport default CompaniesTab;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/CustomTooltip.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[174,177],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[174,177],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[525,528],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[525,528],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Typography } from '@mui/material';\nimport React from 'react';\n\nimport { ElevatedCard } from '../ui';\n\ninterface CustomTooltipProps {\n  active?: boolean;\n  payload?: any[];\n  label?: string;\n}\n\nconst CustomTooltip: React.FC<CustomTooltipProps> = ({\n  active,\n  payload,\n  label,\n}) => {\n  if (active && payload && payload.length) {\n    return (\n      <ElevatedCard sx={{ p: 2 }}>\n        <Typography variant=\"body2\" fontWeight=\"bold\" gutterBottom>\n          {label}\n        </Typography>\n        {payload.map((entry: any, index: number) => (\n          <Typography key={index} variant=\"body2\" color={entry.color}>\n            {entry.name}: {entry.value.toLocaleString()} ‚Ç¨\n          </Typography>\n        ))}\n      </ElevatedCard>\n    );\n  }\n  return null;\n};\n\nexport default CustomTooltip;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/EmployeesTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[382,385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[382,385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4978,4981],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4978,4981],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":246,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":246,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8806,8809],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8806,8809],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":363,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13569,13572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13569,13572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":363,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13577,13580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13577,13580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":366,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":366,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13715,13718],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13715,13718],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Person as PersonIcon,\n  EmojiEvents as TrophyIcon,\n  Euro as EuroIcon,\n  Assessment as AssessmentIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n} from '@mui/material';\nimport React from 'react';\n\ninterface EmployeesTabProps {\n  stats: any;\n  formatPeriod: () => string;\n}\n\nconst EmployeesTab: React.FC<EmployeesTabProps> = ({ stats, formatPeriod }) => {\n  return (\n    <Grid container spacing={3}>\n      {/* Header */}\n      <Grid item xs={12}>\n        <Typography\n          variant=\"h5\"\n          sx={{\n            fontWeight: 700,\n            mb: 3,\n            color: '#667eea',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1,\n          }}\n        >\n          <PersonIcon />\n          V√Ωkon zamestnancov za obdobie: {formatPeriod()}\n        </Typography>\n      </Grid>\n\n      {/* Employee Statistics Cards */}\n      {stats.employeeStats && stats.employeeStats.activeEmployees > 0 ? (\n        <>\n          {/* Summary Stats */}\n          <Grid item xs={12}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6} md={3}>\n                <Card\n                  sx={{\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                    background:\n                      'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    color: 'white',\n                  }}\n                >\n                  <CardContent sx={{ textAlign: 'center' }}>\n                    <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: 1 }}>\n                      {stats.employeeStats.totalProtocols}\n                    </Typography>\n                    <Typography variant=\"body2\">Celkovo protokolov</Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Card\n                  sx={{\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                    background:\n                      'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n                    color: 'white',\n                  }}\n                >\n                  <CardContent sx={{ textAlign: 'center' }}>\n                    <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: 1 }}>\n                      {stats.employeeStats.totalHandovers}\n                    </Typography>\n                    <Typography variant=\"body2\">Odovzdan√≠</Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Card\n                  sx={{\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                    background:\n                      'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n                    color: 'white',\n                  }}\n                >\n                  <CardContent sx={{ textAlign: 'center' }}>\n                    <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: 1 }}>\n                      {stats.employeeStats.totalReturns}\n                    </Typography>\n                    <Typography variant=\"body2\">Prebran√≠</Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Card\n                  sx={{\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                    background:\n                      'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\n                    color: 'white',\n                  }}\n                >\n                  <CardContent sx={{ textAlign: 'center' }}>\n                    <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: 1 }}>\n                      {stats.employeeStats.activeEmployees}\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      Akt√≠vnych zamestnancov\n                    </Typography>\n                  </CardContent>\n                </Card>\n              </Grid>\n            </Grid>\n          </Grid>\n\n          {/* Top Employees by Protocols */}\n          <Grid item xs={12} lg={6}>\n            <Card\n              sx={{ boxShadow: '0 2px 8px rgba(0,0,0,0.1)', height: '100%' }}\n            >\n              <CardContent>\n                <Typography\n                  variant=\"h6\"\n                  sx={{\n                    fontWeight: 600,\n                    mb: 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                  }}\n                >\n                  <TrophyIcon />\n                  Top zamestnanci (protokoly)\n                </Typography>\n                <Box sx={{ maxHeight: 400, overflowY: 'auto' }}>\n                  {stats.employeeStats.topEmployeesByProtocols\n                    .slice(0, 10)\n                    .map((employee: any, index: number) => (\n                      <Box\n                        key={index}\n                        sx={{\n                          display: 'flex',\n                          justifyContent: 'space-between',\n                          alignItems: 'center',\n                          p: 2,\n                          mb: 1,\n                          bgcolor:\n                            index < 3\n                              ? 'rgba(102, 126, 234, 0.1)'\n                              : 'background.paper',\n                          borderRadius: 2,\n                          border:\n                            index < 3\n                              ? '1px solid rgba(102, 126, 234, 0.2)'\n                              : '1px solid rgba(0,0,0,0.1)',\n                        }}\n                      >\n                        <Box\n                          sx={{ display: 'flex', alignItems: 'center', gap: 2 }}\n                        >\n                          <Box\n                            sx={{\n                              width: 32,\n                              height: 32,\n                              borderRadius: '50%',\n                              bgcolor:\n                                index === 0\n                                  ? '#FFD700'\n                                  : index === 1\n                                    ? '#C0C0C0'\n                                    : index === 2\n                                      ? '#CD7F32'\n                                      : '#667eea',\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              color: 'white',\n                              fontWeight: 700,\n                            }}\n                          >\n                            {index + 1}\n                          </Box>\n                          <Box>\n                            <Typography\n                              variant=\"body1\"\n                              sx={{ fontWeight: 600 }}\n                            >\n                              {employee.employeeName}\n                            </Typography>\n                            <Typography\n                              variant=\"caption\"\n                              color=\"text.secondary\"\n                            >\n                              {employee.handoverCount} odovzdan√≠ ‚Ä¢{' '}\n                              {employee.returnCount} prebran√≠\n                            </Typography>\n                          </Box>\n                        </Box>\n                        <Typography\n                          variant=\"h6\"\n                          sx={{ fontWeight: 700, color: '#667eea' }}\n                        >\n                          {employee.totalProtocols}\n                        </Typography>\n                      </Box>\n                    ))}\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          {/* Top Employees by Revenue */}\n          <Grid item xs={12} lg={6}>\n            <Card\n              sx={{ boxShadow: '0 2px 8px rgba(0,0,0,0.1)', height: '100%' }}\n            >\n              <CardContent>\n                <Typography\n                  variant=\"h6\"\n                  sx={{\n                    fontWeight: 600,\n                    mb: 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                  }}\n                >\n                  <EuroIcon />\n                  Top zamestnanci (tr≈æby)\n                </Typography>\n                <Box sx={{ maxHeight: 400, overflowY: 'auto' }}>\n                  {stats.employeeStats.topEmployeesByRevenue\n                    .slice(0, 10)\n                    .map((employee: any, index: number) => (\n                      <Box\n                        key={index}\n                        sx={{\n                          display: 'flex',\n                          justifyContent: 'space-between',\n                          alignItems: 'center',\n                          p: 2,\n                          mb: 1,\n                          bgcolor:\n                            index < 3\n                              ? 'rgba(76, 175, 80, 0.1)'\n                              : 'background.paper',\n                          borderRadius: 2,\n                          border:\n                            index < 3\n                              ? '1px solid rgba(76, 175, 80, 0.2)'\n                              : '1px solid rgba(0,0,0,0.1)',\n                        }}\n                      >\n                        <Box\n                          sx={{ display: 'flex', alignItems: 'center', gap: 2 }}\n                        >\n                          <Box\n                            sx={{\n                              width: 32,\n                              height: 32,\n                              borderRadius: '50%',\n                              bgcolor:\n                                index === 0\n                                  ? '#FFD700'\n                                  : index === 1\n                                    ? '#C0C0C0'\n                                    : index === 2\n                                      ? '#CD7F32'\n                                      : '#4CAF50',\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              color: 'white',\n                              fontWeight: 700,\n                            }}\n                          >\n                            {index + 1}\n                          </Box>\n                          <Box>\n                            <Typography\n                              variant=\"body1\"\n                              sx={{ fontWeight: 600 }}\n                            >\n                              {employee.employeeName}\n                            </Typography>\n                            <Typography\n                              variant=\"caption\"\n                              color=\"text.secondary\"\n                            >\n                              {employee.totalProtocols} protokolov\n                            </Typography>\n                          </Box>\n                        </Box>\n                        <Typography\n                          variant=\"h6\"\n                          sx={{ fontWeight: 700, color: '#4CAF50' }}\n                        >\n                          ‚Ç¨{employee.totalRevenue?.toLocaleString() || 0}\n                        </Typography>\n                      </Box>\n                    ))}\n                </Box>\n              </CardContent>\n            </Card>\n          </Grid>\n\n          {/* Detailed Employee Table */}\n          <Grid item xs={12}>\n            <Card sx={{ boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n              <CardContent>\n                <Typography\n                  variant=\"h6\"\n                  sx={{\n                    fontWeight: 600,\n                    mb: 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                  }}\n                >\n                  <AssessmentIcon />\n                  Detailn√© ≈°tatistiky zamestnancov\n                </Typography>\n                <TableContainer>\n                  <Table>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell sx={{ fontWeight: 600 }}>\n                          Zamestnanec\n                        </TableCell>\n                        <TableCell align=\"center\" sx={{ fontWeight: 600 }}>\n                          Protokoly\n                        </TableCell>\n                        <TableCell align=\"center\" sx={{ fontWeight: 600 }}>\n                          Odovzdania\n                        </TableCell>\n                        <TableCell align=\"center\" sx={{ fontWeight: 600 }}>\n                          Prebrania\n                        </TableCell>\n                        <TableCell align=\"right\" sx={{ fontWeight: 600 }}>\n                          Tr≈æby\n                        </TableCell>\n                        <TableCell align=\"center\" sx={{ fontWeight: 600 }}>\n                          Pren√°jmy\n                        </TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {stats.employeeStats.allEmployees\n                        .sort(\n                          (a: any, b: any) =>\n                            b.totalProtocols - a.totalProtocols\n                        )\n                        .map((employee: any, index: number) => (\n                          <TableRow\n                            key={index}\n                            sx={{\n                              '&:nth-of-type(odd)': {\n                                backgroundColor: 'rgba(0, 0, 0, 0.04)',\n                              },\n                            }}\n                          >\n                            <TableCell>\n                              <Box\n                                sx={{\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  gap: 1,\n                                }}\n                              >\n                                <PersonIcon color=\"primary\" />\n                                <Typography\n                                  variant=\"body2\"\n                                  sx={{ fontWeight: 600 }}\n                                >\n                                  {employee.employeeName}\n                                </Typography>\n                              </Box>\n                            </TableCell>\n                            <TableCell align=\"center\">\n                              <Chip\n                                label={employee.totalProtocols}\n                                color=\"primary\"\n                                size=\"small\"\n                              />\n                            </TableCell>\n                            <TableCell align=\"center\">\n                              <Chip\n                                label={employee.handoverCount}\n                                color=\"secondary\"\n                                size=\"small\"\n                              />\n                            </TableCell>\n                            <TableCell align=\"center\">\n                              <Chip\n                                label={employee.returnCount}\n                                color=\"info\"\n                                size=\"small\"\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <Typography\n                                variant=\"body2\"\n                                sx={{ fontWeight: 600, color: '#4CAF50' }}\n                              >\n                                ‚Ç¨{employee.totalRevenue?.toLocaleString() || 0}\n                              </Typography>\n                            </TableCell>\n                            <TableCell align=\"center\">\n                              <Typography variant=\"body2\">\n                                {employee.uniqueRentals || 0}\n                              </Typography>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              </CardContent>\n            </Card>\n          </Grid>\n        </>\n      ) : (\n        <Grid item xs={12}>\n          <Card sx={{ boxShadow: '0 2px 8px rgba(0,0,0,0.1)' }}>\n            <CardContent sx={{ textAlign: 'center', py: 4 }}>\n              <PersonIcon\n                sx={{ fontSize: 64, color: 'text.secondary', mb: 2 }}\n              />\n              <Typography variant=\"h6\" color=\"text.secondary\" sx={{ mb: 1 }}>\n                ≈Ωiadne protokoly za vybran√© obdobie\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                V tomto obdob√≠ neboli vytvoren√© ≈æiadne protokoly odovzd√°vania\n                alebo preberania vozidiel.\n              </Typography>\n            </CardContent>\n          </Card>\n        </Grid>\n      )}\n    </Grid>\n  );\n};\n\nexport default EmployeesTab;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/OverviewTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[482,485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[482,485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6810,6813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6810,6813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6831,6834],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6831,6834],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":255,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":255,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8189,8192],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8189,8192],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":270,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8822,8825],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8822,8825],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":279,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":279,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9225,9228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9225,9228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Person as PersonIcon } from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  Avatar,\n  Divider,\n} from '@mui/material';\nimport React from 'react';\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n} from 'recharts';\n\nimport CustomTooltip from './CustomTooltip';\n\ninterface OverviewTabProps {\n  stats: any;\n}\n\nconst OverviewTab: React.FC<OverviewTabProps> = ({ stats }) => {\n  return (\n    <Grid container spacing={3}>\n      {/* Mesiaƒçn√Ω trend */}\n      <Grid item xs={12} lg={8}>\n        <Card\n          sx={{\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n            },\n          }}\n        >\n          <CardContent>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{ fontWeight: 700, color: '#667eea' }}\n            >\n              Mesiaƒçn√Ω trend pr√≠jmov\n            </Typography>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <AreaChart data={stats.monthlyData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"month\" />\n                <YAxis />\n                <Tooltip content={<CustomTooltip />} />\n                <Area\n                  type=\"monotone\"\n                  dataKey=\"revenue\"\n                  stroke=\"#667eea\"\n                  fill=\"url(#colorRevenue)\"\n                  strokeWidth={3}\n                  name=\"Pr√≠jmy\"\n                />\n                <defs>\n                  <linearGradient id=\"colorRevenue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#667eea\" stopOpacity={0.8} />\n                    <stop offset=\"95%\" stopColor=\"#667eea\" stopOpacity={0.1} />\n                  </linearGradient>\n                </defs>\n              </AreaChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </Grid>\n\n      {/* R√Ωchle ≈°tatistiky */}\n      <Grid item xs={12} lg={4}>\n        <Card\n          sx={{\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n            },\n          }}\n        >\n          <CardContent>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{ fontWeight: 700, color: '#667eea' }}\n            >\n              R√Ωchle ≈°tatistiky\n            </Typography>\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  p: 2,\n                  borderRadius: 1,\n                  backgroundColor: '#f8f9fa',\n                }}\n              >\n                <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                  Priemern√° cena\n                </Typography>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"bold\"\n                  sx={{ color: '#11998e' }}\n                >\n                  {stats.avgRentalPrice.toFixed(2)} ‚Ç¨\n                </Typography>\n              </Box>\n              <Divider />\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  p: 2,\n                  borderRadius: 1,\n                  backgroundColor: '#f8f9fa',\n                }}\n              >\n                <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                  Priemern√° dƒ∫≈æka\n                </Typography>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"bold\"\n                  sx={{ color: '#667eea' }}\n                >\n                  {stats.avgRentalDuration.toFixed(1)} dn√≠\n                </Typography>\n              </Box>\n              <Divider />\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  p: 2,\n                  borderRadius: 1,\n                  backgroundColor: '#f8f9fa',\n                }}\n              >\n                <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                  Celkov√° prov√≠zia\n                </Typography>\n                <Typography variant=\"h6\" fontWeight=\"bold\" color=\"warning.main\">\n                  {stats.totalCommission.toLocaleString()} ‚Ç¨\n                </Typography>\n              </Box>\n              <Divider />\n              <Box\n                sx={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  p: 2,\n                  borderRadius: 1,\n                  backgroundColor: '#f8f9fa',\n                }}\n              >\n                <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                  Zajtraj≈°ie vr√°tenia\n                </Typography>\n                <Typography variant=\"h6\" fontWeight=\"bold\" color=\"info.main\">\n                  {stats.tomorrowReturns.length}\n                </Typography>\n              </Box>\n            </Box>\n          </CardContent>\n        </Card>\n      </Grid>\n\n      {/* Top firmy */}\n      <Grid item xs={12}>\n        <Card\n          sx={{\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n            },\n          }}\n        >\n          <CardContent>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{ fontWeight: 700, color: '#667eea' }}\n            >\n              Top firmy podƒæa pr√≠jmov\n            </Typography>\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow sx={{ backgroundColor: '#f8f9fa' }}>\n                    <TableCell sx={{ fontWeight: 700 }}>Firma</TableCell>\n                    <TableCell align=\"right\" sx={{ fontWeight: 700 }}>\n                      Poƒçet pren√°jmov\n                    </TableCell>\n                    <TableCell align=\"right\" sx={{ fontWeight: 700 }}>\n                      Pr√≠jmy\n                    </TableCell>\n                    <TableCell align=\"right\" sx={{ fontWeight: 700 }}>\n                      Prov√≠zia\n                    </TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {Object.entries(stats.companyStats)\n                    .sort(\n                      ([, a], [, b]) => (b as any).revenue - (a as any).revenue\n                    )\n                    .slice(0, 5)\n                    .map(([company, data]) => (\n                      <TableRow\n                        key={company}\n                        sx={{\n                          '&:hover': {\n                            backgroundColor: '#f8f9fa',\n                          },\n                          transition: 'background-color 0.2s ease',\n                        }}\n                      >\n                        <TableCell>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 1,\n                            }}\n                          >\n                            <Avatar\n                              sx={{ width: 32, height: 32, bgcolor: '#667eea' }}\n                            >\n                              <PersonIcon fontSize=\"small\" />\n                            </Avatar>\n                            <Typography variant=\"body2\" fontWeight=\"medium\">\n                              {company}\n                            </Typography>\n                          </Box>\n                        </TableCell>\n                        <TableCell align=\"right\">\n                          <Chip\n                            label={(data as any).count}\n                            size=\"small\"\n                            sx={{\n                              backgroundColor: '#667eea',\n                              color: 'white',\n                              fontWeight: 600,\n                            }}\n                          />\n                        </TableCell>\n                        <TableCell align=\"right\">\n                          <Typography\n                            variant=\"body2\"\n                            fontWeight=\"bold\"\n                            sx={{ color: '#11998e' }}\n                          >\n                            {(data as any).revenue.toLocaleString()} ‚Ç¨\n                          </Typography>\n                        </TableCell>\n                        <TableCell align=\"right\">\n                          <Typography\n                            variant=\"body2\"\n                            color=\"warning.main\"\n                            fontWeight=\"bold\"\n                          >\n                            {(data as any).commission.toLocaleString()} ‚Ç¨\n                          </Typography>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </CardContent>\n        </Card>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default OverviewTab;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/PaymentsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[307,310],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[307,310],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1778,1781],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1778,1781],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1799,1802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1799,1802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1956,1959],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1956,1959],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3340,3343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3340,3343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":108,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3745,3748],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3745,3748],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5626,5629],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5626,5629],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CheckCircle as CheckCircleIcon } from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n} from '@mui/material';\nimport React from 'react';\n\ninterface PaymentsTabProps {\n  stats: any;\n}\n\nconst PaymentsTab: React.FC<PaymentsTabProps> = ({ stats }) => {\n  return (\n    <Grid container spacing={3}>\n      <Grid item xs={12} lg={8}>\n        <Card\n          sx={{\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n            },\n          }}\n        >\n          <CardContent>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{ fontWeight: 700, color: '#667eea' }}\n            >\n              ≈†tatistiky platieb\n            </Typography>\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow sx={{ backgroundColor: '#f8f9fa' }}>\n                    <TableCell sx={{ fontWeight: 700 }}>\n                      Sp√¥sob platby\n                    </TableCell>\n                    <TableCell align=\"right\" sx={{ fontWeight: 700 }}>\n                      Poƒçet\n                    </TableCell>\n                    <TableCell align=\"right\" sx={{ fontWeight: 700 }}>\n                      Pr√≠jmy\n                    </TableCell>\n                    <TableCell align=\"right\" sx={{ fontWeight: 700 }}>\n                      Podiel\n                    </TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {Object.entries(stats.paymentMethodStats)\n                    .sort(\n                      ([, a], [, b]) => (b as any).revenue - (a as any).revenue\n                    )\n                    .map(([method, data]) => {\n                      const percentage =\n                        ((data as any).revenue / stats.totalRevenue) * 100;\n                      return (\n                        <TableRow\n                          key={method}\n                          sx={{\n                            '&:hover': {\n                              backgroundColor: '#f8f9fa',\n                            },\n                            transition: 'background-color 0.2s ease',\n                          }}\n                        >\n                          <TableCell>\n                            <Box\n                              sx={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: 1,\n                              }}\n                            >\n                              <Chip\n                                label={method}\n                                size=\"small\"\n                                sx={{\n                                  backgroundColor: '#667eea',\n                                  color: 'white',\n                                  fontWeight: 600,\n                                }}\n                              />\n                            </Box>\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            <Typography variant=\"body2\" fontWeight=\"bold\">\n                              {(data as any).count}\n                            </Typography>\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            <Typography\n                              variant=\"body2\"\n                              fontWeight=\"bold\"\n                              sx={{ color: '#11998e' }}\n                            >\n                              {(data as any).revenue.toLocaleString()} ‚Ç¨\n                            </Typography>\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            <Typography\n                              variant=\"body2\"\n                              color=\"text.secondary\"\n                              fontWeight=\"bold\"\n                            >\n                              {percentage.toFixed(1)}%\n                            </Typography>\n                          </TableCell>\n                        </TableRow>\n                      );\n                    })}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </CardContent>\n        </Card>\n      </Grid>\n\n      <Grid item xs={12} lg={4}>\n        <Card\n          sx={{\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n            '&:hover': {\n              boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n            },\n          }}\n        >\n          <CardContent>\n            <Typography\n              variant=\"h6\"\n              gutterBottom\n              sx={{ fontWeight: 700, color: '#667eea' }}\n            >\n              Nezaplaten√© pren√°jmy\n            </Typography>\n            {stats.unpaidRentals.length === 0 ? (\n              <Box sx={{ textAlign: 'center', py: 4 }}>\n                <CheckCircleIcon\n                  sx={{ fontSize: 48, color: 'success.main', mb: 2 }}\n                />\n                <Typography\n                  variant=\"body1\"\n                  color=\"success.main\"\n                  gutterBottom\n                  fontWeight=\"bold\"\n                >\n                  V≈°etky pren√°jmy s√∫ zaplaten√©!\n                </Typography>\n              </Box>\n            ) : (\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n                {stats.unpaidRentals.slice(0, 5).map((rental: any) => (\n                  <Box\n                    key={rental.id}\n                    sx={{\n                      p: 2,\n                      border: '1px solid',\n                      borderColor: 'divider',\n                      borderRadius: 2,\n                      backgroundColor: '#fff3e0',\n                      transition: 'all 0.2s ease',\n                      '&:hover': {\n                        boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                        transform: 'translateY(-2px)',\n                      },\n                    }}\n                  >\n                    <Typography variant=\"body2\" fontWeight=\"bold\">\n                      {rental.customerName}\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {rental.vehicle?.brand} {rental.vehicle?.model}\n                    </Typography>\n                    <Typography\n                      variant=\"body2\"\n                      color=\"error.main\"\n                      fontWeight=\"bold\"\n                    >\n                      {rental.totalPrice?.toLocaleString()} ‚Ç¨\n                    </Typography>\n                  </Box>\n                ))}\n                {stats.unpaidRentals.length > 5 && (\n                  <Typography\n                    variant=\"body2\"\n                    color=\"text.secondary\"\n                    textAlign=\"center\"\n                    fontWeight=\"bold\"\n                  >\n                    + {stats.unpaidRentals.length - 5} ƒèal≈°√≠ch\n                  </Typography>\n                )}\n              </Box>\n            )}\n          </CardContent>\n        </Card>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default PaymentsTab;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/ResponsiveChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/StatisticsCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isMobile' is assigned a value but never used.","line":50,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üìä STATISTICS CARD\n *\n * Reusable card component pre ≈°tatistiky s responsive design\n */\n\nimport {\n  TrendingUp as TrendingUpIcon,\n  TrendingDown as TrendingDownIcon,\n  Remove as StableIcon,\n} from '@mui/icons-material';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Box,\n  Avatar,\n  Chip,\n  useTheme,\n  useMediaQuery,\n} from '@mui/material';\nimport React, { memo } from 'react';\n\ninterface StatisticsCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: React.ReactNode;\n  trend?: {\n    value: number;\n    period: string;\n    isPositive?: boolean;\n  };\n  color?: string;\n  compact?: boolean;\n  onClick?: () => void;\n}\n\nconst StatisticsCard: React.FC<StatisticsCardProps> = ({\n  title,\n  value,\n  subtitle,\n  icon,\n  trend,\n  color = 'primary',\n  compact = false,\n  onClick,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  // Get color based on theme\n  const getColor = (colorName: string) => {\n    const colors: Record<string, string> = {\n      primary: theme.palette.primary.main,\n      success: theme.palette.success.main,\n      warning: theme.palette.warning.main,\n      error: theme.palette.error.main,\n      info: theme.palette.info.main,\n    };\n    return colors[colorName] || colorName;\n  };\n\n  const cardColor = getColor(color);\n\n  // Get trend icon and color\n  const getTrendDisplay = () => {\n    if (!trend) return null;\n\n    const isPositive =\n      trend.isPositive !== undefined ? trend.isPositive : trend.value > 0;\n    const absValue = Math.abs(trend.value);\n\n    let trendIcon;\n    let trendColor;\n\n    if (absValue === 0) {\n      trendIcon = <StableIcon fontSize=\"small\" />;\n      trendColor = theme.palette.text.secondary;\n    } else if (isPositive) {\n      trendIcon = <TrendingUpIcon fontSize=\"small\" />;\n      trendColor = theme.palette.success.main;\n    } else {\n      trendIcon = <TrendingDownIcon fontSize=\"small\" />;\n      trendColor = theme.palette.error.main;\n    }\n\n    return (\n      <Chip\n        size=\"small\"\n        icon={trendIcon}\n        label={`${absValue > 0 ? (isPositive ? '+' : '-') : ''}${absValue.toFixed(1)}%`}\n        sx={{\n          backgroundColor: `${trendColor}20`,\n          color: trendColor,\n          fontSize: '0.7rem',\n          height: 20,\n          '& .MuiChip-icon': {\n            color: trendColor,\n            fontSize: 12,\n          },\n        }}\n      />\n    );\n  };\n\n  return (\n    <Card\n      sx={{\n        cursor: onClick ? 'pointer' : 'default',\n        transition: 'all 0.2s ease-in-out',\n        borderRadius: compact ? 2 : 3,\n        height: '100%',\n        background: compact\n          ? `linear-gradient(135deg, ${cardColor}08 0%, ${cardColor}15 100%)`\n          : theme.palette.background.paper,\n        border: `1px solid ${cardColor}20`,\n        '&:hover': onClick\n          ? {\n              transform: 'translateY(-2px)',\n              boxShadow: theme.shadows[6],\n              borderColor: `${cardColor}40`,\n            }\n          : {},\n      }}\n      onClick={onClick}\n    >\n      <CardContent\n        sx={{\n          p: compact ? 2 : 3,\n          '&:last-child': { pb: compact ? 2 : 3 },\n        }}\n      >\n        <Box\n          sx={{\n            display: 'flex',\n            alignItems: 'flex-start',\n            gap: compact ? 1.5 : 2,\n          }}\n        >\n          {/* Icon */}\n          <Avatar\n            sx={{\n              backgroundColor: `${cardColor}15`,\n              color: cardColor,\n              width: compact ? 40 : 48,\n              height: compact ? 40 : 48,\n            }}\n          >\n            {icon}\n          </Avatar>\n\n          {/* Content */}\n          <Box sx={{ flex: 1, minWidth: 0 }}>\n            {/* Title */}\n            <Typography\n              variant={compact ? 'body2' : 'subtitle2'}\n              sx={{\n                color: 'text.secondary',\n                fontWeight: 500,\n                mb: 0.5,\n                lineHeight: 1.2,\n              }}\n            >\n              {title}\n            </Typography>\n\n            {/* Value */}\n            <Typography\n              variant={compact ? 'h6' : 'h5'}\n              sx={{\n                fontWeight: 700,\n                color: 'text.primary',\n                lineHeight: 1.1,\n                mb: subtitle || trend ? 0.5 : 0,\n              }}\n            >\n              {typeof value === 'number' && value % 1 === 0\n                ? value.toLocaleString('sk-SK')\n                : value}\n            </Typography>\n\n            {/* Subtitle */}\n            {subtitle && (\n              <Typography\n                variant=\"caption\"\n                sx={{\n                  color: 'text.secondary',\n                  display: 'block',\n                  mb: trend ? 0.5 : 0,\n                }}\n              >\n                {subtitle}\n              </Typography>\n            )}\n\n            {/* Trend */}\n            {trend && (\n              <Box\n                sx={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                  mt: 0.5,\n                }}\n              >\n                {getTrendDisplay()}\n                <Typography variant=\"caption\" sx={{ color: 'text.disabled' }}>\n                  vs {trend.period}\n                </Typography>\n              </Box>\n            )}\n          </Box>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default memo(StatisticsCard);\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/StatisticsMobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/TopListCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[338,341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[338,341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[413,416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[413,416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  EmojiEvents as TrophyIcon,\n  KeyboardArrowDown as KeyboardArrowDownIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Avatar,\n  Button,\n} from '@mui/material';\nimport React from 'react';\n\ninterface TopListCardProps {\n  title: string;\n  icon: React.ReactNode;\n  gradient: string;\n  data: any[];\n  showCount: number;\n  onLoadMore: () => void;\n  renderItem: (item: any, index: number) => React.ReactNode;\n  emptyMessage?: string;\n}\n\nconst TopListCard: React.FC<TopListCardProps> = ({\n  title,\n  icon,\n  gradient,\n  data,\n  showCount,\n  onLoadMore,\n  renderItem,\n  emptyMessage = '≈Ωiadne d√°ta',\n}) => (\n  <Card\n    sx={{\n      height: 'fit-content',\n      boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n      transition: 'all 0.2s ease',\n      '&:hover': {\n        boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n      },\n    }}\n  >\n    <CardContent>\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 3 }}>\n        <Avatar\n          sx={{\n            bgcolor: 'transparent',\n            background: gradient,\n            width: 48,\n            height: 48,\n          }}\n        >\n          {icon}\n        </Avatar>\n        <Box sx={{ flex: 1 }}>\n          <Typography variant=\"h6\" sx={{ fontWeight: 700, color: '#667eea' }}>\n            {title}\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            Top {Math.min(showCount, data.length)} z {data.length}\n          </Typography>\n        </Box>\n        <TrophyIcon sx={{ color: '#ffd700', fontSize: 28 }} />\n      </Box>\n\n      {data.length === 0 ? (\n        <Box sx={{ textAlign: 'center', py: 4 }}>\n          <Typography variant=\"body1\" color=\"text.secondary\">\n            {emptyMessage}\n          </Typography>\n        </Box>\n      ) : (\n        <>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1.5 }}>\n            {data\n              .slice(0, showCount)\n              .map((item, index) => renderItem(item, index))}\n          </Box>\n\n          {showCount < data.length && (\n            <Box sx={{ mt: 3, textAlign: 'center' }}>\n              <Button\n                variant=\"outlined\"\n                onClick={onLoadMore}\n                startIcon={<KeyboardArrowDownIcon />}\n                sx={{\n                  borderColor: '#667eea',\n                  color: '#667eea',\n                  '&:hover': {\n                    borderColor: '#5a6fd8',\n                    backgroundColor: 'rgba(102, 126, 234, 0.04)',\n                  },\n                }}\n              >\n                Zobrazi≈• ƒèal≈°√≠ch {Math.min(10, data.length - showCount)}\n              </Button>\n            </Box>\n          )}\n        </>\n      )}\n    </CardContent>\n  </Card>\n);\n\nexport default TopListCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/TopStatCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[277,280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[277,280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { EmojiEvents as TrophyIcon } from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Avatar,\n  LinearProgress,\n} from '@mui/material';\nimport React from 'react';\n\ninterface TopStatCardProps {\n  title: string;\n  icon: React.ReactNode;\n  data: any;\n  primaryValue: string;\n  secondaryValue: string;\n  gradient: string;\n  percentage?: number;\n}\n\nconst TopStatCard: React.FC<TopStatCardProps> = ({\n  title,\n  icon,\n  data,\n  primaryValue,\n  secondaryValue,\n  gradient,\n  percentage,\n}) => (\n  <Card\n    sx={{\n      height: '100%',\n      boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n      transition: 'all 0.2s ease',\n      '&:hover': {\n        boxShadow: '0 8px 24px rgba(0,0,0,0.15)',\n        transform: 'translateY(-4px)',\n      },\n    }}\n  >\n    <CardContent>\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n        <Avatar\n          sx={{\n            bgcolor: 'transparent',\n            background: gradient,\n            width: 56,\n            height: 56,\n          }}\n        >\n          {icon}\n        </Avatar>\n        <Box sx={{ flex: 1 }}>\n          <Typography variant=\"h6\" sx={{ fontWeight: 700, color: '#667eea' }}>\n            {title}\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            {data\n              ? data.vehicle\n                ? `${data.vehicle.brand} ${data.vehicle.model}`\n                : data.customerName\n              : 'N/A'}\n          </Typography>\n        </Box>\n        <TrophyIcon sx={{ color: '#ffd700', fontSize: 32 }} />\n      </Box>\n\n      <Box sx={{ mb: 2 }}>\n        <Typography\n          variant=\"h4\"\n          sx={{ fontWeight: 700, color: '#667eea', mb: 0.5 }}\n        >\n          {primaryValue}\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          {secondaryValue}\n        </Typography>\n      </Box>\n\n      {percentage !== undefined && (\n        <Box sx={{ mt: 2 }}>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Vy≈•a≈æenos≈•\n            </Typography>\n            <Typography\n              variant=\"body2\"\n              sx={{ fontWeight: 600, color: '#667eea' }}\n            >\n              {percentage.toFixed(1)}%\n            </Typography>\n          </Box>\n          <LinearProgress\n            variant=\"determinate\"\n            value={Math.min(percentage, 100)}\n            sx={{\n              height: 8,\n              borderRadius: 4,\n              backgroundColor: '#e0e0e0',\n              '& .MuiLinearProgress-bar': {\n                background: gradient,\n                borderRadius: 4,\n              },\n            }}\n          />\n        </Box>\n      )}\n    </CardContent>\n  </Card>\n);\n\nexport default TopStatCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/statistics/TopStatsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[509,512],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[509,512],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  EmojiEvents as TrophyIcon,\n  Star as StarIcon,\n  DirectionsCar as CarIcon,\n  Person as PersonIcon,\n  Euro as EuroIcon,\n  Speed as SpeedIcon,\n  AttachMoney as MoneyIcon,\n  AccessTime as TimeIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Divider,\n  Avatar,\n  LinearProgress,\n} from '@mui/material';\nimport React from 'react';\n\nimport TopListCard from './TopListCard';\nimport TopStatCard from './TopStatCard';\n\ninterface TopStatsTabProps {\n  stats: any;\n  formatPeriod: () => string;\n  showVehiclesByUtilization: number;\n  showVehiclesByRevenue: number;\n  showVehiclesByRentals: number;\n  showCustomersByRentals: number;\n  showCustomersByRevenue: number;\n  showCustomersByDays: number;\n  setShowVehiclesByUtilization: React.Dispatch<React.SetStateAction<number>>;\n  setShowVehiclesByRevenue: React.Dispatch<React.SetStateAction<number>>;\n  setShowVehiclesByRentals: React.Dispatch<React.SetStateAction<number>>;\n  setShowCustomersByRentals: React.Dispatch<React.SetStateAction<number>>;\n  setShowCustomersByRevenue: React.Dispatch<React.SetStateAction<number>>;\n  setShowCustomersByDays: React.Dispatch<React.SetStateAction<number>>;\n}\n\nconst TopStatsTab: React.FC<TopStatsTabProps> = ({\n  stats,\n  formatPeriod,\n  showVehiclesByUtilization,\n  showVehiclesByRevenue,\n  showVehiclesByRentals,\n  showCustomersByRentals,\n  showCustomersByRevenue,\n  showCustomersByDays,\n  setShowVehiclesByUtilization,\n  setShowVehiclesByRevenue,\n  setShowVehiclesByRentals,\n  setShowCustomersByRentals,\n  setShowCustomersByRevenue,\n  setShowCustomersByDays,\n}) => {\n  return (\n    <Grid container spacing={3}>\n      {/* √övodn√Ω prehƒæad */}\n      <Grid item xs={12}>\n        <Card\n          sx={{\n            mb: 3,\n            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n            color: 'white',\n            boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n          }}\n        >\n          <CardContent>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n              <TrophyIcon sx={{ fontSize: 40 }} />\n              <Box>\n                <Typography variant=\"h4\" sx={{ fontWeight: 700, mb: 0.5 }}>\n                  TOP ≈†tatistiky\n                </Typography>\n                <Typography variant=\"body1\" sx={{ opacity: 0.9 }}>\n                  Najlep≈°ie v√Ωkony za obdobie: {formatPeriod()}\n                </Typography>\n              </Box>\n            </Box>\n          </CardContent>\n        </Card>\n      </Grid>\n\n      {/* üèÜ NAJLEP≈†IE V√ùKONY - Prehƒæadov√© karty */}\n      <Grid item xs={12}>\n        <Typography\n          variant=\"h5\"\n          sx={{\n            fontWeight: 700,\n            mb: 3,\n            color: '#667eea',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1,\n          }}\n        >\n          <StarIcon />\n          üèÜ Najlep≈°ie v√Ωkony\n        </Typography>\n      </Grid>\n\n      {/* Top v√Ωkony v 3 kart√°ch */}\n      <Grid item xs={12} md={4}>\n        <TopStatCard\n          title=\"Najvy≈•a≈æenej≈°ie auto\"\n          icon={<SpeedIcon />}\n          data={stats.topVehicleByUtilization}\n          primaryValue={\n            stats.topVehicleByUtilization\n              ? `${stats.topVehicleByUtilization.utilizationPercentage.toFixed(1)}%`\n              : 'N/A'\n          }\n          secondaryValue={\n            stats.topVehicleByUtilization\n              ? `${stats.topVehicleByUtilization.totalDaysRented} dn√≠ pren√°jmu`\n              : ''\n          }\n          gradient=\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\"\n          percentage={stats.topVehicleByUtilization?.utilizationPercentage}\n        />\n      </Grid>\n\n      <Grid item xs={12} md={4}>\n        <TopStatCard\n          title=\"Najv√Ωnosnej≈°ie auto\"\n          icon={<EuroIcon />}\n          data={stats.topVehicleByRevenue}\n          primaryValue={\n            stats.topVehicleByRevenue\n              ? `${stats.topVehicleByRevenue.totalRevenue.toLocaleString()} ‚Ç¨`\n              : 'N/A'\n          }\n          secondaryValue={\n            stats.topVehicleByRevenue\n              ? `${stats.topVehicleByRevenue.rentalCount} pren√°jmov`\n              : ''\n          }\n          gradient=\"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)\"\n        />\n      </Grid>\n\n      <Grid item xs={12} md={4}>\n        <TopStatCard\n          title=\"Najakt√≠vnej≈°√≠ z√°kazn√≠k\"\n          icon={<PersonIcon />}\n          data={stats.topCustomerByRentals}\n          primaryValue={\n            stats.topCustomerByRentals\n              ? `${stats.topCustomerByRentals.rentalCount}x`\n              : 'N/A'\n          }\n          secondaryValue={\n            stats.topCustomerByRentals\n              ? `${stats.topCustomerByRentals.totalRevenue.toLocaleString()} ‚Ç¨ celkom`\n              : ''\n          }\n          gradient=\"linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)\"\n        />\n      </Grid>\n\n      {/* Divider */}\n      <Grid item xs={12}>\n        <Divider sx={{ my: 2 }} />\n      </Grid>\n\n      {/* üöó TOP AUT√Å - Detailn√© rebr√≠ƒçky */}\n      <Grid item xs={12}>\n        <Typography\n          variant=\"h5\"\n          sx={{\n            fontWeight: 700,\n            mb: 3,\n            color: '#667eea',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1,\n          }}\n        >\n          <CarIcon />\n          üöó TOP Aut√° - Detailn√© rebr√≠ƒçky\n        </Typography>\n      </Grid>\n\n      {/* Najvy≈•a≈æenej≈°ie aut√° */}\n      <Grid item xs={12} lg={4}>\n        <TopListCard\n          title=\"Najvy≈•a≈æenej≈°ie aut√°\"\n          icon={<SpeedIcon />}\n          gradient=\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\"\n          data={stats.vehiclesByUtilization}\n          showCount={showVehiclesByUtilization}\n          onLoadMore={() => setShowVehiclesByUtilization(prev => prev + 10)}\n          renderItem={(vehicle, index) => (\n            <Box\n              key={vehicle.vehicle.id}\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                p: 2,\n                borderRadius: 2,\n                backgroundColor:\n                  index < 3 ? 'rgba(102, 126, 234, 0.04)' : '#f8f9fa',\n                border: index === 0 ? '2px solid #ffd700' : '1px solid #e0e0e0',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  transform: 'translateX(4px)',\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                },\n              }}\n            >\n              <Box\n                sx={{\n                  minWidth: 32,\n                  height: 32,\n                  borderRadius: '50%',\n                  background:\n                    index < 3\n                      ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n                      : '#bdbdbd',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  color: 'white',\n                  fontWeight: 700,\n                  fontSize: '0.9rem',\n                }}\n              >\n                {index + 1}\n              </Box>\n\n              <Avatar sx={{ width: 40, height: 40, bgcolor: '#667eea' }}>\n                <CarIcon fontSize=\"small\" />\n              </Avatar>\n\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"body2\" fontWeight=\"bold\">\n                  {vehicle.vehicle.brand} {vehicle.vehicle.model}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {vehicle.vehicle.licensePlate} ‚Ä¢ {vehicle.totalDaysRented} dn√≠\n                </Typography>\n              </Box>\n\n              <Box sx={{ textAlign: 'right', minWidth: 80 }}>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"bold\"\n                  sx={{\n                    color:\n                      vehicle.utilizationPercentage > 70\n                        ? '#4caf50'\n                        : vehicle.utilizationPercentage > 40\n                          ? '#ff9800'\n                          : '#f44336',\n                  }}\n                >\n                  {vehicle.utilizationPercentage.toFixed(1)}%\n                </Typography>\n                <LinearProgress\n                  variant=\"determinate\"\n                  value={Math.min(vehicle.utilizationPercentage, 100)}\n                  sx={{\n                    height: 6,\n                    borderRadius: 3,\n                    backgroundColor: '#e0e0e0',\n                    '& .MuiLinearProgress-bar': {\n                      background:\n                        vehicle.utilizationPercentage > 70\n                          ? '#4caf50'\n                          : vehicle.utilizationPercentage > 40\n                            ? '#ff9800'\n                            : '#f44336',\n                      borderRadius: 3,\n                    },\n                  }}\n                />\n              </Box>\n            </Box>\n          )}\n          emptyMessage=\"≈Ωiadne aut√° v tomto obdob√≠\"\n        />\n      </Grid>\n\n      {/* Najv√Ωnosnej≈°ie aut√° */}\n      <Grid item xs={12} lg={4}>\n        <TopListCard\n          title=\"Najv√Ωnosnej≈°ie aut√°\"\n          icon={<EuroIcon />}\n          gradient=\"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)\"\n          data={stats.vehiclesByRevenue}\n          showCount={showVehiclesByRevenue}\n          onLoadMore={() => setShowVehiclesByRevenue(prev => prev + 10)}\n          renderItem={(vehicle, index) => (\n            <Box\n              key={vehicle.vehicle.id}\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                p: 2,\n                borderRadius: 2,\n                backgroundColor:\n                  index < 3 ? 'rgba(17, 153, 142, 0.04)' : '#f8f9fa',\n                border: index === 0 ? '2px solid #ffd700' : '1px solid #e0e0e0',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  transform: 'translateX(4px)',\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                },\n              }}\n            >\n              <Box\n                sx={{\n                  minWidth: 32,\n                  height: 32,\n                  borderRadius: '50%',\n                  background:\n                    index < 3\n                      ? 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)'\n                      : '#bdbdbd',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  color: 'white',\n                  fontWeight: 700,\n                  fontSize: '0.9rem',\n                }}\n              >\n                {index + 1}\n              </Box>\n\n              <Avatar sx={{ width: 40, height: 40, bgcolor: '#11998e' }}>\n                <CarIcon fontSize=\"small\" />\n              </Avatar>\n\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"body2\" fontWeight=\"bold\">\n                  {vehicle.vehicle.brand} {vehicle.vehicle.model}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {vehicle.vehicle.licensePlate} ‚Ä¢ {vehicle.rentalCount}{' '}\n                  pren√°jmov\n                </Typography>\n              </Box>\n\n              <Box sx={{ textAlign: 'right' }}>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"bold\"\n                  sx={{ color: '#11998e' }}\n                >\n                  {vehicle.totalRevenue.toLocaleString()} ‚Ç¨\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {vehicle.avgRevenuePerRental.toFixed(0)} ‚Ç¨/pren√°jom\n                </Typography>\n              </Box>\n            </Box>\n          )}\n          emptyMessage=\"≈Ωiadne aut√° v tomto obdob√≠\"\n        />\n      </Grid>\n\n      {/* Najƒçastej≈°ie prenaj√≠man√© */}\n      <Grid item xs={12} lg={4}>\n        <TopListCard\n          title=\"Najƒçastej≈°ie prenaj√≠man√©\"\n          icon={<CarIcon />}\n          gradient=\"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\"\n          data={stats.vehiclesByRentals}\n          showCount={showVehiclesByRentals}\n          onLoadMore={() => setShowVehiclesByRentals(prev => prev + 10)}\n          renderItem={(vehicle, index) => (\n            <Box\n              key={vehicle.vehicle.id}\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                p: 2,\n                borderRadius: 2,\n                backgroundColor:\n                  index < 3 ? 'rgba(240, 147, 251, 0.04)' : '#f8f9fa',\n                border: index === 0 ? '2px solid #ffd700' : '1px solid #e0e0e0',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  transform: 'translateX(4px)',\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                },\n              }}\n            >\n              <Box\n                sx={{\n                  minWidth: 32,\n                  height: 32,\n                  borderRadius: '50%',\n                  background:\n                    index < 3\n                      ? 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'\n                      : '#bdbdbd',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  color: 'white',\n                  fontWeight: 700,\n                  fontSize: '0.9rem',\n                }}\n              >\n                {index + 1}\n              </Box>\n\n              <Avatar sx={{ width: 40, height: 40, bgcolor: '#f093fb' }}>\n                <CarIcon fontSize=\"small\" />\n              </Avatar>\n\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"body2\" fontWeight=\"bold\">\n                  {vehicle.vehicle.brand} {vehicle.vehicle.model}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {vehicle.vehicle.licensePlate} ‚Ä¢ {vehicle.totalDaysRented} dn√≠\n                  celkom\n                </Typography>\n              </Box>\n\n              <Box sx={{ textAlign: 'right' }}>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"bold\"\n                  sx={{ color: '#f093fb' }}\n                >\n                  {vehicle.rentalCount}x\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {vehicle.totalRevenue.toLocaleString()} ‚Ç¨ celkom\n                </Typography>\n              </Box>\n            </Box>\n          )}\n          emptyMessage=\"≈Ωiadne aut√° v tomto obdob√≠\"\n        />\n      </Grid>\n\n      {/* Divider */}\n      <Grid item xs={12}>\n        <Divider sx={{ my: 2 }} />\n      </Grid>\n\n      {/* üë• TOP Z√ÅKAZN√çCI - Detailn√© rebr√≠ƒçky */}\n      <Grid item xs={12}>\n        <Typography\n          variant=\"h5\"\n          sx={{\n            fontWeight: 700,\n            mb: 3,\n            color: '#667eea',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1,\n          }}\n        >\n          <PersonIcon />\n          üë• TOP Z√°kazn√≠ci - Detailn√© rebr√≠ƒçky\n        </Typography>\n      </Grid>\n\n      {/* Najakt√≠vnej≈°√≠ z√°kazn√≠ci */}\n      <Grid item xs={12} lg={4}>\n        <TopListCard\n          title=\"Najakt√≠vnej≈°√≠ z√°kazn√≠ci\"\n          icon={<StarIcon />}\n          gradient=\"linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)\"\n          data={stats.customersByRentals}\n          showCount={showCustomersByRentals}\n          onLoadMore={() => setShowCustomersByRentals(prev => prev + 10)}\n          renderItem={(customer, index) => (\n            <Box\n              key={customer.customerName}\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                p: 2,\n                borderRadius: 2,\n                backgroundColor:\n                  index < 3 ? 'rgba(255, 154, 158, 0.04)' : '#f8f9fa',\n                border: index === 0 ? '2px solid #ffd700' : '1px solid #e0e0e0',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  transform: 'translateX(4px)',\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                },\n              }}\n            >\n              <Box\n                sx={{\n                  minWidth: 32,\n                  height: 32,\n                  borderRadius: '50%',\n                  background:\n                    index < 3\n                      ? 'linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)'\n                      : '#bdbdbd',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  color: 'white',\n                  fontWeight: 700,\n                  fontSize: '0.9rem',\n                }}\n              >\n                {index + 1}\n              </Box>\n\n              <Avatar sx={{ width: 40, height: 40, bgcolor: '#ff9a9e' }}>\n                <PersonIcon fontSize=\"small\" />\n              </Avatar>\n\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"body2\" fontWeight=\"bold\">\n                  {customer.customerName}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {customer.totalDaysRented} dn√≠ celkom ‚Ä¢ Priemer:{' '}\n                  {customer.avgRentalDuration.toFixed(1)} dn√≠\n                </Typography>\n              </Box>\n\n              <Box sx={{ textAlign: 'right' }}>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"bold\"\n                  sx={{ color: '#ff9a9e' }}\n                >\n                  {customer.rentalCount}x\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {customer.totalRevenue.toLocaleString()} ‚Ç¨ celkom\n                </Typography>\n              </Box>\n            </Box>\n          )}\n          emptyMessage=\"≈Ωiadni z√°kazn√≠ci v tomto obdob√≠\"\n        />\n      </Grid>\n\n      {/* Najziskovej≈°√≠ z√°kazn√≠ci */}\n      <Grid item xs={12} lg={4}>\n        <TopListCard\n          title=\"Najziskovej≈°√≠ z√°kazn√≠ci\"\n          icon={<MoneyIcon />}\n          gradient=\"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\"\n          data={stats.customersByRevenue}\n          showCount={showCustomersByRevenue}\n          onLoadMore={() => setShowCustomersByRevenue(prev => prev + 10)}\n          renderItem={(customer, index) => (\n            <Box\n              key={customer.customerName}\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                p: 2,\n                borderRadius: 2,\n                backgroundColor:\n                  index < 3 ? 'rgba(255, 107, 107, 0.04)' : '#f8f9fa',\n                border: index === 0 ? '2px solid #ffd700' : '1px solid #e0e0e0',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  transform: 'translateX(4px)',\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                },\n              }}\n            >\n              <Box\n                sx={{\n                  minWidth: 32,\n                  height: 32,\n                  borderRadius: '50%',\n                  background:\n                    index < 3\n                      ? 'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)'\n                      : '#bdbdbd',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  color: 'white',\n                  fontWeight: 700,\n                  fontSize: '0.9rem',\n                }}\n              >\n                {index + 1}\n              </Box>\n\n              <Avatar sx={{ width: 40, height: 40, bgcolor: '#ff6b6b' }}>\n                <PersonIcon fontSize=\"small\" />\n              </Avatar>\n\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"body2\" fontWeight=\"bold\">\n                  {customer.customerName}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {customer.rentalCount} pren√°jmov ‚Ä¢ {customer.totalDaysRented}{' '}\n                  dn√≠\n                </Typography>\n              </Box>\n\n              <Box sx={{ textAlign: 'right' }}>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"bold\"\n                  sx={{ color: '#ff6b6b' }}\n                >\n                  {customer.totalRevenue.toLocaleString()} ‚Ç¨\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {(customer.totalRevenue / customer.rentalCount).toFixed(0)}{' '}\n                  ‚Ç¨/pren√°jom\n                </Typography>\n              </Box>\n            </Box>\n          )}\n          emptyMessage=\"≈Ωiadni z√°kazn√≠ci v tomto obdob√≠\"\n        />\n      </Grid>\n\n      {/* Najdlhodobej≈°√≠ z√°kazn√≠ci */}\n      <Grid item xs={12} lg={4}>\n        <TopListCard\n          title=\"Najdlhodobej≈°√≠ z√°kazn√≠ci\"\n          icon={<TimeIcon />}\n          gradient=\"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)\"\n          data={stats.customersByDays}\n          showCount={showCustomersByDays}\n          onLoadMore={() => setShowCustomersByDays(prev => prev + 10)}\n          renderItem={(customer, index) => (\n            <Box\n              key={customer.customerName}\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                p: 2,\n                borderRadius: 2,\n                backgroundColor:\n                  index < 3 ? 'rgba(79, 172, 254, 0.04)' : '#f8f9fa',\n                border: index === 0 ? '2px solid #ffd700' : '1px solid #e0e0e0',\n                transition: 'all 0.2s ease',\n                '&:hover': {\n                  transform: 'translateX(4px)',\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n                },\n              }}\n            >\n              <Box\n                sx={{\n                  minWidth: 32,\n                  height: 32,\n                  borderRadius: '50%',\n                  background:\n                    index < 3\n                      ? 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'\n                      : '#bdbdbd',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  color: 'white',\n                  fontWeight: 700,\n                  fontSize: '0.9rem',\n                }}\n              >\n                {index + 1}\n              </Box>\n\n              <Avatar sx={{ width: 40, height: 40, bgcolor: '#4facfe' }}>\n                <PersonIcon fontSize=\"small\" />\n              </Avatar>\n\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"body2\" fontWeight=\"bold\">\n                  {customer.customerName}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {customer.rentalCount} pren√°jmov ‚Ä¢{' '}\n                  {customer.totalRevenue.toLocaleString()} ‚Ç¨\n                </Typography>\n              </Box>\n\n              <Box sx={{ textAlign: 'right' }}>\n                <Typography\n                  variant=\"h6\"\n                  fontWeight=\"bold\"\n                  sx={{ color: '#4facfe' }}\n                >\n                  {customer.totalDaysRented} dn√≠\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Priemer: {customer.avgRentalDuration.toFixed(1)} dn√≠/pren√°jom\n                </Typography>\n              </Box>\n            </Box>\n          )}\n          emptyMessage=\"≈Ωiadni z√°kazn√≠ci v tomto obdob√≠\"\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default TopStatsTab;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/ui/UnifiedButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/ui/UnifiedCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/ui/UnifiedChip.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is assigned a value but never used.","line":181,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":181,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'__' is assigned a value but never used.","line":181,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":181,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4178,4181],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4178,4181],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üé® UNIFIED CHIP COMPONENT\n *\n * Konzistentn√Ω chip komponent pre cel√∫ BlackRent aplik√°ciu\n * Nahrad√≠ v≈°etky r√¥zne chip ≈°t√Ωly jednotn√Ωm dizajnom\n */\n\nimport type { ChipProps } from '@mui/material';\nimport { Chip } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport React from 'react';\n\n// üé® Definovan√© chip varianty pre BlackRent\nexport type ChipVariant =\n  | 'default'\n  | 'status'\n  | 'priority'\n  | 'trend'\n  | 'role'\n  | 'compact';\n\n// üé® Definovan√© farby pre BlackRent chips\nconst CHIP_COLORS = {\n  primary: '#1976d2',\n  secondary: '#dc004e',\n  success: '#2e7d32',\n  warning: '#ed6c02',\n  error: '#d32f2f',\n  info: '#0288d1',\n  neutral: '#6b7280',\n} as const;\n\n// üé® Styled Chip s BlackRent dizajnom\nconst StyledChip = styled(Chip)<{\n  variant?: ChipVariant;\n  chipColor?: keyof typeof CHIP_COLORS | 'inherit';\n}>(({ theme, variant = 'default', chipColor = 'primary' }) => {\n  const baseColor =\n    chipColor === 'inherit'\n      ? theme.palette.primary.main\n      : CHIP_COLORS[chipColor as keyof typeof CHIP_COLORS] ||\n        CHIP_COLORS.primary;\n\n  // üé® Base ≈°t√Ωly\n  const baseStyles = {\n    fontWeight: 600,\n    transition: 'all 0.2s cubic-bezier(0.4, 0, 0.2, 1)',\n    '& .MuiChip-label': {\n      fontSize: '0.75rem',\n      fontWeight: 600,\n    },\n    '& .MuiChip-icon': {\n      fontSize: '16px',\n    },\n  };\n\n  // üé® Variant ≈°t√Ωly\n  const variantStyles = {\n    default: {\n      backgroundColor: `${baseColor}15`,\n      color: baseColor,\n      border: `1px solid ${baseColor}30`,\n      '&:hover': {\n        backgroundColor: `${baseColor}25`,\n        transform: 'translateY(-1px)',\n        boxShadow: `0 2px 8px ${baseColor}30`,\n      },\n      '& .MuiChip-icon': {\n        color: baseColor,\n      },\n    },\n    status: {\n      backgroundColor: baseColor,\n      color: '#ffffff',\n      fontWeight: 700,\n      fontSize: '0.75rem',\n      height: 24,\n      '&:hover': {\n        backgroundColor: `${baseColor}dd`,\n        transform: 'scale(1.05)',\n      },\n      '& .MuiChip-icon': {\n        color: '#ffffff',\n      },\n      '& .MuiChip-label': {\n        px: 1,\n      },\n    },\n    priority: {\n      backgroundColor: baseColor,\n      color: '#ffffff',\n      fontWeight: 700,\n      fontSize: '0.7rem',\n      height: 20,\n      minWidth: 32,\n      borderRadius: '10px',\n      '&:hover': {\n        backgroundColor: `${baseColor}dd`,\n        transform: 'scale(1.1)',\n        boxShadow: `0 2px 8px ${baseColor}50`,\n      },\n      '& .MuiChip-label': {\n        px: 0.5,\n      },\n    },\n    trend: {\n      backgroundColor: `${baseColor}20`,\n      color: baseColor,\n      fontSize: '0.7rem',\n      height: 20,\n      '& .MuiChip-icon': {\n        color: baseColor,\n        fontSize: 12,\n      },\n      '& .MuiChip-label': {\n        px: 0.5,\n      },\n      '&:hover': {\n        backgroundColor: `${baseColor}30`,\n      },\n    },\n    role: {\n      backgroundColor: baseColor,\n      color: '#ffffff',\n      fontSize: '0.75rem',\n      fontWeight: 600,\n      '&:hover': {\n        backgroundColor: `${baseColor}dd`,\n      },\n      '& .MuiChip-label': {\n        px: 1,\n      },\n    },\n    compact: {\n      backgroundColor: `${baseColor}10`,\n      color: baseColor,\n      fontSize: '0.7rem',\n      height: 18,\n      '& .MuiChip-label': {\n        px: 0.5,\n      },\n      '& .MuiChip-icon': {\n        fontSize: 12,\n      },\n    },\n  };\n\n  return {\n    ...baseStyles,\n    ...variantStyles[variant as keyof typeof variantStyles],\n  };\n});\n\n// üé® Props interface\nexport interface UnifiedChipProps extends Omit<ChipProps, 'color' | 'variant'> {\n  variant?: ChipVariant;\n  chipColor?: keyof typeof CHIP_COLORS | 'inherit';\n  animated?: boolean;\n}\n\n// üé® Unified Chip Component\nexport const UnifiedChip: React.FC<UnifiedChipProps> = ({\n  variant = 'default',\n  chipColor = 'primary',\n  animated = false,\n  sx,\n  ...props\n}) => {\n  const animatedStyles = animated\n    ? {\n        '&:hover': {\n          animation: 'chipPulse 0.6s ease',\n        },\n        '@keyframes chipPulse': {\n          '0%, 100%': { transform: 'scale(1)' },\n          '50%': { transform: 'scale(1.05)' },\n        },\n      }\n    : {};\n\n  const { variant: _, chipColor: __, ...chipProps } = props as any;\n\n  return (\n    <StyledChip\n      variant={variant}\n      chipColor={chipColor}\n      sx={{\n        ...animatedStyles,\n        ...sx,\n      }}\n      {...chipProps}\n    />\n  );\n};\n\n// üé® Predefined chip variants pre r√Ωchle pou≈æitie\nexport const StatusChip: React.FC<\n  Omit<UnifiedChipProps, 'variant'>\n> = props => <UnifiedChip variant=\"status\" {...props} />;\n\nexport const PriorityChip: React.FC<\n  Omit<UnifiedChipProps, 'variant'>\n> = props => <UnifiedChip variant=\"priority\" {...props} />;\n\nexport const TrendChip: React.FC<Omit<UnifiedChipProps, 'variant'>> = props => (\n  <UnifiedChip variant=\"trend\" {...props} />\n);\n\nexport const RoleChip: React.FC<Omit<UnifiedChipProps, 'variant'>> = props => (\n  <UnifiedChip variant=\"role\" {...props} />\n);\n\nexport const CompactChip: React.FC<\n  Omit<UnifiedChipProps, 'variant'>\n> = props => <UnifiedChip variant=\"compact\" {...props} />;\n\n// üé® Predefined status chips pre BlackRent stavy\nexport const PendingChip: React.FC<\n  Omit<UnifiedChipProps, 'chipColor' | 'variant'>\n> = props => <StatusChip chipColor=\"warning\" label=\"ƒåak√°\" {...props} />;\n\nexport const ActiveChip: React.FC<\n  Omit<UnifiedChipProps, 'chipColor' | 'variant'>\n> = props => <StatusChip chipColor=\"success\" label=\"Akt√≠vny\" {...props} />;\n\nexport const CompletedChip: React.FC<\n  Omit<UnifiedChipProps, 'chipColor' | 'variant'>\n> = props => <StatusChip chipColor=\"info\" label=\"Dokonƒçen√Ω\" {...props} />;\n\nexport const CancelledChip: React.FC<\n  Omit<UnifiedChipProps, 'chipColor' | 'variant'>\n> = props => <StatusChip chipColor=\"error\" label=\"Zru≈°en√Ω\" {...props} />;\n\nexport default UnifiedChip;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/ui/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1700,1703],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1700,1703],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'theme' is defined but never used.","line":99,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1896,1899],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1896,1899],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üé® UNIFIED DESIGN SYSTEM\n *\n * Centralizovan√© exporty pre BlackRent unified komponenty\n * Zabezpeƒçuje konzistentn√Ω dizajn v celej aplik√°cii\n */\n\n// üé® Button komponenty\nexport {\n  UnifiedButton,\n  PrimaryButton,\n  SecondaryButton,\n  SuccessButton,\n  WarningButton,\n  ErrorButton,\n  TextButton,\n  type UnifiedButtonProps,\n} from './UnifiedButton';\n\n// üé® Card komponenty\nexport {\n  UnifiedCard,\n  DefaultCard,\n  ElevatedCard,\n  OutlinedCard,\n  InteractiveCard,\n  StatisticsCard,\n  CompactCard,\n  type UnifiedCardProps,\n  type CardVariant,\n} from './UnifiedCard';\n\n// üé® Chip komponenty\nexport {\n  UnifiedChip,\n  StatusChip,\n  PriorityChip,\n  TrendChip,\n  RoleChip,\n  CompactChip,\n  PendingChip,\n  ActiveChip,\n  CompletedChip,\n  CancelledChip,\n  type UnifiedChipProps,\n  type ChipVariant,\n} from './UnifiedChip';\n\n// üé® Design system constants\nexport const BLACKRENT_DESIGN_TOKENS = {\n  colors: {\n    primary: '#1976d2',\n    secondary: '#dc004e',\n    success: '#2e7d32',\n    warning: '#ed6c02',\n    error: '#d32f2f',\n    info: '#0288d1',\n    neutral: '#6b7280',\n  },\n  spacing: {\n    xs: 4,\n    sm: 8,\n    md: 16,\n    lg: 24,\n    xl: 32,\n  },\n  borderRadius: {\n    sm: 4,\n    md: 8,\n    lg: 12,\n    xl: 16,\n  },\n  shadows: {\n    sm: '0 1px 4px rgba(0,0,0,0.06)',\n    md: '0 2px 8px rgba(0,0,0,0.08)',\n    lg: '0 4px 16px rgba(0,0,0,0.12)',\n    xl: '0 6px 20px rgba(0,0,0,0.15)',\n  },\n  transitions: {\n    fast: '0.15s cubic-bezier(0.4, 0, 0.2, 1)',\n    normal: '0.2s cubic-bezier(0.4, 0, 0.2, 1)',\n    slow: '0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n  },\n} as const;\n\n// üé® Design system helper functions\nexport const getDesignToken = (path: string) => {\n  const keys = path.split('.');\n  let value: any = BLACKRENT_DESIGN_TOKENS;\n\n  for (const key of keys) {\n    value = value?.[key];\n  }\n\n  return value;\n};\n\n// üé® Utility pre konzistentn√© ≈°t√Ωlovanie\nexport const createUnifiedStyles = (theme: any) => ({\n  // Konzistentn√© button ≈°t√Ωly\n  button: {\n    borderRadius: BLACKRENT_DESIGN_TOKENS.borderRadius.md,\n    textTransform: 'none' as const,\n    fontWeight: 600,\n    transition: BLACKRENT_DESIGN_TOKENS.transitions.normal,\n  },\n\n  // Konzistentn√© card ≈°t√Ωly\n  card: {\n    borderRadius: BLACKRENT_DESIGN_TOKENS.borderRadius.lg,\n    boxShadow: BLACKRENT_DESIGN_TOKENS.shadows.md,\n    transition: BLACKRENT_DESIGN_TOKENS.transitions.normal,\n  },\n\n  // Konzistentn√© chip ≈°t√Ωly\n  chip: {\n    borderRadius: BLACKRENT_DESIGN_TOKENS.borderRadius.md,\n    fontWeight: 600,\n    transition: BLACKRENT_DESIGN_TOKENS.transitions.normal,\n  },\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/users/BasicUserManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/users/IntegratedUserManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AdvancedIcon' is defined but never used.","line":3,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Typography' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":13}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Person as PersonIcon,\n  SupervisorAccount as AdvancedIcon,\n  Notifications as NotificationIcon,\n  Security as SecurityIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Tabs,\n  Tab,\n  useTheme,\n  useMediaQuery,\n} from '@mui/material';\nimport React, { useState } from 'react';\n\nimport { RoleGuard } from '../common/PermissionGuard';\nimport PushNotificationManager from '../common/PushNotificationManager';\n\nimport BasicUserManagement from './BasicUserManagement';\nimport RolePermissionsDisplay from './RolePermissionsDisplay';\n\nexport default function IntegratedUserManagement() {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  // Tab management - start with Basic tab (index 0) as it's the main feature\n  const [currentTab, setCurrentTab] = useState(0);\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setCurrentTab(newValue);\n  };\n\n  // Basic User Management is now the main component - no placeholder needed\n\n  const renderTabContent = () => {\n    switch (currentTab) {\n      case 0:\n        return <BasicUserManagement />;\n      case 1:\n        return <RolePermissionsDisplay />;\n      case 2:\n        return <PushNotificationManager />;\n      default:\n        return <BasicUserManagement />;\n    }\n  };\n\n  return (\n    <RoleGuard allowedRoles={['admin']} showAccessDeniedMessage>\n      <Box\n        sx={{\n          p: { xs: 1, sm: 2, md: 3 },\n          minHeight: '100vh',\n          backgroundColor: { xs: '#f5f5f5', sm: 'transparent' },\n        }}\n      >\n        {/* Header - Removed duplicate since BasicUserManagement has its own */}\n        {/* Tabs */}\n        <Box\n          sx={{\n            borderBottom: 1,\n            borderColor: 'divider',\n            mb: { xs: 2, sm: 3 },\n            backgroundColor: { xs: 'background.paper', sm: 'transparent' },\n            mx: { xs: -1, sm: 0 },\n            px: { xs: 2, sm: 0 },\n            py: { xs: 1, sm: 0 },\n            borderRadius: { xs: '8px 8px 0 0', sm: 0 },\n          }}\n        >\n          <Tabs\n            value={currentTab}\n            onChange={handleTabChange}\n            aria-label=\"user management tabs\"\n            variant={isMobile ? 'scrollable' : 'standard'}\n            scrollButtons=\"auto\"\n            allowScrollButtonsMobile\n            sx={{\n              '& .MuiTab-root': {\n                textTransform: 'none',\n                minWidth: { xs: 100, sm: 140, md: 160 },\n                fontSize: { xs: '0.8rem', sm: '0.9rem' },\n                fontWeight: 500,\n                px: { xs: 1, sm: 2 },\n                py: { xs: 1.5, sm: 1.5 },\n              },\n              '& .Mui-selected': {\n                color: 'primary.main',\n                fontWeight: 600,\n              },\n              '& .MuiTabs-indicator': {\n                height: 3,\n                borderRadius: '3px 3px 0 0',\n              },\n            }}\n          >\n            <Tab\n              icon={<PersonIcon fontSize={isMobile ? 'small' : 'medium'} />}\n              label=\"Spr√°va pou≈æ√≠vateƒæov\"\n              iconPosition=\"start\"\n            />\n            <Tab\n              icon={<SecurityIcon fontSize={isMobile ? 'small' : 'medium'} />}\n              label=\"Pr√°va rol√≠\"\n              iconPosition=\"start\"\n            />\n            <Tab\n              icon={\n                <NotificationIcon fontSize={isMobile ? 'small' : 'medium'} />\n              }\n              label=\"Push notifik√°cie\"\n              iconPosition=\"start\"\n            />\n          </Tabs>\n        </Box>\n\n        {/* Tab Content */}\n        <Box\n          sx={{\n            mt: 0,\n            backgroundColor: { xs: 'background.paper', sm: 'transparent' },\n            borderRadius: { xs: 2, sm: 0 },\n            mx: { xs: -1, sm: 0 },\n            overflow: 'hidden',\n          }}\n        >\n          {renderTabContent()}\n        </Box>\n      </Box>\n    </RoleGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/users/RolePermissionsDisplay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CloseIcon' is defined but never used.","line":4,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardContent' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Grid' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ACTION_LABELS' is assigned a value but never used.","line":187,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":187,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5172,5175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5172,5175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":261,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7056,7059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7056,7059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":272,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":272,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7468,7471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7468,7471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":303,"column":47,"nodeType":"Identifier","messageId":"unusedVar","endLine":303,"endColumn":52}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  ExpandMore as ExpandMoreIcon,\n  Check as CheckIcon,\n  Close as CloseIcon,\n  AdminPanelSettings as AdminIcon,\n  Person as UserIcon,\n  Work as EmployeeIcon,\n  Build as TempWorkerIcon,\n  Engineering as MechanicIcon,\n  BusinessCenter as SalesIcon,\n  Business as CompanyIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Chip,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n} from '@mui/material';\nimport React from 'react';\n\n// Defin√≠cia pr√°v rol√≠ (k√≥pia z backend/src/middleware/permissions.ts)\nconst ROLE_PERMISSIONS = {\n  admin: [\n    {\n      resource: '*',\n      actions: ['read', 'create', 'update', 'delete'],\n      conditions: {},\n    },\n  ],\n  user: [\n    { resource: 'vehicles', actions: ['read'] },\n    { resource: 'rentals', actions: ['read'] },\n    { resource: 'customers', actions: ['read'] },\n    { resource: 'expenses', actions: ['read'] },\n    { resource: 'settlements', actions: ['read'] },\n    { resource: 'insurances', actions: ['read'] },\n    { resource: 'maintenance', actions: ['read'] },\n    { resource: 'protocols', actions: ['read', 'create', 'update'] },\n    { resource: 'statistics', actions: ['read'] },\n  ],\n  employee: [\n    { resource: 'vehicles', actions: ['read', 'create', 'update'] },\n    { resource: 'rentals', actions: ['read', 'create', 'update'] },\n    { resource: 'customers', actions: ['read', 'create', 'update'] },\n    { resource: 'maintenance', actions: ['read', 'create'] },\n    { resource: 'protocols', actions: ['read', 'create', 'update'] },\n  ],\n  temp_worker: [\n    { resource: 'vehicles', actions: ['read'] },\n    { resource: 'rentals', actions: ['read', 'create'] },\n    { resource: 'customers', actions: ['read', 'create'] },\n    { resource: 'protocols', actions: ['read', 'create'] },\n  ],\n  mechanic: [\n    {\n      resource: 'vehicles',\n      actions: ['read', 'update'],\n      conditions: { ownOnly: true },\n    },\n    {\n      resource: 'maintenance',\n      actions: ['read', 'create', 'update', 'delete'],\n      conditions: { ownOnly: true },\n    },\n    {\n      resource: 'protocols',\n      actions: ['read', 'create', 'update'],\n      conditions: { ownOnly: true },\n    },\n  ],\n  sales_rep: [\n    { resource: 'vehicles', actions: ['read'] },\n    { resource: 'rentals', actions: ['read', 'create', 'update'] },\n    { resource: 'customers', actions: ['read', 'create', 'update'] },\n    {\n      resource: 'pricing',\n      actions: ['read', 'update'],\n      conditions: { maxAmount: 5000 },\n    },\n  ],\n  company_owner: [\n    {\n      resource: 'vehicles',\n      actions: ['read'],\n      conditions: { companyOnly: true },\n    },\n    {\n      resource: 'rentals',\n      actions: ['read'],\n      conditions: { companyOnly: true },\n    },\n    {\n      resource: 'expenses',\n      actions: ['read'],\n      conditions: { companyOnly: true },\n    },\n    {\n      resource: 'insurances',\n      actions: ['read'],\n      conditions: { companyOnly: true },\n    },\n    { resource: 'companies', actions: ['read'], conditions: { ownOnly: true } },\n    {\n      resource: 'finances',\n      actions: ['read'],\n      conditions: { companyOnly: true },\n    },\n    {\n      resource: 'protocols',\n      actions: ['read'],\n      conditions: { companyOnly: true },\n    },\n  ],\n};\n\nconst ROLE_INFO = {\n  admin: {\n    name: 'Administr√°tor',\n    icon: AdminIcon,\n    color: 'error',\n    description: '√öpln√© pr√°va na v≈°etko',\n  },\n  user: {\n    name: 'Pou≈æ√≠vateƒæ',\n    icon: UserIcon,\n    color: 'default',\n    description: 'Z√°kladn√Ω pou≈æ√≠vateƒæ s READ-ONLY pr√°vami',\n  },\n  employee: {\n    name: 'Zamestnanec',\n    icon: EmployeeIcon,\n    color: 'info',\n    description: 'Z√°kladn√© oper√°cie s vozidlami, pren√°jmami, z√°kazn√≠kmi',\n  },\n  temp_worker: {\n    name: 'Brig√°dnik',\n    icon: TempWorkerIcon,\n    color: 'warning',\n    description: 'Obmedzen√© pr√°va, hlavne ƒç√≠tanie',\n  },\n  mechanic: {\n    name: 'Mechanik',\n    icon: MechanicIcon,\n    color: 'success',\n    description: '≈†pecializovan√© pr√°va na √∫dr≈æbu',\n  },\n  sales_rep: {\n    name: 'Obchodn√≠k',\n    icon: SalesIcon,\n    color: 'secondary',\n    description: 'Obchodn√© oper√°cie s limitmi',\n  },\n  company_owner: {\n    name: 'Majiteƒæ firmy',\n    icon: CompanyIcon,\n    color: 'primary',\n    description: 'Len vlastn√© vozidl√° a s√∫visiace d√°ta',\n  },\n};\n\nconst RESOURCE_LABELS = {\n  '*': 'V≈°etko',\n  vehicles: 'Vozidl√°',\n  rentals: 'Pren√°jmy',\n  customers: 'Z√°kazn√≠ci',\n  expenses: 'N√°klady',\n  settlements: 'Vy√∫ƒçtovanie',\n  insurances: 'Poistky/STK',\n  maintenance: '√ödr≈æba',\n  protocols: 'Protokoly',\n  statistics: '≈†tatistiky',\n  pricing: 'Cenn√≠ky',\n  companies: 'Firmy',\n  finances: 'Financie',\n};\n\nconst ACTION_LABELS = {\n  read: 'ƒå√≠tanie',\n  create: 'Vytv√°ranie',\n  update: '√öprava',\n  delete: 'Mazanie',\n};\n\ninterface RolePermissionsDisplayProps {\n  selectedRole?: string;\n  showAllRoles?: boolean;\n}\n\nexport default function RolePermissionsDisplay({\n  selectedRole,\n  showAllRoles = true,\n}: RolePermissionsDisplayProps) {\n  const rolesToShow = selectedRole\n    ? [selectedRole]\n    : Object.keys(ROLE_PERMISSIONS);\n\n  const renderPermissionItem = (permission: any) => {\n    const resourceLabel =\n      RESOURCE_LABELS[permission.resource as keyof typeof RESOURCE_LABELS] ||\n      permission.resource;\n    const actions = permission.actions.join(', ');\n    const conditions = permission.conditions;\n\n    let conditionText = '';\n    if (conditions?.ownOnly) conditionText += ' (len vlastn√©)';\n    if (conditions?.companyOnly) conditionText += ' (len vlastn√° firma)';\n    if (conditions?.maxAmount)\n      conditionText += ` (max ${conditions.maxAmount}‚Ç¨)`;\n    if (conditions?.approvalRequired) conditionText += ' (vy≈æaduje schv√°lenie)';\n\n    return (\n      <ListItem key={permission.resource} sx={{ py: 0.5 }}>\n        <ListItemIcon sx={{ minWidth: 32 }}>\n          <CheckIcon color=\"success\" fontSize=\"small\" />\n        </ListItemIcon>\n        <ListItemText\n          primary={\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Typography variant=\"body2\" fontWeight={500}>\n                {resourceLabel}\n              </Typography>\n              <Typography variant=\"caption\" color=\"text.secondary\">\n                ({actions}){conditionText}\n              </Typography>\n            </Box>\n          }\n        />\n      </ListItem>\n    );\n  };\n\n  const renderRoleCard = (roleKey: string) => {\n    const roleInfo = ROLE_INFO[roleKey as keyof typeof ROLE_INFO];\n    const permissions =\n      ROLE_PERMISSIONS[roleKey as keyof typeof ROLE_PERMISSIONS];\n    const IconComponent = roleInfo.icon;\n\n    if (!roleInfo || !permissions) return null;\n\n    return (\n      <Accordion key={roleKey} defaultExpanded={!showAllRoles}>\n        <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n          <Box\n            sx={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 2,\n              width: '100%',\n            }}\n          >\n            <IconComponent color={roleInfo.color as any} />\n            <Box sx={{ flex: 1 }}>\n              <Typography variant=\"h6\" component=\"div\">\n                {roleInfo.name}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {roleInfo.description}\n              </Typography>\n            </Box>\n            <Chip\n              label={roleKey.toUpperCase()}\n              color={roleInfo.color as any}\n              size=\"small\"\n              variant=\"outlined\"\n            />\n          </Box>\n        </AccordionSummary>\n        <AccordionDetails>\n          <Box>\n            <Typography variant=\"subtitle2\" gutterBottom sx={{ mb: 2 }}>\n              Opr√°vnenia:\n            </Typography>\n\n            {roleKey === 'admin' ? (\n              <Box\n                sx={{\n                  p: 2,\n                  bgcolor: 'error.50',\n                  borderRadius: 1,\n                  border: '1px solid',\n                  borderColor: 'error.200',\n                }}\n              >\n                <Typography variant=\"body2\" color=\"error.main\" fontWeight={600}>\n                  üî• √öPLN√â PR√ÅVA NA V≈†ETKO\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Administr√°tor m√° neobmedzen√Ω pr√≠stup k cel√©mu syst√©mu\n                </Typography>\n              </Box>\n            ) : (\n              <List dense sx={{ bgcolor: 'grey.50', borderRadius: 1 }}>\n                {permissions.map((permission, index) =>\n                  renderPermissionItem(permission)\n                )}\n              </List>\n            )}\n          </Box>\n        </AccordionDetails>\n      </Accordion>\n    );\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h5\" gutterBottom sx={{ mb: 3 }}>\n        üìã Pr√°va pou≈æ√≠vateƒæsk√Ωch rol√≠\n      </Typography>\n\n      <Box sx={{ mb: 2 }}>\n        <Typography variant=\"body2\" color=\"text.secondary\">\n          Prehƒæad opr√°vnen√≠ pre jednotliv√© role v BlackRent syst√©me\n        </Typography>\n      </Box>\n\n      <Box>{rolesToShow.map(roleKey => renderRoleCard(roleKey))}</Box>\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/users/UserCompanyPermissions.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Chip' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tooltip' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":10}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  ExpandMore as ExpandMoreIcon,\n  Business as BusinessIcon,\n  Visibility as ReadIcon,\n  Edit as WriteIcon,\n  Delete as DeleteIcon,\n  Check as CheckIcon,\n  Add as AddIcon,\n  Remove as RemoveIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  CardHeader,\n  Grid,\n  FormControlLabel,\n  Switch,\n  Chip,\n  Alert,\n  CircularProgress,\n  Divider,\n  Tooltip,\n  IconButton,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Stack,\n  Button,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n\nimport { apiService } from '../../services/api';\nimport type {\n  Company,\n  UserCompanyAccess,\n  CompanyPermissions,\n  ResourcePermission,\n} from '../../types';\n\ninterface UserCompanyPermissionsProps {\n  userId?: string; // undefined pre nov√©ho pou≈æ√≠vateƒæa\n  onPermissionsChange?: (permissions: UserCompanyAccess[]) => void;\n}\n\nconst RESOURCES = [\n  { key: 'vehicles', label: 'Vozidl√°', icon: 'üöó' },\n  { key: 'rentals', label: 'Pren√°jmy', icon: 'üìã' },\n  { key: 'expenses', label: 'N√°klady', icon: 'üí∞' },\n  { key: 'settlements', label: 'Vy√∫ƒçtovanie', icon: 'üìä' },\n  { key: 'customers', label: 'Z√°kazn√≠ci', icon: 'üë•' },\n  { key: 'insurances', label: 'Poistky/STK', icon: 'üõ°Ô∏è' },\n  { key: 'maintenance', label: '√ödr≈æba', icon: 'üîß' },\n  { key: 'protocols', label: 'Protokoly', icon: 'üìù' },\n] as const;\n\nconst DEFAULT_PERMISSIONS: CompanyPermissions = {\n  vehicles: { read: false, write: false, delete: false },\n  rentals: { read: false, write: false, delete: false },\n  expenses: { read: false, write: false, delete: false },\n  settlements: { read: false, write: false, delete: false },\n  customers: { read: false, write: false, delete: false },\n  insurances: { read: false, write: false, delete: false },\n  maintenance: { read: false, write: false, delete: false },\n  protocols: { read: false, write: false, delete: false },\n};\n\nexport default function UserCompanyPermissions({\n  userId,\n  onPermissionsChange,\n}: UserCompanyPermissionsProps) {\n  const [companies, setCompanies] = useState<Company[]>([]);\n  const [userAccess, setUserAccess] = useState<UserCompanyAccess[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [expandedCompany, setExpandedCompany] = useState<string | false>(false);\n\n  // Naƒç√≠taj firmy\n  useEffect(() => {\n    const fetchCompanies = async () => {\n      try {\n        const companiesData = await apiService.getCompanies();\n        setCompanies(companiesData);\n      } catch (error) {\n        console.error('Error fetching companies:', error);\n        setError('Chyba pri naƒç√≠tavan√≠ firiem');\n      }\n    };\n\n    fetchCompanies();\n  }, []);\n\n  // Naƒç√≠taj opr√°vnenia pou≈æ√≠vateƒæa\n  useEffect(() => {\n    if (!userId) {\n      setUserAccess([]);\n      return;\n    }\n\n    const fetchUserPermissions = async () => {\n      try {\n        setLoading(true);\n        const accessData = await apiService.getUserCompanyAccess(userId);\n        setUserAccess(accessData);\n      } catch (error) {\n        console.error('Error fetching user permissions:', error);\n        setError('Chyba pri naƒç√≠tavan√≠ opr√°vnen√≠');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUserPermissions();\n  }, [userId]);\n\n  // Informuj rodiƒçovsk√Ω komponent o zmen√°ch\n  useEffect(() => {\n    if (onPermissionsChange) {\n      onPermissionsChange(userAccess);\n    }\n  }, [userAccess, onPermissionsChange]);\n\n  const handleAddCompanyAccess = (companyId: string) => {\n    const company = companies.find(c => c.id === companyId);\n    if (!company) return;\n\n    const existingAccess = userAccess.find(\n      access => access.companyId === companyId\n    );\n    if (existingAccess) return;\n\n    const newAccess: UserCompanyAccess = {\n      companyId: company.id,\n      companyName: company.name,\n      permissions: DEFAULT_PERMISSIONS,\n    };\n\n    setUserAccess(prev => [...prev, newAccess]);\n    setExpandedCompany(companyId);\n  };\n\n  const handleRemoveCompanyAccess = (companyId: string) => {\n    setUserAccess(prev =>\n      prev.filter(access => access.companyId !== companyId)\n    );\n    if (expandedCompany === companyId) {\n      setExpandedCompany(false);\n    }\n  };\n\n  const handlePermissionChange = (\n    companyId: string,\n    resource: keyof CompanyPermissions,\n    action: keyof ResourcePermission,\n    value: boolean\n  ) => {\n    setUserAccess(prev =>\n      prev.map(access => {\n        if (access.companyId === companyId) {\n          return {\n            ...access,\n            permissions: {\n              ...access.permissions,\n              [resource]: {\n                ...access.permissions[resource],\n                [action]: value,\n              },\n            },\n          };\n        }\n        return access;\n      })\n    );\n  };\n\n  const handleSetAllPermissions = (\n    companyId: string,\n    action: keyof ResourcePermission,\n    value: boolean\n  ) => {\n    setUserAccess(prev =>\n      prev.map(access => {\n        if (access.companyId === companyId) {\n          const newPermissions = { ...access.permissions };\n          RESOURCES.forEach(resource => {\n            newPermissions[resource.key as keyof CompanyPermissions] = {\n              ...newPermissions[resource.key as keyof CompanyPermissions],\n              [action]: value,\n            };\n          });\n          return {\n            ...access,\n            permissions: newPermissions,\n          };\n        }\n        return access;\n      })\n    );\n  };\n\n  const hasAnyPermission = (permissions: CompanyPermissions): boolean => {\n    return RESOURCES.some(resource => {\n      const resourcePerms =\n        permissions[resource.key as keyof CompanyPermissions];\n      return resourcePerms.read || resourcePerms.write || resourcePerms.delete;\n    });\n  };\n\n  const getPermissionSummary = (permissions: CompanyPermissions): string => {\n    let readCount = 0;\n    let writeCount = 0;\n    let deleteCount = 0;\n\n    RESOURCES.forEach(resource => {\n      const resourcePerms =\n        permissions[resource.key as keyof CompanyPermissions];\n      if (resourcePerms.read) readCount++;\n      if (resourcePerms.write) writeCount++;\n      if (resourcePerms.delete) deleteCount++;\n    });\n\n    const summary = [];\n    if (readCount > 0) summary.push(`${readCount} ƒç√≠tanie`);\n    if (writeCount > 0) summary.push(`${writeCount} √∫pravy`);\n    if (deleteCount > 0) summary.push(`${deleteCount} mazanie`);\n\n    return summary.join(', ') || '≈Ωiadne opr√°vnenia';\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" p={3}>\n        <CircularProgress size={24} />\n        <Typography variant=\"body2\" sx={{ ml: 2 }}>\n          Naƒç√≠tavam opr√°vnenia...\n        </Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <Typography\n        variant=\"h6\"\n        gutterBottom\n        sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n      >\n        <BusinessIcon color=\"primary\" />\n        Opr√°vnenia na firmy\n      </Typography>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          {error}\n        </Alert>\n      )}\n\n      {/* Pridanie pr√≠stupu k firm√°m */}\n      <Card sx={{ mb: 3 }}>\n        <CardHeader\n          title=\"Prida≈• pr√≠stup k firme\"\n          titleTypographyProps={{ variant: 'subtitle1' }}\n        />\n        <CardContent>\n          <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\">\n            {companies\n              .filter(\n                company =>\n                  !userAccess.some(access => access.companyId === company.id)\n              )\n              .map(company => (\n                <Button\n                  key={company.id}\n                  variant=\"outlined\"\n                  size=\"small\"\n                  startIcon={<AddIcon />}\n                  onClick={() => handleAddCompanyAccess(company.id)}\n                  sx={{ mb: 1 }}\n                >\n                  {company.name}\n                </Button>\n              ))}\n            {companies.filter(\n              company =>\n                !userAccess.some(access => access.companyId === company.id)\n            ).length === 0 && (\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Pou≈æ√≠vateƒæ m√° pr√≠stup ku v≈°etk√Ωm firm√°m\n              </Typography>\n            )}\n          </Stack>\n        </CardContent>\n      </Card>\n\n      {/* Zoznam firiem s opr√°vneniami */}\n      {userAccess.map(access => (\n        <Accordion\n          key={access.companyId}\n          expanded={expandedCompany === access.companyId}\n          onChange={(_, isExpanded) =>\n            setExpandedCompany(isExpanded ? access.companyId : false)\n          }\n          sx={{ mb: 2 }}\n        >\n          <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n            <Box\n              sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                width: '100%',\n              }}\n            >\n              <BusinessIcon color=\"primary\" />\n              <Box sx={{ flexGrow: 1 }}>\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\">\n                  {access.companyName}\n                </Typography>\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  {getPermissionSummary(access.permissions)}\n                </Typography>\n              </Box>\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                {hasAnyPermission(access.permissions) && (\n                  <CheckIcon color=\"success\" fontSize=\"small\" />\n                )}\n                <IconButton\n                  size=\"small\"\n                  color=\"error\"\n                  onClick={e => {\n                    e.stopPropagation();\n                    handleRemoveCompanyAccess(access.companyId);\n                  }}\n                >\n                  <RemoveIcon />\n                </IconButton>\n              </Box>\n            </Box>\n          </AccordionSummary>\n\n          <AccordionDetails>\n            {/* Hromadn√© akcie */}\n            <Box sx={{ mb: 3, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\n              <Typography variant=\"subtitle2\" gutterBottom>\n                Hromadn√© nastavenie:\n              </Typography>\n              <Stack direction=\"row\" spacing={2}>\n                <Button\n                  size=\"small\"\n                  onClick={() =>\n                    handleSetAllPermissions(access.companyId, 'read', true)\n                  }\n                >\n                  V≈°etko ƒç√≠tanie\n                </Button>\n                <Button\n                  size=\"small\"\n                  onClick={() =>\n                    handleSetAllPermissions(access.companyId, 'write', true)\n                  }\n                >\n                  V≈°etky √∫pravy\n                </Button>\n                <Button\n                  size=\"small\"\n                  color=\"error\"\n                  onClick={() => {\n                    handleSetAllPermissions(access.companyId, 'read', false);\n                    handleSetAllPermissions(access.companyId, 'write', false);\n                    handleSetAllPermissions(access.companyId, 'delete', false);\n                  }}\n                >\n                  Zru≈°i≈• v≈°etko\n                </Button>\n              </Stack>\n            </Box>\n\n            {/* Detailn√© opr√°vnenia */}\n            <Grid container spacing={2}>\n              {RESOURCES.map(resource => {\n                const resourcePerms =\n                  access.permissions[resource.key as keyof CompanyPermissions];\n                return (\n                  <Grid item xs={12} sm={6} md={4} key={resource.key}>\n                    <Card variant=\"outlined\" sx={{ height: '100%' }}>\n                      <CardContent sx={{ p: 2 }}>\n                        <Typography\n                          variant=\"subtitle2\"\n                          gutterBottom\n                          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n                        >\n                          <span>{resource.icon}</span>\n                          {resource.label}\n                        </Typography>\n                        <Stack spacing={1}>\n                          <FormControlLabel\n                            control={\n                              <Switch\n                                size=\"small\"\n                                checked={resourcePerms.read}\n                                onChange={e =>\n                                  handlePermissionChange(\n                                    access.companyId,\n                                    resource.key as keyof CompanyPermissions,\n                                    'read',\n                                    e.target.checked\n                                  )\n                                }\n                              />\n                            }\n                            label={\n                              <Box\n                                sx={{\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  gap: 0.5,\n                                }}\n                              >\n                                <ReadIcon fontSize=\"small\" color=\"primary\" />\n                                <Typography variant=\"caption\">\n                                  ƒå√≠tanie\n                                </Typography>\n                              </Box>\n                            }\n                          />\n                          <FormControlLabel\n                            control={\n                              <Switch\n                                size=\"small\"\n                                checked={resourcePerms.write}\n                                onChange={e =>\n                                  handlePermissionChange(\n                                    access.companyId,\n                                    resource.key as keyof CompanyPermissions,\n                                    'write',\n                                    e.target.checked\n                                  )\n                                }\n                              />\n                            }\n                            label={\n                              <Box\n                                sx={{\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  gap: 0.5,\n                                }}\n                              >\n                                <WriteIcon fontSize=\"small\" color=\"warning\" />\n                                <Typography variant=\"caption\">\n                                  √öpravy\n                                </Typography>\n                              </Box>\n                            }\n                          />\n                          <FormControlLabel\n                            control={\n                              <Switch\n                                size=\"small\"\n                                checked={resourcePerms.delete}\n                                onChange={e =>\n                                  handlePermissionChange(\n                                    access.companyId,\n                                    resource.key as keyof CompanyPermissions,\n                                    'delete',\n                                    e.target.checked\n                                  )\n                                }\n                              />\n                            }\n                            label={\n                              <Box\n                                sx={{\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  gap: 0.5,\n                                }}\n                              >\n                                <DeleteIcon fontSize=\"small\" color=\"error\" />\n                                <Typography variant=\"caption\">\n                                  Mazanie\n                                </Typography>\n                              </Box>\n                            }\n                          />\n                        </Stack>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                );\n              })}\n            </Grid>\n          </AccordionDetails>\n        </Accordion>\n      ))}\n\n      {userAccess.length === 0 && (\n        <Alert severity=\"info\">\n          Pou≈æ√≠vateƒæ nem√° pr√≠stup k ≈æiadnej firme. Pou≈æite tlaƒçidl√° vy≈°≈°ie na\n          pridanie pr√≠stupu k firm√°m.\n        </Alert>\n      )}\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/users/UserProfile.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Divider' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":10},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":109,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3369,3372],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3369,3372],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Save, Person, Edit } from '@mui/icons-material';\nimport {\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  Typography,\n  Divider,\n  Alert,\n  Paper,\n} from '@mui/material';\nimport React, { useState } from 'react';\n\nimport { useAuth } from '../../context/AuthContext';\nimport { apiService } from '../../services/api';\nimport SignaturePad from '../common/SignaturePad';\n\ninterface UserProfileProps {\n  open: boolean;\n  onClose: () => void;\n}\n\nexport default function UserProfile({ open, onClose }: UserProfileProps) {\n  const { state, updateUser } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [showSignaturePad, setShowSignaturePad] = useState(false);\n  const [message, setMessage] = useState<{\n    type: 'success' | 'error';\n    text: string;\n  } | null>(null);\n\n  const [formData, setFormData] = useState({\n    firstName: state.user?.firstName || '',\n    lastName: state.user?.lastName || '',\n  });\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleSaveProfile = async () => {\n    setLoading(true);\n    setMessage(null);\n\n    try {\n      console.log('üë§ Sending profile data:', {\n        firstName: formData.firstName,\n        lastName: formData.lastName,\n      });\n      console.log('üë§ Current user state:', state.user);\n\n      const response = await apiService.updateUserProfile(\n        formData.firstName,\n        formData.lastName\n      );\n      console.log('üë§ Profile update response:', response);\n\n      // Aktualizuj user state s d√°tami z backendu\n      if (response && response.user) {\n        console.log('‚úÖ Backend returned user data:', response.user);\n        updateUser({\n          firstName: response.user.firstName,\n          lastName: response.user.lastName,\n        });\n        console.log('‚úÖ User state updated with backend data');\n      } else if (response && response.success) {\n        // Fallback ak response nem√° user objekt ale m√° success\n        console.log('‚ö†Ô∏è Backend returned success but no user data');\n        updateUser({\n          firstName: formData.firstName,\n          lastName: formData.lastName,\n        });\n        console.log('‚ö†Ô∏è Using frontend data as fallback (success response)');\n      } else {\n        // Fallback na frontend data\n        console.log('‚ö†Ô∏è Backend returned no data');\n        updateUser({\n          firstName: formData.firstName,\n          lastName: formData.lastName,\n        });\n        console.log('‚ö†Ô∏è Using frontend data as fallback (no response data)');\n      }\n\n      setMessage({ type: 'success', text: '‚úÖ Profil √∫spe≈°ne aktualizovan√Ω!' });\n    } catch (error) {\n      console.error('‚ùå Error updating profile:', error);\n      console.error('‚ùå Error details:', {\n        message: error instanceof Error ? error.message : 'Unknown error',\n        stack: error instanceof Error ? error.stack : undefined,\n      });\n\n      // Fallback na frontend data aj pri chybe\n      updateUser({\n        firstName: formData.firstName,\n        lastName: formData.lastName,\n      });\n      console.log('‚ö†Ô∏è Using frontend data as fallback (error occurred)');\n\n      setMessage({\n        type: 'error',\n        text: '‚ùå Chyba pri aktualiz√°cii profilu - d√°ta ulo≈æen√© lok√°lne',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSignatureSave = async (signatureData: any) => {\n    setLoading(true);\n    setMessage(null);\n\n    try {\n      console.log('üñäÔ∏è Sending signature data:', {\n        signatureLength: signatureData.signature?.length || 0,\n      });\n      console.log('üñäÔ∏è Current user state:', state.user);\n\n      const response = await apiService.updateSignatureTemplate(\n        signatureData.signature\n      );\n      console.log('üñäÔ∏è Signature update response:', response);\n\n      // Aktualizuj user state s d√°tami z backendu\n      if (response && response.user) {\n        console.log('‚úÖ Backend returned user data:', response.user);\n        updateUser({\n          signatureTemplate: response.user.signatureTemplate,\n        });\n        console.log('‚úÖ User state updated with backend signature data');\n      } else if (response && response.success) {\n        // Fallback ak response nem√° user objekt ale m√° success\n        console.log('‚ö†Ô∏è Backend returned success but no user data');\n        updateUser({\n          signatureTemplate: signatureData.signature,\n        });\n        console.log(\n          '‚ö†Ô∏è Using frontend signature data as fallback (success response)'\n        );\n      } else {\n        // Fallback na frontend data\n        console.log('‚ö†Ô∏è Backend returned no data');\n        updateUser({\n          signatureTemplate: signatureData.signature,\n        });\n        console.log(\n          '‚ö†Ô∏è Using frontend signature data as fallback (no response data)'\n        );\n      }\n\n      setMessage({\n        type: 'success',\n        text: '‚úÖ Podpis √∫spe≈°ne ulo≈æen√Ω ako template!',\n      });\n      setShowSignaturePad(false);\n    } catch (error) {\n      console.error('‚ùå Error saving signature template:', error);\n      console.error('‚ùå Error details:', {\n        message: error instanceof Error ? error.message : 'Unknown error',\n        stack: error instanceof Error ? error.stack : undefined,\n      });\n\n      // Fallback na frontend data aj pri chybe\n      updateUser({\n        signatureTemplate: signatureData.signature,\n      });\n      console.log(\n        '‚ö†Ô∏è Using frontend signature data as fallback (error occurred)'\n      );\n\n      setMessage({\n        type: 'error',\n        text: '‚ùå Chyba pri ukladan√≠ podpisu - podpis ulo≈æen√Ω lok√°lne',\n      });\n      setShowSignaturePad(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!open) return null;\n\n  return (\n    <Box\n      sx={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 9999,\n        p: 2,\n      }}\n    >\n      <Box\n        sx={{\n          backgroundColor: 'white',\n          borderRadius: 2,\n          maxWidth: 800,\n          width: '100%',\n          maxHeight: '90vh',\n          overflow: 'auto',\n          p: 3,\n        }}\n      >\n        <Typography variant=\"h4\" gutterBottom>\n          üë§ M√¥j Profil\n        </Typography>\n\n        {message && (\n          <Alert severity={message.type} sx={{ mb: 3 }}>\n            {message.text}\n          </Alert>\n        )}\n\n        <Card sx={{ mb: 3 }}>\n          <CardContent>\n            <Typography variant=\"h6\" gutterBottom>\n              <Person sx={{ mr: 1, verticalAlign: 'middle' }} />\n              Osobn√© √∫daje\n            </Typography>\n\n            <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\n              <TextField\n                label=\"Meno\"\n                value={formData.firstName}\n                onChange={e => handleInputChange('firstName', e.target.value)}\n                fullWidth\n                helperText=\"Va≈°e meno sa pou≈æije v protokoloch\"\n              />\n              <TextField\n                label=\"Priezvisko\"\n                value={formData.lastName}\n                onChange={e => handleInputChange('lastName', e.target.value)}\n                fullWidth\n                helperText=\"Va≈°e priezvisko sa pou≈æije v protokoloch\"\n              />\n            </Box>\n\n            <Button\n              variant=\"contained\"\n              startIcon={<Save />}\n              onClick={handleSaveProfile}\n              disabled={loading}\n            >\n              {loading ? 'Uklad√°m...' : 'Ulo≈æi≈• profil'}\n            </Button>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent>\n            <Typography variant=\"h6\" gutterBottom>\n              <Edit sx={{ mr: 1, verticalAlign: 'middle' }} />\n              M√¥j podpis\n            </Typography>\n\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n              V√°≈° podpis sa automaticky pou≈æije pri vytv√°ran√≠ protokolov ako\n              zamestnanec.\n            </Typography>\n\n            {state.user?.signatureTemplate && (\n              <Paper sx={{ p: 2, mb: 2, textAlign: 'center' }}>\n                <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                  Aktu√°lny podpis:\n                </Typography>\n                <img\n                  src={state.user.signatureTemplate}\n                  alt=\"Aktu√°lny podpis\"\n                  style={{\n                    maxWidth: '100%',\n                    maxHeight: 100,\n                    border: '1px solid #ddd',\n                    borderRadius: 4,\n                  }}\n                />\n              </Paper>\n            )}\n\n            <Button\n              variant=\"outlined\"\n              onClick={() => setShowSignaturePad(true)}\n              disabled={loading}\n            >\n              {state.user?.signatureTemplate\n                ? 'Zmeni≈• podpis'\n                : 'Prida≈• podpis'}\n            </Button>\n          </CardContent>\n        </Card>\n\n        {/* Close button */}\n        <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 3 }}>\n          <Button variant=\"outlined\" onClick={onClose} disabled={loading}>\n            Zavrie≈•\n          </Button>\n        </Box>\n      </Box>\n\n      {/* SignaturePad modal */}\n      {showSignaturePad && (\n        <Box\n          sx={{\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 10000,\n            p: 2,\n          }}\n        >\n          <Box\n            sx={{\n              backgroundColor: 'white',\n              borderRadius: 2,\n              maxWidth: 600,\n              width: '100%',\n              maxHeight: '90vh',\n              overflow: 'auto',\n            }}\n          >\n            <SignaturePad\n              onSave={handleSignatureSave}\n              onCancel={() => setShowSignaturePad(false)}\n              signerName={\n                `${formData.firstName} ${formData.lastName}`.trim() ||\n                'Zamestnanec'\n              }\n              signerRole=\"employee\"\n              location=\"Kancel√°ria\"\n            />\n          </Box>\n        </Box>\n      )}\n    </Box>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/TechnicalCertificateUpload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/VehicleCardLazy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/VehicleForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/VehicleImage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RefreshIcon' is defined but never used.","line":11,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'IconButton' is defined but never used.","line":13,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'placeholderUrl' is assigned a value but never used.","line":61,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":23}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üöó VEHICLE IMAGE COMPONENT\n *\n * Optimalizovan√Ω komponent pre zobrazenie vehicle obr√°zkov s lazy loading\n */\n\nimport {\n  PhotoCamera as PhotoIcon,\n  DirectionsCar as CarIcon,\n  LocalShipping as TruckIcon,\n  Refresh as RefreshIcon,\n} from '@mui/icons-material';\nimport { Box, Typography, IconButton } from '@mui/material';\nimport React, { memo, useCallback, useState } from 'react';\n\nimport {\n  VehicleImageUtils,\n  ImagePerformanceMonitor,\n} from '../../utils/imageOptimization';\nimport LazyImage from '../common/LazyImage';\nimport { CompactChip } from '../ui';\n\ninterface VehicleImageProps {\n  vehicleId?: string;\n  vehicleBrand?: string;\n  vehicleModel?: string;\n  vehicleType?: 'car' | 'truck' | 'van' | 'motorcycle';\n  size: 'thumbnail' | 'card' | 'detail' | 'fullsize';\n  width?: number | string;\n  height?: number | string;\n  borderRadius?: number;\n  showBrand?: boolean;\n  showType?: boolean;\n  fallbackColor?: string;\n  onClick?: () => void;\n  className?: string;\n}\n\nconst VehicleImage: React.FC<VehicleImageProps> = ({\n  vehicleId,\n  vehicleBrand,\n  vehicleModel,\n  vehicleType = 'car',\n  size,\n  width,\n  height,\n  borderRadius = 2,\n  showBrand = false,\n  showType = false,\n  fallbackColor,\n  onClick,\n  className,\n}) => {\n  const [imageLoadTime] = useState(performance.now());\n\n  // Generate image URLs\n  const imageUrl = vehicleId\n    ? VehicleImageUtils.getVehicleImageUrl(vehicleId, size)\n    : null;\n\n  const placeholderUrl = VehicleImageUtils.getVehiclePlaceholder(\n    vehicleType,\n    fallbackColor\n  );\n  const lowQualityUrl = vehicleId\n    ? VehicleImageUtils.getVehicleImageUrl(vehicleId, 'thumbnail')\n    : null;\n\n  // Performance callbacks\n  const handleImageLoad = useCallback(() => {\n    const loadTime = performance.now() - imageLoadTime;\n    if (imageUrl) {\n      ImagePerformanceMonitor.onImageLoad(imageUrl, loadTime);\n    }\n  }, [imageUrl, imageLoadTime]);\n\n  const handleImageError = useCallback(\n    (error: React.SyntheticEvent<HTMLImageElement>) => {\n      if (imageUrl) {\n        ImagePerformanceMonitor.onImageError(imageUrl, error);\n      }\n    },\n    [imageUrl]\n  );\n\n  // Get vehicle type icon\n  const getVehicleTypeIcon = () => {\n    switch (vehicleType) {\n      case 'truck':\n        return <TruckIcon />;\n      case 'motorcycle':\n        return <CarIcon />; // Could add motorcycle icon\n      default:\n        return <CarIcon />;\n    }\n  };\n\n  // Get default dimensions based on size\n  const getDimensions = () => {\n    const sizeConfig = {\n      thumbnail: { width: 100, height: 75 },\n      card: { width: 300, height: 200 },\n      detail: { width: 600, height: 400 },\n      fullsize: { width: '100%', height: 400 },\n    };\n\n    const config = sizeConfig[size];\n    return {\n      width: width || config.width,\n      height: height || config.height,\n    };\n  };\n\n  const dimensions = getDimensions();\n\n  // Custom placeholder for vehicles\n  const vehiclePlaceholder = (\n    <Box\n      sx={{\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: 1,\n        backgroundColor: fallbackColor || 'grey.100',\n        color: 'text.disabled',\n      }}\n    >\n      {getVehicleTypeIcon()}\n      <Typography variant=\"caption\" align=\"center\">\n        {vehicleBrand && vehicleModel\n          ? `${vehicleBrand} ${vehicleModel}`\n          : 'Obr√°zok vozidla'}\n      </Typography>\n      <PhotoIcon sx={{ fontSize: 16, opacity: 0.5 }} />\n    </Box>\n  );\n\n  return (\n    <Box\n      className={className}\n      sx={{\n        position: 'relative',\n        cursor: onClick ? 'pointer' : 'default',\n      }}\n      onClick={onClick}\n    >\n      {/* Main Image */}\n      {imageUrl ? (\n        <LazyImage\n          src={imageUrl}\n          lowQualitySrc={lowQualityUrl || undefined}\n          alt={`${vehicleBrand} ${vehicleModel}`.trim() || 'Vozidlo'}\n          width={dimensions.width}\n          height={dimensions.height}\n          borderRadius={borderRadius}\n          placeholder={vehiclePlaceholder}\n          onLoad={handleImageLoad}\n          onError={handleImageError}\n          onClick={onClick}\n          threshold={0.2} // Load slightly earlier for better UX\n          rootMargin=\"100px\" // Larger margin for vehicles\n        />\n      ) : (\n        <Box\n          sx={{\n            width: dimensions.width,\n            height: dimensions.height,\n            borderRadius,\n            overflow: 'hidden',\n            cursor: onClick ? 'pointer' : 'default',\n          }}\n          onClick={onClick}\n        >\n          {vehiclePlaceholder}\n        </Box>\n      )}\n\n      {/* Brand Badge */}\n      {showBrand && vehicleBrand && (\n        <CompactChip\n          label={vehicleBrand}\n          size=\"small\"\n          sx={{\n            position: 'absolute',\n            top: 8,\n            left: 8,\n            backgroundColor: 'rgba(0,0,0,0.7)',\n            color: 'white',\n            fontSize: '0.7rem',\n            '& .MuiChip-label': {\n              px: 1,\n            },\n          }}\n        />\n      )}\n\n      {/* Vehicle Type Badge */}\n      {showType && (\n        <Box\n          sx={{\n            position: 'absolute',\n            top: 8,\n            right: 8,\n            backgroundColor: 'rgba(255,255,255,0.9)',\n            borderRadius: 1,\n            p: 0.5,\n            display: 'flex',\n            alignItems: 'center',\n            color: 'text.secondary',\n          }}\n        >\n          {getVehicleTypeIcon()}\n        </Box>\n      )}\n    </Box>\n  );\n};\n\n// Export with memo for performance\nexport default memo(VehicleImage, (prevProps, nextProps) => {\n  // Custom comparison to prevent unnecessary re-renders\n  return (\n    prevProps.vehicleId === nextProps.vehicleId &&\n    prevProps.size === nextProps.size &&\n    prevProps.vehicleBrand === nextProps.vehicleBrand &&\n    prevProps.vehicleModel === nextProps.vehicleModel &&\n    prevProps.width === nextProps.width &&\n    prevProps.height === nextProps.height &&\n    prevProps.showBrand === nextProps.showBrand &&\n    prevProps.showType === nextProps.showType\n  );\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/VehicleListNew.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/components/InvestorCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tooltip' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardContent' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":14}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Add as AddIcon, Edit as EditIcon } from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Typography,\n  IconButton,\n  Tooltip,\n  Chip,\n  Card,\n  CardContent,\n  Collapse,\n  TextField,\n  Grid,\n} from '@mui/material';\nimport React, { useState } from 'react';\n\nimport type { InvestorCardProps } from '../../../types/vehicle-types';\nimport { getApiBaseUrl } from '../../../utils/apiUrl';\n\n// ü§ù INVESTOR CARD COMPONENT - Rozbaliteƒæn√° karta spoluinvestora s podielmi\nconst InvestorCard: React.FC<InvestorCardProps> = ({\n  investor,\n  shares,\n  companies,\n  onShareUpdate,\n  onAssignShare,\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [editData, setEditData] = useState({\n    firstName: investor.firstName || '',\n    lastName: investor.lastName || '',\n    email: investor.email || '',\n    phone: investor.phone || '',\n    notes: investor.notes || '',\n  });\n\n  const handleSaveInvestorData = async () => {\n    try {\n      console.log('üíæ Saving investor data:', investor.id, editData);\n\n      const response = await fetch(\n        `${getApiBaseUrl()}/company-investors/${investor.id}`,\n        {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('blackrent_token')}`,\n          },\n          body: JSON.stringify(editData),\n        }\n      );\n\n      const result = await response.json();\n\n      if (result.success) {\n        console.log('‚úÖ Investor data saved successfully');\n        setEditMode(false);\n        onShareUpdate(); // Refresh data\n      } else {\n        console.error('‚ùå Failed to save investor data:', result.error);\n        alert(`Chyba pri ukladan√≠: ${result.error}`);\n      }\n    } catch (error) {\n      console.error('‚ùå Error saving investor data:', error);\n      alert('Chyba pri ukladan√≠ √∫dajov investora');\n    }\n  };\n\n  const totalOwnership = shares.reduce(\n    (sum, share) => sum + share.ownershipPercentage,\n    0\n  );\n\n  return (\n    <Card sx={{ mb: 2, border: '1px solid', borderColor: 'divider' }}>\n      {/* Header - Investor info */}\n      <Box\n        sx={{\n          p: 2,\n          bgcolor: 'grey.50',\n          cursor: 'pointer',\n          '&:hover': { bgcolor: 'grey.100' },\n        }}\n        onClick={() => setExpanded(!expanded)}\n      >\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n          }}\n        >\n          <Box sx={{ flex: 1 }}>\n            <Typography\n              variant=\"h6\"\n              sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n            >\n              üë§ {investor.firstName} {investor.lastName}\n              <Chip\n                label={`${shares.length} firiem ‚Ä¢ ${totalOwnership.toFixed(1)}% celkom`}\n                size=\"small\"\n                color=\"primary\"\n                variant=\"outlined\"\n              />\n            </Typography>\n\n            <Box sx={{ mt: 1, display: 'flex', gap: 3, flexWrap: 'wrap' }}>\n              {investor.email && (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  üìß {investor.email}\n                </Typography>\n              )}\n              {investor.phone && (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  üìû {investor.phone}\n                </Typography>\n              )}\n              {shares.length > 0 && (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  üè¢{' '}\n                  {shares\n                    .map(s => {\n                      const company = companies.find(c => c.id === s.companyId);\n                      return `${company?.name} (${s.ownershipPercentage}%)`;\n                    })\n                    .join(', ')}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <IconButton\n              size=\"small\"\n              onClick={e => {\n                e.stopPropagation();\n                setEditMode(!editMode);\n              }}\n              sx={{\n                bgcolor: editMode ? 'primary.main' : 'transparent',\n                color: editMode ? 'white' : 'primary.main',\n              }}\n            >\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n            <IconButton size=\"small\">{expanded ? 'üîΩ' : '‚ñ∂Ô∏è'}</IconButton>\n          </Box>\n        </Box>\n      </Box>\n\n      {/* Edit Mode */}\n      <Collapse in={editMode}>\n        <Box\n          sx={{\n            p: 3,\n            bgcolor: 'background.paper',\n            borderTop: '1px solid',\n            borderColor: 'divider',\n          }}\n        >\n          <Typography variant=\"h6\" sx={{ mb: 2 }}>\n            ‚úèÔ∏è √öprava spoluinvestora\n          </Typography>\n\n          <Grid container spacing={2}>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Meno\"\n                value={editData.firstName}\n                onChange={e =>\n                  setEditData(prev => ({ ...prev, firstName: e.target.value }))\n                }\n                size=\"small\"\n                required\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Priezvisko\"\n                value={editData.lastName}\n                onChange={e =>\n                  setEditData(prev => ({ ...prev, lastName: e.target.value }))\n                }\n                size=\"small\"\n                required\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Email\"\n                type=\"email\"\n                value={editData.email}\n                onChange={e =>\n                  setEditData(prev => ({ ...prev, email: e.target.value }))\n                }\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Telef√≥n\"\n                value={editData.phone}\n                onChange={e =>\n                  setEditData(prev => ({ ...prev, phone: e.target.value }))\n                }\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"Pozn√°mky\"\n                value={editData.notes}\n                onChange={e =>\n                  setEditData(prev => ({ ...prev, notes: e.target.value }))\n                }\n                size=\"small\"\n                multiline\n                rows={2}\n              />\n            </Grid>\n          </Grid>\n\n          <Box\n            sx={{ mt: 2, display: 'flex', gap: 1, justifyContent: 'flex-end' }}\n          >\n            <Button\n              variant=\"outlined\"\n              onClick={() => setEditMode(false)}\n              size=\"small\"\n            >\n              Zru≈°i≈•\n            </Button>\n            <Button\n              variant=\"contained\"\n              onClick={handleSaveInvestorData}\n              size=\"small\"\n            >\n              üíæ Ulo≈æi≈•\n            </Button>\n          </Box>\n        </Box>\n      </Collapse>\n\n      {/* Podiely vo firm√°ch - Rozbaliteƒæn√© */}\n      <Collapse in={expanded}>\n        <Box sx={{ p: 2, borderTop: '1px solid', borderColor: 'divider' }}>\n          <Typography\n            variant=\"subtitle1\"\n            sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n          >\n            üíº Podiely vo firm√°ch ({shares.length})\n          </Typography>\n\n          {shares.length > 0 ? (\n            shares.map(share => {\n              const company = companies.find(c => c.id === share.companyId);\n              return (\n                <Box\n                  key={share.id}\n                  sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    p: 2,\n                    mb: 1,\n                    border: '1px solid',\n                    borderColor: 'divider',\n                    borderRadius: 1,\n                    bgcolor: 'background.paper',\n                    '&:hover': {\n                      bgcolor: 'action.hover',\n                    },\n                  }}\n                >\n                  <Box sx={{ flex: 1 }}>\n                    <Typography variant=\"subtitle2\">\n                      üè¢ {company?.name || 'Nezn√°ma firma'}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      üí∞ Podiel: {share.ownershipPercentage}%\n                      {share.investmentAmount &&\n                        ` ‚Ä¢ Invest√≠cia: ${share.investmentAmount}‚Ç¨`}\n                      {share.isPrimaryContact && ' ‚Ä¢ Prim√°rny kontakt'}\n                    </Typography>\n                  </Box>\n\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <Chip\n                      label={`${share.ownershipPercentage}%`}\n                      color=\"primary\"\n                      size=\"small\"\n                      variant={share.isPrimaryContact ? 'filled' : 'outlined'}\n                    />\n                  </Box>\n                </Box>\n              );\n            })\n          ) : (\n            <Typography\n              variant=\"body2\"\n              color=\"text.secondary\"\n              sx={{ textAlign: 'center', py: 2 }}\n            >\n              ≈Ωiadne podiely vo firm√°ch. Investor nie je priraden√Ω k ≈æiadnej\n              firme.\n            </Typography>\n          )}\n\n          {/* Tlaƒçidlo pre pridanie nov√©ho podielu */}\n          <Box sx={{ mt: 2, textAlign: 'center' }}>\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              startIcon={<AddIcon />}\n              onClick={() => onAssignShare(investor)}\n            >\n              üè¢ Priradi≈• k firme\n            </Button>\n          </Box>\n        </Box>\n      </Collapse>\n    </Card>\n  );\n};\n\nexport default InvestorCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/components/OwnerCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tooltip' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardContent' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Vehicle' is defined but never used.","line":20,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'VehicleStatus' is defined but never used.","line":20,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1104,1107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1104,1107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has a missing dependency: 'loadCompanyInvestors'. Either include it or remove the dependency array.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [expanded, loadCompanyInvestors]","fix":{"range":[2897,2907],"text":"[expanded, loadCompanyInvestors]"}}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Edit as EditIcon,\n  Business as BusinessIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Typography,\n  IconButton,\n  Tooltip,\n  Chip,\n  Card,\n  CardContent,\n  Collapse,\n  TextField,\n  Grid,\n} from '@mui/material';\nimport React, { useState, useEffect } from 'react';\n\nimport { Vehicle, VehicleStatus } from '../../../types';\nimport type { OwnerCardProps } from '../../../types/vehicle-types';\nimport { getApiBaseUrl } from '../../../utils/apiUrl';\nimport {\n  getStatusColor,\n  getStatusText,\n} from '../../../utils/vehicles/vehicleHelpers';\nimport { EnhancedLoading } from '../../common/EnhancedLoading';\nimport { Can } from '../../common/PermissionGuard';\nimport CompanyDocumentManager from '../../companies/CompanyDocumentManager';\n\n// üÜï OWNER CARD COMPONENT - Rozbaliteƒæn√° karta majiteƒæa s vozidlami\nconst OwnerCard: React.FC<OwnerCardProps> = ({\n  company,\n  vehicles,\n  onVehicleUpdate,\n  onVehicleEdit,\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [companyInvestors, setCompanyInvestors] = useState<any[]>([]);\n  const [loadingInvestors, setLoadingInvestors] = useState(false);\n  const [editData, setEditData] = useState({\n    name: company.name || '',\n    ownerName: company.ownerName || '',\n    personalIban: company.personalIban || '',\n    businessIban: company.businessIban || '',\n    contactEmail: company.contactEmail || '',\n    contactPhone: company.contactPhone || '',\n    defaultCommissionRate: company.defaultCommissionRate || 20,\n    protocolDisplayName: company.protocolDisplayName || '',\n  });\n\n  // üîÑ Aktualizuj editData keƒè sa company data zmenia\n  useEffect(() => {\n    setEditData({\n      name: company.name || '',\n      ownerName: company.ownerName || '',\n      personalIban: company.personalIban || '',\n      businessIban: company.businessIban || '',\n      contactEmail: company.contactEmail || '',\n      contactPhone: company.contactPhone || '',\n      defaultCommissionRate: company.defaultCommissionRate || 20,\n      protocolDisplayName: company.protocolDisplayName || '',\n    });\n  }, [company]);\n\n  // ü§ù Naƒç√≠tanie investorov firmy\n  const loadCompanyInvestors = async () => {\n    try {\n      setLoadingInvestors(true);\n\n      const response = await fetch(\n        `${getApiBaseUrl()}/company-investors/${company.id}/shares`,\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('blackrent_token')}`,\n          },\n        }\n      );\n\n      const result = await response.json();\n\n      if (result.success) {\n        setCompanyInvestors(result.data);\n      }\n    } catch (error) {\n      console.error('‚ùå Error loading company investors:', error);\n    } finally {\n      setLoadingInvestors(false);\n    }\n  };\n\n  // Naƒç√≠taj investorov pri rozbalen√≠ karty\n  useEffect(() => {\n    if (expanded) {\n      loadCompanyInvestors();\n    }\n  }, [expanded]);\n\n  const handleSaveOwnerData = async () => {\n    try {\n      console.log('üíæ Saving owner data for company:', company.id, editData);\n\n      const response = await fetch(\n        `${getApiBaseUrl()}/companies/${company.id}`,\n        {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${localStorage.getItem('blackrent_token')}`,\n          },\n          body: JSON.stringify(editData),\n        }\n      );\n\n      const result = await response.json();\n\n      if (result.success) {\n        console.log('‚úÖ Owner data saved successfully');\n        setEditMode(false);\n        // Refresh companies data cez callback\n        if (onVehicleUpdate) {\n          await onVehicleUpdate('', company.id); // Refresh company data\n        }\n      } else {\n        console.error('‚ùå Failed to save owner data:', result.error);\n        alert(`Chyba pri ukladan√≠: ${result.error}`);\n      }\n    } catch (error) {\n      console.error('‚ùå Error saving owner data:', error);\n      alert('Chyba pri ukladan√≠ √∫dajov majiteƒæa');\n    }\n  };\n\n  return (\n    <Card sx={{ mb: 2, border: '1px solid', borderColor: 'divider' }}>\n      {/* Header - Majiteƒæ info */}\n      <Box\n        sx={{\n          p: 2,\n          bgcolor: 'grey.50',\n          cursor: 'pointer',\n          '&:hover': { bgcolor: 'grey.100' },\n        }}\n        onClick={() => setExpanded(!expanded)}\n      >\n        <Box\n          sx={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n          }}\n        >\n          <Box sx={{ flex: 1 }}>\n            <Typography\n              variant=\"h6\"\n              sx={{ display: 'flex', alignItems: 'center', gap: 1 }}\n            >\n              <BusinessIcon color=\"primary\" />\n              {company.name}\n              <Chip\n                label={`${vehicles.length} vozidiel`}\n                size=\"small\"\n                color=\"primary\"\n                variant=\"outlined\"\n              />\n            </Typography>\n\n            {/* Z√°kladn√© info o majiteƒæovi */}\n            <Box sx={{ mt: 1, display: 'flex', gap: 3, flexWrap: 'wrap' }}>\n              {company.ownerName && (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  üë§ {company.ownerName}\n                </Typography>\n              )}\n              {company.contactEmail && (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  üìß {company.contactEmail}\n                </Typography>\n              )}\n              {company.contactPhone && (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  üìû {company.contactPhone}\n                </Typography>\n              )}\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                üí∞ Prov√≠zia: {company.defaultCommissionRate || 20}%\n              </Typography>\n              {company.protocolDisplayName && (\n                <Typography\n                  variant=\"body2\"\n                  sx={{ color: 'warning.main', fontWeight: 'medium' }}\n                >\n                  üìÑ Fakturaƒçn√° firma: {company.protocolDisplayName}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <IconButton\n              size=\"small\"\n              onClick={e => {\n                e.stopPropagation();\n                setEditMode(!editMode);\n              }}\n              sx={{\n                bgcolor: editMode ? 'primary.main' : 'transparent',\n                color: editMode ? 'white' : 'primary.main',\n              }}\n            >\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n            <IconButton size=\"small\">{expanded ? 'üîΩ' : '‚ñ∂Ô∏è'}</IconButton>\n          </Box>\n        </Box>\n      </Box>\n\n      {/* Edit Mode - Roz≈°√≠ren√© inform√°cie */}\n      <Collapse in={editMode}>\n        <Box\n          sx={{\n            p: 3,\n            bgcolor: 'background.paper',\n            borderTop: '1px solid',\n            borderColor: 'divider',\n          }}\n        >\n          <Typography variant=\"h6\" sx={{ mb: 2 }}>\n            ‚úèÔ∏è √öprava inform√°ci√≠ majiteƒæa\n          </Typography>\n\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"N√°zov firmy/s.r.o.\"\n                value={editData.name}\n                onChange={e =>\n                  setEditData(prev => ({ ...prev, name: e.target.value }))\n                }\n                size=\"small\"\n                required\n                sx={{ bgcolor: 'primary.50' }}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Meno a priezvisko majiteƒæa\"\n                value={editData.ownerName}\n                onChange={e =>\n                  setEditData(prev => ({ ...prev, ownerName: e.target.value }))\n                }\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Kontaktn√Ω email\"\n                type=\"email\"\n                value={editData.contactEmail}\n                onChange={e =>\n                  setEditData(prev => ({\n                    ...prev,\n                    contactEmail: e.target.value,\n                  }))\n                }\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Kontaktn√Ω telef√≥n\"\n                value={editData.contactPhone}\n                onChange={e =>\n                  setEditData(prev => ({\n                    ...prev,\n                    contactPhone: e.target.value,\n                  }))\n                }\n                size=\"small\"\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Default prov√≠zia (%)\"\n                type=\"number\"\n                value={editData.defaultCommissionRate}\n                onChange={e =>\n                  setEditData(prev => ({\n                    ...prev,\n                    defaultCommissionRate: parseFloat(e.target.value) || 20,\n                  }))\n                }\n                size=\"small\"\n                inputProps={{ min: 0, max: 100, step: 0.1 }}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"S√∫kromn√Ω IBAN\"\n                value={editData.personalIban}\n                onChange={e =>\n                  setEditData(prev => ({\n                    ...prev,\n                    personalIban: e.target.value,\n                  }))\n                }\n                size=\"small\"\n                placeholder=\"SK89 0000 0000 0000 0000 0000\"\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Firemn√Ω IBAN\"\n                value={editData.businessIban}\n                onChange={e =>\n                  setEditData(prev => ({\n                    ...prev,\n                    businessIban: e.target.value,\n                  }))\n                }\n                size=\"small\"\n                placeholder=\"SK89 0000 0000 0000 0000 0000\"\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"Fakturaƒçn√° firma (pre protokoly)\"\n                value={editData.protocolDisplayName}\n                onChange={e =>\n                  setEditData(prev => ({\n                    ...prev,\n                    protocolDisplayName: e.target.value,\n                  }))\n                }\n                size=\"small\"\n                placeholder=\"Napr. P2 invest s.r.o.\"\n                helperText=\"N√°zov firmy ktor√Ω sa zobraz√≠ na protokoloch namiesto intern√©ho n√°zvu\"\n                sx={{ bgcolor: 'warning.50' }}\n              />\n            </Grid>\n          </Grid>\n\n          <Box\n            sx={{ mt: 2, display: 'flex', gap: 1, justifyContent: 'flex-end' }}\n          >\n            <Button\n              variant=\"outlined\"\n              onClick={() => setEditMode(false)}\n              size=\"small\"\n            >\n              Zru≈°i≈•\n            </Button>\n            <Button\n              variant=\"contained\"\n              onClick={handleSaveOwnerData}\n              size=\"small\"\n            >\n              üíæ Ulo≈æi≈•\n            </Button>\n          </Box>\n        </Box>\n      </Collapse>\n\n      {/* Vozidl√° majiteƒæa - Rozbaliteƒæn√© */}\n      <Collapse in={expanded}>\n        <Box sx={{ p: 2, borderTop: '1px solid', borderColor: 'divider' }}>\n          <Typography\n            variant=\"subtitle1\"\n            sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n          >\n            üöó Vozidl√° majiteƒæa ({vehicles.length})\n          </Typography>\n\n          {vehicles.map(vehicle => (\n            <Box\n              key={vehicle.id}\n              sx={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                p: 2,\n                mb: 1,\n                border: '1px solid',\n                borderColor: 'divider',\n                borderRadius: 1,\n                bgcolor: 'background.paper',\n                '&:hover': {\n                  bgcolor: 'action.hover',\n                },\n              }}\n            >\n              <Box sx={{ flex: 1 }}>\n                <Typography variant=\"subtitle2\">\n                  {vehicle.brand} {vehicle.model}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  ≈†PZ: {vehicle.licensePlate}\n                  {vehicle.year && ` ‚Ä¢ Rok: ${vehicle.year}`}\n                </Typography>\n\n                {/* Individu√°lna prov√≠zia vozidla */}\n                <Typography variant=\"caption\" color=\"text.secondary\">\n                  Prov√≠zia:{' '}\n                  {vehicle.commission?.value ||\n                    company.defaultCommissionRate ||\n                    20}\n                  %\n                  {vehicle.commission?.value !==\n                    company.defaultCommissionRate && (\n                    <Chip\n                      label=\"Vlastn√°\"\n                      size=\"small\"\n                      sx={{ ml: 1, height: 16 }}\n                    />\n                  )}\n                </Typography>\n              </Box>\n\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                <Chip\n                  label={getStatusText(vehicle.status)}\n                  color={getStatusColor(vehicle.status)}\n                  size=\"small\"\n                />\n\n                {/* Quick actions */}\n                <Can\n                  update=\"vehicles\"\n                  context={{\n                    resourceOwnerId: vehicle.assignedMechanicId,\n                    resourceCompanyId: vehicle.ownerCompanyId,\n                  }}\n                >\n                  <IconButton\n                    size=\"small\"\n                    onClick={e => {\n                      e.stopPropagation();\n                      onVehicleEdit(vehicle);\n                    }}\n                    sx={{\n                      bgcolor: '#2196f3',\n                      color: 'white',\n                      width: 28,\n                      height: 28,\n                      '&:hover': { bgcolor: '#1976d2' },\n                    }}\n                  >\n                    <EditIcon fontSize=\"small\" />\n                  </IconButton>\n                </Can>\n              </Box>\n            </Box>\n          ))}\n\n          {/* Spoluinvestori firmy */}\n          <Box\n            sx={{\n              mt: 3,\n              pt: 2,\n              borderTop: '1px solid',\n              borderColor: 'divider',\n            }}\n          >\n            <Typography\n              variant=\"subtitle1\"\n              sx={{ mb: 2, display: 'flex', alignItems: 'center', gap: 1 }}\n            >\n              ü§ù Spoluinvestori firmy\n            </Typography>\n\n            {loadingInvestors ? (\n              <Box sx={{ display: 'flex', justifyContent: 'center', py: 2 }}>\n                <EnhancedLoading\n                  variant=\"page\"\n                  showMessage={true}\n                  message=\"Naƒç√≠tavam investorov...\"\n                />\n              </Box>\n            ) : companyInvestors.length > 0 ? (\n              companyInvestors.map(share => (\n                <Box\n                  key={share.id}\n                  sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    p: 2,\n                    mb: 1,\n                    border: '1px solid',\n                    borderColor: 'divider',\n                    borderRadius: 1,\n                    bgcolor: 'primary.50',\n                    '&:hover': {\n                      bgcolor: 'primary.100',\n                    },\n                  }}\n                >\n                  <Box sx={{ flex: 1 }}>\n                    <Typography variant=\"subtitle2\">\n                      üë§ {share.investor?.firstName} {share.investor?.lastName}\n                      {share.isPrimaryContact && (\n                        <Chip\n                          label=\"Prim√°rny kontakt\"\n                          size=\"small\"\n                          color=\"primary\"\n                          sx={{ ml: 1 }}\n                        />\n                      )}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {share.investor?.email && `üìß ${share.investor.email}`}\n                      {share.investor?.phone && ` ‚Ä¢ üìû ${share.investor.phone}`}\n                    </Typography>\n                    {share.investmentAmount && (\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        üí∞ Invest√≠cia: {share.investmentAmount}‚Ç¨\n                      </Typography>\n                    )}\n                  </Box>\n\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <Chip\n                      label={`${share.ownershipPercentage}%`}\n                      color=\"primary\"\n                      size=\"small\"\n                      variant={share.isPrimaryContact ? 'filled' : 'outlined'}\n                    />\n                  </Box>\n                </Box>\n              ))\n            ) : (\n              <Typography\n                variant=\"body2\"\n                color=\"text.secondary\"\n                sx={{ textAlign: 'center', py: 2 }}\n              >\n                ≈Ωiadni spoluinvestori pre t√∫to firmu.\n              </Typography>\n            )}\n          </Box>\n\n          {/* üìÑ NOV√â: Dokumenty majiteƒæa */}\n          <CompanyDocumentManager\n            companyId={company.id}\n            companyName={company.name}\n          />\n        </Box>\n      </Collapse>\n    </Card>\n  );\n};\n\nexport default OwnerCard;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/components/VehicleActions.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Typography' is defined but never used.","line":2,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Add as AddIcon } from '@mui/icons-material';\nimport { Box, Button, Typography } from '@mui/material';\nimport React from 'react';\n\nimport { Can } from '../../common/PermissionGuard';\n\ninterface VehicleActionsProps {\n  loading: boolean;\n  isMobile: boolean;\n  onAddVehicle: () => void;\n  onCreateCompany: () => void;\n  onCreateInvestor: () => void;\n}\n\nconst VehicleActions: React.FC<VehicleActionsProps> = ({\n  loading,\n  isMobile,\n  onAddVehicle,\n  onCreateCompany,\n  onCreateInvestor,\n}) => {\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: isMobile ? 'column' : 'row',\n        gap: 2,\n        alignItems: isMobile ? 'stretch' : 'center',\n        mb: 3,\n      }}\n    >\n      {/* Add Vehicle Button */}\n      <Can create=\"vehicles\">\n        <Button\n          variant=\"contained\"\n          startIcon={<AddIcon />}\n          onClick={onAddVehicle}\n          disabled={loading}\n          sx={{\n            bgcolor: '#1976d2',\n            '&:hover': { bgcolor: '#1565c0' },\n            borderRadius: 2,\n            px: 3,\n            py: 1,\n          }}\n        >\n          Nov√© vozidlo\n        </Button>\n      </Can>\n\n      {/* Create Company Button */}\n      <Button\n        variant=\"outlined\"\n        startIcon={<AddIcon />}\n        onClick={onCreateCompany}\n        disabled={loading}\n        sx={{\n          borderColor: '#2196f3',\n          color: '#2196f3',\n          '&:hover': {\n            borderColor: '#1976d2',\n            color: '#1976d2',\n            bgcolor: 'rgba(33, 150, 243, 0.04)',\n          },\n          borderRadius: 2,\n          px: 3,\n        }}\n      >\n        üè¢ Prida≈• firmu\n      </Button>\n\n      {/* Create Investor Button */}\n      <Button\n        variant=\"outlined\"\n        startIcon={<AddIcon />}\n        onClick={onCreateInvestor}\n        disabled={loading}\n        sx={{\n          borderColor: '#2196f3',\n          color: '#2196f3',\n          '&:hover': {\n            borderColor: '#1976d2',\n            color: '#1976d2',\n            bgcolor: 'rgba(33, 150, 243, 0.04)',\n          },\n          borderRadius: 2,\n          px: 3,\n        }}\n      >\n        üë§ Prida≈• spoluinvestora\n      </Button>\n    </Box>\n  );\n};\n\nexport default VehicleActions;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/components/VehicleDialogs.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[782,785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[782,785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1664,1667],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1664,1667],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1822,1825],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1822,1825],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1945,1948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1945,1948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Add as AddIcon } from '@mui/icons-material';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  Typography,\n  Grid,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  useMediaQuery,\n  useTheme,\n} from '@mui/material';\nimport { format } from 'date-fns';\nimport { sk } from 'date-fns/locale';\nimport React from 'react';\n\nimport type { Vehicle } from '../../../types';\nimport VehicleForm from '../VehicleForm';\n\ninterface VehicleDialogsProps {\n  // Vehicle Form Dialog\n  openDialog: boolean;\n  editingVehicle: Vehicle | null;\n  onCloseDialog: () => void;\n  onSubmit: (vehicle: Vehicle) => Promise<void>;\n\n  // Ownership History Dialog\n  ownershipHistoryDialog: boolean;\n  selectedVehicleHistory: Vehicle | null;\n  ownershipHistory: any[];\n  onCloseOwnershipHistory: () => void;\n\n  // Create Company Dialog\n  createCompanyDialogOpen: boolean;\n  newCompanyData: {\n    name: string;\n    ownerName: string;\n    personalIban: string;\n    businessIban: string;\n    contactEmail: string;\n    contactPhone: string;\n    defaultCommissionRate: number;\n    isActive: boolean;\n  };\n  onCloseCreateCompany: () => void;\n  onCreateCompany: () => Promise<void>;\n  onCompanyDataChange: (field: string, value: string) => void;\n\n  // Create Investor Dialog\n  createInvestorDialogOpen: boolean;\n  newInvestorData: {\n    firstName: string;\n    lastName: string;\n    email: string;\n    phone: string;\n  };\n  onCloseCreateInvestor: () => void;\n  onCreateInvestor: () => Promise<void>;\n  onInvestorDataChange: (field: string, value: string) => void;\n\n  // Assign Share Dialog\n  assignShareDialogOpen: boolean;\n  selectedInvestorForShare: any;\n  newShareData: {\n    companyId: string;\n    ownershipPercentage: number;\n    investmentAmount: number;\n    isPrimaryContact: boolean;\n  };\n  companies: any[];\n  onCloseAssignShare: () => void;\n  onAssignShare: () => Promise<void>;\n  onShareDataChange: (field: string, value: any) => void;\n}\n\nconst VehicleDialogs: React.FC<VehicleDialogsProps> = ({\n  // Vehicle Form Dialog\n  openDialog,\n  editingVehicle,\n  onCloseDialog,\n  onSubmit,\n\n  // Ownership History Dialog\n  ownershipHistoryDialog,\n  selectedVehicleHistory,\n  ownershipHistory,\n  onCloseOwnershipHistory,\n\n  // Create Company Dialog\n  createCompanyDialogOpen,\n  newCompanyData,\n  onCloseCreateCompany,\n  onCreateCompany,\n  onCompanyDataChange,\n\n  // Create Investor Dialog\n  createInvestorDialogOpen,\n  newInvestorData,\n  onCloseCreateInvestor,\n  onCreateInvestor,\n  onInvestorDataChange,\n\n  // Assign Share Dialog\n  assignShareDialogOpen,\n  selectedInvestorForShare,\n  newShareData,\n  companies,\n  onCloseAssignShare,\n  onAssignShare,\n  onShareDataChange,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  return (\n    <>\n      {/* Vehicle Form Dialog */}\n      <Dialog\n        open={openDialog}\n        onClose={onCloseDialog}\n        maxWidth=\"md\"\n        fullWidth\n        fullScreen={isMobile}\n      >\n        <DialogTitle>\n          {editingVehicle ? 'Upravi≈• vozidlo' : 'Nov√© vozidlo'}\n        </DialogTitle>\n        <DialogContent>\n          <VehicleForm\n            vehicle={editingVehicle}\n            onSave={onSubmit}\n            onCancel={onCloseDialog}\n          />\n        </DialogContent>\n      </Dialog>\n\n      {/* Ownership History Dialog */}\n      <Dialog\n        open={ownershipHistoryDialog}\n        onClose={onCloseOwnershipHistory}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          Hist√≥ria transferov vlastn√≠ctva\n          {selectedVehicleHistory && (\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              {selectedVehicleHistory.brand} {selectedVehicleHistory.model} -{' '}\n              {selectedVehicleHistory.licensePlate}\n            </Typography>\n          )}\n        </DialogTitle>\n        <DialogContent>\n          {ownershipHistory.length === 0 ? (\n            <Typography>≈Ωiadna hist√≥ria transferov</Typography>\n          ) : (\n            ownershipHistory.map((transfer, index) => (\n              <div\n                key={index}\n                style={{\n                  marginBottom: '16px',\n                  padding: '16px',\n                  border: '1px solid #e0e0e0',\n                  borderRadius: '8px',\n                }}\n              >\n                <Typography variant=\"subtitle2\">\n                  Transfer #{index + 1}\n                </Typography>\n                <Typography variant=\"body2\">\n                  <strong>Z:</strong> {transfer.fromCompany || 'N/A'}\n                </Typography>\n                <Typography variant=\"body2\">\n                  <strong>Na:</strong> {transfer.toCompany || 'N/A'}\n                </Typography>\n                <Typography variant=\"body2\">\n                  <strong>D√°tum:</strong>{' '}\n                  {transfer.transferDate\n                    ? format(\n                        new Date(transfer.transferDate),\n                        'dd.MM.yyyy HH:mm',\n                        { locale: sk }\n                      )\n                    : 'N/A'}\n                </Typography>\n                <Typography variant=\"body2\">\n                  <strong>Pozn√°mka:</strong>{' '}\n                  {transfer.notes || '≈Ωiadna pozn√°mka'}\n                </Typography>\n              </div>\n            ))\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Create Company Dialog */}\n      <Dialog\n        open={createCompanyDialogOpen}\n        onClose={onCloseCreateCompany}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>üè¢ Prida≈• nov√∫ firmu</DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"N√°zov firmy\"\n                value={newCompanyData.name}\n                onChange={e => onCompanyDataChange('name', e.target.value)}\n                required\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Meno majiteƒæa\"\n                value={newCompanyData.ownerName}\n                onChange={e => onCompanyDataChange('ownerName', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Email\"\n                type=\"email\"\n                value={newCompanyData.contactEmail}\n                onChange={e =>\n                  onCompanyDataChange('contactEmail', e.target.value)\n                }\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Telef√≥n\"\n                value={newCompanyData.contactPhone}\n                onChange={e =>\n                  onCompanyDataChange('contactPhone', e.target.value)\n                }\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Osobn√Ω IBAN\"\n                value={newCompanyData.personalIban}\n                onChange={e =>\n                  onCompanyDataChange('personalIban', e.target.value)\n                }\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Firemn√Ω IBAN\"\n                value={newCompanyData.businessIban}\n                onChange={e =>\n                  onCompanyDataChange('businessIban', e.target.value)\n                }\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"Prov√≠zia (%)\"\n                type=\"number\"\n                value={newCompanyData.defaultCommissionRate}\n                onChange={e =>\n                  onCompanyDataChange('defaultCommissionRate', e.target.value)\n                }\n                inputProps={{ min: 0, max: 100, step: 0.1 }}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onCloseCreateCompany}>Zru≈°i≈•</Button>\n          <Button\n            variant=\"contained\"\n            onClick={onCreateCompany}\n            disabled={!newCompanyData.name.trim()}\n            startIcon={<AddIcon />}\n          >\n            Vytvori≈• firmu\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Create Investor Dialog */}\n      <Dialog\n        open={createInvestorDialogOpen}\n        onClose={onCloseCreateInvestor}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>üë§ Prida≈• spoluinvestora</DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Krstn√© meno\"\n                value={newInvestorData.firstName}\n                onChange={e =>\n                  onInvestorDataChange('firstName', e.target.value)\n                }\n                required\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Priezvisko\"\n                value={newInvestorData.lastName}\n                onChange={e => onInvestorDataChange('lastName', e.target.value)}\n                required\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Email\"\n                type=\"email\"\n                value={newInvestorData.email}\n                onChange={e => onInvestorDataChange('email', e.target.value)}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Telef√≥n\"\n                value={newInvestorData.phone}\n                onChange={e => onInvestorDataChange('phone', e.target.value)}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onCloseCreateInvestor}>Zru≈°i≈•</Button>\n          <Button\n            variant=\"contained\"\n            onClick={onCreateInvestor}\n            disabled={\n              !newInvestorData.firstName.trim() ||\n              !newInvestorData.lastName.trim()\n            }\n            startIcon={<AddIcon />}\n          >\n            Vytvori≈• spoluinvestora\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Assign Share Dialog */}\n      <Dialog\n        open={assignShareDialogOpen}\n        onClose={onCloseAssignShare}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <DialogTitle>\n          üè¢ Priradi≈• podiel k firme\n          {selectedInvestorForShare && (\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              {selectedInvestorForShare.firstName}{' '}\n              {selectedInvestorForShare.lastName}\n            </Typography>\n          )}\n        </DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12}>\n              <FormControl fullWidth required>\n                <InputLabel>Firma</InputLabel>\n                <Select\n                  value={newShareData.companyId}\n                  label=\"Firma\"\n                  onChange={e => onShareDataChange('companyId', e.target.value)}\n                >\n                  {companies\n                    ?.filter(c => c.isActive !== false)\n                    .map(company => (\n                      <MenuItem key={company.id} value={company.id}>\n                        {company.name}\n                      </MenuItem>\n                    ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Podiel vlastn√≠ctva (%)\"\n                type=\"number\"\n                value={newShareData.ownershipPercentage}\n                onChange={e =>\n                  onShareDataChange(\n                    'ownershipPercentage',\n                    parseFloat(e.target.value) || 0\n                  )\n                }\n                inputProps={{ min: 0, max: 100, step: 0.1 }}\n                required\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Investiƒçn√° suma (‚Ç¨)\"\n                type=\"number\"\n                value={newShareData.investmentAmount}\n                onChange={e =>\n                  onShareDataChange(\n                    'investmentAmount',\n                    parseFloat(e.target.value) || 0\n                  )\n                }\n                inputProps={{ min: 0, step: 0.01 }}\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onCloseAssignShare}>Zru≈°i≈•</Button>\n          <Button\n            variant=\"contained\"\n            onClick={onAssignShare}\n            disabled={\n              !newShareData.companyId || newShareData.ownershipPercentage <= 0\n            }\n            startIcon={<AddIcon />}\n          >\n            Priradi≈• podiel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nexport default VehicleDialogs;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/components/VehicleFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/components/VehicleImportExport.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1109,1112],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1109,1112],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":167,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5670,5673],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5670,5673],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":226,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7978,7981],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7978,7981],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { saveAs } from 'file-saver';\nimport Papa from 'papaparse';\nimport React from 'react';\n\nimport { apiService } from '../../../services/api';\nimport { SecondaryButton } from '../../ui';\n\ninterface VehicleImportExportProps {\n  loading: boolean;\n  setLoading: (loading: boolean) => void;\n  isMobile: boolean;\n}\n\nconst VehicleImportExport: React.FC<VehicleImportExportProps> = ({\n  loading,\n  setLoading,\n  isMobile,\n}) => {\n  // CSV Export funkcionalita\n  const handleExportCSV = async () => {\n    try {\n      const blob = await apiService.exportVehiclesCSV();\n      const filename = `vozidla-${new Date().toISOString().split('T')[0]}.csv`;\n      saveAs(blob, filename);\n\n      alert('CSV export √∫spe≈°n√Ω');\n    } catch (error) {\n      console.error('CSV export error:', error);\n      alert('Chyba pri CSV exporte');\n    }\n  };\n\n  // CSV Import funkcionalita\n  const handleImportCSV = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Zobraz loading state\n    setLoading(true);\n\n    Papa.parse(file, {\n      complete: async (results: any) => {\n        try {\n          // Zobraz poƒçet riadkov na spracovanie\n          const totalRows = results.data.length - 1; // -1 pre header\n          console.log(`üìä Spracov√°vam ${totalRows} vozidiel z CSV...`);\n\n          // Zobraz progress dialog\n          const progressDialog = window.confirm(\n            `üì• Zaƒç√≠nam import ${totalRows} vozidiel z CSV s√∫boru...\\n\\n` +\n              'Tento proces m√¥≈æe trva≈• niekoƒæko sek√∫nd.\\n' +\n              'Chcete pokraƒçova≈•?'\n          );\n\n          if (!progressDialog) {\n            setLoading(false);\n            return;\n          }\n\n          // üì¶ BATCH PROCESSING: Priprav vozidl√° pre batch import\n          const batchVehicles = [];\n\n          // Spracuj CSV d√°ta a vytvor vozidl√° pre batch import\n          const header = results.data[0];\n          const dataRows = results.data.slice(1);\n\n          for (const row of dataRows) {\n            const fieldMap: { [key: string]: string } = {};\n            header.forEach((headerName: string, index: number) => {\n              fieldMap[headerName] = row[index] || '';\n            });\n\n            // Mapovanie z√°kladn√Ωch pol√≠\n            const brand = fieldMap['brand'] || fieldMap['Znaƒçka'];\n            const model = fieldMap['model'] || fieldMap['Model'];\n            const licensePlate = fieldMap['licensePlate'] || fieldMap['≈†PZ'];\n            const company = fieldMap['company'] || fieldMap['Firma'];\n            const year = fieldMap['year'] || fieldMap['Rok'];\n            const status = fieldMap['status'] || fieldMap['Status'];\n            const stk = fieldMap['stk'] || fieldMap['STK'];\n\n            if (!brand || !model || !company) {\n              console.warn('‚ö†Ô∏è Preskakujem riadok - ch√Ωbaj√∫ povinn√© polia:', {\n                brand,\n                model,\n                company,\n              });\n              continue;\n            }\n\n            // Parsovanie cenotvorby\n            const pricing: Array<{\n              id: string;\n              minDays: number;\n              maxDays: number;\n              pricePerDay: number;\n            }> = [];\n\n            const priceColumns = [\n              { columns: ['cena_0_1', 'Cena_0-1_dni'], minDays: 0, maxDays: 1 },\n              { columns: ['cena_2_3', 'Cena_2-3_dni'], minDays: 2, maxDays: 3 },\n              { columns: ['cena_4_7', 'Cena_4-7_dni'], minDays: 4, maxDays: 7 },\n              {\n                columns: ['cena_8_14', 'Cena_8-14_dni'],\n                minDays: 8,\n                maxDays: 14,\n              },\n              {\n                columns: ['cena_15_22', 'Cena_15-22_dni'],\n                minDays: 15,\n                maxDays: 22,\n              },\n              {\n                columns: ['cena_23_30', 'Cena_23-30_dni'],\n                minDays: 23,\n                maxDays: 30,\n              },\n              {\n                columns: ['cena_31_9999', 'Cena_31+_dni'],\n                minDays: 31,\n                maxDays: 365,\n              },\n            ];\n\n            priceColumns.forEach((priceCol, index) => {\n              let priceValue = '';\n              for (const columnName of priceCol.columns) {\n                if (fieldMap[columnName]) {\n                  priceValue = fieldMap[columnName];\n                  break;\n                }\n              }\n\n              if (priceValue && !isNaN(parseFloat(priceValue))) {\n                pricing.push({\n                  id: (index + 1).toString(),\n                  minDays: priceCol.minDays,\n                  maxDays: priceCol.maxDays,\n                  pricePerDay: parseFloat(priceValue),\n                });\n              }\n            });\n\n            // Parsovanie prov√≠zie\n            const commissionType = (fieldMap['commissionType'] ||\n              fieldMap['Provizia_typ'] ||\n              'percentage') as 'percentage' | 'fixed';\n\n            const commissionValue =\n              fieldMap['commissionValue'] || fieldMap['Provizia_hodnota']\n                ? parseFloat(\n                    fieldMap['commissionValue'] || fieldMap['Provizia_hodnota']\n                  )\n                : 20;\n\n            // Vytvor vehicle data\n            const vehicleData = {\n              id: '', // Bude vygenerovan√© na backend\n              brand: brand.trim(),\n              model: model.trim(),\n              licensePlate: licensePlate?.trim() || '',\n              company: company.trim(),\n              year:\n                year && year.trim() && !isNaN(parseInt(year))\n                  ? parseInt(year)\n                  : 2024,\n              status: (status?.trim() || 'available') as any,\n              stk: stk && stk.trim() ? new Date(stk.trim()) : undefined,\n              pricing: pricing,\n              commission: {\n                type: commissionType,\n                value: commissionValue,\n              },\n            };\n\n            batchVehicles.push(vehicleData);\n          }\n\n          console.log(\n            `üì¶ Pripraven√Ωch ${batchVehicles.length} vozidiel pre batch import`\n          );\n\n          // Pou≈æij batch import namiesto CSV importu\n          const result = await apiService.batchImportVehicles(batchVehicles);\n\n          console.log('üì• CSV Import result:', result);\n\n          // Result u≈æ obsahuje priamo d√°ta, nie je wrapped v success/data\n          const {\n            created,\n            updated,\n            errorsCount,\n            successRate,\n            processed,\n            total,\n          } = result;\n\n          if (created > 0 || updated > 0) {\n            alert(\n              `üöÄ BATCH IMPORT √öSPE≈†N√ù!\\n\\nüìä V√Ωsledky:\\n‚Ä¢ Vytvoren√Ωch: ${created}\\n‚Ä¢ Aktualizovan√Ωch: ${updated}\\n‚Ä¢ Spracovan√Ωch: ${processed}/${total}\\n‚Ä¢ Ch√Ωb: ${errorsCount}\\n‚Ä¢ √öspe≈°nos≈•: ${successRate}\\n\\nStr√°nka sa obnov√≠ za 3 sekundy...`\n            );\n            setTimeout(() => window.location.reload(), 3000);\n          } else if (errorsCount > 0) {\n            alert(\n              `‚ö†Ô∏è Import dokonƒçen√Ω, ale ≈æiadne vozidl√° neboli pridan√©.\\n\\nüìä V√Ωsledky:\\n‚Ä¢ Vytvoren√Ωch: ${created}\\n‚Ä¢ Aktualizovan√Ωch: ${updated}\\n‚Ä¢ Ch√Ωb: ${errorsCount}\\n‚Ä¢ √öspe≈°nos≈•: ${successRate}\\n\\nSkontrolujte form√°t CSV s√∫boru.`\n            );\n          } else {\n            alert(\n              `‚ö†Ô∏è Import dokonƒçen√Ω, ale ≈æiadne vozidl√° neboli pridan√©.\\nSkontrolujte form√°t CSV s√∫boru.`\n            );\n          }\n        } catch (error) {\n          console.error('‚ùå CSV import error:', error);\n          // ‚úÖ ZLEP≈†EN√â ERROR HANDLING - menej dramatick√©\n          alert(\n            `‚ö†Ô∏è Import dokonƒçen√Ω s upozornen√≠m: ${error instanceof Error ? error.message : 'Sie≈•ov√° chyba'}\\n\\nSkontrolujte v√Ωsledok po obnoven√≠ str√°nky.`\n          );\n          // Aj tak sk√∫s refresh - mo≈æno sa import dokonƒçil\n          setTimeout(() => window.location.reload(), 2000);\n        } finally {\n          setLoading(false);\n        }\n      },\n      header: false,\n      skipEmptyLines: true,\n      error: (error: any) => {\n        console.error('‚ùå Papa Parse error:', error);\n        alert(`‚ùå Chyba pri ƒç√≠tan√≠ CSV s√∫boru: ${error.message}`);\n        setLoading(false);\n      },\n    });\n\n    // Reset input\n    event.target.value = '';\n  };\n\n  // Render len na desktope\n  if (isMobile) {\n    return null;\n  }\n\n  return (\n    <>\n      <SecondaryButton onClick={handleExportCSV}>üìä Export CSV</SecondaryButton>\n\n      <SecondaryButton\n        component=\"label\"\n        disabled={loading}\n        sx={{\n          color: '#388e3c',\n          borderColor: '#388e3c',\n          '&:hover': {\n            borderColor: '#2e7d32',\n            backgroundColor: 'rgba(56, 142, 60, 0.04)',\n          },\n        }}\n      >\n        üì• Import CSV\n        <input\n          type=\"file\"\n          accept=\".csv\"\n          onChange={handleImportCSV}\n          style={{ display: 'none' }}\n        />\n      </SecondaryButton>\n    </>\n  );\n};\n\nexport default VehicleImportExport;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/components/VehicleKmHistory.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has a missing dependency: 'loadKmHistory'. Either include it or remove the dependency array.","line":132,"column":6,"nodeType":"ArrayExpression","endLine":132,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [loadKmHistory, open, vehicle]","fix":{"range":[2849,2864],"text":"[loadKmHistory, open, vehicle]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'history' is assigned a value but never used.","line":139,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":139,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3285,3288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3285,3288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3456,3459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3456,3459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3957,3960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3957,3960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":171,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4081,4084],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4081,4084],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":184,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4507,4510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4507,4510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4631,4634],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4631,4634],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  DirectionsCar as CarIcon,\n  Security as InsuranceIcon,\n  Build as STKIcon,\n  Assignment as EKIcon,\n  TrendingUp as IncreaseIcon,\n  TrendingDown as DecreaseIcon,\n  Remove as SameIcon,\n} from '@mui/icons-material';\nimport {\n  Timeline,\n  TimelineItem,\n  TimelineSeparator,\n  TimelineConnector,\n  TimelineContent,\n  TimelineDot,\n  TimelineOppositeContent,\n} from '@mui/lab';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Typography,\n  Box,\n  Card,\n  CardContent,\n  Chip,\n  Divider,\n  useTheme,\n  useMediaQuery,\n  Alert,\n  CircularProgress,\n} from '@mui/material';\nimport { format, parseISO } from 'date-fns';\nimport { sk } from 'date-fns/locale';\nimport React, { useState, useEffect } from 'react';\n\nimport { useApp } from '../../../context/AppContext';\nimport type { Vehicle } from '../../../types';\n\ninterface KmHistoryEntry {\n  id: string;\n  date: Date | string;\n  kmState: number;\n  documentType: 'insurance_kasko' | 'stk' | 'ek';\n  documentId: string;\n  documentNumber?: string;\n  policyNumber?: string;\n  company?: string;\n  notes?: string;\n}\n\ninterface VehicleKmHistoryProps {\n  open: boolean;\n  onClose: () => void;\n  vehicle: Vehicle | null;\n}\n\nconst getDocumentTypeInfo = (type: string) => {\n  switch (type) {\n    case 'insurance_kasko':\n      return {\n        label: 'Kasko poistka',\n        icon: <InsuranceIcon sx={{ fontSize: 20 }} />,\n        color: '#2196f3',\n      };\n    case 'stk':\n      return {\n        label: 'STK',\n        icon: <STKIcon sx={{ fontSize: 20 }} />,\n        color: '#388e3c',\n      };\n    case 'ek':\n      return {\n        label: 'EK',\n        icon: <EKIcon sx={{ fontSize: 20 }} />,\n        color: '#f57c00',\n      };\n    default:\n      return {\n        label: 'Dokument',\n        icon: <CarIcon sx={{ fontSize: 20 }} />,\n        color: '#666',\n      };\n  }\n};\n\nconst getKmTrend = (currentKm: number, previousKm?: number) => {\n  if (!previousKm)\n    return { icon: <SameIcon />, color: '#666', text: 'Prv√Ω z√°znam' };\n\n  const diff = currentKm - previousKm;\n  if (diff > 0) {\n    return {\n      icon: <IncreaseIcon />,\n      color: '#4caf50',\n      text: `+${diff.toLocaleString()} km`,\n    };\n  } else if (diff < 0) {\n    return {\n      icon: <DecreaseIcon />,\n      color: '#f44336',\n      text: `${diff.toLocaleString()} km`,\n    };\n  } else {\n    return {\n      icon: <SameIcon />,\n      color: '#666',\n      text: 'Bez zmeny',\n    };\n  }\n};\n\nexport default function VehicleKmHistory({\n  open,\n  onClose,\n  vehicle,\n}: VehicleKmHistoryProps) {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const { state } = useApp();\n\n  const [kmHistory, setKmHistory] = useState<KmHistoryEntry[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (open && vehicle) {\n      loadKmHistory();\n    }\n  }, [open, vehicle]);\n\n  const loadKmHistory = async () => {\n    if (!vehicle) return;\n\n    setLoading(true);\n    try {\n      const history: KmHistoryEntry[] = [];\n\n      // Naƒç√≠taj Kasko poistky s kmState\n      const kaskoInsurances = (state.insurances || [])\n        .filter(\n          insurance =>\n            insurance.vehicleId === vehicle.id &&\n            insurance.type?.toLowerCase().includes('kasko') &&\n            (insurance as any).kmState\n        )\n        .map(insurance => ({\n          id: insurance.id,\n          date: insurance.validFrom || insurance.validTo,\n          kmState: (insurance as any).kmState,\n          documentType: 'insurance_kasko' as const,\n          documentId: insurance.id,\n          policyNumber: insurance.policyNumber,\n          company: insurance.company,\n          notes: `Kasko poistka ${insurance.policyNumber}`,\n        }));\n\n      // Naƒç√≠taj STK dokumenty s kmState\n      const stkDocuments = (state.vehicleDocuments || [])\n        .filter(\n          doc =>\n            doc.vehicleId === vehicle.id &&\n            doc.documentType === 'stk' &&\n            (doc as any).kmState\n        )\n        .map(doc => ({\n          id: doc.id,\n          date: doc.validTo,\n          kmState: (doc as any).kmState,\n          documentType: 'stk' as const,\n          documentId: doc.id,\n          documentNumber: doc.documentNumber,\n          notes: doc.notes || `STK kontrola`,\n        }));\n\n      // Naƒç√≠taj EK dokumenty s kmState\n      const ekDocuments = (state.vehicleDocuments || [])\n        .filter(\n          doc =>\n            doc.vehicleId === vehicle.id &&\n            doc.documentType === 'ek' &&\n            (doc as any).kmState\n        )\n        .map(doc => ({\n          id: doc.id,\n          date: doc.validTo,\n          kmState: (doc as any).kmState,\n          documentType: 'ek' as const,\n          documentId: doc.id,\n          documentNumber: doc.documentNumber,\n          notes: doc.notes || `EK kontrola`,\n        }));\n\n      // Spoj v≈°etky z√°znamy a zoraƒè podƒæa d√°tumu\n      const allEntries = [...kaskoInsurances, ...stkDocuments, ...ekDocuments];\n      const sortedHistory = allEntries.sort((a, b) => {\n        const dateA = typeof a.date === 'string' ? parseISO(a.date) : a.date;\n        const dateB = typeof b.date === 'string' ? parseISO(b.date) : b.date;\n        return dateB.getTime() - dateA.getTime(); // Najnov≈°ie prv√©\n      });\n\n      setKmHistory(sortedHistory);\n    } catch (error) {\n      console.error('Chyba pri naƒç√≠tavan√≠ hist√≥rie km:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!vehicle) return null;\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      maxWidth=\"md\"\n      fullWidth\n      fullScreen={isMobile}\n    >\n      <DialogTitle>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <CarIcon />\n          <Box>\n            <Typography variant=\"h6\">Hist√≥ria stavu kilometrov</Typography>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">\n              {vehicle.brand} {vehicle.model} - {vehicle.licensePlate}\n            </Typography>\n          </Box>\n        </Box>\n      </DialogTitle>\n\n      <DialogContent>\n        {loading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n            <CircularProgress />\n          </Box>\n        ) : kmHistory.length === 0 ? (\n          <Alert severity=\"info\" sx={{ mt: 2 }}>\n            <Typography variant=\"body2\">\n              ≈Ωiadna hist√≥ria kilometrov nie je k dispoz√≠cii pre toto vozidlo.\n            </Typography>\n            <Typography\n              variant=\"caption\"\n              color=\"text.secondary\"\n              sx={{ mt: 1, display: 'block' }}\n            >\n              Hist√≥ria sa vytv√°ra automaticky pri prid√°van√≠ STK, EK alebo Kasko\n              poistky s uveden√Ωm stavom kilometrov.\n            </Typography>\n          </Alert>\n        ) : (\n          <>\n            <Alert severity=\"success\" sx={{ mb: 3 }}>\n              <Typography variant=\"body2\">\n                üìä N√°jden√Ωch {kmHistory.length} z√°znamov o stave kilometrov\n              </Typography>\n            </Alert>\n\n            <Timeline position={isMobile ? 'right' : 'alternate'}>\n              {kmHistory.map((entry, index) => {\n                const typeInfo = getDocumentTypeInfo(entry.documentType);\n                const previousEntry = kmHistory[index + 1];\n                const trend = getKmTrend(entry.kmState, previousEntry?.kmState);\n                const entryDate =\n                  typeof entry.date === 'string'\n                    ? parseISO(entry.date)\n                    : entry.date;\n\n                return (\n                  <TimelineItem key={entry.id}>\n                    {!isMobile && (\n                      <TimelineOppositeContent\n                        sx={{ m: 'auto 0' }}\n                        align=\"right\"\n                        variant=\"body2\"\n                        color=\"text.secondary\"\n                      >\n                        {format(entryDate, 'dd.MM.yyyy', { locale: sk })}\n                      </TimelineOppositeContent>\n                    )}\n\n                    <TimelineSeparator>\n                      <TimelineDot\n                        sx={{ bgcolor: typeInfo.color, color: 'white' }}\n                      >\n                        {typeInfo.icon}\n                      </TimelineDot>\n                      {index < kmHistory.length - 1 && <TimelineConnector />}\n                    </TimelineSeparator>\n\n                    <TimelineContent sx={{ py: '12px', px: 2 }}>\n                      <Card variant=\"outlined\">\n                        <CardContent sx={{ p: 2, '&:last-child': { pb: 2 } }}>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              justifyContent: 'space-between',\n                              alignItems: 'flex-start',\n                              mb: 1,\n                            }}\n                          >\n                            <Box>\n                              <Typography\n                                variant=\"h6\"\n                                component=\"div\"\n                                sx={{\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  gap: 1,\n                                }}\n                              >\n                                {typeInfo.label}\n                                <Chip\n                                  label={`${entry.kmState.toLocaleString()} km`}\n                                  color=\"primary\"\n                                  size=\"small\"\n                                />\n                              </Typography>\n                              {isMobile && (\n                                <Typography\n                                  variant=\"caption\"\n                                  color=\"text.secondary\"\n                                >\n                                  {format(entryDate, 'dd.MM.yyyy', {\n                                    locale: sk,\n                                  })}\n                                </Typography>\n                              )}\n                            </Box>\n\n                            <Box\n                              sx={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                gap: 0.5,\n                              }}\n                            >\n                              <Box\n                                sx={{\n                                  color: trend.color,\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                }}\n                              >\n                                {trend.icon}\n                              </Box>\n                              <Typography\n                                variant=\"caption\"\n                                sx={{ color: trend.color }}\n                              >\n                                {trend.text}\n                              </Typography>\n                            </Box>\n                          </Box>\n\n                          <Divider sx={{ my: 1 }} />\n\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              flexDirection: 'column',\n                              gap: 0.5,\n                            }}\n                          >\n                            {entry.policyNumber && (\n                              <Typography\n                                variant=\"body2\"\n                                color=\"text.secondary\"\n                              >\n                                <strong>ƒå√≠slo poistky:</strong>{' '}\n                                {entry.policyNumber}\n                              </Typography>\n                            )}\n                            {entry.documentNumber && (\n                              <Typography\n                                variant=\"body2\"\n                                color=\"text.secondary\"\n                              >\n                                <strong>ƒå√≠slo dokumentu:</strong>{' '}\n                                {entry.documentNumber}\n                              </Typography>\n                            )}\n                            {entry.company && (\n                              <Typography\n                                variant=\"body2\"\n                                color=\"text.secondary\"\n                              >\n                                <strong>Spoloƒçnos≈•:</strong> {entry.company}\n                              </Typography>\n                            )}\n                            {entry.notes && (\n                              <Typography\n                                variant=\"body2\"\n                                color=\"text.secondary\"\n                              >\n                                <strong>Pozn√°mka:</strong> {entry.notes}\n                              </Typography>\n                            )}\n                          </Box>\n                        </CardContent>\n                      </Card>\n                    </TimelineContent>\n                  </TimelineItem>\n                );\n              })}\n            </Timeline>\n\n            {/* ≈†tatistiky */}\n            {kmHistory.length > 1 && (\n              <Card sx={{ mt: 3, bgcolor: 'background.paper' }}>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    üìà ≈†tatistiky\n                  </Typography>\n                  <Box\n                    sx={{\n                      display: 'grid',\n                      gridTemplateColumns: { xs: '1fr', sm: '1fr 1fr 1fr' },\n                      gap: 2,\n                    }}\n                  >\n                    <Box sx={{ textAlign: 'center' }}>\n                      <Typography variant=\"h4\" color=\"primary\">\n                        {kmHistory[0].kmState.toLocaleString()}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Aktu√°lny stav km\n                      </Typography>\n                    </Box>\n                    <Box sx={{ textAlign: 'center' }}>\n                      <Typography variant=\"h4\" color=\"success.main\">\n                        +\n                        {(\n                          kmHistory[0].kmState -\n                          kmHistory[kmHistory.length - 1].kmState\n                        ).toLocaleString()}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Celkov√Ω n√°rast km\n                      </Typography>\n                    </Box>\n                    <Box sx={{ textAlign: 'center' }}>\n                      <Typography variant=\"h4\" color=\"info.main\">\n                        {kmHistory.length}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Poƒçet z√°znamov\n                      </Typography>\n                    </Box>\n                  </Box>\n                </CardContent>\n              </Card>\n            )}\n          </>\n        )}\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose}>Zavrie≈•</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/components/vehicles/components/VehicleTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getStatusColor' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Edit as EditIcon,\n  Delete as DeleteIcon,\n  History as HistoryIcon,\n  Speed as KmIcon,\n} from '@mui/icons-material';\nimport {\n  Box,\n  Button,\n  Typography,\n  IconButton,\n  Chip,\n  Card,\n  CardContent,\n  Checkbox,\n  useMediaQuery,\n  useTheme,\n} from '@mui/material';\nimport React from 'react';\n\nimport type { Vehicle } from '../../../types';\nimport {\n  getStatusColor,\n  getStatusBgColor,\n  getStatusText,\n  getStatusIcon,\n} from '../../../utils/vehicles/vehicleHelpers';\nimport { Can } from '../../common/PermissionGuard';\n\ninterface VehicleTableProps {\n  vehiclesToDisplay: Vehicle[];\n  filteredVehicles: Vehicle[];\n  displayedVehicles: number;\n  hasMore: boolean;\n  isLoadingMore: boolean;\n  selectedVehicles: Set<string>;\n  mobileScrollRef: React.RefObject<HTMLDivElement>;\n  desktopScrollRef: React.RefObject<HTMLDivElement>;\n  onScroll: (event: React.UIEvent<HTMLDivElement>) => void;\n  onEdit: (vehicle: Vehicle) => void;\n  onDelete: (vehicleId: string) => void;\n  onVehicleSelect: (vehicleId: string, checked: boolean) => void;\n  onLoadMore: () => void;\n  onKmHistory?: (vehicle: Vehicle) => void; // üöó Hist√≥ria kilometrov\n}\n\nconst VehicleTable: React.FC<VehicleTableProps> = ({\n  vehiclesToDisplay,\n  filteredVehicles,\n  displayedVehicles,\n  hasMore,\n  isLoadingMore,\n  selectedVehicles,\n  mobileScrollRef,\n  desktopScrollRef,\n  onScroll,\n  onEdit,\n  onDelete,\n  onVehicleSelect,\n  onLoadMore,\n  onKmHistory,\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n  return (\n    <>\n      {isMobile ? (\n        /* MOBILE CARDS VIEW */\n        <Card\n          sx={{\n            overflow: 'hidden',\n            boxShadow: '0 6px 20px rgba(0,0,0,0.1)',\n            borderRadius: 3,\n          }}\n        >\n          <CardContent sx={{ p: 0 }}>\n            <Box\n              ref={mobileScrollRef}\n              sx={{ maxHeight: '70vh', overflowY: 'auto' }}\n              onScroll={onScroll}\n            >\n              {vehiclesToDisplay.map((vehicle, index) => (\n                <Box\n                  key={vehicle.id}\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    p: 0,\n                    borderBottom:\n                      index < vehiclesToDisplay.length - 1\n                        ? '1px solid #e0e0e0'\n                        : 'none',\n                    '&:hover': { backgroundColor: '#f8f9fa' },\n                    minHeight: 80,\n                    cursor: 'pointer',\n                  }}\n                  onClick={() => onEdit(vehicle)}\n                >\n                  {/* ‚úÖ NOV√â: Checkbox pre v√Ωber vozidla */}\n                  <Box\n                    sx={{\n                      width: 50,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      borderRight: '1px solid #e0e0e0',\n                      backgroundColor: '#fafafa',\n                    }}\n                  >\n                    <Checkbox\n                      size=\"small\"\n                      checked={selectedVehicles.has(vehicle.id)}\n                      onChange={e => {\n                        e.stopPropagation(); // Zabr√°ni kliknutiu na cel√Ω riadok\n                        onVehicleSelect(vehicle.id, e.target.checked);\n                      }}\n                      sx={{\n                        p: 0.5,\n                        '& .MuiSvgIcon-root': { fontSize: 18 },\n                      }}\n                    />\n                  </Box>\n\n                  {/* Vehicle Info - sticky left */}\n                  <Box\n                    sx={{\n                      width: { xs: 140, sm: 160 },\n                      maxWidth: { xs: 140, sm: 160 },\n                      p: { xs: 1, sm: 1.5 },\n                      borderRight: '2px solid #e0e0e0',\n                      display: 'flex',\n                      flexDirection: 'column',\n                      justifyContent: 'center',\n                      backgroundColor: '#ffffff',\n                      position: 'sticky',\n                      left: 0,\n                      zIndex: 10,\n                      overflow: 'hidden',\n                    }}\n                  >\n                    <Typography\n                      variant=\"subtitle2\"\n                      sx={{\n                        fontWeight: 600,\n                        fontSize: { xs: '0.75rem', sm: '0.8rem' },\n                        color: '#1976d2',\n                        lineHeight: 1.2,\n                        wordWrap: 'break-word',\n                        mb: { xs: 0.25, sm: 0.5 },\n                      }}\n                    >\n                      {vehicle.brand} {vehicle.model}\n                    </Typography>\n                    <Typography\n                      variant=\"caption\"\n                      sx={{\n                        color: '#666',\n                        fontSize: { xs: '0.6rem', sm: '0.65rem' },\n                        mb: { xs: 0.25, sm: 0.5 },\n                        fontWeight: 600,\n                      }}\n                    >\n                      {vehicle.licensePlate}\n                    </Typography>\n                    {vehicle.vin && (\n                      <Typography\n                        variant=\"caption\"\n                        sx={{\n                          color: '#888',\n                          fontSize: { xs: '0.55rem', sm: '0.6rem' },\n                          fontFamily: 'monospace',\n                        }}\n                      >\n                        VIN: {vehicle.vin.slice(-6)}\n                      </Typography>\n                    )}\n                    <Chip\n                      size=\"small\"\n                      label={getStatusText(vehicle.status)}\n                      icon={getStatusIcon(vehicle.status)}\n                      sx={{\n                        height: { xs: 18, sm: 20 },\n                        fontSize: { xs: '0.55rem', sm: '0.6rem' },\n                        bgcolor: getStatusBgColor(vehicle.status),\n                        color: 'white',\n                        fontWeight: 700,\n                        minWidth: 'auto',\n                        maxWidth: '100%',\n                        overflow: 'hidden',\n                        '& .MuiChip-icon': {\n                          color: 'white',\n                          fontSize: '0.8rem',\n                        },\n                      }}\n                    />\n                  </Box>\n\n                  {/* Vehicle Details - scrollable right */}\n                  <Box\n                    sx={{\n                      flex: 1,\n                      p: { xs: 1, sm: 1.5 },\n                      display: 'flex',\n                      flexDirection: 'column',\n                      justifyContent: 'space-between',\n                      overflow: 'hidden',\n                      minWidth: 0,\n                    }}\n                  >\n                    <Box sx={{ overflow: 'hidden' }}>\n                      <Typography\n                        variant=\"subtitle2\"\n                        sx={{\n                          fontWeight: 600,\n                          fontSize: { xs: '0.75rem', sm: '0.8rem' },\n                          color: '#333',\n                          mb: { xs: 0.25, sm: 0.5 },\n                          overflow: 'hidden',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap',\n                        }}\n                      >\n                        üè¢ {vehicle.company}\n                      </Typography>\n                      <Typography\n                        variant=\"caption\"\n                        sx={{\n                          color: '#666',\n                          fontSize: { xs: '0.6rem', sm: '0.65rem' },\n                          display: 'block',\n                          mb: { xs: 0.25, sm: 0.5 },\n                          overflow: 'hidden',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap',\n                        }}\n                      >\n                        üìä Status: {getStatusText(vehicle.status)}\n                      </Typography>\n                    </Box>\n\n                    {/* Mobile Action Buttons */}\n                    <Box\n                      sx={{\n                        display: 'flex',\n                        gap: { xs: 0.5, sm: 0.75 },\n                        mt: { xs: 1, sm: 1.5 },\n                        justifyContent: 'flex-start',\n                        flexWrap: 'wrap',\n                      }}\n                    >\n                      {/* Edit Button */}\n                      <Can\n                        update=\"vehicles\"\n                        context={{\n                          resourceOwnerId: vehicle.assignedMechanicId,\n                          resourceCompanyId: vehicle.ownerCompanyId,\n                        }}\n                      >\n                        <IconButton\n                          size=\"small\"\n                          title=\"Upravi≈• vozidlo\"\n                          onClick={e => {\n                            e.stopPropagation();\n                            onEdit(vehicle);\n                          }}\n                          sx={{\n                            bgcolor: '#2196f3',\n                            color: 'white',\n                            width: { xs: 36, sm: 32 },\n                            height: { xs: 36, sm: 32 },\n                            '&:hover': {\n                              bgcolor: '#1976d2',\n                              transform: 'scale(1.1)',\n                              boxShadow: '0 4px 12px rgba(33,150,243,0.4)',\n                            },\n                            transition: 'all 0.2s ease',\n                          }}\n                        >\n                          <EditIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Can>\n\n                      {/* Delete Button */}\n                      <Can\n                        delete=\"vehicles\"\n                        context={{\n                          resourceOwnerId: vehicle.assignedMechanicId,\n                          resourceCompanyId: vehicle.ownerCompanyId,\n                        }}\n                      >\n                        <IconButton\n                          size=\"small\"\n                          title=\"Zmaza≈• vozidlo\"\n                          onClick={e => {\n                            e.stopPropagation();\n                            onDelete(vehicle.id);\n                          }}\n                          sx={{\n                            bgcolor: '#f44336',\n                            color: 'white',\n                            width: { xs: 36, sm: 32 },\n                            height: { xs: 36, sm: 32 },\n                            '&:hover': {\n                              bgcolor: '#d32f2f',\n                              transform: 'scale(1.1)',\n                              boxShadow: '0 4px 12px rgba(244,67,54,0.4)',\n                            },\n                            transition: 'all 0.2s ease',\n                          }}\n                        >\n                          <DeleteIcon fontSize=\"small\" />\n                        </IconButton>\n                      </Can>\n                    </Box>\n                  </Box>\n                </Box>\n              ))}\n\n              {/* üöÄ INFINITE SCROLL: Load More Button */}\n              {hasMore && (\n                <Box\n                  sx={{\n                    display: 'flex',\n                    justifyContent: 'center',\n                    p: 3,\n                    borderTop: '1px solid #e0e0e0',\n                  }}\n                >\n                  <Button\n                    variant=\"outlined\"\n                    onClick={onLoadMore}\n                    disabled={isLoadingMore}\n                    sx={{\n                      minWidth: 200,\n                      py: 1.5,\n                      borderRadius: 3,\n                      textTransform: 'none',\n                      fontSize: '1rem',\n                      fontWeight: 600,\n                    }}\n                  >\n                    {isLoadingMore\n                      ? 'Naƒç√≠tavam...'\n                      : `Naƒç√≠ta≈• ƒèal≈°√≠ch (${filteredVehicles.length - displayedVehicles} zost√°va)`}\n                  </Button>\n                </Box>\n              )}\n            </Box>\n          </CardContent>\n        </Card>\n      ) : (\n        /* DESKTOP TABLE VIEW */\n        <Card\n          sx={{\n            overflow: 'hidden',\n            boxShadow: '0 6px 20px rgba(0,0,0,0.1)',\n            borderRadius: 3,\n          }}\n        >\n          <CardContent sx={{ p: 0 }}>\n            {/* Desktop Header */}\n            <Box\n              sx={{\n                display: 'flex',\n                bgcolor: '#f8f9fa',\n                borderBottom: '2px solid #e0e0e0',\n                position: 'sticky',\n                top: 0,\n                zIndex: 100,\n                minHeight: 56,\n              }}\n            >\n              {/* Vozidlo column */}\n              <Box\n                sx={{\n                  width: 200,\n                  minWidth: 200,\n                  p: 2,\n                  borderRight: '1px solid #e0e0e0',\n                  display: 'flex',\n                  alignItems: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ fontWeight: 700, color: '#333' }}\n                >\n                  üöó Vozidlo\n                </Typography>\n              </Box>\n\n              {/* ≈†PZ a VIN column */}\n              <Box\n                sx={{\n                  width: 140,\n                  minWidth: 140,\n                  p: 2,\n                  borderRight: '1px solid #e0e0e0',\n                  display: 'flex',\n                  alignItems: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ fontWeight: 700, color: '#333' }}\n                >\n                  üìã ≈†PZ / VIN\n                </Typography>\n              </Box>\n\n              {/* Firma column */}\n              <Box\n                sx={{\n                  width: 150,\n                  minWidth: 150,\n                  p: 2,\n                  borderRight: '1px solid #e0e0e0',\n                  display: 'flex',\n                  alignItems: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ fontWeight: 700, color: '#333' }}\n                >\n                  üè¢ Firma\n                </Typography>\n              </Box>\n\n              {/* Status column */}\n              <Box\n                sx={{\n                  width: 140,\n                  minWidth: 140,\n                  p: 2,\n                  borderRight: '1px solid #e0e0e0',\n                  display: 'flex',\n                  alignItems: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ fontWeight: 700, color: '#333' }}\n                >\n                  üìä Status\n                </Typography>\n              </Box>\n\n              {/* Ceny column */}\n              <Box\n                sx={{\n                  width: 200,\n                  minWidth: 200,\n                  p: 2,\n                  borderRight: '1px solid #e0e0e0',\n                  display: 'flex',\n                  alignItems: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ fontWeight: 700, color: '#333' }}\n                >\n                  üí∞ Ceny\n                </Typography>\n              </Box>\n\n              {/* Akcie column */}\n              <Box\n                sx={{\n                  width: 120,\n                  minWidth: 120,\n                  p: 2,\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ fontWeight: 700, color: '#333' }}\n                >\n                  ‚ö° Akcie\n                </Typography>\n              </Box>\n            </Box>\n\n            {/* Desktop Vehicle Rows */}\n            <Box\n              ref={desktopScrollRef}\n              sx={{ maxHeight: '70vh', overflowY: 'auto' }}\n              onScroll={onScroll}\n            >\n              {vehiclesToDisplay.map((vehicle, index) => (\n                <Box\n                  key={vehicle.id}\n                  sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    p: 0,\n                    borderBottom:\n                      index < vehiclesToDisplay.length - 1\n                        ? '1px solid #e0e0e0'\n                        : 'none',\n                    '&:hover': { backgroundColor: '#f8f9fa' },\n                    minHeight: 72,\n                    cursor: 'pointer',\n                  }}\n                  onClick={() => onEdit(vehicle)}\n                >\n                  {/* Vozidlo column */}\n                  <Box\n                    sx={{\n                      width: 200,\n                      minWidth: 200,\n                      p: 2,\n                      borderRight: '1px solid #e0e0e0',\n                      display: 'flex',\n                      flexDirection: 'column',\n                      justifyContent: 'center',\n                    }}\n                  >\n                    <Typography\n                      variant=\"subtitle2\"\n                      sx={{\n                        fontWeight: 600,\n                        color: '#1976d2',\n                        mb: 0.5,\n                      }}\n                    >\n                      {vehicle.brand} {vehicle.model}\n                    </Typography>\n                    <Typography\n                      variant=\"caption\"\n                      sx={{\n                        color: '#666',\n                        fontSize: '0.7rem',\n                      }}\n                    >\n                      ID: {vehicle.id.slice(0, 8)}...\n                    </Typography>\n                  </Box>\n\n                  {/* ≈†PZ a VIN column */}\n                  <Box\n                    sx={{\n                      width: 140,\n                      minWidth: 140,\n                      p: 2,\n                      borderRight: '1px solid #e0e0e0',\n                      display: 'flex',\n                      flexDirection: 'column',\n                      justifyContent: 'center',\n                    }}\n                  >\n                    <Typography\n                      variant=\"body2\"\n                      sx={{\n                        fontWeight: 600,\n                        color: '#333',\n                        fontFamily: 'monospace',\n                      }}\n                    >\n                      {vehicle.licensePlate}\n                    </Typography>\n                    {vehicle.vin && (\n                      <Typography\n                        variant=\"caption\"\n                        sx={{\n                          color: '#666',\n                          fontFamily: 'monospace',\n                          fontSize: '0.7rem',\n                          mt: 0.5,\n                        }}\n                      >\n                        VIN: {vehicle.vin.slice(-8)}\n                      </Typography>\n                    )}\n                  </Box>\n\n                  {/* Firma column */}\n                  <Box\n                    sx={{\n                      width: 150,\n                      minWidth: 150,\n                      p: 2,\n                      borderRight: '1px solid #e0e0e0',\n                      display: 'flex',\n                      alignItems: 'center',\n                    }}\n                  >\n                    <Typography\n                      variant=\"body2\"\n                      sx={{\n                        color: '#333',\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                        whiteSpace: 'nowrap',\n                      }}\n                    >\n                      {vehicle.company}\n                    </Typography>\n                  </Box>\n\n                  {/* Status column */}\n                  <Box\n                    sx={{\n                      width: 140,\n                      minWidth: 140,\n                      p: 2,\n                      borderRight: '1px solid #e0e0e0',\n                      display: 'flex',\n                      alignItems: 'center',\n                    }}\n                  >\n                    <Chip\n                      size=\"small\"\n                      label={getStatusText(vehicle.status)}\n                      icon={getStatusIcon(vehicle.status)}\n                      sx={{\n                        height: 24,\n                        fontSize: '0.7rem',\n                        bgcolor: getStatusBgColor(vehicle.status),\n                        color: 'white',\n                        fontWeight: 700,\n                        '& .MuiChip-icon': {\n                          color: 'white',\n                          fontSize: '0.9rem',\n                        },\n                      }}\n                    />\n                  </Box>\n\n                  {/* Ceny column */}\n                  <Box\n                    sx={{\n                      width: 200,\n                      minWidth: 200,\n                      p: 2,\n                      borderRight: '1px solid #e0e0e0',\n                      display: 'flex',\n                      flexDirection: 'column',\n                      justifyContent: 'center',\n                    }}\n                  >\n                    {vehicle.pricing && vehicle.pricing.length > 0 ? (\n                      <>\n                        <Typography\n                          variant=\"caption\"\n                          sx={{\n                            color: '#666',\n                            fontSize: '0.65rem',\n                            mb: 0.25,\n                          }}\n                        >\n                          1 de≈à:{' '}\n                          {vehicle.pricing.find(\n                            p => p.minDays === 0 && p.maxDays === 1\n                          )?.pricePerDay || 0}\n                          ‚Ç¨\n                        </Typography>\n                        <Typography\n                          variant=\"caption\"\n                          sx={{\n                            color: '#666',\n                            fontSize: '0.65rem',\n                          }}\n                        >\n                          7+ dn√≠:{' '}\n                          {vehicle.pricing.find(\n                            p => p.minDays === 4 && p.maxDays === 7\n                          )?.pricePerDay || 0}\n                          ‚Ç¨\n                        </Typography>\n                      </>\n                    ) : (\n                      <Typography variant=\"caption\" sx={{ color: '#999' }}>\n                        Nezadan√©\n                      </Typography>\n                    )}\n                  </Box>\n\n                  {/* Akcie column */}\n                  <Box\n                    sx={{\n                      width: 120,\n                      minWidth: 120,\n                      p: 2,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: 0.5,\n                    }}\n                  >\n                    {/* Edit Button */}\n                    <Can\n                      update=\"vehicles\"\n                      context={{\n                        resourceOwnerId: vehicle.assignedMechanicId,\n                        resourceCompanyId: vehicle.ownerCompanyId,\n                      }}\n                    >\n                      <IconButton\n                        size=\"small\"\n                        title=\"Upravi≈• vozidlo\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          onEdit(vehicle);\n                        }}\n                        sx={{\n                          bgcolor: '#2196f3',\n                          color: 'white',\n                          width: 28,\n                          height: 28,\n                          '&:hover': {\n                            bgcolor: '#1976d2',\n                            transform: 'scale(1.1)',\n                            boxShadow: '0 4px 12px rgba(33,150,243,0.4)',\n                          },\n                          transition: 'all 0.2s ease',\n                        }}\n                      >\n                        <EditIcon fontSize=\"small\" />\n                      </IconButton>\n                    </Can>\n\n                    {/* Km History Button */}\n                    {onKmHistory && (\n                      <IconButton\n                        size=\"small\"\n                        title=\"Hist√≥ria kilometrov\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          onKmHistory(vehicle);\n                        }}\n                        sx={{\n                          bgcolor: '#2196f3',\n                          color: 'white',\n                          width: 28,\n                          height: 28,\n                          '&:hover': {\n                            bgcolor: '#1976d2',\n                            transform: 'scale(1.1)',\n                            boxShadow: '0 4px 12px rgba(33,150,243,0.4)',\n                          },\n                          transition: 'all 0.2s ease',\n                        }}\n                      >\n                        <KmIcon fontSize=\"small\" />\n                      </IconButton>\n                    )}\n\n                    {/* History Button */}\n                    <IconButton\n                      size=\"small\"\n                      title=\"Hist√≥ria vozidla\"\n                      onClick={e => {\n                        e.stopPropagation();\n                        // TODO: Implement history view\n                      }}\n                      sx={{\n                        bgcolor: '#9c27b0',\n                        color: 'white',\n                        width: 28,\n                        height: 28,\n                        '&:hover': {\n                          bgcolor: '#7b1fa2',\n                          transform: 'scale(1.1)',\n                          boxShadow: '0 4px 12px rgba(156,39,176,0.4)',\n                        },\n                        transition: 'all 0.2s ease',\n                      }}\n                    >\n                      <HistoryIcon fontSize=\"small\" />\n                    </IconButton>\n\n                    {/* Delete Button */}\n                    <Can\n                      delete=\"vehicles\"\n                      context={{\n                        resourceOwnerId: vehicle.assignedMechanicId,\n                        resourceCompanyId: vehicle.ownerCompanyId,\n                      }}\n                    >\n                      <IconButton\n                        size=\"small\"\n                        title=\"Zmaza≈• vozidlo\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          onDelete(vehicle.id);\n                        }}\n                        sx={{\n                          bgcolor: '#f44336',\n                          color: 'white',\n                          width: 28,\n                          height: 28,\n                          '&:hover': {\n                            bgcolor: '#d32f2f',\n                            transform: 'scale(1.1)',\n                            boxShadow: '0 4px 12px rgba(244,67,54,0.4)',\n                          },\n                          transition: 'all 0.2s ease',\n                        }}\n                      >\n                        <DeleteIcon fontSize=\"small\" />\n                      </IconButton>\n                    </Can>\n                  </Box>\n                </Box>\n              ))}\n\n              {/* üöÄ INFINITE SCROLL: Load More Button */}\n              {hasMore && (\n                <Box\n                  sx={{\n                    display: 'flex',\n                    justifyContent: 'center',\n                    p: 3,\n                    borderTop: '1px solid #e0e0e0',\n                  }}\n                >\n                  <Button\n                    variant=\"outlined\"\n                    onClick={onLoadMore}\n                    disabled={isLoadingMore}\n                    sx={{\n                      minWidth: 200,\n                      py: 1.5,\n                      borderRadius: 3,\n                      textTransform: 'none',\n                      fontSize: '1rem',\n                      fontWeight: 600,\n                    }}\n                  >\n                    {isLoadingMore\n                      ? 'Naƒç√≠tavam...'\n                      : `Naƒç√≠ta≈• ƒèal≈°√≠ch (${filteredVehicles.length - displayedVehicles} zost√°va)`}\n                  </Button>\n                </Box>\n              )}\n            </Box>\n          </CardContent>\n        </Card>\n      )}\n    </>\n  );\n};\n\nexport default VehicleTable;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/config/featureFlags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/context/AppContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/context/AuthContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/context/ErrorContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorSeverity' is defined but never used.","line":18,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ErrorCategory' is defined but never used.","line":18,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":51},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":36,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":40,"endColumn":9},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useCallback has a missing dependency: 'state.errors'. Either include it or remove the dependency array.","line":126,"column":5,"nodeType":"ArrayExpression","endLine":126,"endColumn":54,"suggestions":[{"desc":"Update the dependencies array to be: [autoDismissTime, state.errors, maxErrors]","fix":{"range":[2892,2941],"text":"[autoDismissTime, state.errors, maxErrors]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":259,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6183,6186],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6183,6186],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üö® Centralized Error Context Provider\n// Manages all application errors with consistent user feedback\n\nimport React, {\n  createContext,\n  useContext,\n  useReducer,\n  useCallback,\n  useEffect,\n} from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport type {\n  AppError,\n  ErrorContext as IErrorContext,\n  ErrorAction,\n} from '../types/errors';\nimport { createError, ErrorSeverity, ErrorCategory } from '../types/errors';\n\n// Error state interface\ninterface ErrorState {\n  errors: AppError[];\n  isOnline: boolean;\n}\n\n// Initial state\nconst initialState: ErrorState = {\n  errors: [],\n  isOnline: navigator.onLine,\n};\n\n// Error reducer\nconst errorReducer = (state: ErrorState, action: ErrorAction): ErrorState => {\n  switch (action.type) {\n    case 'ADD_ERROR':\n      const newError: AppError = {\n        ...action.payload,\n        id: uuidv4(),\n        timestamp: new Date(),\n      };\n      return {\n        ...state,\n        errors: [...state.errors, newError],\n      };\n\n    case 'DISMISS_ERROR':\n      return {\n        ...state,\n        errors: state.errors.map(error =>\n          error.id === action.payload ? { ...error, dismissed: true } : error\n        ),\n      };\n\n    case 'CLEAR_ERRORS':\n      return {\n        ...state,\n        errors: [],\n      };\n\n    case 'UPDATE_NETWORK_STATUS':\n      return {\n        ...state,\n        isOnline: action.payload,\n      };\n\n    case 'UPDATE_ERROR':\n      return {\n        ...state,\n        errors: state.errors.map(error =>\n          error.id === action.payload.id\n            ? { ...error, ...action.payload.updates }\n            : error\n        ),\n      };\n\n    default:\n      return state;\n  }\n};\n\n// Create context\nconst ErrorContext = createContext<IErrorContext | undefined>(undefined);\n\n// Error Provider Props\ninterface ErrorProviderProps {\n  children: React.ReactNode;\n  maxErrors?: number;\n  autoDismissTime?: number;\n}\n\n// Error Provider Component\nexport const ErrorProvider: React.FC<ErrorProviderProps> = ({\n  children,\n  maxErrors = 5,\n  autoDismissTime = 5000, // 5 seconds\n}) => {\n  const [state, dispatch] = useReducer(errorReducer, initialState);\n\n  // Show error function\n  const showError = useCallback(\n    (errorData: Omit<AppError, 'id' | 'timestamp'>): string => {\n      const errorId = uuidv4();\n\n      dispatch({\n        type: 'ADD_ERROR',\n        payload: errorData,\n      });\n\n      // Auto-dismiss non-critical errors\n      if (errorData.severity !== 'critical' && autoDismissTime > 0) {\n        setTimeout(() => {\n          dispatch({ type: 'DISMISS_ERROR', payload: errorId });\n        }, autoDismissTime);\n      }\n\n      // Clean up old errors if we exceed max limit\n      if (state.errors.length >= maxErrors) {\n        const oldestError = state.errors[0];\n        if (oldestError) {\n          dispatch({ type: 'DISMISS_ERROR', payload: oldestError.id });\n        }\n      }\n\n      return errorId;\n    },\n    [state.errors.length, maxErrors, autoDismissTime]\n  );\n\n  // Dismiss error function\n  const dismissError = useCallback((id: string) => {\n    dispatch({ type: 'DISMISS_ERROR', payload: id });\n  }, []);\n\n  // Clear all errors function\n  const clearErrors = useCallback(() => {\n    dispatch({ type: 'CLEAR_ERRORS' });\n  }, []);\n\n  // Network status monitoring\n  useEffect(() => {\n    const handleOnline = () => {\n      dispatch({ type: 'UPDATE_NETWORK_STATUS', payload: true });\n\n      // Show recovery message if we were offline\n      if (!state.isOnline) {\n        showError({\n          message: '‚úÖ Pripojenie obnoven√©!',\n          category: 'network',\n          severity: 'info',\n          retry: false,\n        });\n      }\n    };\n\n    const handleOffline = () => {\n      dispatch({ type: 'UPDATE_NETWORK_STATUS', payload: false });\n      showError({\n        message: '‚ö†Ô∏è Straten√© internetov√© pripojenie',\n        category: 'network',\n        severity: 'warning',\n        details: 'Niektor√© funkcie m√¥≈æu by≈• obmedzen√©.',\n        retry: false,\n      });\n    };\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, [state.isOnline, showError]);\n\n  // Context value\n  const contextValue: IErrorContext = {\n    errors: state.errors.filter(error => !error.dismissed),\n    isOnline: state.isOnline,\n    showError,\n    dismissError,\n    clearErrors,\n  };\n\n  return (\n    <ErrorContext.Provider value={contextValue}>\n      {children}\n    </ErrorContext.Provider>\n  );\n};\n\n// Custom hook for using error context\nexport const useError = (): IErrorContext => {\n  const context = useContext(ErrorContext);\n  if (!context) {\n    throw new Error('useError must be used within an ErrorProvider');\n  }\n  return context;\n};\n\n// Convenience hooks for common error scenarios\nexport const useNetworkError = () => {\n  const { showError } = useError();\n\n  return useCallback(\n    (endpoint?: string, statusCode?: number) => {\n      return showError(\n        createError(\n          'Probl√©m s pripojen√≠m k serveru',\n          'network',\n          'error',\n          statusCode ? `HTTP ${statusCode}` : 'Network request failed',\n          { endpoint, statusCode }\n        )\n      );\n    },\n    [showError]\n  );\n};\n\nexport const useValidationError = () => {\n  const { showError } = useError();\n\n  return useCallback(\n    (field: string, message: string) => {\n      return showError(\n        createError(\n          message,\n          'validation',\n          'warning',\n          `Validation failed for field: ${field}`,\n          { field }\n        )\n      );\n    },\n    [showError]\n  );\n};\n\nexport const useServerError = () => {\n  const { showError } = useError();\n\n  return useCallback(\n    (message: string, statusCode: number, endpoint?: string) => {\n      return showError(\n        createError(\n          message,\n          'server',\n          statusCode >= 500 ? 'critical' : 'error',\n          `Server returned ${statusCode}`,\n          { statusCode, endpoint }\n        )\n      );\n    },\n    [showError]\n  );\n};\n\n// Error logging utility\nexport const logError = (error: AppError, context?: Record<string, any>) => {\n  const logData = {\n    ...error,\n    context: { ...error.context, ...context },\n    userAgent: navigator.userAgent,\n    url: window.location.href,\n  };\n\n  console.group(\n    `üö® ${error.severity.toUpperCase()} - ${error.category.toUpperCase()}`\n  );\n  console.error('Message:', error.message);\n  if (error.details) logger.debug('Details:', error.details);\n  if (error.stack) logger.debug('Stack:', error.stack);\n  if (logData.context) logger.debug('Context:', logData.context);\n  console.groupEnd();\n\n  // In production, you could send this to an error reporting service\n  if (process.env.NODE_ENV === 'production' && error.severity === 'critical') {\n    // TODO: Integrate with error reporting service (Sentry, LogRocket, etc.)\n    console.warn('TODO: Send error to reporting service');\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/context/PermissionsContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CompanyPermissions' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResourcePermission' is defined but never used.","line":6,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":48},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useEffect has a missing dependency: 'fetchUserPermissions'. Either include it or remove the dependency array.","line":73,"column":6,"nodeType":"ArrayExpression","endLine":73,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUserPermissions, user.id, user.role]","fix":{"range":[2077,2099],"text":"[fetchUserPermissions, user.id, user.role]"}}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { ReactNode } from 'react';\nimport React, { createContext, useContext, useState, useEffect } from 'react';\n\nimport { apiService } from '../services/api';\nimport type { UserCompanyAccess } from '../types';\nimport { CompanyPermissions, ResourcePermission } from '../types';\n\nimport { useAuth } from './AuthContext';\n\ninterface PermissionsContextType {\n  userCompanyAccess: UserCompanyAccess[];\n  permissionsLoading: boolean;\n  permissionsError: string | null;\n  refreshPermissions: () => Promise<void>;\n}\n\nconst PermissionsContext = createContext<PermissionsContextType | undefined>(\n  undefined\n);\n\nexport const usePermissionsContext = () => {\n  const context = useContext(PermissionsContext);\n  if (!context) {\n    throw new Error(\n      'usePermissionsContext must be used within a PermissionsProvider'\n    );\n  }\n  return context;\n};\n\ninterface PermissionsProviderProps {\n  children: ReactNode;\n}\n\nexport const PermissionsProvider: React.FC<PermissionsProviderProps> = ({\n  children,\n}) => {\n  const { state } = useAuth();\n  const user = state.user;\n  const [userCompanyAccess, setUserCompanyAccess] = useState<\n    UserCompanyAccess[]\n  >([]);\n  const [permissionsLoading, setPermissionsLoading] = useState(false);\n  const [permissionsError, setPermissionsError] = useState<string | null>(null);\n\n  const fetchUserPermissions = async () => {\n    if (!user || user.role === 'admin') {\n      setUserCompanyAccess([]);\n      return;\n    }\n\n    try {\n      setPermissionsLoading(true);\n      setPermissionsError(null);\n      const accessData = await apiService.getUserCompanyAccess(user.id);\n      setUserCompanyAccess(accessData);\n    } catch (error) {\n      console.error('Error fetching user permissions:', error);\n      setPermissionsError('Chyba pri naƒç√≠tavan√≠ opr√°vnen√≠');\n      setUserCompanyAccess([]);\n    } finally {\n      setPermissionsLoading(false);\n    }\n  };\n\n  const refreshPermissions = async () => {\n    await fetchUserPermissions();\n  };\n\n  // Naƒç√≠taj permissions len raz pri zmene pou≈æ√≠vateƒæa\n  useEffect(() => {\n    fetchUserPermissions();\n  }, [user?.id, user?.role]);\n\n  const value: PermissionsContextType = {\n    userCompanyAccess,\n    permissionsLoading,\n    permissionsError,\n    refreshPermissions,\n  };\n\n  return (\n    <PermissionsContext.Provider value={value}>\n      {children}\n    </PermissionsContext.Provider>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/context/ThemeContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/features/pricing/applyExtraKm.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/features/pricing/applyExtraKm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useApiService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1031,1034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1031,1034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üîß API Service Hook with Error Handling Integration\n// Provides API service instance with automatic error handling setup\n\nimport { useEffect, useMemo } from 'react';\n\nimport { useError } from '../context/ErrorContext';\nimport { apiService } from '../services/api';\n\n/**\n * Hook that provides API service instance with error context integration\n * Automatically sets up error handling for API calls\n */\nexport const useApiService = () => {\n  const { showError } = useError();\n\n  // Setup error handler when error context is available\n  useEffect(() => {\n    apiService.setErrorHandler(showError);\n  }, [showError]);\n\n  return useMemo(() => apiService, []);\n};\n\n/**\n * Hook for API calls with built-in error handling\n * Use this for one-off API calls in components\n */\nexport const useApiCall = () => {\n  const api = useApiService();\n  const { showError } = useError();\n\n  return useMemo(\n    () => ({\n      api,\n      showError,\n\n      // Convenience method for handling API errors in try-catch blocks\n      handleError: (error: any) => {\n        const errorMessage = error?.message || 'Nezn√°ma chyba API';\n        return showError({\n          message: errorMessage,\n          category: 'server',\n          severity: 'error',\n          context: {\n            originalError: error,\n            timestamp: new Date().toISOString(),\n          },\n        });\n      },\n    }),\n    [api, showError]\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useEnhancedError.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useEnhancedSearch.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1143,1146],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1143,1146],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1152,1155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1152,1155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1297,1300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1297,1300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1540,1543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1540,1543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'placeholder' is assigned a value but never used.","line":102,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":102,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'quickFilters' is assigned a value but never used.","line":103,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":103,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":108,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2590,2593],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2590,2593],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üîç ENHANCED SEARCH HOOK\n *\n * Unified search system pre cel√∫ aplik√°ciu:\n * - Debounced search s performance optimaliz√°ciou\n * - Search suggestions s autocomplete\n * - Search history tracking\n * - Quick filters\n * - Mobile-optimized UX\n */\n\nimport { useState, useMemo, useCallback, useRef, useEffect } from 'react';\n\nimport { debounce } from '../utils/debounce';\n\nexport interface SearchSuggestion {\n  id: string;\n  text: string;\n  type: 'recent' | 'suggestion' | 'quick_filter';\n  category?: string;\n  count?: number;\n}\n\nexport interface QuickFilter {\n  id: string;\n  label: string;\n  value: string;\n  color: 'primary' | 'secondary' | 'success' | 'warning' | 'error' | 'info';\n  icon?: string;\n  count?: number;\n}\n\nexport interface SearchOptions {\n  debounceDelay?: number;\n  minQueryLength?: number;\n  maxSuggestions?: number;\n  maxHistory?: number;\n  storageKey?: string;\n  enableHistory?: boolean;\n  enableSuggestions?: boolean;\n  placeholder?: string;\n  quickFilters?: QuickFilter[];\n}\n\nexport interface UseEnhancedSearchOptions extends SearchOptions {\n  searchFunction: (\n    query: string,\n    quickFilter?: string\n  ) => Promise<any[]> | any[];\n  suggestionFunction?: (\n    query: string\n  ) => Promise<SearchSuggestion[]> | SearchSuggestion[];\n  onSearch?: (query: string, results: any[]) => void;\n  onClear?: () => void;\n}\n\nexport interface UseEnhancedSearchReturn {\n  // Search state\n  query: string;\n  setQuery: (query: string) => void;\n  isSearching: boolean;\n  activeQuickFilter: string | null;\n\n  // Results\n  results: any[];\n  suggestions: SearchSuggestion[];\n\n  // History\n  searchHistory: string[];\n  clearHistory: () => void;\n\n  // Actions\n  search: (query: string) => void;\n  clearSearch: () => void;\n  selectSuggestion: (suggestion: SearchSuggestion) => void;\n  setQuickFilter: (filterId: string | null) => void;\n\n  // UI state\n  showSuggestions: boolean;\n  setShowSuggestions: (show: boolean) => void;\n\n  // Performance\n  searchStats: {\n    duration: number;\n    resultCount: number;\n    lastSearchTime: number;\n  };\n}\n\nexport const useEnhancedSearch = ({\n  searchFunction,\n  suggestionFunction,\n  onSearch,\n  onClear,\n  debounceDelay = 300,\n  minQueryLength = 2,\n  maxSuggestions = 8,\n  maxHistory = 10,\n  storageKey = 'search_history',\n  enableHistory = true,\n  enableSuggestions = true,\n  placeholder = 'Hƒæada≈•...',\n  quickFilters = [],\n}: UseEnhancedSearchOptions): UseEnhancedSearchReturn => {\n  // Search state\n  const [query, setQueryState] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const [results, setResults] = useState<any[]>([]);\n  const [suggestions, setSuggestions] = useState<SearchSuggestion[]>([]);\n  const [searchHistory, setSearchHistory] = useState<string[]>([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [activeQuickFilter, setActiveQuickFilter] = useState<string | null>(\n    null\n  );\n\n  // Performance tracking\n  const [searchStats, setSearchStats] = useState({\n    duration: 0,\n    resultCount: 0,\n    lastSearchTime: 0,\n  });\n\n  // Refs pre cleanup\n  const searchAbortController = useRef<AbortController | null>(null);\n  const suggestionAbortController = useRef<AbortController | null>(null);\n\n  // Load search history from localStorage\n  useEffect(() => {\n    if (enableHistory && storageKey) {\n      try {\n        const stored = localStorage.getItem(storageKey);\n        if (stored) {\n          const history = JSON.parse(stored);\n          setSearchHistory(\n            Array.isArray(history) ? history.slice(0, maxHistory) : []\n          );\n        }\n      } catch (error) {\n        console.warn('Failed to load search history:', error);\n      }\n    }\n  }, [enableHistory, storageKey, maxHistory]);\n\n  // Save search history to localStorage\n  const saveToHistory = useCallback(\n    (searchQuery: string) => {\n      if (!enableHistory || !storageKey || !searchQuery.trim()) return;\n\n      try {\n        const newHistory = [\n          searchQuery,\n          ...searchHistory.filter(h => h !== searchQuery),\n        ].slice(0, maxHistory);\n\n        setSearchHistory(newHistory);\n        localStorage.setItem(storageKey, JSON.stringify(newHistory));\n      } catch (error) {\n        console.warn('Failed to save search history:', error);\n      }\n    },\n    [enableHistory, storageKey, searchHistory, maxHistory]\n  );\n\n  // Debounced search function\n  const debouncedSearch = useMemo(\n    () =>\n      debounce(async (searchQuery: string, quickFilter?: string) => {\n        if (searchQuery.length < minQueryLength && !quickFilter) {\n          setResults([]);\n          setIsSearching(false);\n          return;\n        }\n\n        // Cancel previous search\n        if (searchAbortController.current) {\n          searchAbortController.current.abort();\n        }\n\n        searchAbortController.current = new AbortController();\n        setIsSearching(true);\n\n        try {\n          const startTime = performance.now();\n          const searchResults = await searchFunction(searchQuery, quickFilter);\n          const duration = performance.now() - startTime;\n\n          setResults(searchResults);\n          setSearchStats({\n            duration,\n            resultCount: searchResults.length,\n            lastSearchTime: Date.now(),\n          });\n\n          // Save to history\n          if (searchQuery.trim()) {\n            saveToHistory(searchQuery);\n          }\n\n          onSearch?.(searchQuery, searchResults);\n\n          console.log(\n            `üîç Search completed: \"${searchQuery}\" ‚Üí ${searchResults.length} results (${duration.toFixed(2)}ms)`\n          );\n        } catch (error: unknown) {\n          if (error.name !== 'AbortError') {\n            console.error('Search error:', error);\n            setResults([]);\n          }\n        } finally {\n          setIsSearching(false);\n        }\n      }, debounceDelay),\n    [searchFunction, debounceDelay, minQueryLength, saveToHistory, onSearch]\n  );\n\n  // Debounced suggestions\n  const debouncedSuggestions = useMemo(\n    () =>\n      debounce(async (searchQuery: string) => {\n        if (\n          !enableSuggestions ||\n          !suggestionFunction ||\n          searchQuery.length < 1\n        ) {\n          setSuggestions([]);\n          return;\n        }\n\n        // Cancel previous suggestions request\n        if (suggestionAbortController.current) {\n          suggestionAbortController.current.abort();\n        }\n\n        suggestionAbortController.current = new AbortController();\n\n        try {\n          const suggestionResults = await suggestionFunction(searchQuery);\n\n          // Combine with search history\n          const historySuggestions: SearchSuggestion[] = enableHistory\n            ? searchHistory\n                .filter(\n                  h =>\n                    h.toLowerCase().includes(searchQuery.toLowerCase()) &&\n                    h !== searchQuery\n                )\n                .slice(0, 3)\n                .map(h => ({\n                  id: `history_${h}`,\n                  text: h,\n                  type: 'recent' as const,\n                  category: 'Hist√≥ria',\n                }))\n            : [];\n\n          const allSuggestions = [\n            ...historySuggestions,\n            ...suggestionResults,\n          ].slice(0, maxSuggestions);\n\n          setSuggestions(allSuggestions);\n        } catch (error: unknown) {\n          if (error.name !== 'AbortError') {\n            console.error('Suggestions error:', error);\n            setSuggestions([]);\n          }\n        }\n      }, 150),\n    [\n      suggestionFunction,\n      enableSuggestions,\n      enableHistory,\n      searchHistory,\n      maxSuggestions,\n    ]\n  );\n\n  // Search function\n  const search = useCallback(\n    (searchQuery: string) => {\n      setQueryState(searchQuery);\n      debouncedSearch(searchQuery, activeQuickFilter || undefined);\n\n      if (enableSuggestions && searchQuery.length > 0) {\n        debouncedSuggestions(searchQuery);\n      } else {\n        setSuggestions([]);\n      }\n    },\n    [\n      debouncedSearch,\n      debouncedSuggestions,\n      activeQuickFilter,\n      enableSuggestions,\n    ]\n  );\n\n  // Set query wrapper\n  const setQuery = useCallback(\n    (newQuery: string) => {\n      search(newQuery);\n    },\n    [search]\n  );\n\n  // Clear search\n  const clearSearch = useCallback(() => {\n    setQueryState('');\n    setResults([]);\n    setSuggestions([]);\n    setShowSuggestions(false);\n    setActiveQuickFilter(null);\n\n    // Cancel ongoing requests\n    if (searchAbortController.current) {\n      searchAbortController.current.abort();\n    }\n    if (suggestionAbortController.current) {\n      suggestionAbortController.current.abort();\n    }\n\n    onClear?.();\n  }, [onClear]);\n\n  // Clear history\n  const clearHistory = useCallback(() => {\n    setSearchHistory([]);\n    if (enableHistory && storageKey) {\n      try {\n        localStorage.removeItem(storageKey);\n      } catch (error) {\n        console.warn('Failed to clear search history:', error);\n      }\n    }\n  }, [enableHistory, storageKey]);\n\n  // Select suggestion\n  const selectSuggestion = useCallback(\n    (suggestion: SearchSuggestion) => {\n      setQuery(suggestion.text);\n      setShowSuggestions(false);\n    },\n    [setQuery]\n  );\n\n  // Set quick filter\n  const setQuickFilter = useCallback(\n    (filterId: string | null) => {\n      setActiveQuickFilter(filterId);\n      // Re-search with current query and new filter\n      if (query || filterId) {\n        debouncedSearch(query, filterId || undefined);\n      }\n    },\n    [query, debouncedSearch]\n  );\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      // Cancel ongoing requests\n      if (searchAbortController.current) {\n        searchAbortController.current.abort();\n      }\n      if (suggestionAbortController.current) {\n        suggestionAbortController.current.abort();\n      }\n    };\n  }, []);\n\n  return {\n    // Search state\n    query,\n    setQuery,\n    isSearching,\n    activeQuickFilter,\n\n    // Results\n    results,\n    suggestions,\n\n    // History\n    searchHistory,\n    clearHistory,\n\n    // Actions\n    search,\n    clearSearch,\n    selectSuggestion,\n    setQuickFilter,\n\n    // UI state\n    showSuggestions,\n    setShowSuggestions,\n\n    // Performance\n    searchStats,\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useInfiniteCompanies.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useInfiniteCustomers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useInfiniteData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useInfiniteInsurances.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useInfiniteRentals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useInfiniteScroll.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useInfiniteVehicles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useLazyImage.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":112,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3023,3026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3023,3026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3054,3057],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3054,3057],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üñºÔ∏è LAZY IMAGE LOADING HOOK\n *\n * Hook pre progressive image loading s Intersection Observer API\n */\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\n\ninterface UseLazyImageOptions {\n  threshold?: number;\n  rootMargin?: string;\n  fallbackDelay?: number;\n  retryAttempts?: number;\n  onLoad?: () => void;\n  onError?: (error: React.SyntheticEvent<HTMLImageElement>) => void;\n}\n\ninterface UseLazyImageReturn {\n  src: string | null;\n  isLoading: boolean;\n  hasError: boolean;\n  isInView: boolean;\n  retry: () => void;\n  imageRef: React.RefObject<HTMLImageElement>;\n}\n\nexport const useLazyImage = (\n  imageSrc: string,\n  options: UseLazyImageOptions = {}\n): UseLazyImageReturn => {\n  const {\n    threshold = 0.1,\n    rootMargin = '50px',\n    fallbackDelay = 3000,\n    retryAttempts = 3,\n    onLoad,\n    onError,\n  } = options;\n\n  const [src, setSrc] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const [isInView, setIsInView] = useState(false);\n  const [retryCount, setRetryCount] = useState(0);\n\n  const imageRef = useRef<HTMLImageElement>(null);\n  const observerRef = useRef<IntersectionObserver | null>(null);\n  const loadTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Preload image\n  const loadImage = useCallback(async () => {\n    if (!imageSrc || hasError || src) return;\n\n    setIsLoading(true);\n    setHasError(false);\n\n    try {\n      // Create new image element for preloading\n      const img = new Image();\n\n      // Promise-based image loading\n      await new Promise<void>((resolve, reject) => {\n        img.onload = () => {\n          console.log(`üñºÔ∏è Image loaded: ${imageSrc}`);\n          resolve();\n        };\n\n        img.onerror = error => {\n          console.error(`‚ùå Image failed to load: ${imageSrc}`, error);\n          reject(error);\n        };\n\n        // Set timeout as fallback\n        loadTimeoutRef.current = setTimeout(() => {\n          reject(new Error('Image load timeout'));\n        }, fallbackDelay);\n\n        img.src = imageSrc;\n      });\n\n      // Clear timeout if image loaded successfully\n      if (loadTimeoutRef.current) {\n        clearTimeout(loadTimeoutRef.current);\n        loadTimeoutRef.current = null;\n      }\n\n      setSrc(imageSrc);\n      setIsLoading(false);\n      onLoad?.();\n    } catch (error) {\n      console.error('Image loading failed:', error);\n\n      if (loadTimeoutRef.current) {\n        clearTimeout(loadTimeoutRef.current);\n        loadTimeoutRef.current = null;\n      }\n\n      setIsLoading(false);\n\n      if (retryCount < retryAttempts) {\n        // Exponential backoff for retry\n        const delay = Math.pow(2, retryCount) * 1000;\n        setTimeout(() => {\n          setRetryCount(prev => prev + 1);\n          loadImage();\n        }, delay);\n      } else {\n        setHasError(true);\n        // Create synthetic event for consistency\n        const syntheticError = {\n          nativeEvent: error as Event,\n          currentTarget: null as any,\n          target: null as any,\n          bubbles: false,\n          cancelable: false,\n          defaultPrevented: false,\n          eventPhase: 0,\n          isTrusted: false,\n          preventDefault: () => {},\n          isDefaultPrevented: () => false,\n          stopPropagation: () => {},\n          isPropagationStopped: () => false,\n          persist: () => {},\n          timeStamp: Date.now(),\n          type: 'error',\n        } as React.SyntheticEvent<HTMLImageElement>;\n        onError?.(syntheticError);\n      }\n    }\n  }, [\n    imageSrc,\n    hasError,\n    src,\n    retryCount,\n    retryAttempts,\n    fallbackDelay,\n    onLoad,\n    onError,\n  ]);\n\n  // Manual retry function\n  const retry = useCallback(() => {\n    setHasError(false);\n    setSrc(null);\n    setRetryCount(0);\n    loadImage();\n  }, [loadImage]);\n\n  // Setup Intersection Observer\n  useEffect(() => {\n    const imageElement = imageRef.current;\n    if (!imageElement) return;\n\n    // Create observer\n    observerRef.current = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          console.log('üéØ Image in view, starting lazy load:', imageSrc);\n          setIsInView(true);\n\n          // Start loading image\n          loadImage();\n\n          // Stop observing after first intersection\n          if (observerRef.current) {\n            observerRef.current.disconnect();\n          }\n        }\n      },\n      {\n        threshold,\n        rootMargin,\n      }\n    );\n\n    // Start observing\n    observerRef.current.observe(imageElement);\n\n    return () => {\n      if (observerRef.current) {\n        observerRef.current.disconnect();\n      }\n      if (loadTimeoutRef.current) {\n        clearTimeout(loadTimeoutRef.current);\n      }\n    };\n  }, [imageSrc, threshold, rootMargin, loadImage]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (loadTimeoutRef.current) {\n        clearTimeout(loadTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    src,\n    isLoading,\n    hasError,\n    isInView,\n    retry,\n    imageRef,\n  };\n};\n\n/**\n * üé≠ Preload images utility\n */\nexport const preloadImages = (imageUrls: string[]): Promise<string[]> => {\n  return Promise.allSettled(\n    imageUrls.map(url => {\n      return new Promise<string>((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve(url);\n        img.onerror = () => reject(new Error(`Failed to preload: ${url}`));\n        img.src = url;\n      });\n    })\n  ).then(results => {\n    const successful = results\n      .filter(\n        (result): result is PromiseFulfilledResult<string> =>\n          result.status === 'fulfilled'\n      )\n      .map(result => result.value);\n\n    console.log(`üé≠ Preloaded ${successful.length}/${imageUrls.length} images`);\n    return successful;\n  });\n};\n\n/**\n * üì± Progressive image quality hook\n */\nexport const useProgressiveImage = (\n  lowQualitySrc: string,\n  highQualitySrc: string,\n  options: UseLazyImageOptions = {}\n) => {\n  const [currentSrc, setCurrentSrc] = useState<string>(lowQualitySrc);\n  const [isHighQuality, setIsHighQuality] = useState(false);\n\n  const {\n    src: highQualityLoaded,\n    isLoading: isLoadingHQ,\n    hasError: hasHQError,\n    isInView,\n    retry,\n    imageRef,\n  } = useLazyImage(highQualitySrc, options);\n\n  useEffect(() => {\n    if (highQualityLoaded && !hasHQError) {\n      setCurrentSrc(highQualityLoaded);\n      setIsHighQuality(true);\n    }\n  }, [highQualityLoaded, hasHQError]);\n\n  return {\n    src: currentSrc,\n    isLoading: isLoadingHQ,\n    hasError: hasHQError,\n    isHighQuality,\n    isInView,\n    retry,\n    imageRef,\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useNetworkStatus.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[590,593],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[590,593],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1747,1750],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1747,1750],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1788,1791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1788,1791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1832,1835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1832,1835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3342,3345],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3342,3345],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3381,3384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3381,3384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3423,3426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3423,3426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3963,3966],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3963,3966],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üì∂ Network Status Hook\n// Monitors network connectivity and provides connection status\n\nimport { useState, useEffect } from 'react';\n\nimport { useError } from '../context/ErrorContext';\n\ninterface NetworkStatus {\n  isOnline: boolean;\n  effectiveType?: string;\n  downlink?: number;\n  rtt?: number;\n  saveData?: boolean;\n}\n\ninterface UseNetworkStatusReturn extends NetworkStatus {\n  wasOffline: boolean;\n  reconnectedAt?: Date;\n  networkQuality: 'slow' | 'medium' | 'fast' | 'unknown';\n}\n\n// Network quality assessment based on connection info\nconst assessNetworkQuality = (\n  connection: any\n): 'slow' | 'medium' | 'fast' | 'unknown' => {\n  if (!connection) return 'unknown';\n\n  const { effectiveType, downlink, rtt } = connection;\n\n  // Based on effective connection type\n  if (effectiveType === 'slow-2g' || effectiveType === '2g') return 'slow';\n  if (effectiveType === '3g') return 'medium';\n  if (effectiveType === '4g') return 'fast';\n\n  // Based on downlink speed (Mbps) and RTT (ms)\n  if (downlink && rtt) {\n    if (downlink < 1 || rtt > 500) return 'slow';\n    if (downlink < 5 || rtt > 200) return 'medium';\n    return 'fast';\n  }\n\n  return 'unknown';\n};\n\nexport const useNetworkStatus = (): UseNetworkStatusReturn => {\n  const { showError } = useError();\n\n  const [networkStatus, setNetworkStatus] = useState<NetworkStatus>({\n    isOnline: navigator.onLine,\n    effectiveType: undefined,\n    downlink: undefined,\n    rtt: undefined,\n    saveData: undefined,\n  });\n\n  const [wasOffline, setWasOffline] = useState(false);\n  const [reconnectedAt, setReconnectedAt] = useState<Date>();\n\n  useEffect(() => {\n    // Get initial network connection info\n    const updateConnectionInfo = () => {\n      const connection =\n        (navigator as any).connection ||\n        (navigator as any).mozConnection ||\n        (navigator as any).webkitConnection;\n\n      if (connection) {\n        setNetworkStatus(prev => ({\n          ...prev,\n          effectiveType: connection.effectiveType,\n          downlink: connection.downlink,\n          rtt: connection.rtt,\n          saveData: connection.saveData,\n        }));\n      }\n    };\n\n    const handleOnline = () => {\n      const now = new Date();\n      setNetworkStatus(prev => ({ ...prev, isOnline: true }));\n\n      if (wasOffline) {\n        setReconnectedAt(now);\n        setWasOffline(false);\n\n        // Show reconnection success message\n        showError({\n          message: '‚úÖ Pripojenie k internetu obnoven√©',\n          category: 'network',\n          severity: 'info',\n          details: `Obnoven√© o ${now.toLocaleTimeString()}`,\n          retry: false,\n        });\n      }\n\n      updateConnectionInfo();\n    };\n\n    const handleOffline = () => {\n      setNetworkStatus(prev => ({ ...prev, isOnline: false }));\n      setWasOffline(true);\n\n      // Show offline warning\n      showError({\n        message: '‚ö†Ô∏è Straten√© internetov√© pripojenie',\n        category: 'network',\n        severity: 'warning',\n        details:\n          'Niektor√© funkcie m√¥≈æu by≈• obmedzen√© a≈æ do obnovenia pripojenia.',\n        retry: false,\n      });\n    };\n\n    const handleConnectionChange = () => {\n      updateConnectionInfo();\n    };\n\n    // Event listeners\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    const connection =\n      (navigator as any).connection ||\n      (navigator as any).mozConnection ||\n      (navigator as any).webkitConnection;\n\n    if (connection) {\n      connection.addEventListener('change', handleConnectionChange);\n    }\n\n    // Initial connection info\n    updateConnectionInfo();\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n\n      if (connection) {\n        connection.removeEventListener('change', handleConnectionChange);\n      }\n    };\n  }, [wasOffline, showError]);\n\n  const networkQuality = assessNetworkQuality((navigator as any).connection);\n\n  return {\n    ...networkStatus,\n    wasOffline,\n    reconnectedAt,\n    networkQuality,\n  };\n};\n\n// Hook for detecting poor network conditions\nexport const useNetworkQuality = () => {\n  const { networkQuality, rtt, downlink } = useNetworkStatus();\n\n  const isSlowConnection =\n    networkQuality === 'slow' ||\n    (rtt && rtt > 500) ||\n    (downlink && downlink < 1);\n  const isFastConnection =\n    networkQuality === 'fast' && rtt && rtt < 100 && downlink && downlink > 5;\n\n  return {\n    networkQuality,\n    isSlowConnection,\n    isFastConnection,\n    shouldReduceRequests: isSlowConnection,\n    shouldEnableOptimizations: isSlowConnection,\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useOptimizedFilters.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[520,523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[520,523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":62,"column":27,"nodeType":"Identifier","endLine":62,"endColumn":38}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ü™ù OPTIMIZED FILTERS HOOK\n *\n * Hook pre optimalizovan√© filtrovanie s memoization a debouncing\n */\n\nimport { useMemo, useCallback } from 'react';\n\nimport type { Rental } from '../types';\nimport { debounce } from '../utils/debounce';\nimport type {\n  FilterCriteria,\n  VehicleLookup,\n  ProtocolLookup,\n} from '../utils/rentalFilters';\nimport {\n  applyAllFilters,\n  createVehicleLookup,\n  getUniqueFilterValues,\n} from '../utils/rentalFilters';\n\ninterface UseOptimizedFiltersProps {\n  rentals: Rental[];\n  vehicles: any[];\n  protocols: ProtocolLookup;\n  filterCriteria: FilterCriteria;\n}\n\nexport const useOptimizedFilters = ({\n  rentals,\n  vehicles,\n  protocols,\n  filterCriteria,\n}: UseOptimizedFiltersProps) => {\n  // Memoized vehicle lookup pre r√Ωchly pr√≠stup\n  const vehicleLookup: VehicleLookup = useMemo(() => {\n    return createVehicleLookup(vehicles);\n  }, [vehicles]);\n\n  // Memoized unique values pre filter options\n  const filterOptions = useMemo(() => {\n    return getUniqueFilterValues(rentals, vehicleLookup);\n  }, [rentals, vehicleLookup]);\n\n  // Memoized filtered rentals\n  const filteredRentals = useMemo(() => {\n    if (!rentals || rentals.length === 0) return [];\n\n    console.time('üîç Filter rentals');\n    const result = applyAllFilters(\n      rentals,\n      filterCriteria,\n      vehicleLookup,\n      protocols\n    );\n    console.timeEnd('üîç Filter rentals');\n\n    return result;\n  }, [rentals, filterCriteria, vehicleLookup, protocols]);\n\n  // Debounced search function\n  const debouncedSearch = useCallback(\n    debounce((searchQuery: string, callback: (query: string) => void) => {\n      callback(searchQuery);\n    }, 300),\n    []\n  );\n\n  // Helper function pre count stats\n  const getFilterStats = useCallback(() => {\n    return {\n      total: rentals.length,\n      filtered: filteredRentals.length,\n      hasFilters: Object.values(filterCriteria).some(\n        value => value !== 'all' && value !== '' && value !== null\n      ),\n    };\n  }, [rentals.length, filteredRentals.length, filterCriteria]);\n\n  // Optimalizovan√© sorting\n  const sortedAndFilteredRentals = useMemo(() => {\n    // M√¥≈æme prida≈• default sorting ak potrebujeme\n    return filteredRentals.sort((a, b) => {\n      // Sort by creation date (newest first)\n      return (\n        new Date(b.createdAt || 0).getTime() -\n        new Date(a.createdAt || 0).getTime()\n      );\n    });\n  }, [filteredRentals]);\n\n  // Performance measurement\n  const measureFilterPerformance = useCallback(() => {\n    const start = performance.now();\n    const result = applyAllFilters(\n      rentals,\n      filterCriteria,\n      vehicleLookup,\n      protocols\n    );\n    const end = performance.now();\n\n    console.log(\n      `üèÉ‚Äç‚ôÇÔ∏è Filter performance: ${end - start}ms for ${rentals.length} rentals ‚Üí ${result.length} results`\n    );\n\n    return {\n      duration: end - start,\n      inputCount: rentals.length,\n      outputCount: result.length,\n      efficiency:\n        (((rentals.length - result.length) / rentals.length) * 100).toFixed(1) +\n        '%',\n    };\n  }, [rentals, filterCriteria, vehicleLookup, protocols]);\n\n  return {\n    // Filtered data\n    filteredRentals: sortedAndFilteredRentals,\n    vehicleLookup,\n\n    // Filter options\n    filterOptions,\n\n    // Stats\n    stats: getFilterStats(),\n\n    // Utilities\n    debouncedSearch,\n    measureFilterPerformance,\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/usePWA.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/usePerformanceOptimization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/usePermissions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_resource' is defined but never used.","line":114,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":114,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_action' is defined but never used.","line":115,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":115,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_context' is defined but never used.","line":116,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":122,"endColumn":4}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo } from 'react';\n\nimport { useAuth } from '../context/AuthContext';\nimport { usePermissionsContext } from '../context/PermissionsContext';\nimport type {\n  CompanyPermissions,\n  Permission,\n  PermissionResult,\n  UserCompanyAccess,\n  UserRole,\n} from '../types';\n\n// üîê FRONTEND ROLE PERMISSIONS MATRIX (fallback pre admin)\nexport const ROLE_PERMISSIONS: Record<UserRole, Permission[]> = {\n  // üëë ADMIN - √öpln√© pr√°va na v≈°etko\n  admin: [\n    {\n      resource: '*',\n      actions: ['read', 'create', 'update', 'delete'],\n      conditions: {},\n    },\n  ],\n\n  // Ostatn√© roly sa teraz riadia company-based permissions\n  employee: [],\n  temp_worker: [],\n  mechanic: [],\n  sales_rep: [],\n  company_owner: [],\n};\n\n// üõ°Ô∏è COMPANY-BASED PERMISSION CHECK FUNCTION\nexport function hasCompanyPermission(\n  userCompanyAccess: UserCompanyAccess[],\n  userRole: UserRole,\n  resource: string,\n  action: 'read' | 'write' | 'delete',\n  context?: {\n    companyId?: string;\n    userId?: string;\n  }\n): PermissionResult {\n  // Admin m√° v≈ædy pr√°va\n  if (userRole === 'admin') {\n    return { hasAccess: true, requiresApproval: false };\n  }\n\n  // Ak nie je zadan√© companyId, skontroluj v≈°etky firmy pou≈æ√≠vateƒæa\n  if (!context?.companyId) {\n    // M√° pou≈æ√≠vateƒæ pr√≠stup k tomuto resource aspo≈à v jednej firme?\n    const hasAnyAccess = userCompanyAccess.some(access => {\n      const resourcePermission =\n        access.permissions[resource as keyof CompanyPermissions];\n      if (!resourcePermission) return false;\n\n      if (action === 'read') return resourcePermission.read;\n      if (action === 'write') return resourcePermission.write;\n      if (action === 'delete') return resourcePermission.delete;\n      return false;\n    });\n\n    if (hasAnyAccess) {\n      return { hasAccess: true, requiresApproval: false };\n    } else {\n      return {\n        hasAccess: false,\n        requiresApproval: false,\n        reason: 'Nem√°te opr√°vnenie k tomuto zdroju v ≈æiadnej firme',\n      };\n    }\n  }\n\n  // Kontrola pre konkr√©tnu firmu\n  const companyAccess = userCompanyAccess.find(\n    access => access.companyId === context.companyId\n  );\n  if (!companyAccess) {\n    return {\n      hasAccess: false,\n      requiresApproval: false,\n      reason: 'Nem√°te pr√≠stup k tejto firme',\n    };\n  }\n\n  const resourcePermission =\n    companyAccess.permissions[resource as keyof CompanyPermissions];\n  if (!resourcePermission) {\n    return {\n      hasAccess: false,\n      requiresApproval: false,\n      reason: 'Nezn√°my zdroj',\n    };\n  }\n\n  let hasAccess = false;\n  if (action === 'read') hasAccess = resourcePermission.read;\n  if (action === 'write') hasAccess = resourcePermission.write;\n  if (action === 'delete') hasAccess = resourcePermission.delete;\n\n  if (hasAccess) {\n    return { hasAccess: true, requiresApproval: false };\n  } else {\n    return {\n      hasAccess: false,\n      requiresApproval: false,\n      reason: `Nem√°te opr√°vnenie na '${action}' pre '${resource}' v tejto firme`,\n    };\n  }\n}\n\n// üõ°Ô∏è LEGACY PERMISSION CHECK FUNCTION (pre sp√§tn√∫ kompatibilitu)\nexport function hasLegacyPermission(\n  _userRole: UserRole,\n  _resource: Permission['resource'],\n  _action: Permission['actions'][0],\n  _context?: {\n    userId?: string;\n    companyId?: string;\n    resourceOwnerId?: string;\n    resourceCompanyId?: string;\n    amount?: number;\n  }\n): PermissionResult {\n  // Admin m√° v≈ædy pr√°va\n  if (_userRole === 'admin') {\n    return { hasAccess: true, requiresApproval: false };\n  }\n\n  // Pre ostatn√© roly vr√°ti false - pou≈æ√≠vaj√∫ sa company permissions\n  return {\n    hasAccess: false,\n    requiresApproval: false,\n    reason: 'Pou≈æ√≠vajte company-based permissions',\n  };\n}\n\n// üéØ REACT HOOK PRE PERMISSIONS\nexport function usePermissions() {\n  const { state } = useAuth();\n  const user = state.user;\n  const { userCompanyAccess, permissionsLoading, permissionsError } =\n    usePermissionsContext();\n\n  const permissions = useMemo(() => {\n    if (!user) {\n      return {\n        canRead: () => false,\n        canCreate: () => false,\n        canUpdate: () => false,\n        canDelete: () => false,\n        hasPermission: (): PermissionResult => ({\n          hasAccess: false,\n          requiresApproval: false,\n          reason: 'Pou≈æ√≠vateƒæ nie je prihl√°sen√Ω',\n        }),\n        hasCompanyPermission: (): PermissionResult => ({\n          hasAccess: false,\n          requiresApproval: false,\n          reason: 'Pou≈æ√≠vateƒæ nie je prihl√°sen√Ω',\n        }),\n        getUserPermissions: () => [],\n        getUserCompanyAccess: () => [],\n        getAccessibleCompanies: () => [],\n        currentUser: null,\n        isAdmin: false,\n        isEmployee: false,\n        isTempWorker: false,\n        isMechanic: false,\n        isSalesRep: false,\n        isCompanyOwner: false,\n        permissionsLoading: false,\n        permissionsError: null,\n      };\n    }\n\n    return {\n      // üîç COMPANY-BASED PERMISSION FUNCTIONS\n      canRead: (resource: string, context?: { companyId?: string }) => {\n        // Pre company_owner - automaticky povol√≠ resources definovan√© v backend ROLE_PERMISSIONS\n        if (user.role === 'company_owner') {\n          const backendPermissions = [\n            'vehicles',\n            'rentals',\n            'expenses',\n            'insurances',\n            'companies',\n            'finances',\n            'protocols',\n            'settlements',\n            'customers',\n          ];\n          if (backendPermissions.includes(resource)) {\n            return true;\n          }\n        }\n        return hasCompanyPermission(\n          userCompanyAccess,\n          user.role,\n          resource,\n          'read',\n          context\n        ).hasAccess;\n      },\n\n      canCreate: (resource: string, context?: { companyId?: string }) => {\n        // Pre company_owner - obmedzen√© create permissions\n        if (user.role === 'company_owner') {\n          const writePermissions = ['rentals', 'expenses', 'settlements']; // len niektor√© resources m√¥≈æe vytv√°ra≈•\n          if (writePermissions.includes(resource)) {\n            return true;\n          }\n          return false;\n        }\n        return hasCompanyPermission(\n          userCompanyAccess,\n          user.role,\n          resource,\n          'write',\n          context\n        ).hasAccess;\n      },\n\n      canUpdate: (resource: string, context?: { companyId?: string }) => {\n        // Pre company_owner - obmedzen√© update permissions\n        if (user.role === 'company_owner') {\n          const updatePermissions = ['companies', 'settlements']; // len svoju firmu a vy√∫ƒçtovania m√¥≈æe upravi≈•\n          if (updatePermissions.includes(resource)) {\n            return true;\n          }\n          return false;\n        }\n        return hasCompanyPermission(\n          userCompanyAccess,\n          user.role,\n          resource,\n          'write',\n          context\n        ).hasAccess;\n      },\n\n      canDelete: (resource: string, context?: { companyId?: string }) => {\n        // Pre company_owner - obmedzen√© delete permissions\n        if (user.role === 'company_owner') {\n          const deletePermissions = ['settlements']; // len vy√∫ƒçtovania m√¥≈æe maza≈•\n          if (deletePermissions.includes(resource)) {\n            return true;\n          }\n          return false;\n        }\n        return hasCompanyPermission(\n          userCompanyAccess,\n          user.role,\n          resource,\n          'delete',\n          context\n        ).hasAccess;\n      },\n\n      // üõ°Ô∏è FULL PERMISSION CHECK\n      hasPermission: (\n        resource: Permission['resource'],\n        action: Permission['actions'][0],\n        context?: Record<string, unknown>\n      ): PermissionResult => {\n        // Pre admin pou≈æ√≠vame legacy funkciu\n        if (user.role === 'admin') {\n          return hasLegacyPermission(user.role, resource, action, {\n            userId: user.id,\n            companyId: user.companyId,\n            ...context,\n          });\n        }\n\n        // Pre company_owner pou≈æ√≠vame vlastn√∫ logiku\n        if (user.role === 'company_owner') {\n          const backendPermissions = [\n            'vehicles',\n            'rentals',\n            'expenses',\n            'insurances',\n            'companies',\n            'finances',\n            'protocols',\n            'settlements',\n            'customers',\n          ];\n\n          if (action === 'read' && backendPermissions.includes(resource)) {\n            return { hasAccess: true, requiresApproval: false };\n          }\n\n          if (\n            action === 'create' &&\n            ['rentals', 'expenses', 'settlements'].includes(resource)\n          ) {\n            return { hasAccess: true, requiresApproval: false };\n          }\n\n          if (\n            action === 'update' &&\n            ['companies', 'settlements'].includes(resource)\n          ) {\n            return { hasAccess: true, requiresApproval: false };\n          }\n\n          if (action === 'delete' && ['settlements'].includes(resource)) {\n            return { hasAccess: true, requiresApproval: false };\n          }\n\n          return {\n            hasAccess: false,\n            requiresApproval: false,\n            reason: 'Company owner nem√° opr√°vnenie na t√∫to akciu',\n          };\n        }\n\n        // Pre ostatn√Ωch pou≈æ√≠vame company-based permissions\n        const actionMap = {\n          read: 'read',\n          create: 'write',\n          update: 'write',\n          delete: 'delete',\n        } as const;\n\n        const mappedAction = actionMap[action as keyof typeof actionMap];\n        if (!mappedAction) {\n          return {\n            hasAccess: false,\n            requiresApproval: false,\n            reason: 'Nezn√°ma akcia',\n          };\n        }\n\n        return hasCompanyPermission(\n          userCompanyAccess,\n          user.role,\n          resource,\n          mappedAction,\n          {\n            userId: user.id,\n            companyId: user.companyId,\n            ...context,\n          }\n        );\n      },\n\n      // üè¢ COMPANY-BASED PERMISSION CHECK\n      hasCompanyPermission: (\n        resource: string,\n        action: 'read' | 'write' | 'delete',\n        context?: { companyId?: string }\n      ): PermissionResult => {\n        // Pre company_owner pou≈æ√≠vame vlastn√∫ logiku\n        if (user.role === 'company_owner') {\n          const backendPermissions = [\n            'vehicles',\n            'rentals',\n            'expenses',\n            'insurances',\n            'companies',\n            'finances',\n            'protocols',\n            'settlements',\n            'customers',\n          ];\n\n          if (action === 'read' && backendPermissions.includes(resource)) {\n            return { hasAccess: true, requiresApproval: false };\n          }\n\n          if (\n            action === 'write' &&\n            ['rentals', 'expenses', 'companies', 'settlements'].includes(\n              resource\n            )\n          ) {\n            return { hasAccess: true, requiresApproval: false };\n          }\n\n          if (action === 'delete' && ['settlements'].includes(resource)) {\n            return { hasAccess: true, requiresApproval: false };\n          }\n\n          return {\n            hasAccess: false,\n            requiresApproval: false,\n            reason: 'Company owner nem√° opr√°vnenie na t√∫to akciu',\n          };\n        }\n\n        return hasCompanyPermission(\n          userCompanyAccess,\n          user.role,\n          resource,\n          action,\n          {\n            userId: user.id,\n            ...context,\n          }\n        );\n      },\n\n      // üìã GET ALL USER PERMISSIONS\n      getUserPermissions: () => ROLE_PERMISSIONS[user.role] || [],\n\n      // üè¢ GET USER COMPANY ACCESS\n      getUserCompanyAccess: () => userCompanyAccess,\n\n      // üè¢ GET ACCESSIBLE COMPANIES\n      getAccessibleCompanies: () =>\n        userCompanyAccess.map(access => ({\n          id: access.companyId,\n          name: access.companyName,\n        })),\n\n      // üë§ CURRENT USER INFO\n      currentUser: user,\n\n      // üè¢ ROLE CHECKS\n      isAdmin: user.role === 'admin',\n      isEmployee: user.role === 'employee',\n      isTempWorker: user.role === 'temp_worker',\n      isMechanic: user.role === 'mechanic',\n      isSalesRep: user.role === 'sales_rep',\n      isCompanyOwner: user.role === 'company_owner',\n\n      // üìä LOADING & ERROR STATES\n      permissionsLoading,\n      permissionsError,\n    };\n  }, [user, userCompanyAccess, permissionsLoading, permissionsError]);\n\n  return permissions;\n}\n\n// üéØ UTILITY FUNCTIONS\nexport function canUserAccess(\n  userRole: UserRole,\n  resource: Permission['resource'],\n  action: Permission['actions'][0]\n): boolean {\n  return hasLegacyPermission(userRole, resource, action).hasAccess;\n}\n\nexport function getUserRoleDisplayName(role: UserRole): string {\n  const roleNames: Record<UserRole, string> = {\n    admin: 'üëë Administr√°tor',\n    employee: 'üë• Zamestnanec',\n    temp_worker: 'üîß Brig√°dnik',\n    mechanic: 'üî® Mechanik',\n    sales_rep: 'üíº Obchodn√Ω z√°stupca',\n    company_owner: 'üè¢ Majiteƒæ vozidiel',\n  };\n\n  return roleNames[role] || role;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useProtocolMedia.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/usePushNotifications.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handlePermissionChange' is assigned a value but never used.","line":215,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":215,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üîî Push Notifications React Hook\n// Easy-to-use React hook for push notification management\n\nimport { useCallback, useEffect, useState } from 'react';\n\nimport {\n  pushNotificationService,\n  type NotificationPayload,\n  type PushNotificationPreferences,\n} from '../services/pushNotifications';\n\ninterface UsePushNotificationsReturn {\n  // Status\n  isSupported: boolean;\n  isSubscribed: boolean;\n  permission: NotificationPermission;\n  loading: boolean;\n  error: string | null;\n\n  // Preferences\n  preferences: PushNotificationPreferences | null;\n\n  // Actions\n  subscribe: () => Promise<boolean>;\n  unsubscribe: () => Promise<boolean>;\n  updatePreferences: (\n    prefs: Partial<PushNotificationPreferences>\n  ) => Promise<boolean>;\n  sendTestNotification: (payload: NotificationPayload) => Promise<boolean>;\n  refreshStatus: () => Promise<void>;\n}\n\nexport const usePushNotifications = (): UsePushNotificationsReturn => {\n  const [isSupported, setIsSupported] = useState(false);\n  const [isSubscribed, setIsSubscribed] = useState(false);\n  const [permission, setPermission] =\n    useState<NotificationPermission>('default');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [preferences, setPreferences] =\n    useState<PushNotificationPreferences | null>(null);\n\n  // Initialize push notifications\n  const initialize = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Initialize service\n      const initialized = await pushNotificationService.initialize();\n\n      if (!initialized) {\n        throw new Error('Failed to initialize push notification service');\n      }\n\n      // Get current status\n      const status = await pushNotificationService.getSubscriptionStatus();\n      setIsSupported(status.isSupported);\n      setIsSubscribed(status.isSubscribed);\n      setPermission(status.permission);\n\n      // Load preferences if subscribed\n      if (status.isSubscribed) {\n        const prefs =\n          await pushNotificationService.getNotificationPreferences();\n        setPreferences(prefs);\n      }\n    } catch (err: unknown) {\n      const errorMessage =\n        err instanceof Error\n          ? err.message\n          : 'Failed to initialize push notifications';\n      setError(errorMessage);\n      console.error('Push notifications initialization error:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Subscribe to push notifications\n  const subscribe = useCallback(async (): Promise<boolean> => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const success = await pushNotificationService.subscribe();\n\n      if (success) {\n        setIsSubscribed(true);\n        setPermission('granted');\n\n        // Load preferences\n        const prefs =\n          await pushNotificationService.getNotificationPreferences();\n        setPreferences(prefs);\n\n        return true;\n      } else {\n        throw new Error('Failed to subscribe to push notifications');\n      }\n    } catch (err: unknown) {\n      const errorMessage =\n        err instanceof Error ? err.message : 'Failed to subscribe';\n      setError(errorMessage);\n      console.error('Push notification subscription error:', err);\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Unsubscribe from push notifications\n  const unsubscribe = useCallback(async (): Promise<boolean> => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const success = await pushNotificationService.unsubscribe();\n\n      if (success) {\n        setIsSubscribed(false);\n        setPreferences(null);\n        return true;\n      } else {\n        throw new Error('Failed to unsubscribe from push notifications');\n      }\n    } catch (err: unknown) {\n      const errorMessage =\n        err instanceof Error ? err.message : 'Failed to unsubscribe';\n      setError(errorMessage);\n      console.error('Push notification unsubscription error:', err);\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Update notification preferences\n  const updatePreferences = useCallback(\n    async (\n      newPreferences: Partial<PushNotificationPreferences>\n    ): Promise<boolean> => {\n      if (!preferences) return false;\n\n      const oldPreferences = { ...preferences };\n\n      // Optimistic update\n      setPreferences(prev => (prev ? { ...prev, ...newPreferences } : null));\n\n      try {\n        const success =\n          await pushNotificationService.updateNotificationPreferences(\n            newPreferences\n          );\n\n        if (!success) {\n          // Revert on failure\n          setPreferences(oldPreferences);\n          throw new Error('Failed to update preferences');\n        }\n\n        return true;\n      } catch (err: unknown) {\n        // Revert on error\n        setPreferences(oldPreferences);\n        const errorMessage =\n          err instanceof Error ? err.message : 'Failed to update preferences';\n        setError(errorMessage);\n        console.error('Push notification preferences update error:', err);\n        return false;\n      }\n    },\n    [preferences]\n  );\n\n  // Send test notification\n  const sendTestNotification = useCallback(\n    async (payload: NotificationPayload): Promise<boolean> => {\n      setError(null);\n\n      try {\n        const success =\n          await pushNotificationService.sendTestNotification(payload);\n\n        if (!success) {\n          throw new Error('Failed to send test notification');\n        }\n\n        return true;\n      } catch (err: unknown) {\n        const errorMessage =\n          err instanceof Error\n            ? err.message\n            : 'Failed to send test notification';\n        setError(errorMessage);\n        console.error('Test notification error:', err);\n        return false;\n      }\n    },\n    []\n  );\n\n  // Refresh current status\n  const refreshStatus = useCallback(async (): Promise<void> => {\n    await initialize();\n  }, [initialize]);\n\n  // Initialize on mount\n  useEffect(() => {\n    initialize();\n  }, [initialize]);\n\n  // Listen for permission changes\n  useEffect(() => {\n    const handlePermissionChange = () => {\n      const newPermission = Notification.permission;\n      setPermission(newPermission);\n\n      // If permission was granted, try to refresh status\n      if (newPermission === 'granted' && !isSubscribed) {\n        refreshStatus();\n      }\n\n      // If permission was denied, update subscription status\n      if (newPermission === 'denied' && isSubscribed) {\n        setIsSubscribed(false);\n        setPreferences(null);\n      }\n    };\n\n    // Listen for visibility change to refresh status\n    const handleVisibilityChange = () => {\n      if (!document.hidden && isSupported) {\n        refreshStatus();\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n\n    // Note: There's no direct way to listen for permission changes\n    // We could poll, but it's better to refresh on visibility change\n\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [isSupported, isSubscribed, refreshStatus]);\n\n  return {\n    // Status\n    isSupported,\n    isSubscribed,\n    permission,\n    loading,\n    error,\n\n    // Preferences\n    preferences,\n\n    // Actions\n    subscribe,\n    unsubscribe,\n    updatePreferences,\n    sendTestNotification,\n    refreshStatus,\n  };\n};\n\n// Simplified hook for basic usage\nexport const useSimplePushNotifications = () => {\n  const {\n    isSupported,\n    isSubscribed,\n    permission,\n    loading,\n    subscribe,\n    unsubscribe,\n  } = usePushNotifications();\n\n  return {\n    isSupported,\n    isSubscribed,\n    permission,\n    loading,\n    subscribe,\n    unsubscribe,\n    canSubscribe: isSupported && !isSubscribed && permission !== 'denied',\n    needsPermission: isSupported && permission === 'default',\n    isBlocked: permission === 'denied',\n  };\n};\n\nexport default usePushNotifications;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useRentalActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useRentalFilters.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1035,1038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1035,1038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1084,1087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1084,1087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1098,1101],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1098,1101],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":455,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":455,"endColumn":66}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport type { Rental } from '../types';\n\n// Filter state interface\nexport interface FilterState {\n  // Z√°kladn√© filtre - arrays pre multi-select\n  status: string[];\n  paymentMethod: string[];\n  company: string[];\n  dateFrom: string;\n  dateTo: string;\n  priceMin: string;\n  priceMax: string;\n  protocolStatus: string[];\n\n  // Roz≈°√≠ren√© filtre\n  customerName: string;\n  vehicleBrand: string;\n  vehicleModel: string;\n  licensePlate: string;\n  customerEmail: string;\n  customerPhone: string;\n  customerCompany: string;\n  insuranceCompany: string;\n  insuranceType: string;\n\n  // ƒåasov√© filtre\n  timeFilter: string;\n\n  // Cenov√© filtre\n  priceRange: string;\n\n  // Stav platby\n  paymentStatus: string;\n\n  // Zobrazenie\n  showOnlyActive: boolean;\n  showOnlyOverdue: boolean;\n  showOnlyCompleted: boolean;\n\n  // Zoraƒèovanie\n  sortBy: 'created_at' | 'start_date' | 'end_date';\n  sortOrder: 'asc' | 'desc';\n}\n\ninterface UseRentalFiltersProps {\n  rentals: Rental[];\n  vehicles?: any[];\n  protocols?: Record<string, { handover?: any; return?: any }>;\n}\n\ninterface UseRentalFiltersReturn {\n  // Search state\n  searchQuery: string;\n  setSearchQuery: (query: string) => void;\n  debouncedSearchQuery: string;\n\n  // Filter state\n  showFilters: boolean;\n  setShowFilters: (show: boolean) => void;\n  advancedFilters: FilterState;\n  setAdvancedFilters: (filters: FilterState) => void;\n\n  // Filtered data\n  filteredRentals: Rental[];\n\n  // Filter options\n  uniqueStatuses: string[];\n  uniqueCompanies: string[];\n  uniquePaymentMethods: string[];\n  uniqueVehicleBrands: string[];\n  uniqueInsuranceCompanies: string[];\n  uniqueInsuranceTypes: string[];\n\n  // Quick filter handlers\n  handleQuickFilter: (filterType: string) => void;\n  resetFilters: () => void;\n}\n\nexport const useRentalFilters = ({\n  rentals,\n  vehicles = [],\n  protocols = {},\n}: UseRentalFiltersProps): UseRentalFiltersReturn => {\n  // Search state - LIVE SEARCH s debouncing\n  const [searchQuery, setSearchQuery] = useState('');\n  const [debouncedSearchQuery, setDebouncedSearchQuery] = useState('');\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Advanced filters state\n  const [advancedFilters, setAdvancedFilters] = useState<FilterState>({\n    // Z√°kladn√© filtre - arrays pre multi-select\n    status: [] as string[],\n    paymentMethod: [] as string[],\n    company: [] as string[],\n    dateFrom: '',\n    dateTo: '',\n    priceMin: '',\n    priceMax: '',\n    protocolStatus: [] as string[],\n\n    // Roz≈°√≠ren√© filtre\n    customerName: '',\n    vehicleBrand: '',\n    vehicleModel: '',\n    licensePlate: '',\n    customerEmail: '',\n    customerPhone: '',\n    customerCompany: '',\n    insuranceCompany: '',\n    insuranceType: '',\n\n    // ƒåasov√© filtre\n    timeFilter: 'all',\n\n    // Cenov√© filtre\n    priceRange: 'all',\n\n    // Stav platby\n    paymentStatus: 'all',\n\n    // Zobrazenie\n    showOnlyActive: false,\n    showOnlyOverdue: false,\n    showOnlyCompleted: false,\n\n    // Zoraƒèovanie\n    sortBy: 'created_at' as const,\n    sortOrder: 'desc' as const,\n  });\n\n  // Debounce search query\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedSearchQuery(searchQuery);\n    }, 300);\n\n    return () => clearTimeout(timer);\n  }, [searchQuery]);\n\n  // ‚ö° OPTIMIZED: Memoized vehicle lookup map for performance\n  const vehicleLookupMap = useMemo(() => {\n    const map = new Map();\n    vehicles.forEach(vehicle => {\n      map.set(vehicle.id, vehicle);\n    });\n    return map;\n  }, [vehicles]);\n\n  // Get unique values for filter dropdowns\n  const uniqueStatuses = useMemo(() => {\n    const statuses = new Set(\n      rentals.map(rental => rental.status).filter(Boolean) as string[]\n    );\n    return Array.from(statuses);\n  }, [rentals]);\n\n  const uniqueCompanies = useMemo(() => {\n    const companies = new Set(\n      rentals\n        .map(rental => {\n          const vehicle = vehicleLookupMap.get(rental.vehicleId);\n          return vehicle?.company;\n        })\n        .filter(Boolean)\n    );\n    return Array.from(companies);\n  }, [rentals, vehicleLookupMap]);\n\n  const uniquePaymentMethods = useMemo(() => {\n    const methods = new Set(\n      rentals.map(rental => rental.paymentMethod).filter(Boolean)\n    );\n    return Array.from(methods);\n  }, [rentals]);\n\n  const uniqueVehicleBrands = useMemo(() => {\n    const brands = new Set(\n      rentals\n        .map(rental => {\n          const vehicle = vehicleLookupMap.get(rental.vehicleId);\n          return vehicle?.brand;\n        })\n        .filter(Boolean)\n    );\n    return Array.from(brands);\n  }, [rentals, vehicleLookupMap]);\n\n  const uniqueInsuranceCompanies = useMemo(() => {\n    return [] as string[];\n  }, []);\n\n  const uniqueInsuranceTypes = useMemo(() => {\n    return [] as string[];\n  }, []);\n\n  // Filter rentals based on search and filters\n  const filteredRentals = useMemo(() => {\n    let filtered = [...rentals];\n\n    // Search filter\n    if (debouncedSearchQuery.trim()) {\n      const query = debouncedSearchQuery.toLowerCase().trim();\n      filtered = filtered.filter(rental => {\n        const vehicle = vehicleLookupMap.get(rental.vehicleId);\n\n        return (\n          rental.customerName?.toLowerCase().includes(query) ||\n          rental.customer?.email?.toLowerCase().includes(query) ||\n          rental.customer?.phone?.toLowerCase().includes(query) ||\n          vehicle?.licensePlate?.toLowerCase().includes(query) ||\n          vehicle?.brand?.toLowerCase().includes(query) ||\n          vehicle?.model?.toLowerCase().includes(query) ||\n          vehicle?.company?.toLowerCase().includes(query) ||\n          rental.id?.toLowerCase().includes(query)\n        );\n      });\n    }\n\n    // Status filter\n    if (advancedFilters.status.length > 0) {\n      filtered = filtered.filter(\n        rental =>\n          rental.status && advancedFilters.status.includes(rental.status)\n      );\n    }\n\n    // Payment method filter\n    if (advancedFilters.paymentMethod.length > 0) {\n      filtered = filtered.filter(rental =>\n        advancedFilters.paymentMethod.includes(rental.paymentMethod)\n      );\n    }\n\n    // Company filter\n    if (advancedFilters.company.length > 0) {\n      filtered = filtered.filter(rental => {\n        const vehicle = vehicleLookupMap.get(rental.vehicleId);\n        return vehicle && advancedFilters.company.includes(vehicle.company);\n      });\n    }\n\n    // Date range filter\n    if (advancedFilters.dateFrom) {\n      const fromDate = new Date(advancedFilters.dateFrom);\n      filtered = filtered.filter(\n        rental => new Date(rental.startDate) >= fromDate\n      );\n    }\n\n    if (advancedFilters.dateTo) {\n      const toDate = new Date(advancedFilters.dateTo);\n      filtered = filtered.filter(rental => new Date(rental.endDate) <= toDate);\n    }\n\n    // Price range filter\n    if (advancedFilters.priceMin) {\n      const minPrice = parseFloat(advancedFilters.priceMin);\n      filtered = filtered.filter(\n        rental => (rental.totalPrice || 0) >= minPrice\n      );\n    }\n\n    if (advancedFilters.priceMax) {\n      const maxPrice = parseFloat(advancedFilters.priceMax);\n      filtered = filtered.filter(\n        rental => (rental.totalPrice || 0) <= maxPrice\n      );\n    }\n\n    // Customer name filter\n    if (advancedFilters.customerName.trim()) {\n      const customerQuery = advancedFilters.customerName.toLowerCase().trim();\n      filtered = filtered.filter(rental =>\n        rental.customerName?.toLowerCase().includes(customerQuery)\n      );\n    }\n\n    // Vehicle brand filter\n    if (\n      advancedFilters.vehicleBrand &&\n      advancedFilters.vehicleBrand !== 'all'\n    ) {\n      filtered = filtered.filter(rental => {\n        const vehicle = vehicleLookupMap.get(rental.vehicleId);\n        return vehicle?.brand === advancedFilters.vehicleBrand;\n      });\n    }\n\n    // License plate filter\n    if (advancedFilters.licensePlate.trim()) {\n      const plateQuery = advancedFilters.licensePlate.toLowerCase().trim();\n      filtered = filtered.filter(rental => {\n        const vehicle = vehicleLookupMap.get(rental.vehicleId);\n        return vehicle?.licensePlate?.toLowerCase().includes(plateQuery);\n      });\n    }\n\n    // Payment status filter\n    if (advancedFilters.paymentStatus !== 'all') {\n      if (advancedFilters.paymentStatus === 'paid') {\n        filtered = filtered.filter(rental => rental.paid);\n      } else if (advancedFilters.paymentStatus === 'unpaid') {\n        filtered = filtered.filter(rental => !rental.paid);\n      }\n    }\n\n    // Show only active filter\n    if (advancedFilters.showOnlyActive) {\n      const today = new Date();\n      filtered = filtered.filter(rental => {\n        const startDate = new Date(rental.startDate);\n        const endDate = new Date(rental.endDate);\n        return startDate <= today && endDate >= today;\n      });\n    }\n\n    // Show only overdue filter\n    if (advancedFilters.showOnlyOverdue) {\n      const today = new Date();\n      filtered = filtered.filter(rental => {\n        const endDate = new Date(rental.endDate);\n        return endDate < today && !protocols[rental.id]?.return;\n      });\n    }\n\n    // Show only completed filter\n    if (advancedFilters.showOnlyCompleted) {\n      filtered = filtered.filter(rental => protocols[rental.id]?.return);\n    }\n\n    // üéØ CUSTOM TIME FILTERS - pre r√Ωchle filtre z dashboard\n    if (advancedFilters.timeFilter && advancedFilters.timeFilter !== 'all') {\n      const today = new Date();\n      const tomorrow = new Date(today);\n      tomorrow.setDate(today.getDate() + 1);\n\n      // Calculate week boundaries\n      const endOfWeek = new Date(today);\n      endOfWeek.setDate(today.getDate() + (7 - today.getDay())); // Najbli≈æ≈°ia nedeƒæa\n      endOfWeek.setHours(23, 59, 59, 999);\n\n      switch (advancedFilters.timeFilter) {\n        case 'todayActivity':\n          // Pren√°jmy ktor√© sa dnes zaƒç√≠naj√∫ ALEBO konƒçia\n          filtered = filtered.filter(rental => {\n            const startDate = new Date(rental.startDate);\n            const endDate = new Date(rental.endDate);\n            const isToday = (date: Date) => {\n              return date.toDateString() === today.toDateString();\n            };\n            return isToday(startDate) || isToday(endDate);\n          });\n          break;\n\n        case 'tomorrowReturns':\n          // Pren√°jmy ktor√© sa zajtra konƒçia\n          filtered = filtered.filter(rental => {\n            const endDate = new Date(rental.endDate);\n            return endDate.toDateString() === tomorrow.toDateString();\n          });\n          break;\n\n        case 'weekActivity':\n          // Pren√°jmy ktor√© sa tento t√Ω≈æde≈à zaƒç√≠naj√∫ ALEBO konƒçia\n          filtered = filtered.filter(rental => {\n            const startDate = new Date(rental.startDate);\n            const endDate = new Date(rental.endDate);\n\n            const startsThisWeek = startDate >= today && startDate <= endOfWeek;\n            const endsThisWeek = endDate >= today && endDate <= endOfWeek;\n\n            return startsThisWeek || endsThisWeek;\n          });\n          break;\n\n        case 'newToday':\n          // Pren√°jmy vytvoren√© dnes\n          filtered = filtered.filter(rental => {\n            if (!rental.createdAt) return false;\n            const createdDate = new Date(rental.createdAt);\n            return createdDate.toDateString() === today.toDateString();\n          });\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return filtered;\n  }, [\n    rentals,\n    debouncedSearchQuery,\n    advancedFilters,\n    vehicleLookupMap,\n    protocols,\n  ]);\n\n  // üéØ QUICK FILTER HANDLER - pre dashboard metriky\n  const handleQuickFilter = useCallback((filterType: string) => {\n    const today = new Date();\n    const tomorrow = new Date(today);\n    tomorrow.setDate(today.getDate() + 1);\n\n    // Calculate week boundaries\n    const endOfWeek = new Date(today);\n    endOfWeek.setDate(today.getDate() + (7 - today.getDay())); // Najbli≈æ≈°ia nedeƒæa\n    endOfWeek.setHours(23, 59, 59, 999);\n\n    // Reset all filters first\n    const baseFilters: FilterState = {\n      status: [],\n      paymentMethod: [],\n      company: [],\n      dateFrom: '',\n      dateTo: '',\n      priceMin: '',\n      priceMax: '',\n      protocolStatus: [],\n      customerName: '',\n      vehicleBrand: '',\n      vehicleModel: '',\n      licensePlate: '',\n      customerEmail: '',\n      customerPhone: '',\n      customerCompany: '',\n      insuranceCompany: '',\n      insuranceType: '',\n      timeFilter: filterType, // Set the time filter type\n      priceRange: 'all',\n      paymentStatus: 'all',\n      showOnlyActive: false,\n      showOnlyOverdue: false,\n      showOnlyCompleted: false,\n    };\n\n    const quickFilters = { ...baseFilters };\n\n    switch (filterType) {\n      case 'overdue':\n        // Preterminovan√© - pren√°jmy ktor√© mali skonƒçi≈• ale e≈°te sa nevr√°tili\n        quickFilters.showOnlyOverdue = true;\n        break;\n\n      case 'todayActivity':\n        // Dnes odovzdanie/vr√°tenie - pren√°jmy ktor√© sa dnes zaƒç√≠naj√∫ ALEBO konƒçia\n        // Potrebujeme custom filter pre toto, nie len dateFrom/dateTo\n        quickFilters.timeFilter = 'todayActivity';\n        break;\n\n      case 'tomorrowReturns':\n        // Zajtra vr√°tenie - pren√°jmy ktor√© sa zajtra konƒçia\n        const tomorrowStr = tomorrow.toISOString().split('T')[0];\n        quickFilters.dateTo = tomorrowStr;\n        quickFilters.timeFilter = 'tomorrowReturns';\n        break;\n\n      case 'weekActivity':\n        // Tento t√Ω≈æde≈à odovzdanie/vr√°tenie - pren√°jmy ktor√© sa tento t√Ω≈æde≈à zaƒç√≠naj√∫ ALEBO konƒçia\n        quickFilters.timeFilter = 'weekActivity';\n        break;\n\n      case 'active':\n        // Akt√≠vne pren√°jmy - pren√°jmy ktor√© pr√°ve prebiehaj√∫\n        quickFilters.showOnlyActive = true;\n        break;\n\n      case 'unpaid':\n        // Nezaplaten√© pren√°jmy\n        quickFilters.paymentStatus = 'unpaid';\n        break;\n\n      case 'pending':\n        // ƒåakaj√∫ce pren√°jmy\n        quickFilters.status = ['pending'];\n        break;\n\n      case 'newToday':\n        // Nov√© dnes - pren√°jmy vytvoren√© dnes\n        quickFilters.timeFilter = 'newToday';\n        break;\n\n      default:\n        break;\n    }\n\n    setAdvancedFilters(prev => ({\n      ...prev,\n      ...quickFilters,\n      showOnlyActive: quickFilters.showOnlyActive || false,\n      showOnlyOverdue: quickFilters.showOnlyOverdue || false,\n      showOnlyCompleted: quickFilters.showOnlyCompleted || false,\n    }));\n\n    // Show filters panel\n    setShowFilters(true);\n  }, []);\n\n  // Reset all filters\n  const resetFilters = useCallback(() => {\n    setSearchQuery('');\n    setAdvancedFilters({\n      status: [],\n      paymentMethod: [],\n      company: [],\n      dateFrom: '',\n      dateTo: '',\n      priceMin: '',\n      priceMax: '',\n      protocolStatus: [],\n      customerName: '',\n      vehicleBrand: '',\n      vehicleModel: '',\n      licensePlate: '',\n      customerEmail: '',\n      customerPhone: '',\n      customerCompany: '',\n      insuranceCompany: '',\n      insuranceType: '',\n      timeFilter: 'all',\n      priceRange: 'all',\n      paymentStatus: 'all',\n      showOnlyActive: false,\n      showOnlyOverdue: false,\n      showOnlyCompleted: false,\n    });\n    setShowFilters(false);\n  }, []);\n\n  return {\n    // Search state\n    searchQuery,\n    setSearchQuery,\n    debouncedSearchQuery,\n\n    // Filter state\n    showFilters,\n    setShowFilters,\n    advancedFilters,\n    setAdvancedFilters,\n\n    // Filtered data\n    filteredRentals,\n\n    // Filter options\n    uniqueStatuses,\n    uniqueCompanies,\n    uniquePaymentMethods,\n    uniqueVehicleBrands,\n    uniqueInsuranceCompanies,\n    uniqueInsuranceTypes,\n\n    // Quick filter handlers\n    handleQuickFilter,\n    resetFilters,\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useRentalProtocols.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/hooks/useWebSocket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'debugPerformance' is defined but never used.","line":30,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":55}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\n\nimport './index.css';\nimport App from './App';\n// Sentry removed - using MobileLogger instead\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  // üöÄ DOƒåASNE VYPNUT√ù StrictMode pre auth debugging\n  // <React.StrictMode>\n  <App />\n  // </React.StrictMode>\n);\n\n// Error handling pre manifest.json\nwindow.addEventListener('error', event => {\n  if (event.filename && event.filename.includes('manifest.json')) {\n    logger.debug('‚ö†Ô∏è Ignoring manifest.json error - this is expected');\n    event.preventDefault();\n  }\n});\n\n// Initialize error handling for manifest.json and performance monitoring\nif (process.env.NODE_ENV === 'development') {\n  // ‚ö° PERFORMANCE: Disabled verbose Web Vitals logging to reduce console spam\n  import('./utils/webVitals').then(({ debugPerformance, reportWebVitals }) => {\n    // debugPerformance(); // Disabled - too verbose\n\n    // Initialize Web Vitals monitoring (silent mode)\n    reportWebVitals(); // No callback = silent monitoring\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/lib/env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/lib/errors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/lib/flags.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/lib/flags.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[664,667],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[664,667],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Vite-friendly feature flags (frontend)\n * Centralizovan√Ω pr√≠stup k VITE_FLAG_* premenn√Ωm\n */\n\n/// <reference types=\"vite/client\" />\n\n/**\n * Z√≠ska hodnotu feature flag z environment premenn√Ωch\n * @param name - n√°zov flagu (bez VITE_FLAG_ prefixu)\n * @param fallback - predvolen√° hodnota ak flag nie je nastaven√Ω\n * @returns boolean hodnota flagu\n *\n * @example\n * // V .env.local: VITE_FLAG_EXTRA_KM=true\n * const showExtraKm = flag('EXTRA_KM'); // true\n * const newFeature = flag('NEW_FEATURE', false); // false (default)\n */\nexport function flag(name: string, fallback = false): boolean {\n  const key = `VITE_FLAG_${name}`;\n  const v = (import.meta.env as any)[key];\n\n  if (v === '1' || v === 'true') return true;\n  if (v === '0' || v === 'false') return false;\n\n  return fallback;\n}\n\n/**\n * Z√≠ska v≈°etky akt√≠vne feature flags pre debugging\n */\nexport function getAllFlags(): Record<string, boolean> {\n  const flags: Record<string, boolean> = {};\n  const env = import.meta.env;\n\n  Object.keys(env).forEach(key => {\n    if (key.startsWith('VITE_FLAG_')) {\n      const flagName = key.replace('VITE_FLAG_', '');\n      flags[flagName] = flag(flagName);\n    }\n  });\n\n  return flags;\n}\n\n// Debug output v development mode\nif (import.meta.env.DEV) {\n  const activeFlags = getAllFlags();\n  if (Object.keys(activeFlags).length > 0) {\n    console.log('üö© Active feature flags:', activeFlags);\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/lib/format.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/lib/format.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/lib/number.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/lib/number.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/main.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'debugPerformance' is defined but never used.","line":28,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":55}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\n\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  // Doƒçasne vypnut√Ω StrictMode pre auth debugging\n  // <React.StrictMode>\n  <App />\n  // </React.StrictMode>\n);\n\n// Error handling pre manifest.json\nwindow.addEventListener('error', event => {\n  if (event.filename && event.filename.includes('manifest.json')) {\n    logger.debug('‚ö†Ô∏è Ignoring manifest.json error - this is expected');\n    event.preventDefault();\n  }\n});\n\n// Initialize performance monitoring\nif (import.meta.env.MODE === 'development') {\n  import('./utils/webVitals').then(({ debugPerformance, reportWebVitals }) => {\n    reportWebVitals(); // Silent monitoring\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/pages/AvailabilityPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/pages/AvailabilityPageNew.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/pages/SmartAvailabilityPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/react-app-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/reportWebVitals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/services/api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/services/pushNotifications.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[392,395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[392,395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":389,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":389,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10415,10418],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10415,10418],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üîî Push Notifications Frontend Service\n// Complete push notification management for BlackRent\n\nimport { getAPI_BASE_URL } from './api';\n\ninterface PushSubscriptionData {\n  endpoint: string;\n  keys: {\n    p256dh: string;\n    auth: string;\n  };\n}\n\ninterface NotificationPayload {\n  title: string;\n  body: string;\n  icon?: string;\n  badge?: string;\n  image?: string;\n  tag?: string;\n  data?: any;\n  actions?: NotificationAction[];\n  requireInteraction?: boolean;\n  silent?: boolean;\n  vibrate?: number[];\n  ttl?: number;\n}\n\ninterface NotificationAction {\n  action: string;\n  title: string;\n  icon?: string;\n}\n\ninterface PushNotificationPreferences {\n  rental_requests: boolean;\n  rental_approvals: boolean;\n  rental_reminders: boolean;\n  maintenance_alerts: boolean;\n  payment_reminders: boolean;\n  marketing_notifications: boolean;\n  email_notifications: boolean;\n  push_notifications: boolean;\n  quiet_hours_start: string;\n  quiet_hours_end: string;\n}\n\nclass PushNotificationService {\n  private vapidPublicKey: string | null = null;\n  private subscription: PushSubscription | null = null;\n  private registration: ServiceWorkerRegistration | null = null;\n\n  // Initialize push notifications\n  async initialize(): Promise<boolean> {\n    try {\n      // Check if service workers are supported\n      if (!('serviceWorker' in navigator)) {\n        console.warn('Service Workers not supported');\n        return false;\n      }\n\n      // Check if push messaging is supported\n      if (!('PushManager' in window)) {\n        console.warn('Push messaging not supported');\n        return false;\n      }\n\n      // Get service worker registration\n      this.registration = await navigator.serviceWorker.ready;\n\n      // Get VAPID public key from server\n      this.vapidPublicKey = await this.getVapidPublicKey();\n\n      if (!this.vapidPublicKey) {\n        console.warn('VAPID public key not available');\n        return false;\n      }\n\n      console.log('‚úÖ Push notifications initialized');\n      return true;\n    } catch (error) {\n      console.error('‚ùå Failed to initialize push notifications:', error);\n      return false;\n    }\n  }\n\n  // Get VAPID public key from server\n  private async getVapidPublicKey(): Promise<string | null> {\n    try {\n      const response = await fetch(`${getAPI_BASE_URL()}/push/vapid-key`);\n      const data = await response.json();\n      return data.publicKey;\n    } catch (error) {\n      console.error('‚ùå Error getting VAPID key:', error);\n      return null;\n    }\n  }\n\n  // Request notification permission\n  async requestPermission(): Promise<NotificationPermission> {\n    if (!('Notification' in window)) {\n      console.warn('Notifications not supported');\n      return 'denied';\n    }\n\n    let permission = Notification.permission;\n\n    if (permission === 'default') {\n      permission = await Notification.requestPermission();\n    }\n\n    console.log('üîî Notification permission:', permission);\n    return permission;\n  }\n\n  // Subscribe to push notifications\n  async subscribe(): Promise<boolean> {\n    try {\n      if (!this.registration || !this.vapidPublicKey) {\n        console.error('Push notifications not initialized');\n        return false;\n      }\n\n      // Check permission\n      const permission = await this.requestPermission();\n      if (permission !== 'granted') {\n        console.warn('Notification permission not granted');\n        return false;\n      }\n\n      // Get existing subscription\n      let subscription = await this.registration.pushManager.getSubscription();\n\n      // Subscribe if not already subscribed\n      if (!subscription) {\n        subscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: this.urlBase64ToUint8Array(this.vapidPublicKey),\n        });\n      }\n\n      this.subscription = subscription;\n\n      // Send subscription to server\n      const success = await this.sendSubscriptionToServer(subscription);\n\n      if (success) {\n        console.log('‚úÖ Successfully subscribed to push notifications');\n        return true;\n      } else {\n        console.error('‚ùå Failed to save subscription on server');\n        return false;\n      }\n    } catch (error) {\n      console.error('‚ùå Failed to subscribe to push notifications:', error);\n      return false;\n    }\n  }\n\n  // Unsubscribe from push notifications\n  async unsubscribe(): Promise<boolean> {\n    try {\n      if (!this.registration) {\n        return false;\n      }\n\n      const subscription =\n        await this.registration.pushManager.getSubscription();\n\n      if (subscription) {\n        // Unsubscribe from browser\n        const unsubscribed = await subscription.unsubscribe();\n\n        if (unsubscribed) {\n          // Remove from server\n          await this.removeSubscriptionFromServer(subscription);\n          this.subscription = null;\n          console.log('‚úÖ Successfully unsubscribed from push notifications');\n          return true;\n        }\n      }\n\n      return false;\n    } catch (error) {\n      console.error('‚ùå Failed to unsubscribe from push notifications:', error);\n      return false;\n    }\n  }\n\n  // Send subscription to server\n  private async sendSubscriptionToServer(\n    subscription: PushSubscription\n  ): Promise<boolean> {\n    try {\n      const token = this.getAuthToken();\n\n      const response = await fetch(`${getAPI_BASE_URL()}/push/subscription`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          subscription: subscription.toJSON(),\n          timestamp: Date.now(),\n          userAgent: navigator.userAgent,\n        }),\n      });\n\n      return response.ok;\n    } catch (error) {\n      console.error('‚ùå Error sending subscription to server:', error);\n      return false;\n    }\n  }\n\n  // Remove subscription from server\n  private async removeSubscriptionFromServer(\n    subscription: PushSubscription\n  ): Promise<boolean> {\n    try {\n      const token = this.getAuthToken();\n\n      const response = await fetch(`${getAPI_BASE_URL()}/push/subscription`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          endpoint: subscription.endpoint,\n        }),\n      });\n\n      return response.ok;\n    } catch (error) {\n      console.error('‚ùå Error removing subscription from server:', error);\n      return false;\n    }\n  }\n\n  // Get subscription status\n  async getSubscriptionStatus(): Promise<{\n    isSupported: boolean;\n    isSubscribed: boolean;\n    permission: NotificationPermission;\n    subscription?: PushSubscription;\n  }> {\n    const isSupported = 'serviceWorker' in navigator && 'PushManager' in window;\n\n    if (!isSupported) {\n      return {\n        isSupported: false,\n        isSubscribed: false,\n        permission: 'denied',\n      };\n    }\n\n    const permission = Notification.permission;\n\n    if (!this.registration) {\n      this.registration = await navigator.serviceWorker.ready;\n    }\n\n    const subscription = await this.registration.pushManager.getSubscription();\n\n    return {\n      isSupported,\n      isSubscribed: !!subscription,\n      permission,\n      subscription: subscription || undefined,\n    };\n  }\n\n  // Get user notification preferences\n  async getNotificationPreferences(): Promise<PushNotificationPreferences | null> {\n    try {\n      const token = this.getAuthToken();\n\n      const response = await fetch(`${getAPI_BASE_URL()}/push/preferences`, {\n        method: 'GET',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (response.ok) {\n        return await response.json();\n      }\n\n      return null;\n    } catch (error) {\n      console.error('‚ùå Error getting notification preferences:', error);\n      return null;\n    }\n  }\n\n  // Update user notification preferences\n  async updateNotificationPreferences(\n    preferences: Partial<PushNotificationPreferences>\n  ): Promise<boolean> {\n    try {\n      const token = this.getAuthToken();\n\n      const response = await fetch(`${getAPI_BASE_URL()}/push/preferences`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(preferences),\n      });\n\n      return response.ok;\n    } catch (error) {\n      console.error('‚ùå Error updating notification preferences:', error);\n      return false;\n    }\n  }\n\n  // Send test notification (admin only)\n  async sendTestNotification(payload: NotificationPayload): Promise<boolean> {\n    try {\n      const token = this.getAuthToken();\n\n      const response = await fetch(`${getAPI_BASE_URL()}/push/send`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      return response.ok;\n    } catch (error) {\n      console.error('‚ùå Error sending test notification:', error);\n      return false;\n    }\n  }\n\n  // Show local notification (fallback)\n  async showLocalNotification(payload: NotificationPayload): Promise<boolean> {\n    try {\n      if (Notification.permission !== 'granted') {\n        return false;\n      }\n\n      const notification = new Notification(payload.title, {\n        body: payload.body,\n        icon: payload.icon || '/logo192.png',\n        badge: payload.badge || '/favicon.ico',\n        image: payload.image,\n        tag: payload.tag,\n        data: payload.data,\n        requireInteraction: payload.requireInteraction || false,\n        silent: payload.silent || false,\n        vibrate: payload.vibrate || [200, 100, 200],\n        timestamp: Date.now(),\n      });\n\n      // Handle click event\n      notification.onclick = event => {\n        event.preventDefault();\n\n        const data = payload.data || {};\n        const url = data.url || '/';\n\n        // Focus or open window\n        window.focus();\n        if (url !== '/') {\n          window.location.href = url;\n        }\n\n        notification.close();\n      };\n\n      return true;\n    } catch (error) {\n      console.error('‚ùå Error showing local notification:', error);\n      return false;\n    }\n  }\n\n  // Get notification analytics (admin only)\n  async getNotificationAnalytics(\n    startDate?: Date,\n    endDate?: Date\n  ): Promise<any> {\n    try {\n      const token = this.getAuthToken();\n      const params = new URLSearchParams();\n\n      if (startDate) params.append('startDate', startDate.toISOString());\n      if (endDate) params.append('endDate', endDate.toISOString());\n\n      const response = await fetch(\n        `${getAPI_BASE_URL()}/push/analytics?${params}`,\n        {\n          method: 'GET',\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      if (response.ok) {\n        return await response.json();\n      }\n\n      return null;\n    } catch (error) {\n      console.error('‚ùå Error getting notification analytics:', error);\n      return null;\n    }\n  }\n\n  // Utility function to convert VAPID key\n  private urlBase64ToUint8Array(base64String: string): Uint8Array {\n    const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n    const base64 = (base64String + padding)\n      .replace(/-/g, '+')\n      .replace(/_/g, '/');\n\n    const rawData = window.atob(base64);\n    const outputArray = new Uint8Array(rawData.length);\n\n    for (let i = 0; i < rawData.length; ++i) {\n      outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n  }\n\n  // Get auth token from storage\n  private getAuthToken(): string | null {\n    return (\n      localStorage.getItem('blackrent_token') ||\n      sessionStorage.getItem('blackrent_token')\n    );\n  }\n\n  // Check if notifications are supported\n  static isSupported(): boolean {\n    return (\n      'serviceWorker' in navigator &&\n      'PushManager' in window &&\n      'Notification' in window\n    );\n  }\n\n  // Get current permission status\n  static getPermissionStatus(): NotificationPermission {\n    return 'Notification' in window ? Notification.permission : 'denied';\n  }\n}\n\n// Export singleton instance\nexport const pushNotificationService = new PushNotificationService();\n\n// Export types\nexport type {\n  PushSubscriptionData,\n  NotificationPayload,\n  NotificationAction,\n  PushNotificationPreferences,\n};\n\nexport default PushNotificationService;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/services/websocket-client.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1738,1741],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1738,1741],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-types","severity":2,"message":"Don't use `Function` as a type. The `Function` type accepts any function-like value.\nIt provides no type safety when calling the function, which can be a common source of bugs.\nIt also accepts things like class declarations, which will throw at runtime as they will not be called with `new`.\nIf you are expecting the function to accept certain arguments, you should explicitly define the function shape.","line":107,"column":44,"nodeType":"Identifier","messageId":"bannedTypeMessage","endLine":107,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":224,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":224,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5457,5460],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5457,5460],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-types","severity":2,"message":"Don't use `Function` as a type. The `Function` type accepts any function-like value.\nIt provides no type safety when calling the function, which can be a common source of bugs.\nIt also accepts things like class declarations, which will throw at runtime as they will not be called with `new`.\nIf you are expecting the function to accept certain arguments, you should explicitly define the function shape.","line":230,"column":54,"nodeType":"Identifier","messageId":"bannedTypeMessage","endLine":230,"endColumn":62},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":243,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":243,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5887,5890],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5887,5890],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-types","severity":2,"message":"Don't use `Function` as a type. The `Function` type accepts any function-like value.\nIt provides no type safety when calling the function, which can be a common source of bugs.\nIt also accepts things like class declarations, which will throw at runtime as they will not be called with `new`.\nIf you are expecting the function to accept certain arguments, you should explicitly define the function shape.","line":248,"column":53,"nodeType":"Identifier","messageId":"bannedTypeMessage","endLine":248,"endColumn":61}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üî¥ WEBSOCKET CLIENT SERVICE - BlackRent Frontend\n// Real-time komunik√°cia s backend WebSocket serverom\n\nimport type { Socket } from 'socket.io-client';\nimport { io } from 'socket.io-client';\n\nimport type { Rental, Vehicle, Customer } from '../types';\nimport { getBaseUrl } from '../utils/apiUrl';\n\n// Event typy pre TypeScript\nexport interface WebSocketEvents {\n  // Rental events\n  'rental:created': (data: {\n    rental: Rental;\n    createdBy: string;\n    timestamp: string;\n    message: string;\n  }) => void;\n\n  'rental:updated': (data: {\n    rental: Rental;\n    updatedBy: string;\n    changes?: string[];\n    timestamp: string;\n    message: string;\n  }) => void;\n\n  'rental:deleted': (data: {\n    rentalId: string;\n    customerName: string;\n    deletedBy: string;\n    timestamp: string;\n    message: string;\n  }) => void;\n\n  // Vehicle events\n  'vehicle:updated': (data: {\n    vehicle: Vehicle;\n    updatedBy: string;\n    changes?: string[];\n    timestamp: string;\n    message: string;\n  }) => void;\n\n  // Customer events\n  'customer:created': (data: {\n    customer: Customer;\n    createdBy: string;\n    timestamp: string;\n    message: string;\n  }) => void;\n\n  // Protocol events\n  'protocol:created': (data: {\n    rentalId: string;\n    protocolType: 'handover' | 'return';\n    protocolId: string;\n    createdBy: string;\n    timestamp: string;\n    message: string;\n  }) => void;\n\n  'protocol:updated': (data: {\n    rentalId: string;\n    protocolType: 'handover' | 'return';\n    protocolId: string;\n    updatedBy: string;\n    changes?: string[];\n    timestamp: string;\n    message: string;\n  }) => void;\n\n  // System events\n  'system:notification': (data: {\n    type: 'info' | 'warning' | 'error';\n    message: string;\n    details?: any;\n    timestamp: string;\n  }) => void;\n\n  'system:migration': (data: {\n    migrationName: string;\n    success: boolean;\n    details?: string;\n    timestamp: string;\n    message: string;\n  }) => void;\n\n  // Connection events\n  'connected-users': (data: {\n    count: number;\n    users: Array<{ userName?: string; socketId: string }>;\n  }) => void;\n\n  pong: (data: { timestamp: number }) => void;\n  test: (data: {\n    message: string;\n    timestamp: string;\n    connectedClients: number;\n  }) => void;\n}\n\nexport class WebSocketClient {\n  private socket: Socket | null = null;\n  private reconnectAttempts = 0;\n  private maxReconnectAttempts = 5;\n  private eventListeners = new Map<string, Function[]>();\n\n  constructor() {\n    this.connect();\n  }\n\n  private connect() {\n    // WebSocket server be≈æ√≠ na root, nie na /api ako REST API\n    const baseUrl = getBaseUrl();\n\n    // Optimalized logging - reduced verbosity\n    if (process.env.NODE_ENV === 'development') {\n      console.log('üî¥ Connecting to WebSocket:', baseUrl);\n    }\n\n    this.socket = io(baseUrl, {\n      transports: ['websocket', 'polling'],\n      reconnectionDelay: 2000,\n      reconnectionDelayMax: 10000,\n      reconnectionAttempts: this.maxReconnectAttempts,\n      timeout: 20000,\n      forceNew: true,\n    });\n\n    this.setupEventHandlers();\n  }\n\n  private setupEventHandlers() {\n    if (!this.socket) return;\n\n    this.socket.on('connect', () => {\n      // Optimalized: Single consolidated log for connection\n      console.log('‚úÖ WebSocket connected:', this.socket?.id);\n      this.reconnectAttempts = 0;\n\n      // Registruj u≈æ√≠vateƒæa ak je prihl√°sen√Ω\n      const userData = this.getUserData();\n      if (userData) {\n        this.register(userData.userId, userData.userName);\n      }\n    });\n\n    this.socket.on('disconnect', reason => {\n      console.log('‚ùå WebSocket disconnected:', reason);\n    });\n\n    this.socket.on('connect_error', error => {\n      console.error('üö´ WebSocket connection error:', error);\n      this.reconnectAttempts++;\n\n      if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n        console.error(\n          'üíÄ Max reconnection attempts reached. WebSocket disabled.'\n        );\n      }\n    });\n\n    this.socket.on('reconnect', attemptNumber => {\n      console.log(`üîÑ WebSocket reconnected after ${attemptNumber} attempts`);\n      this.reconnectAttempts = 0;\n    });\n  }\n\n  private getUserData(): { userId: string; userName: string } | null {\n    try {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        const user = JSON.parse(userStr);\n        return {\n          userId: user.id,\n          userName: user.username || user.name || 'Nezn√°my u≈æ√≠vateƒæ',\n        };\n      }\n    } catch (error) {\n      console.error('Error getting user data:', error);\n    }\n    return null;\n  }\n\n  // üîß PUBLIC METHODS\n\n  /**\n   * Registr√°cia u≈æ√≠vateƒæa pre personalizovan√© notifik√°cie\n   */\n  register(userId: string, userName: string) {\n    if (!this.socket?.connected) {\n      console.warn('üö´ Cannot register - WebSocket not connected');\n      return;\n    }\n\n    this.socket.emit('register', { userId, userName });\n    console.log(`üë§ Registered user: ${userName} (${userId})`);\n  }\n\n  /**\n   * Test ping-pong komunik√°cie\n   */\n  ping() {\n    if (!this.socket?.connected) {\n      console.warn('üö´ Cannot ping - WebSocket not connected');\n      return;\n    }\n\n    this.socket.emit('ping');\n  }\n\n  /**\n   * Pridaj event listener\n   */\n  on<K extends keyof WebSocketEvents>(event: K, callback: WebSocketEvents[K]) {\n    if (!this.socket) {\n      console.warn(\n        `üö´ Cannot add listener for ${event} - WebSocket not initialized`\n      );\n      return;\n    }\n\n    this.socket.on(event, callback as any);\n\n    // Uchov√°me callback pre cleanup\n    if (!this.eventListeners.has(event)) {\n      this.eventListeners.set(event, []);\n    }\n    this.eventListeners.get(event)!.push(callback as Function);\n  }\n\n  /**\n   * Odstr√°≈à event listener\n   */\n  off<K extends keyof WebSocketEvents>(\n    event: K,\n    callback?: WebSocketEvents[K]\n  ) {\n    if (!this.socket) return;\n\n    if (callback) {\n      this.socket.off(event, callback as any);\n\n      // Odstr√°≈à z na≈°ej mapy\n      const listeners = this.eventListeners.get(event);\n      if (listeners) {\n        const index = listeners.indexOf(callback as Function);\n        if (index > -1) {\n          listeners.splice(index, 1);\n        }\n      }\n    } else {\n      // Odstr√°≈à v≈°etky listenery pre event\n      this.socket.off(event);\n      this.eventListeners.delete(event);\n    }\n  }\n\n  /**\n   * Odpoj WebSocket\n   */\n  disconnect() {\n    if (this.socket) {\n      console.log('üîå Disconnecting WebSocket...');\n\n      // Vyƒçisti v≈°etky event listeners\n      this.eventListeners.forEach((listeners, event) => {\n        this.socket?.off(event);\n      });\n      this.eventListeners.clear();\n\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n\n  /**\n   * Znovu pripoj WebSocket\n   */\n  reconnect() {\n    this.disconnect();\n    setTimeout(() => {\n      this.connect();\n    }, 1000);\n  }\n\n  /**\n   * Je WebSocket pripojen√Ω?\n   */\n  isConnected(): boolean {\n    return this.socket?.connected || false;\n  }\n\n  /**\n   * Z√≠skaj Socket.IO in≈°tanciu (pre pokroƒçil√© pou≈æitie)\n   */\n  getSocket(): Socket | null {\n    return this.socket;\n  }\n}\n\n// Singleton instance\nlet websocketClient: WebSocketClient | null = null;\n\n/**\n * Z√≠skaj WebSocket client in≈°tanciu\n */\nexport function getWebSocketClient(): WebSocketClient {\n  if (!websocketClient) {\n    websocketClient = new WebSocketClient();\n  }\n  return websocketClient;\n}\n\n/**\n * Vyƒçisti WebSocket client\n */\nexport function cleanupWebSocketClient() {\n  if (websocketClient) {\n    websocketClient.disconnect();\n    websocketClient = null;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/test/setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/theme/darkTheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/theme/theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/types/errors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/types/rental-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/types/svg.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/types/vehicle-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/__tests__/priceCalculator.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/__tests__/rentalCloneUtils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/__tests__/rentalDaysCalculator.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/apiErrorHandler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/apiPath.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/apiUrl.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/criticalResources.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1817,1820],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1817,1820],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üéØ Critical Resources Management\n// Advanced preloading, prefetching, and resource optimization\n\ninterface ResourcePriority {\n  critical: string[];\n  important: string[];\n  normal: string[];\n  low: string[];\n}\n\ninterface PreloadOptions {\n  as: string;\n  type?: string;\n  crossOrigin?: string;\n  media?: string;\n  priority?: 'high' | 'low' | 'auto';\n}\n\nclass CriticalResourceManager {\n  private preloadedResources = new Set<string>();\n  private prefetchedResources = new Set<string>();\n  private loadingResources = new Map<string, Promise<void>>();\n\n  // Resource priorities configuration\n  private resourcePriorities: ResourcePriority = {\n    critical: [\n      // Critical images above the fold\n      '/logo192.png',\n      '/favicon.ico',\n    ],\n    important: [\n      // CSS dopln√≠me dynamicky z asset-manifestu\n    ],\n    normal: [\n      // Main JS chunks (dynamicky z asset-manifestu; fallback pr√°zdny)\n    ],\n    low: [\n      // Non-critical icons and images\n      '/logo512.png',\n      // Analytics and tracking scripts\n    ],\n  };\n\n  // Preload critical resources\n  preloadResource(href: string, options: PreloadOptions): Promise<void> {\n    if (this.preloadedResources.has(href)) {\n      return Promise.resolve();\n    }\n\n    if (this.loadingResources.has(href)) {\n      return this.loadingResources.get(href)!;\n    }\n\n    const promise = new Promise<void>((resolve, reject) => {\n      const link = document.createElement('link');\n      link.rel = 'preload';\n      link.href = href;\n      link.as = options.as;\n\n      if (options.type) link.type = options.type;\n      if (options.crossOrigin) link.crossOrigin = options.crossOrigin;\n      if (options.media) link.media = options.media;\n\n      // Modern browsers support fetchpriority\n      if (options.priority && 'fetchPriority' in link) {\n        (link as any).fetchPriority = options.priority;\n      }\n\n      link.onload = () => {\n        this.preloadedResources.add(href);\n        this.loadingResources.delete(href);\n        resolve();\n      };\n\n      link.onerror = () => {\n        this.loadingResources.delete(href);\n        reject(new Error(`Failed to preload resource: ${href}`));\n      };\n\n      document.head.appendChild(link);\n    });\n\n    this.loadingResources.set(href, promise);\n    return promise;\n  }\n\n  // Prefetch resources for future navigation\n  prefetchResource(href: string): Promise<void> {\n    if (this.prefetchedResources.has(href)) {\n      return Promise.resolve();\n    }\n\n    return new Promise((resolve, reject) => {\n      const link = document.createElement('link');\n      link.rel = 'prefetch';\n      link.href = href;\n\n      link.onload = () => {\n        this.prefetchedResources.add(href);\n        resolve();\n      };\n\n      link.onerror = () => {\n        reject(new Error(`Failed to prefetch resource: ${href}`));\n      };\n\n      document.head.appendChild(link);\n    });\n  }\n\n  // DNS prefetch for external domains\n  dnsPrefetch(domain: string): void {\n    const link = document.createElement('link');\n    link.rel = 'dns-prefetch';\n    link.href = `//${domain}`;\n    document.head.appendChild(link);\n  }\n\n  // Preconnect to critical origins\n  preconnect(origin: string, crossOrigin: boolean = false): void {\n    const link = document.createElement('link');\n    link.rel = 'preconnect';\n    link.href = origin;\n    if (crossOrigin) link.crossOrigin = 'anonymous';\n    document.head.appendChild(link);\n  }\n\n  // Initialize critical resource loading\n  async initializeCriticalResources(): Promise<void> {\n    console.log('üöÄ Initializing critical resource loading...');\n\n    try {\n      // 1. DNS prefetch for external domains\n      const externalDomains = [\n        'fonts.googleapis.com',\n        'fonts.gstatic.com',\n        'api.blackrent.sk',\n      ];\n\n      externalDomains.forEach(domain => this.dnsPrefetch(domain));\n\n      // 2. Preconnect to critical origins\n      const criticalOrigins = [\n        'https://fonts.googleapis.com',\n        'https://fonts.gstatic.com',\n      ];\n\n      criticalOrigins.forEach(origin => this.preconnect(origin, true));\n\n      // 3. Najprv sa pok√∫s o naƒç√≠tanie dynamick√Ωch bundlov z asset-manifest.json\n      await this.hydrateFromAssetManifest();\n\n      // 4. Load critical resources in priority order\n      await this.loadResourcesByPriority();\n\n      console.log('‚úÖ Critical resources initialized');\n    } catch (error) {\n      console.error('‚ùå Failed to initialize critical resources:', error);\n    }\n  }\n\n  // Naƒç√≠ta dynamick√© cesty bundlov z CRA asset-manifest.json (ak existuje)\n  private async hydrateFromAssetManifest(): Promise<void> {\n    try {\n      const res = await fetch('/asset-manifest.json', { cache: 'no-store' });\n      if (!res.ok) return;\n      const manifest = await res.json();\n\n      // CRA poskytuje buƒè files/main, alebo entrypoints pole\n      const normalResources: string[] = [];\n      const cssResources: string[] = [];\n\n      if (Array.isArray(manifest.entrypoints)) {\n        manifest.entrypoints.forEach((p: string) => {\n          if (p.endsWith('.js')) normalResources.push(p);\n          if (p.endsWith('.css')) cssResources.push(p);\n        });\n      } else if (manifest.files) {\n        for (const key of Object.keys(manifest.files)) {\n          if (key.endsWith('.js')) normalResources.push(manifest.files[key]);\n          if (key.endsWith('.css')) cssResources.push(manifest.files[key]);\n        }\n      }\n\n      // Odstr√°≈à duplik√°ty a priraƒè\n      this.resourcePriorities.normal = Array.from(new Set(normalResources));\n      // Zachovaj u≈æ existuj√∫ce fonty v important a pridaj CSS\n      const existingImportant = this.resourcePriorities.important.filter(\n        p => !p.endsWith('.css')\n      );\n      this.resourcePriorities.important = [\n        ...existingImportant,\n        ...Array.from(new Set(cssResources)),\n      ];\n    } catch (_) {\n      // Ticho zlyhaj ‚Äì v najhor≈°om pr√≠pade len nepreloadneme niƒç\n      this.resourcePriorities.normal = [];\n      // CSS nepreloadujeme, nechaj iba fonty\n      this.resourcePriorities.important =\n        this.resourcePriorities.important.filter(p => !p.endsWith('.css'));\n    }\n  }\n\n  // Load resources by priority\n  private async loadResourcesByPriority(): Promise<void> {\n    // Critical resources (load immediately, block rendering if necessary)\n    const criticalPromises = this.resourcePriorities.critical.map(href => {\n      const options = this.getPreloadOptions(href);\n      return this.preloadResource(href, options);\n    });\n\n    await Promise.allSettled(criticalPromises);\n\n    // Important resources (load with high priority but don't block)\n    const importantPromises = this.resourcePriorities.important.map(href => {\n      const options = this.getPreloadOptions(href);\n      return this.preloadResource(href, { ...options, priority: 'high' });\n    });\n\n    // Normal resources (load after critical)\n    setTimeout(() => {\n      this.resourcePriorities.normal.forEach(href => {\n        const options = this.getPreloadOptions(href);\n        this.preloadResource(href, options);\n      });\n    }, 100);\n\n    // Low priority resources (load when idle)\n    if ('requestIdleCallback' in window) {\n      requestIdleCallback(() => {\n        this.resourcePriorities.low.forEach(href => {\n          this.prefetchResource(href);\n        });\n      });\n    } else {\n      setTimeout(() => {\n        this.resourcePriorities.low.forEach(href => {\n          this.prefetchResource(href);\n        });\n      }, 2000);\n    }\n\n    await Promise.allSettled(importantPromises);\n  }\n\n  // Get preload options for different resource types\n  private getPreloadOptions(href: string): PreloadOptions {\n    const extension = href.split('.').pop()?.toLowerCase();\n\n    switch (extension) {\n      case 'woff2':\n      case 'woff':\n      case 'ttf':\n        return {\n          as: 'font',\n          type: `font/${extension}`,\n          crossOrigin: 'anonymous',\n        };\n\n      case 'css':\n        return {\n          as: 'style',\n          type: 'text/css',\n        };\n\n      case 'js':\n        return {\n          as: 'script',\n          type: 'text/javascript',\n        };\n\n      case 'png':\n      case 'jpg':\n      case 'jpeg':\n      case 'webp':\n      case 'svg':\n        return {\n          as: 'image',\n          type: `image/${extension === 'jpg' ? 'jpeg' : extension}`,\n        };\n\n      default:\n        return { as: 'fetch' };\n    }\n  }\n\n  // Preload route chunks for SPA navigation\n  preloadRouteChunk(routePath: string): Promise<void> {\n    // Map route paths to chunk files\n    const routeChunks: { [key: string]: string } = {\n      '/vehicles': '/static/js/vehicles.chunk.js',\n      '/rentals': '/static/js/rentals.chunk.js',\n      '/customers': '/static/js/customers.chunk.js',\n      '/availability': '/static/js/availability.chunk.js',\n      '/statistics': '/static/js/statistics.chunk.js',\n    };\n\n    const chunkFile = routeChunks[routePath];\n    if (chunkFile) {\n      return this.preloadResource(chunkFile, { as: 'script' });\n    }\n\n    return Promise.resolve();\n  }\n\n  // Get loading statistics\n  getLoadingStats() {\n    return {\n      preloaded: this.preloadedResources.size,\n      prefetched: this.prefetchedResources.size,\n      loading: this.loadingResources.size,\n      preloadedList: Array.from(this.preloadedResources),\n      prefetchedList: Array.from(this.prefetchedResources),\n    };\n  }\n\n  // Clear all cached resources (for testing)\n  clearCache(): void {\n    this.preloadedResources.clear();\n    this.prefetchedResources.clear();\n    this.loadingResources.clear();\n  }\n}\n\n// Critical CSS utilities\nexport class CriticalCSSManager {\n  private inlinedCSS = new Set<string>();\n\n  // Inline critical CSS for above-the-fold content\n  inlineCriticalCSS(): void {\n    const criticalCSS = this.generateCriticalCSS();\n\n    if (criticalCSS && !this.inlinedCSS.has('critical')) {\n      const style = document.createElement('style');\n      style.id = 'critical-css';\n      style.textContent = criticalCSS;\n      document.head.insertBefore(style, document.head.firstChild);\n      this.inlinedCSS.add('critical');\n    }\n  }\n\n  // Generate critical CSS (above-the-fold styles)\n  private generateCriticalCSS(): string {\n    return `\n      /* Critical path CSS - Above the fold styles */\n      * {\n        box-sizing: border-box;\n      }\n      \n      body {\n        margin: 0;\n        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n        line-height: 1.6;\n        color: #0f172a;\n        background: #fafbfc;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n      \n      /* Header styles */\n      .header, .MuiAppBar-root {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 64px;\n        background: rgba(255, 255, 255, 0.9);\n        backdrop-filter: blur(20px);\n        border-bottom: 1px solid rgba(102, 126, 234, 0.1);\n        z-index: 1100;\n      }\n      \n      /* Main content area */\n      .main-content {\n        margin-top: 64px;\n        min-height: calc(100vh - 64px);\n      }\n      \n      /* Loading states */\n      .loading-spinner {\n        display: inline-block;\n        width: 40px;\n        height: 40px;\n        border: 3px solid #f1f5f9;\n        border-top: 3px solid #667eea;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n      }\n      \n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n      \n      /* Skeleton loading */\n      .skeleton {\n        background: linear-gradient(\n          90deg,\n          rgba(241, 245, 249, 0.8) 0px,\n          rgba(102, 126, 234, 0.1) 40px,\n          rgba(241, 245, 249, 0.8) 80px\n        );\n        background-size: 468px 104px;\n        animation: shimmer 1.6s ease-in-out infinite;\n      }\n      \n      @keyframes shimmer {\n        0% { background-position: -468px 0; }\n        100% { background-position: 468px 0; }\n      }\n      \n      /* Critical card styles */\n      .card, .MuiCard-root {\n        background: rgba(255, 255, 255, 0.9);\n        border-radius: 20px;\n        border: 1px solid rgba(255, 255, 255, 0.2);\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);\n      }\n      \n      /* Critical button styles */\n      .button, .MuiButton-root {\n        border-radius: 12px;\n        font-weight: 600;\n        text-transform: none;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      \n      .button-contained, .MuiButton-contained {\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n        color: white;\n        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\n      }\n      \n      /* Typography */\n      h1, h2, h3, h4, h5, h6 {\n        margin: 0;\n        font-weight: 600;\n        line-height: 1.2;\n        color: #0f172a;\n      }\n      \n      /* Prevent layout shift */\n      img:not([width]):not([height]) {\n        aspect-ratio: 16/9;\n        width: 100%;\n        height: auto;\n      }\n      \n      /* Font loading optimization: Inter je naƒç√≠tan√© cez Google Fonts v index.html */\n    `;\n  }\n\n  // Load non-critical CSS asynchronously\n  loadNonCriticalCSS(): void {\n    const nonCriticalCSS = [\n      '/static/css/components.css',\n      '/static/css/utilities.css',\n    ];\n\n    nonCriticalCSS.forEach(href => {\n      const link = document.createElement('link');\n      link.rel = 'preload';\n      link.as = 'style';\n      link.href = href;\n      link.onload = () => {\n        (link as HTMLLinkElement).onload = null;\n        (link as HTMLLinkElement).rel = 'stylesheet';\n      };\n      document.head.appendChild(link);\n    });\n  }\n}\n\n// Export singleton instances\nexport const criticalResourceManager = new CriticalResourceManager();\nexport const criticalCSSManager = new CriticalCSSManager();\n\n// Initialize critical resources when DOM is ready\nexport const initializeCriticalResources = () => {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      criticalCSSManager.inlineCriticalCSS();\n      criticalResourceManager.initializeCriticalResources();\n    });\n  } else {\n    criticalCSSManager.inlineCriticalCSS();\n    criticalResourceManager.initializeCriticalResources();\n  }\n\n  // Load non-critical resources after page load\n  window.addEventListener('load', () => {\n    criticalCSSManager.loadNonCriticalCSS();\n  });\n};\n\nexport default {\n  criticalResourceManager,\n  criticalCSSManager,\n  initializeCriticalResources,\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/dateUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/dayjs-setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/debounce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/emailParsingUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":320,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":320,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10802,10805],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10802,10805],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üìß EMAIL PARSING UTILITY - Zdieƒæan√° parsing logika pre frontend aj backend\n// Extrahovan√© z src/components/rentals/EmailParser.tsx\n\nexport interface ParsedEmailData {\n  orderNumber?: string;\n  orderDate?: string;\n  paymentMethod?: string;\n  customerName?: string;\n  customerEmail?: string;\n  customerPhone?: string;\n  customerAddress?: string;\n  handoverLocation?: string;\n  handoverDate?: string;\n  returnDate?: string;\n  vehicleName?: string;\n  vehicleCode?: string;\n  vehiclePrice?: number;\n  dailyKilometers?: number;\n  extraKilometerRate?: number;\n  fuelLevel?: number;\n  returnConditions?: string;\n  startOdometer?: number;\n  notes?: string;\n  insuranceInfo?: string;\n}\n\n/**\n * üéØ HLAVN√Å PARSING FUNKCIA - identick√° s EmailParser.tsx\n * Parsuje email text a vracia ≈°trukt√∫rovan√© d√°ta\n */\nexport function parseEmailText(text: string): ParsedEmailData {\n  const data: ParsedEmailData = {};\n\n  // Parsovanie ƒç√≠sla objedn√°vky\n  const orderNumberMatch = text.match(/ƒå√≠slo objedn√°vky\\s+([A-Z]+\\d+)/i);\n  if (orderNumberMatch) {\n    data.orderNumber = orderNumberMatch[1];\n  }\n\n  // Parsovanie d√°tumu objedn√°vky\n  const orderDateMatch = text.match(\n    /Objedn√°vka prijat√°\\s+(\\d{2}\\.\\d{2}\\.\\d{4})/\n  );\n  if (orderDateMatch) {\n    data.orderDate = orderDateMatch[1];\n  }\n\n  // Parsovanie sp√¥sobu √∫hrady\n  const paymentMethodMatch = text.match(/Sp√¥sob √∫hrady\\s+(.+)/);\n  if (paymentMethodMatch) {\n    data.paymentMethod = paymentMethodMatch[1].trim();\n  }\n\n  // Parsovanie odoberateƒæa (z√°kazn√≠ka)\n  const customerMatch = text.match(/Odoberateƒæ\\s+(.+)/);\n  if (customerMatch) {\n    data.customerName = customerMatch[1].trim();\n  }\n\n  // Parsovanie emailu\n  const emailMatch = text.match(/E-mail\\s+(.+)/);\n  if (emailMatch) {\n    data.customerEmail = emailMatch[1].trim();\n  }\n\n  // Parsovanie telef√≥nu\n  const phoneMatch = text.match(/Telefon\\s+(.+)/);\n  if (phoneMatch) {\n    data.customerPhone = phoneMatch[1].trim();\n  }\n\n  // Parsovanie kontaktnej adresy\n  const addressMatch = text.match(/Kontaktn√° adresa\\s+(.+)/);\n  if (addressMatch) {\n    data.customerAddress = addressMatch[1].trim();\n  }\n\n  // Parsovanie miesta vyzdvihnutia\n  const pickupMatch = text.match(/Miesto vyzdvihnutia\\s+(.+)/);\n  if (pickupMatch) {\n    data.handoverLocation = pickupMatch[1].trim();\n  }\n\n  // Parsovanie miesta odovzdania (ak je in√©)\n  const dropoffMatch = text.match(/Miesto odovzdania\\s+(.+)/);\n  if (dropoffMatch && dropoffMatch[1].trim() !== data.handoverLocation) {\n    data.handoverLocation = dropoffMatch[1].trim(); // Pou≈æije miesto odovzdania ak je in√©\n  }\n\n  // Parsovanie ƒçasu rezerv√°cie (komplex form√°t)\n  const reservationTimeMatch = text.match(/ƒåas rezerv√°cie\\s+(.+)/);\n  if (reservationTimeMatch) {\n    const timeStr = reservationTimeMatch[1].trim();\n\n    // Pattern: \"DD.MM.YYYY HH:MM:SS - DD.MM.YYYY HH:MM:SS\"\n    const dateRangePattern =\n      /(\\d{1,2}\\.\\d{1,2}\\.\\d{4})\\s+(\\d{1,2}:\\d{2}:\\d{2})\\s*-\\s*(\\d{1,2}\\.\\d{1,2}\\.\\d{4})\\s+(\\d{1,2}:\\d{2}:\\d{2})/;\n    const dateRangeMatch = timeStr.match(dateRangePattern);\n\n    if (dateRangeMatch) {\n      // ZACHOVAJ PRESN√ù FORM√ÅT - konvertuj DD.MM.YYYY na YYYY-MM-DD pre PostgreSQL\n      const startDay = dateRangeMatch[1].split('.').reverse().join('-');\n      const endDay = dateRangeMatch[3].split('.').reverse().join('-');\n      data.handoverDate = `${startDay.replace(/(\\d{4})-(\\d{1,2})-(\\d{1,2})/, (_, y, m, d) => `${y}-${m.padStart(2, '0')}-${d.padStart(2, '0')}`)} ${dateRangeMatch[2]}`;\n      data.returnDate = `${endDay.replace(/(\\d{4})-(\\d{1,2})-(\\d{1,2})/, (_, y, m, d) => `${y}-${m.padStart(2, '0')}-${d.padStart(2, '0')}`)} ${dateRangeMatch[4]}`;\n    } else {\n      // Alternat√≠vny pattern: \"YYYY-MM-DD HH:MM:SS - YYYY-MM-DD HH:MM:SS\"\n      const isoDateRangePattern =\n        /(\\d{4}-\\d{2}-\\d{2})\\s+(\\d{2}:\\d{2}:\\d{2})\\s*-\\s*(\\d{4}-\\d{2}-\\d{2})\\s+(\\d{2}:\\d{2}:\\d{2})/;\n      const isoDateRangeMatch = timeStr.match(isoDateRangePattern);\n\n      if (isoDateRangeMatch) {\n        // ZACHOVAJ PRESN√ù ƒåAS BEZ TIMEZONE KONVERZIE\n        data.handoverDate = `${isoDateRangeMatch[1]} ${isoDateRangeMatch[2]}`;\n        data.returnDate = `${isoDateRangeMatch[3]} ${isoDateRangeMatch[4]}`;\n      }\n    }\n  }\n\n  // Parsovanie vozidla (komplexn√©)\n  const vehicleMatch = text.match(/(?:Vozidlo|Vehicle|Auto)\\s+([^\\n]+)/i);\n  if (vehicleMatch) {\n    logger.debug('üöó Parsing vehicle line:', vehicleMatch[1]);\n\n    // Ak obsahuje tabuƒækov√Ω form√°t\n    if (vehicleMatch[1].includes('Cena') || vehicleMatch[1].includes('Spolu')) {\n      const parts = vehicleMatch[1].split(/\\s+/).filter(part => part.trim());\n      logger.debug('üîç Vehicle parts (table format):', parts);\n\n      // N√°jdi ≈†PZ (6-7 znakov, len p√≠smen√° a ƒç√≠sla)\n      const spzIndex = parts.findIndex(part =>\n        /^[A-Z0-9]{6,7}$/.test(part.trim())\n      );\n      logger.debug(\n        'üîç SPZ index:',\n        spzIndex,\n        'SPZ:',\n        spzIndex >= 0 ? parts[spzIndex] : 'not found'\n      );\n\n      if (spzIndex > 0) {\n        // N√°zov auta je v≈°etko pred ≈†PZ\n        data.vehicleName = parts.slice(0, spzIndex).join(' ');\n        data.vehicleCode = parts[spzIndex];\n\n        // Cena a suma s√∫ za ≈†PZ\n        if (parts.length > spzIndex + 2) {\n          const priceStr = parts[spzIndex + 1]\n            .replace(',', '.')\n            .replace('‚Ç¨', '')\n            .trim();\n          data.vehiclePrice = parseFloat(priceStr);\n        }\n\n        logger.debug('‚úÖ Parsed vehicle:', {\n          name: data.vehicleName,\n          code: data.vehicleCode,\n          price: data.vehiclePrice,\n        });\n      } else {\n        logger.debug('‚ùå Could not find SPZ in vehicle line');\n      }\n    } else {\n      const vehicleLine = vehicleMatch[1].trim();\n      logger.debug('üîç Parsing vehicle line:', vehicleLine);\n\n      const parts = vehicleLine.split(/\\s+/).filter(part => part.trim());\n      logger.debug('üîç Vehicle parts:', parts);\n\n      // N√°jdi ≈†PZ (6-7 znakov, len p√≠smen√° a ƒç√≠sla)\n      const spzIndex = parts.findIndex(part =>\n        /^[A-Z0-9]{6,7}$/.test(part.trim())\n      );\n      logger.debug(\n        'üîç SPZ index:',\n        spzIndex,\n        'SPZ:',\n        spzIndex >= 0 ? parts[spzIndex] : 'not found'\n      );\n\n      if (spzIndex > 0) {\n        // N√°zov auta je v≈°etko pred ≈†PZ\n        data.vehicleName = parts.slice(0, spzIndex).join(' ');\n        data.vehicleCode = parts[spzIndex];\n\n        // Cena a suma s√∫ za ≈†PZ\n        if (parts.length > spzIndex + 2) {\n          const priceStr = parts[spzIndex + 1]\n            .replace(',', '.')\n            .replace('‚Ç¨', '')\n            .trim();\n          data.vehiclePrice = parseFloat(priceStr);\n        }\n\n        logger.debug('‚úÖ Parsed vehicle:', {\n          name: data.vehicleName,\n          code: data.vehicleCode,\n          price: data.vehiclePrice,\n        });\n      } else {\n        logger.debug('‚ùå Could not find SPZ in vehicle line');\n      }\n    }\n  }\n\n  // Parsovanie kilometrov - V≈†ETKY sa pova≈æuj√∫ za denn√© km\n  logger.debug('üîç DEBUG: Searching for kilometers in text...');\n\n  // NAJVY≈†≈†IA PRIORITA: ≈†pecifick√© patterny pre \"Poƒçet povolen√Ωch km\"\n  const specificKmMatch = text.match(/Poƒçet povolen√Ωch km\\s+(\\d+)\\s*km/i);\n  logger.debug('üîç DEBUG: specificKmMatch result:', specificKmMatch);\n\n  if (specificKmMatch) {\n    data.dailyKilometers = parseInt(specificKmMatch[1]);\n    logger.debug(\n      `üöó Parsed \"Poƒçet povolen√Ωch km\": ${data.dailyKilometers} km/day (interpreted as daily)`\n    );\n  } else {\n    logger.debug('üîç DEBUG: specificKmMatch failed, trying other patterns...');\n    // Prioritne hƒæad√°me explicitne denn√© km patterny\n    const explicitDailyKmMatch =\n      text.match(/(\\d+)\\s*km\\s*\\/\\s*de[≈àn]/i) ||\n      text.match(/(\\d+)\\s*km\\s*na\\s*de[≈àn]/i) ||\n      text.match(/denn√Ω\\s*limit[:\\s]*(\\d+)\\s*km/i) ||\n      text.match(/denne[:\\s]*(\\d+)\\s*km/i) ||\n      text.match(/(\\d+)\\s*km\\s*daily/i);\n    logger.debug(\n      'üîç DEBUG: explicitDailyKmMatch result:',\n      explicitDailyKmMatch\n    );\n\n    if (explicitDailyKmMatch) {\n      data.dailyKilometers = parseInt(explicitDailyKmMatch[1]);\n      logger.debug(\n        `üöó Parsed explicit daily km: ${data.dailyKilometers} km/day`\n      );\n    } else {\n      logger.debug(\n        'üîç DEBUG: explicitDailyKmMatch failed, trying general patterns...'\n      );\n      // Ak nie s√∫ explicitne denn√©, hƒæad√°me ostatn√© v≈°eobecn√© km patterny a pova≈æujeme ich za denn√©\n      const generalKmMatch =\n        text.match(/Povolen√©\\s+km[:\\s]+(\\d+)/i) ||\n        text.match(/Kilometrov[:\\s]+(\\d+)/i) ||\n        text.match(/Limit\\s+km[:\\s]+(\\d+)/i) ||\n        text.match(/(\\d+)\\s*km/i); // V≈°eobecn√Ω pattern pre ƒç√≠slo + km (najni≈æ≈°ia priorita)\n      logger.debug('üîç DEBUG: generalKmMatch result:', generalKmMatch);\n\n      if (generalKmMatch) {\n        data.dailyKilometers = parseInt(generalKmMatch[1]);\n        logger.debug(\n          `üöó Parsed general km as daily: ${data.dailyKilometers} km/day (interpreted as daily)`\n        );\n      } else {\n        logger.debug('üîç DEBUG: No kilometer patterns matched!');\n      }\n    }\n  }\n\n  // Parsovanie ceny za extra km\n  const extraKmMatch =\n    text.match(/Cena\\s+za\\s+km[:\\s]+([\\d,]+)\\s*‚Ç¨/i) ||\n    text.match(/Extra\\s+km[:\\s]+([\\d,]+)\\s*‚Ç¨/i) ||\n    text.match(/Nadlimitn[√Ω]\\s+km[:\\s]+([\\d,]+)\\s*‚Ç¨/i);\n  if (extraKmMatch) {\n    const extraKmStr = extraKmMatch[1].replace(',', '.');\n    data.extraKilometerRate = parseFloat(extraKmStr);\n  }\n\n  // Parsovanie √∫rovne paliva\n  const fuelMatch =\n    text.match(/Palivo[:\\s]+(\\d+)%/i) ||\n    text.match(/Fuel[:\\s]+(\\d+)%/i) ||\n    text.match(/N√°dr≈æ[:\\s]+(\\d+)%/i);\n  if (fuelMatch) {\n    data.fuelLevel = parseInt(fuelMatch[1]);\n  }\n\n  // Parsovanie stavu tachometra\n  const odometerMatch =\n    text.match(/Tachometer[:\\s]+([\\d\\s]+)\\s*km/i) ||\n    text.match(/Kilometrov[:\\s]+([\\d\\s]+)\\s*km/i) ||\n    text.match(/Stav[:\\s]+([\\d\\s]+)\\s*km/i);\n  if (odometerMatch) {\n    const odometerStr = odometerMatch[1].replace(/\\s/g, '');\n    data.startOdometer = parseInt(odometerStr);\n  }\n\n  // Parsovanie podmienok vr√°tenia\n  const conditionsMatch =\n    text.match(/Podmienky\\s+vr√°tenia[:\\s]+([^.]+)/i) ||\n    text.match(/Return\\s+conditions[:\\s]+([^.]+)/i);\n  if (conditionsMatch) {\n    data.returnConditions = conditionsMatch[1].trim();\n  }\n\n  // Parsovanie pozn√°mok\n  const notesMatch =\n    text.match(/Pozn√°mky[:\\s]+([^.]+)/i) ||\n    text.match(/Notes[:\\s]+([^.]+)/i) ||\n    text.match(/Dodatoƒçn√©\\s+inform√°cie[:\\s]+([^.]+)/i);\n  if (notesMatch) {\n    data.notes = notesMatch[1].trim();\n  }\n\n  // Parsovanie inform√°ci√≠ o poisten√≠\n  const insuranceMatch =\n    text.match(/Poistenie[:\\s]+([^.]+)/i) ||\n    text.match(/Insurance[:\\s]+([^.]+)/i);\n  if (insuranceMatch) {\n    data.insuranceInfo = insuranceMatch[1].trim();\n  }\n\n  return data;\n}\n\n/**\n * üîÑ HELPER: Konvertuje ParsedEmailData na backend form√°t\n */\nexport function convertToRentalData(parsed: ParsedEmailData): any {\n  return {\n    orderNumber: parsed.orderNumber,\n    customerName: parsed.customerName,\n    customerEmail: parsed.customerEmail,\n    customerPhone: parsed.customerPhone,\n    vehicleName: parsed.vehicleName,\n    vehicleCode: parsed.vehicleCode,\n    totalPrice: parsed.vehiclePrice || 0,\n    dailyKilometers: parsed.dailyKilometers || 0,\n    paymentMethod: parsed.paymentMethod || 'Prevod',\n    handoverPlace: parsed.handoverLocation,\n    // Parsovanie d√°tumov\n    startDate: parsed.handoverDate ? new Date(parsed.handoverDate) : null,\n    endDate: parsed.returnDate ? new Date(parsed.returnDate) : null,\n    // Dodatoƒçn√© √∫daje\n    deposit: 0, // TODO: Prida≈• parsing pre depozit\n    extraKilometerRate: parsed.extraKilometerRate || 0,\n    fuelLevel: parsed.fuelLevel || 100,\n    startOdometer: parsed.startOdometer || 0,\n    notes: parsed.notes,\n    insuranceInfo: parsed.insuranceInfo,\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/enhancedErrorMessages.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/enhancedPdfGenerator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[172,175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[172,175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[217,220],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[217,220],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import jsPDF from 'jspdf';\n\nimport type { ProcessedImage } from './imageProcessor';\n\nexport interface ProtocolData {\n  id: string;\n  type: 'handover' | 'return';\n  rental: any;\n  location: string;\n  vehicleCondition: any;\n  vehicleImages: ProcessedImage[];\n  documentImages: ProcessedImage[];\n  damageImages: ProcessedImage[];\n  damages: unknown[];\n  signatures: unknown[];\n  notes: string;\n  createdAt: Date;\n  completedAt: Date;\n}\n\nexport class EnhancedPDFGenerator {\n  private doc: jsPDF;\n  private currentY: number = 20;\n  private pageWidth: number;\n  private pageHeight: number;\n  private margin: number = 20;\n  private primaryColor: [number, number, number] = [25, 118, 210]; // Blue\n  private secondaryColor: [number, number, number] = [66, 66, 66]; // Dark gray\n\n  constructor() {\n    this.doc = new jsPDF();\n    this.pageWidth = this.doc.internal.pageSize.getWidth();\n    this.pageHeight = this.doc.internal.pageSize.getHeight();\n  }\n\n  /**\n   * Generovanie PDF s vlo≈æen√Ωmi obr√°zkami (800px)\n   */\n  async generateCustomerProtocol(protocol: ProtocolData): Promise<Blob> {\n    // Reset poz√≠cie\n    this.currentY = 20;\n\n    // 1. Z√°hlavie\n    this.addHeader(protocol);\n\n    // 2. Z√°kladn√© inform√°cie\n    this.addBasicInfo(protocol);\n\n    // 3. Stav vozidla\n    this.addVehicleCondition(protocol);\n\n    // 4. Obr√°zky vozidla vlo≈æen√© priamo do PDF\n    await this.embedImages(protocol.vehicleImages, 'FOTKY VOZIDLA', 120, 80);\n\n    // 5. Dokumenty vlo≈æen√© priamo do PDF\n    await this.embedImages(protocol.documentImages, 'DOKUMENTY', 100, 60);\n\n    // 6. ≈†kody\n    this.addDamages(protocol.damages);\n\n    // 7. Podpisy vlo≈æen√© priamo do PDF\n    await this.embedSignatures(protocol.signatures);\n\n    // 8. Pozn√°mky\n    this.addNotes(protocol.notes);\n\n    // 9. P√§ta\n    this.addFooter(protocol);\n\n    return this.doc.output('blob');\n  }\n\n  /**\n   * Pridanie z√°hlavia\n   */\n  private addHeader(protocol: ProtocolData) {\n    this.doc.setFillColor(...this.primaryColor);\n    this.doc.rect(0, 0, this.pageWidth, 30, 'F');\n\n    this.doc.setFontSize(18);\n    this.doc.setFont('helvetica', 'bold');\n    this.doc.setTextColor(255, 255, 255);\n    this.doc.text('BLACKRENT', this.margin, 20);\n\n    this.doc.setFontSize(12);\n    this.doc.text(\n      `${protocol.type === 'handover' ? 'PREBERAC√ç' : 'VRATN√ù'} PROTOKOL`,\n      this.pageWidth - 80,\n      20\n    );\n\n    this.currentY = 40;\n  }\n\n  /**\n   * Pridanie z√°kladn√Ωch inform√°ci√≠\n   */\n  private addBasicInfo(protocol: ProtocolData) {\n    this.addSectionTitle('Z√ÅKLADN√â INFORM√ÅCIE');\n\n    this.doc.setFontSize(10);\n    this.doc.setFont('helvetica', 'normal');\n    this.doc.setTextColor(...this.secondaryColor);\n\n    const rental = protocol.rental;\n    const vehicle = rental?.vehicle;\n    const customer = rental?.customer;\n\n    this.doc.text(\n      `ID Pren√°jmu: ${rental?.id || 'N/A'}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n    this.doc.text(\n      `Vozidlo: ${vehicle?.brand} ${vehicle?.model} (${vehicle?.licensePlate})`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n    this.doc.text(\n      `Z√°kazn√≠k: ${customer?.name || 'N/A'}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n    this.doc.text(\n      `D√°tum: ${new Date(protocol.createdAt).toLocaleDateString('sk-SK')}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n    this.doc.text(\n      `Miesto: ${protocol.location || 'N/A'}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 10;\n  }\n\n  /**\n   * Pridanie stavu vozidla\n   */\n  private addVehicleCondition(protocol: ProtocolData) {\n    this.addSectionTitle('STAV VOZIDLA');\n\n    this.doc.setFontSize(10);\n    this.doc.setFont('helvetica', 'normal');\n    this.doc.setTextColor(...this.secondaryColor);\n\n    const condition = protocol.vehicleCondition;\n\n    this.doc.text(\n      `Poƒç√≠tadlo km: ${condition?.odometer || 0} km`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n    this.doc.text(\n      `√örove≈à paliva: ${condition?.fuelLevel || 100}%`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n    this.doc.text(\n      `Typ paliva: ${condition?.fuelType || 'N/A'}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n    this.doc.text(\n      `Stav: ${condition?.condition || 'V√Ωborn√Ω'}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 10;\n  }\n\n  /**\n   * Vlo≈æenie obr√°zkov priamo do PDF\n   */\n  private async embedImages(\n    images: ProcessedImage[],\n    title: string,\n    maxWidth: number,\n    maxHeight: number\n  ) {\n    this.addSectionTitle(title);\n\n    if (images.length === 0) {\n      this.doc.setFontSize(10);\n      this.doc.setTextColor(128, 128, 128);\n      this.doc.text(\n        '≈Ωiadne obr√°zky nie s√∫ k dispoz√≠cii',\n        this.margin,\n        this.currentY\n      );\n      this.currentY += 10;\n      return;\n    }\n\n    const imagesPerRow = 2;\n    let currentX = this.margin;\n    let rowHeight = 0;\n    let imagesInRow = 0;\n\n    for (let i = 0; i < images.length; i++) {\n      const image = images[i];\n\n      try {\n        // Naƒç√≠tanie thumbnailu (800px) priamo do PDF\n        const imageData = await this.loadImageData(image.thumbnail);\n\n        // V√Ωpoƒçet rozmerov\n        const { width, height } = await this.calculateImageDimensions(\n          imageData,\n          maxWidth,\n          maxHeight\n        );\n\n        // Kontrola ƒçi sa zmest√≠ na str√°nku\n        if (this.currentY + height > this.pageHeight - 30) {\n          this.doc.addPage();\n          this.currentY = 20;\n          currentX = this.margin;\n          rowHeight = 0;\n          imagesInRow = 0;\n        }\n\n        // Vlo≈æenie obr√°zka priamo do PDF\n        this.doc.addImage(\n          imageData,\n          'JPEG',\n          currentX,\n          this.currentY,\n          width,\n          height\n        );\n\n        // Popis obr√°zka\n        this.doc.setFontSize(8);\n        this.doc.setTextColor(...this.secondaryColor);\n        this.doc.text(`Obr√°zok ${i + 1}`, currentX, this.currentY + height + 3);\n\n        currentX += width + 10;\n        rowHeight = Math.max(rowHeight, height + 15);\n        imagesInRow++;\n\n        if (imagesInRow >= imagesPerRow) {\n          this.currentY += rowHeight;\n          currentX = this.margin;\n          rowHeight = 0;\n          imagesInRow = 0;\n        }\n      } catch (error) {\n        console.error('‚ùå Error processing image:', image.filename, error);\n        // Pridaj placeholder pre chybn√Ω obr√°zok\n        const placeholder = this.createImagePlaceholder(\n          maxWidth,\n          maxHeight,\n          `Chyba ${i + 1}`\n        );\n        this.doc.addImage(\n          placeholder,\n          'JPEG',\n          currentX,\n          this.currentY,\n          maxWidth,\n          maxHeight\n        );\n        currentX += maxWidth + 10;\n      }\n    }\n\n    if (imagesInRow > 0) {\n      this.currentY += rowHeight;\n    }\n\n    this.currentY += 10;\n  }\n\n  /**\n   * Vlo≈æenie podpisov priamo do PDF\n   */\n  private async embedSignatures(signatures: unknown[]) {\n    this.addSectionTitle('PODPISY');\n\n    if (signatures.length === 0) {\n      this.doc.setFontSize(10);\n      this.doc.setTextColor(128, 128, 128);\n      this.doc.text(\n        '≈Ωiadne podpisy nie s√∫ k dispoz√≠cii',\n        this.margin,\n        this.currentY\n      );\n      this.currentY += 10;\n      return;\n    }\n\n    const signaturesPerRow = 2;\n    let currentX = this.margin;\n    let rowHeight = 0;\n\n    for (let i = 0; i < signatures.length; i++) {\n      const signature = signatures[i];\n\n      try {\n        // Naƒç√≠tanie podpisu (base64 alebo URL)\n        const signatureData = signature.signature || signature.url;\n        const imageData = await this.loadImageData(signatureData);\n\n        const { width, height } = await this.calculateImageDimensions(\n          imageData,\n          80,\n          40\n        );\n\n        if (this.currentY + height > this.pageHeight - 30) {\n          this.doc.addPage();\n          this.currentY = 20;\n          currentX = this.margin;\n          rowHeight = 0;\n        }\n\n        // Biele pozadie pre podpis\n        this.doc.setFillColor(255, 255, 255);\n        this.doc.roundedRect(\n          currentX - 2,\n          this.currentY - 2,\n          width + 4,\n          height + 15,\n          3,\n          3,\n          'FD'\n        );\n\n        // Vlo≈æenie podpisu priamo do PDF\n        this.doc.addImage(\n          imageData,\n          'JPEG',\n          currentX,\n          this.currentY,\n          width,\n          height\n        );\n\n        this.doc.setFontSize(8);\n        this.doc.setTextColor(...this.secondaryColor);\n        this.doc.text(\n          signature.signerName || `Podpis ${i + 1}`,\n          currentX,\n          this.currentY + height + 8\n        );\n\n        currentX += width + 20;\n        rowHeight = Math.max(rowHeight, height + 20);\n\n        if ((i + 1) % signaturesPerRow === 0) {\n          this.currentY += rowHeight;\n          currentX = this.margin;\n          rowHeight = 0;\n        }\n      } catch (error) {\n        console.error(\n          '‚ùå Error loading signature:',\n          signature.signerName,\n          error\n        );\n        this.doc.setFontSize(10);\n        this.doc.setTextColor(255, 0, 0);\n        this.doc.text(\n          `Chyba naƒç√≠tania podpisu: ${signature.signerName || 'Podpis'}`,\n          currentX,\n          this.currentY\n        );\n        currentX += 100;\n      }\n    }\n\n    if (signatures.length % signaturesPerRow !== 0) {\n      this.currentY += rowHeight;\n    }\n\n    this.currentY += 10;\n  }\n\n  /**\n   * Pridanie ≈°k√¥d\n   */\n  private addDamages(damages: unknown[]) {\n    this.addSectionTitle('≈†KODY A PO≈†KODENIA');\n\n    if (damages.length === 0) {\n      this.doc.setFontSize(10);\n      this.doc.setTextColor(0, 128, 0);\n      this.doc.text(\n        '‚úÖ ≈Ωiadne ≈°kody neboli zaznamenan√©',\n        this.margin,\n        this.currentY\n      );\n      this.currentY += 10;\n      return;\n    }\n\n    damages.forEach((damage, index) => {\n      this.doc.setDrawColor(...this.primaryColor);\n      this.doc.setFillColor(255, 248, 220);\n      this.doc.roundedRect(\n        this.margin,\n        this.currentY,\n        this.pageWidth - 2 * this.margin,\n        25,\n        3,\n        3,\n        'FD'\n      );\n\n      this.doc.setFontSize(10);\n      this.doc.setFont('helvetica', 'bold');\n      this.doc.setTextColor(...this.primaryColor);\n      this.doc.text(`≈†koda ${index + 1}:`, this.margin + 5, this.currentY + 8);\n\n      this.doc.setFont('helvetica', 'normal');\n      this.doc.setTextColor(...this.secondaryColor);\n      this.doc.text(\n        `Popis: ${damage.description || 'N/A'}`,\n        this.margin + 5,\n        this.currentY + 15\n      );\n\n      if (damage.location) {\n        this.doc.text(\n          `Lokaliz√°cia: ${damage.location}`,\n          this.margin + 5,\n          this.currentY + 22\n        );\n      }\n\n      this.currentY += 30;\n    });\n  }\n\n  /**\n   * Pridanie pozn√°mok\n   */\n  private addNotes(notes: string) {\n    this.addSectionTitle('POZN√ÅMKY');\n\n    this.doc.setFontSize(10);\n    this.doc.setFont('helvetica', 'normal');\n    this.doc.setTextColor(...this.secondaryColor);\n\n    this.doc.setDrawColor(...this.primaryColor);\n    this.doc.setFillColor(248, 249, 250);\n    this.doc.roundedRect(\n      this.margin,\n      this.currentY,\n      this.pageWidth - 2 * this.margin,\n      20,\n      3,\n      3,\n      'FD'\n    );\n\n    this.doc.text(notes, this.margin + 5, this.currentY + 8);\n    this.currentY += 25;\n  }\n\n  /**\n   * Pridanie p√§ty\n   */\n  private addFooter(protocol: ProtocolData) {\n    this.currentY = this.pageHeight - 30;\n\n    this.doc.setDrawColor(...this.primaryColor);\n    this.doc.line(\n      this.margin,\n      this.currentY,\n      this.pageWidth - this.margin,\n      this.currentY\n    );\n    this.currentY += 5;\n\n    this.doc.setFontSize(8);\n    this.doc.setFont('helvetica', 'normal');\n    this.doc.setTextColor(...this.secondaryColor);\n    this.doc.text(\n      `Protokol vygenerovan√Ω: ${new Date().toLocaleString('sk-SK')}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 4;\n    this.doc.text(`ID protokolu: ${protocol.id}`, this.margin, this.currentY);\n    this.currentY += 4;\n    this.doc.text(\n      'BlackRent - Profesion√°lne rie≈°enia pre autopo≈æiƒçovne',\n      this.margin,\n      this.currentY\n    );\n  }\n\n  /**\n   * Pridanie n√°zvu sekcie\n   */\n  private addSectionTitle(title: string) {\n    this.doc.setFontSize(14);\n    this.doc.setFont('helvetica', 'bold');\n    this.doc.setTextColor(...this.primaryColor);\n    this.doc.text(title, this.margin, this.currentY);\n    this.currentY += 8;\n\n    this.doc.setDrawColor(...this.primaryColor);\n    this.doc.line(\n      this.margin,\n      this.currentY,\n      this.pageWidth - this.margin,\n      this.currentY\n    );\n    this.currentY += 8;\n  }\n\n  /**\n   * Naƒç√≠tanie obr√°zka z URL alebo base64\n   */\n  private async loadImageData(url: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      // Ak je to base64, pou≈æij priamo\n      if (url.startsWith('data:image')) {\n        resolve(url);\n        return;\n      }\n\n      // Inak naƒç√≠taj z URL\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n\n        const ctx = canvas.getContext('2d');\n        if (ctx) {\n          ctx.drawImage(img, 0, 0);\n          const dataUrl = canvas.toDataURL('image/jpeg', 0.8);\n          resolve(dataUrl);\n        } else {\n          reject(new Error('Failed to get canvas context'));\n        }\n      };\n\n      img.onerror = () => {\n        reject(new Error('Failed to load image'));\n      };\n\n      img.src = url;\n    });\n  }\n\n  /**\n   * Vytvorenie placeholder obr√°zka\n   */\n  private createImagePlaceholder(\n    width: number,\n    height: number,\n    text: string\n  ): string {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) {\n      return '';\n    }\n\n    canvas.width = width;\n    canvas.height = height;\n\n    ctx.fillStyle = '#f0f0f0';\n    ctx.fillRect(0, 0, width, height);\n\n    ctx.strokeStyle = '#cccccc';\n    ctx.lineWidth = 1;\n    ctx.strokeRect(0, 0, width, height);\n\n    ctx.fillStyle = '#666666';\n    ctx.font = '12px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(text, width / 2, height / 2);\n\n    return canvas.toDataURL('image/jpeg', 0.8);\n  }\n\n  /**\n   * V√Ωpoƒçet rozmerov obr√°zka\n   */\n  private calculateImageDimensions(\n    imgData: string,\n    maxWidth: number,\n    maxHeight: number\n  ) {\n    return new Promise<{ width: number; height: number }>(resolve => {\n      const img = new Image();\n      img.onload = () => {\n        const aspectRatio = img.width / img.height;\n        let width = maxWidth;\n        let height = width / aspectRatio;\n\n        if (height > maxHeight) {\n          height = maxHeight;\n          width = height * aspectRatio;\n        }\n\n        resolve({ width, height });\n      };\n      img.src = imgData;\n    });\n  }\n}\n\nexport default EnhancedPDFGenerator;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/errorHandling.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[374,377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[374,377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1050,1053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1050,1053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2040,2043],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2040,2043],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":161,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4249,4252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4249,4252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5247,5250],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5247,5250],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":199,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5274,5277],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5274,5277],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üõ°Ô∏è ERROR HANDLING UTILITIES\n *\n * Robustn√Ω error handling syst√©m pre API calls:\n * - Retry mechanism s exponential backoff\n * - Network error detection\n * - User-friendly error messages\n * - Graceful degradation\n */\n\nexport interface RetryOptions {\n  maxRetries: number;\n  baseDelay: number;\n  maxDelay: number;\n  exponentialBase: number;\n  retryCondition?: (error: any) => boolean;\n}\n\nexport interface NetworkError {\n  isNetworkError: boolean;\n  isOffline: boolean;\n  errorType: 'connection' | 'timeout' | 'server' | 'unknown';\n  userMessage: string;\n  technicalMessage: string;\n}\n\nconst DEFAULT_RETRY_OPTIONS: RetryOptions = {\n  maxRetries: 3,\n  baseDelay: 1000, // 1s\n  maxDelay: 10000, // 10s\n  exponentialBase: 2, // 2^n backoff\n  retryCondition: error => isRetryableError(error),\n};\n\n/**\n * üîÑ Retry mechanism s exponential backoff\n */\nexport const withRetry = async <T>(\n  operation: () => Promise<T>,\n  options: Partial<RetryOptions> = {}\n): Promise<T> => {\n  const config = { ...DEFAULT_RETRY_OPTIONS, ...options };\n  let lastError: any;\n\n  for (let attempt = 0; attempt <= config.maxRetries; attempt++) {\n    try {\n      if (attempt > 0) {\n        console.log(`üîÑ Retry attempt ${attempt}/${config.maxRetries}`);\n      }\n\n      return await operation();\n    } catch (error) {\n      lastError = error;\n\n      // Posledn√Ω pokus - nevykon√°vame delay\n      if (attempt === config.maxRetries) {\n        console.error(`‚ùå Final retry attempt failed:`, error);\n        break;\n      }\n\n      // Skontroluj ƒçi je error retryable\n      if (!config.retryCondition!(error)) {\n        console.log('‚ö†Ô∏è Error is not retryable, giving up');\n        break;\n      }\n\n      // Vypoƒç√≠taj delay s exponential backoff\n      const delay = Math.min(\n        config.baseDelay * Math.pow(config.exponentialBase, attempt),\n        config.maxDelay\n      );\n\n      console.log(`‚è≥ Waiting ${delay}ms before retry...`);\n      await sleep(delay);\n    }\n  }\n\n  throw lastError;\n};\n\n/**\n * üåê Network error detection\n */\nexport const analyzeError = (error: any): NetworkError => {\n  const errorMessage = error?.message?.toLowerCase() || '';\n  const isOnline = navigator.onLine;\n\n  // Network connection errors\n  if (\n    errorMessage.includes('failed to fetch') ||\n    errorMessage.includes('network error') ||\n    errorMessage.includes('connection refused') ||\n    errorMessage.includes('net::err_')\n  ) {\n    return {\n      isNetworkError: true,\n      isOffline: !isOnline,\n      errorType: 'connection',\n      userMessage: isOnline\n        ? 'üåê Probl√©m s pripojen√≠m na server. Sk√∫≈°am znova...'\n        : 'üì° Nie ste pripojen√Ω na internet. Skontrolujte pripojenie.',\n      technicalMessage: error.message,\n    };\n  }\n\n  // Timeout errors\n  if (errorMessage.includes('timeout') || errorMessage.includes('timed out')) {\n    return {\n      isNetworkError: true,\n      isOffline: false,\n      errorType: 'timeout',\n      userMessage: '‚è∞ Server neodpoved√°. Sk√∫≈°am znova...',\n      technicalMessage: error.message,\n    };\n  }\n\n  // Server errors (5xx)\n  if (error?.status >= 500 && error?.status < 600) {\n    return {\n      isNetworkError: false,\n      isOffline: false,\n      errorType: 'server',\n      userMessage: 'üîß Server m√° probl√©my. Sk√∫≈°am znova...',\n      technicalMessage: `Server error: ${error.status}`,\n    };\n  }\n\n  // Client errors (4xx) - usually not retryable\n  if (error?.status >= 400 && error?.status < 500) {\n    const userMessages = {\n      401: 'üîê Rel√°cia vypr≈°ala. Prihl√°ste sa znova.',\n      403: '‚õî Nem√°te opr√°vnenie na t√∫to akciu.',\n      404: '‚ùì Po≈æadovan√© d√°ta sa nena≈°li.',\n      429: '‚è∏Ô∏è Pr√≠li≈° veƒæa requestov. Poƒçkajte chv√≠ƒæu.',\n    };\n\n    return {\n      isNetworkError: false,\n      isOffline: false,\n      errorType: 'server',\n      userMessage:\n        userMessages[error.status as keyof typeof userMessages] ||\n        `‚ùå Chyba: ${error.status}`,\n      technicalMessage: `Client error: ${error.status}`,\n    };\n  }\n\n  // Unknown error\n  return {\n    isNetworkError: false,\n    isOffline: !isOnline,\n    errorType: 'unknown',\n    userMessage: '‚ùå Neoƒçak√°van√° chyba. Sk√∫≈°am znova...',\n    technicalMessage: error.message || 'Unknown error',\n  };\n};\n\n/**\n * ‚ùì Rozhodne ƒçi je error retryable\n */\nexport const isRetryableError = (error: any): boolean => {\n  const analysis = analyzeError(error);\n\n  // Network errors s√∫ retryable\n  if (analysis.isNetworkError) return true;\n\n  // Server errors (5xx) s√∫ retryable\n  if (analysis.errorType === 'server' && error?.status >= 500) return true;\n\n  // Rate limiting (429) je retryable\n  if (error?.status === 429) return true;\n\n  // Client errors (4xx) nie s√∫ retryable (okrem 429)\n  if (error?.status >= 400 && error?.status < 500) return false;\n\n  // Unknown errors s√∫ retryable (pre istotu)\n  if (analysis.errorType === 'unknown') return true;\n\n  return false;\n};\n\n/**\n * üò¥ Sleep utility\n */\nexport const sleep = (ms: number): Promise<void> => {\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\n\n/**\n * üéØ Enhanced error s user message\n */\nexport class EnhancedError extends Error {\n  public readonly userMessage: string;\n  public readonly technicalMessage: string;\n  public readonly errorType: string;\n  public readonly isRetryable: boolean;\n  public readonly originalError: any;\n\n  constructor(error: any) {\n    const analysis = analyzeError(error);\n    super(analysis.technicalMessage);\n\n    this.userMessage = analysis.userMessage;\n    this.technicalMessage = analysis.technicalMessage;\n    this.errorType = analysis.errorType;\n    this.isRetryable = isRetryableError(error);\n    this.originalError = error;\n\n    this.name = 'EnhancedError';\n  }\n}\n\n/**\n * üîß Network status monitoring\n */\nexport const createNetworkMonitor = (\n  onStatusChange?: (isOnline: boolean) => void\n) => {\n  const handleOnline = () => {\n    console.log('üåê Network connection restored');\n    onStatusChange?.(true);\n  };\n\n  const handleOffline = () => {\n    console.log('üì° Network connection lost');\n    onStatusChange?.(false);\n  };\n\n  window.addEventListener('online', handleOnline);\n  window.addEventListener('offline', handleOffline);\n\n  return () => {\n    window.removeEventListener('online', handleOnline);\n    window.removeEventListener('offline', handleOffline);\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/formatters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/http.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/http.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/imageCompression.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/imageLint.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/imageLint.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/imageOptimization.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'extension' is assigned a value but never used.","line":74,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'concurrent' is assigned a value but never used.","line":144,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":144,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":269,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":269,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6998,7001],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6998,7001],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üé® IMAGE OPTIMIZATION UTILITIES\n *\n * Utilities pre optimaliz√°ciu a transform√°ciu obr√°zkov\n */\n\n/**\n * Generuje r√¥zne kvalitn√© verzie URL obr√°zka\n */\nexport const generateImageSizes = (\n  baseUrl: string,\n  sizes: { width: number; height: number; quality?: number }[]\n) => {\n  const urlParts = baseUrl.split('.');\n  const extension = urlParts.pop();\n  const basePath = urlParts.join('.');\n\n  return sizes.map(({ width, height, quality = 80 }) => ({\n    url: `${basePath}_${width}x${height}_q${quality}.${extension}`,\n    width,\n    height,\n    quality,\n    descriptor: `${width}w`,\n  }));\n};\n\n/**\n * Vytvor√≠ low-quality placeholder URL\n */\nexport const createLowQualityUrl = (url: string, quality = 10): string => {\n  const urlParts = url.split('.');\n  const extension = urlParts.pop();\n  const basePath = urlParts.join('.');\n\n  return `${basePath}_lq${quality}.${extension}`;\n};\n\n/**\n * Detekuje ƒçi je obr√°zok webp podporovan√Ω\n */\nexport const supportsWebP = (): Promise<boolean> => {\n  return new Promise(resolve => {\n    const webP = new Image();\n    webP.onload = webP.onerror = () => {\n      resolve(webP.height === 2);\n    };\n    webP.src =\n      'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';\n  });\n};\n\n/**\n * Konvertuje URL na optimalizovan√© form√°ty\n */\nexport const optimizeImageUrl = async (\n  url: string,\n  options: {\n    width?: number;\n    height?: number;\n    quality?: number;\n    format?: 'webp' | 'jpg' | 'png' | 'auto';\n  } = {}\n): Promise<string> => {\n  const { width, height, quality = 80, format = 'auto' } = options;\n\n  // Ak je format auto, detekuj najlep≈°√≠ podporovan√Ω form√°t\n  let targetFormat = format;\n  if (format === 'auto') {\n    const webpSupported = await supportsWebP();\n    targetFormat = webpSupported ? 'webp' : 'jpg';\n  }\n\n  const urlParts = url.split('.');\n  const extension = urlParts.pop();\n  const basePath = urlParts.join('.');\n\n  let optimizedUrl = basePath;\n\n  if (width && height) {\n    optimizedUrl += `_${width}x${height}`;\n  }\n\n  if (quality !== 80) {\n    optimizedUrl += `_q${quality}`;\n  }\n\n  optimizedUrl += `.${targetFormat}`;\n\n  return optimizedUrl;\n};\n\n/**\n * Responsive image srcset generator\n */\nexport const createResponsiveSrcSet = (\n  baseUrl: string,\n  breakpoints: { width: number; quality?: number }[] = [\n    { width: 320, quality: 70 },\n    { width: 768, quality: 80 },\n    { width: 1024, quality: 85 },\n    { width: 1440, quality: 90 },\n  ]\n): string => {\n  return breakpoints\n    .map(({ width, quality = 80 }) => {\n      const urlParts = baseUrl.split('.');\n      const extension = urlParts.pop();\n      const basePath = urlParts.join('.');\n\n      const optimizedUrl = `${basePath}_${width}_q${quality}.${extension}`;\n      return `${optimizedUrl} ${width}w`;\n    })\n    .join(', ');\n};\n\n/**\n * Preload critical images\n */\nexport const preloadCriticalImages = (imageUrls: string[]): void => {\n  imageUrls.forEach(url => {\n    const link = document.createElement('link');\n    link.rel = 'preload';\n    link.as = 'image';\n    link.href = url;\n    document.head.appendChild(link);\n  });\n};\n\n/**\n * Image intersection observer pre bulk lazy loading\n */\nexport class ImageLazyLoader {\n  private observer: IntersectionObserver | null = null;\n  private imageQueue: Set<HTMLImageElement> = new Set();\n  private loadedImages: Set<string> = new Set();\n\n  constructor(\n    options: {\n      threshold?: number;\n      rootMargin?: string;\n      concurrent?: number;\n    } = {}\n  ) {\n    const { threshold = 0.1, rootMargin = '50px', concurrent = 4 } = options;\n\n    if (typeof IntersectionObserver !== 'undefined') {\n      this.observer = new IntersectionObserver(\n        this.handleIntersection.bind(this),\n        { threshold, rootMargin }\n      );\n    }\n  }\n\n  private async handleIntersection(entries: IntersectionObserverEntry[]) {\n    for (const entry of entries) {\n      if (entry.isIntersecting) {\n        const img = entry.target as HTMLImageElement;\n        const src = img.dataset.src;\n\n        if (src && !this.loadedImages.has(src)) {\n          this.loadedImages.add(src);\n          await this.loadImage(img, src);\n          this.observer?.unobserve(img);\n        }\n      }\n    }\n  }\n\n  private loadImage(img: HTMLImageElement, src: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const tempImg = new Image();\n\n      tempImg.onload = () => {\n        img.src = src;\n        img.classList.remove('lazy-loading');\n        img.classList.add('lazy-loaded');\n        resolve();\n      };\n\n      tempImg.onerror = () => {\n        img.classList.add('lazy-error');\n        reject(new Error(`Failed to load: ${src}`));\n      };\n\n      tempImg.src = src;\n    });\n  }\n\n  observe(img: HTMLImageElement): void {\n    if (this.observer && img.dataset.src) {\n      img.classList.add('lazy-loading');\n      this.observer.observe(img);\n    }\n  }\n\n  disconnect(): void {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  }\n}\n\n/**\n * Vehicle image utility functions\n */\nexport const VehicleImageUtils = {\n  /**\n   * Generuje URL pre vehicle obr√°zok v r√¥znych veƒækostiach\n   */\n  getVehicleImageUrl: (\n    vehicleId: string,\n    size: 'thumbnail' | 'card' | 'detail' | 'fullsize' = 'card'\n  ): string => {\n    const sizeConfigs = {\n      thumbnail: { width: 100, height: 75, quality: 70 },\n      card: { width: 300, height: 200, quality: 80 },\n      detail: { width: 600, height: 400, quality: 85 },\n      fullsize: { width: 1200, height: 800, quality: 90 },\n    };\n\n    const config = sizeConfigs[size];\n    return `/api/vehicles/${vehicleId}/image?w=${config.width}&h=${config.height}&q=${config.quality}`;\n  },\n\n  /**\n   * Generuje placeholder pre vehicle obr√°zok\n   */\n  getVehiclePlaceholder: (vehicleType?: string, color?: string): string => {\n    const defaultColor = color || '#E0E0E0';\n    const vehicleIcon = vehicleType === 'truck' ? 'üöõ' : 'üöó';\n\n    // SVG placeholder\n    const svg = `\n      <svg width=\"300\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"100%\" height=\"100%\" fill=\"${defaultColor}\"/>\n        <text x=\"50%\" y=\"50%\" text-anchor=\"middle\" dy=\".3em\" \n              font-size=\"48\" fill=\"#999\">${vehicleIcon}</text>\n      </svg>\n    `;\n\n    return `data:image/svg+xml;base64,${btoa(svg)}`;\n  },\n\n  /**\n   * Vytvor√≠ responsive srcset pre vehicle obr√°zok\n   */\n  createVehicleSrcSet: (vehicleId: string): string => {\n    return createResponsiveSrcSet(`/api/vehicles/${vehicleId}/image`, [\n      { width: 300, quality: 75 },\n      { width: 600, quality: 80 },\n      { width: 900, quality: 85 },\n    ]);\n  },\n};\n\n/**\n * Performance monitoring pre image loading\n */\nexport const ImagePerformanceMonitor = {\n  startTime: performance.now(),\n  loadedImages: 0,\n  failedImages: 0,\n\n  onImageLoad: (url: string, loadTime: number) => {\n    ImagePerformanceMonitor.loadedImages++;\n    console.log(`üñºÔ∏è Image loaded: ${url} (${loadTime.toFixed(2)}ms)`);\n  },\n\n  onImageError: (url: string, error: any) => {\n    ImagePerformanceMonitor.failedImages++;\n    console.error(`‚ùå Image failed: ${url}`, error);\n  },\n\n  getStats: () => {\n    const totalTime = performance.now() - ImagePerformanceMonitor.startTime;\n    return {\n      totalImages:\n        ImagePerformanceMonitor.loadedImages +\n        ImagePerformanceMonitor.failedImages,\n      loadedImages: ImagePerformanceMonitor.loadedImages,\n      failedImages: ImagePerformanceMonitor.failedImages,\n      successRate:\n        (\n          (ImagePerformanceMonitor.loadedImages /\n            (ImagePerformanceMonitor.loadedImages +\n              ImagePerformanceMonitor.failedImages)) *\n          100\n        ).toFixed(2) + '%',\n      totalTime: totalTime.toFixed(2) + 'ms',\n    };\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/imageProcessor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/lazyComponents.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":173,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4762,4765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4762,4765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":266,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7330,7333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7330,7333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":302,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8336,8339],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8336,8339],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/memoizeCallback.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_dependencies' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_dependencies' is assigned a value but never used.","line":42,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":27}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üîÑ CALLBACK MEMOIZATION UTILITY\n *\n * Utility pre efekt√≠vne memoizovanie callback funkci√≠\n */\n\nimport { useCallback, useRef } from 'react';\n\n/**\n * üìù Memoize callback s dependency tracking\n * POZN√ÅMKA: T√°to funkcia je deprecated - pou≈æite useCallback priamo v komponente\n */\nexport const memoizeCallback = <T extends (...args: unknown[]) => unknown>(\n  callback: T,\n  _dependencies: unknown[]\n): T => {\n  // T√°to funkcia je len wrapper - v skutoƒçnosti vr√°ti origin√°lny callback\n  // useCallback sa mus√≠ vola≈• priamo v React komponente\n  return callback;\n};\n\n/**\n * üèéÔ∏è Stable callback hook - callback sa zmen√≠ len keƒè sa zmen√≠ referencia funkcie\n */\nexport const useStableCallback = <T extends (...args: unknown[]) => unknown>(\n  callback: T\n): T => {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  return useCallback(\n    ((...args: Parameters<T>) => callbackRef.current(...args)) as T,\n    []\n  );\n};\n\n/**\n * üîê Memoized event handlers factory\n */\nexport const createMemoizedHandlers = <T>(\n  handlers: Record<string, (item: T) => void>,\n  _dependencies: unknown[] = []\n) => {\n  // POZN√ÅMKA: T√°to funkcia je deprecated - useCallback sa mus√≠ vola≈• priamo v React komponente\n  return Object.keys(handlers).reduce(\n    (memo, key) => {\n      memo[key] = handlers[key]; // Vr√°ti origin√°lne handlery bez memoization\n      return memo;\n    },\n    {} as Record<string, (item: T) => void>\n  );\n};\n\n/**\n * üìä Performance measurement decorator pre callbacks\n */\nexport const withPerformanceTracking = <\n  T extends (...args: unknown[]) => unknown,\n>(\n  callback: T,\n  label: string\n): T => {\n  return ((...args: Parameters<T>) => {\n    console.time(label);\n    const result = callback(...args);\n    console.timeEnd(label);\n    return result;\n  }) as T;\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/memoryOptimizer.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[670,673],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[670,673],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1778,1781],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1778,1781],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3234,3237],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3234,3237],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3337,3340],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3337,3340],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":155,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4671,4674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4671,4674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4714,4717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4714,4717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":276,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8125,8128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8125,8128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":292,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8505,8508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8505,8508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":350,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":350,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10127,10130],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10127,10130],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":353,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":353,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10223,10226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10223,10226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üß† Memory Optimization & Leak Prevention\n// Advanced memory management and performance monitoring tools\n\ninterface MemoryStats {\n  usedJSHeapSize: number;\n  totalJSHeapSize: number;\n  jsHeapSizeLimit: number;\n  usagePercentage: number;\n  timestamp: number;\n}\n\ninterface PerformanceMetrics {\n  memoryStats: MemoryStats | null;\n  renderTime: number;\n  interactionLatency: number;\n  resourceCount: number;\n  activeListeners: number;\n}\n\nclass MemoryOptimizer {\n  private memoryCheckInterval: NodeJS.Timeout | null = null;\n  private memoryHistory: MemoryStats[] = [];\n  private activeListeners = new Map<string, Set<EventListener>>();\n  private weakRefs = new Set<WeakRef<any>>();\n  private cleanupCallbacks = new Set<() => void>();\n\n  // Memory monitoring\n  startMemoryMonitoring(intervalMs: number = 5000): void {\n    if (!('memory' in performance)) {\n      console.warn('Memory API not available');\n      return;\n    }\n\n    this.memoryCheckInterval = setInterval(() => {\n      const memoryStats = this.getMemoryStats();\n      if (memoryStats) {\n        this.memoryHistory.push(memoryStats);\n\n        // Keep only last 20 measurements\n        if (this.memoryHistory.length > 20) {\n          this.memoryHistory.shift();\n        }\n\n        // Check for memory leaks\n        this.detectMemoryLeaks(memoryStats);\n\n        if (process.env.NODE_ENV === 'development') {\n          this.logMemoryStats(memoryStats);\n        }\n      }\n    }, intervalMs);\n  }\n\n  stopMemoryMonitoring(): void {\n    if (this.memoryCheckInterval) {\n      clearInterval(this.memoryCheckInterval);\n      this.memoryCheckInterval = null;\n    }\n  }\n\n  // Get current memory statistics\n  getMemoryStats(): MemoryStats | null {\n    if (!('memory' in performance)) return null;\n\n    const memory = (performance as any).memory;\n\n    return {\n      usedJSHeapSize: memory.usedJSHeapSize,\n      totalJSHeapSize: memory.totalJSHeapSize,\n      jsHeapSizeLimit: memory.jsHeapSizeLimit,\n      usagePercentage: (memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100,\n      timestamp: Date.now(),\n    };\n  }\n\n  // Detect potential memory leaks\n  private detectMemoryLeaks(currentStats: MemoryStats): void {\n    if (this.memoryHistory.length < 5) return;\n\n    const recentStats = this.memoryHistory.slice(-5);\n    const growthTrend = recentStats.every((stats, index) => {\n      if (index === 0) return true;\n      return stats.usedJSHeapSize > recentStats[index - 1].usedJSHeapSize;\n    });\n\n    const averageGrowth =\n      recentStats.reduce((acc, stats, index) => {\n        if (index === 0) return 0;\n        return (\n          acc + (stats.usedJSHeapSize - recentStats[index - 1].usedJSHeapSize)\n        );\n      }, 0) /\n      (recentStats.length - 1);\n\n    // Alert if memory is consistently growing\n    if (growthTrend && averageGrowth > 1024 * 1024) {\n      // 1MB average growth\n      console.warn('üö® Potential memory leak detected!', {\n        averageGrowth: `${(averageGrowth / 1024 / 1024).toFixed(2)}MB`,\n        currentUsage: `${(currentStats.usedJSHeapSize / 1024 / 1024).toFixed(2)}MB`,\n        usagePercentage: `${currentStats.usagePercentage.toFixed(1)}%`,\n      });\n\n      // Suggest garbage collection if available\n      if ('gc' in window && typeof (window as any).gc === 'function') {\n        console.log('üóëÔ∏è Running garbage collection...');\n        (window as any).gc();\n      }\n    }\n\n    // Alert if memory usage is very high\n    if (currentStats.usagePercentage > 80) {\n      console.error('üö® High memory usage detected!', {\n        usage: `${currentStats.usagePercentage.toFixed(1)}%`,\n        used: `${(currentStats.usedJSHeapSize / 1024 / 1024).toFixed(2)}MB`,\n        limit: `${(currentStats.jsHeapSizeLimit / 1024 / 1024).toFixed(2)}MB`,\n      });\n\n      // Trigger cleanup\n      this.performEmergencyCleanup();\n    }\n  }\n\n  // Emergency cleanup when memory is high\n  private performEmergencyCleanup(): void {\n    console.log('üßπ Performing emergency memory cleanup...');\n\n    // Run all registered cleanup callbacks\n    this.cleanupCallbacks.forEach(callback => {\n      try {\n        callback();\n      } catch (error) {\n        console.error('Cleanup callback failed:', error);\n      }\n    });\n\n    // Clear weak references\n    this.weakRefs.clear();\n\n    // Remove unused event listeners\n    this.cleanupUnusedListeners();\n\n    // Clear caches if available\n    if ('caches' in window) {\n      caches.keys().then(names => {\n        names.forEach(name => {\n          if (name.includes('temp') || name.includes('cache')) {\n            caches.delete(name);\n          }\n        });\n      });\n    }\n\n    // Force garbage collection if available\n    if ('gc' in window && typeof (window as any).gc === 'function') {\n      (window as any).gc();\n    }\n  }\n\n  // Log memory statistics\n  private logMemoryStats(stats: MemoryStats): void {\n    const used = (stats.usedJSHeapSize / 1024 / 1024).toFixed(2);\n    const total = (stats.totalJSHeapSize / 1024 / 1024).toFixed(2);\n    const limit = (stats.jsHeapSizeLimit / 1024 / 1024).toFixed(2);\n\n    console.group('üß† Memory Stats');\n    console.log(`Used: ${used}MB / Total: ${total}MB / Limit: ${limit}MB`);\n    console.log(`Usage: ${stats.usagePercentage.toFixed(1)}%`);\n    console.log(`Active Listeners: ${this.getTotalListenerCount()}`);\n    console.log(`WeakRefs: ${this.weakRefs.size}`);\n    console.groupEnd();\n  }\n\n  // Register event listener for tracking\n  addTrackedListener(\n    element: EventTarget,\n    event: string,\n    listener: EventListener,\n    options?: AddEventListenerOptions\n  ): void {\n    const key = `${element.constructor.name}_${event}`;\n\n    if (!this.activeListeners.has(key)) {\n      this.activeListeners.set(key, new Set());\n    }\n\n    this.activeListeners.get(key)!.add(listener);\n    element.addEventListener(event, listener, options);\n  }\n\n  // Remove tracked listener\n  removeTrackedListener(\n    element: EventTarget,\n    event: string,\n    listener: EventListener\n  ): void {\n    const key = `${element.constructor.name}_${event}`;\n    const listeners = this.activeListeners.get(key);\n\n    if (listeners) {\n      listeners.delete(listener);\n      if (listeners.size === 0) {\n        this.activeListeners.delete(key);\n      }\n    }\n\n    element.removeEventListener(event, listener);\n  }\n\n  // Clean up unused listeners\n  private cleanupUnusedListeners(): void {\n    let removedCount = 0;\n\n    this.activeListeners.forEach((listeners, key) => {\n      // Check if listeners are still needed (this is a simplified check)\n      listeners.forEach(listener => {\n        if (\n          typeof listener === 'function' &&\n          listener.name.includes('anonymous')\n        ) {\n          listeners.delete(listener);\n          removedCount++;\n        }\n      });\n\n      if (listeners.size === 0) {\n        this.activeListeners.delete(key);\n      }\n    });\n\n    if (removedCount > 0) {\n      console.log(`üßπ Cleaned up ${removedCount} unused event listeners`);\n    }\n  }\n\n  // Get total listener count\n  private getTotalListenerCount(): number {\n    let total = 0;\n    this.activeListeners.forEach(listeners => {\n      total += listeners.size;\n    });\n    return total;\n  }\n\n  // Register cleanup callback\n  registerCleanup(callback: () => void): void {\n    this.cleanupCallbacks.add(callback);\n  }\n\n  // Unregister cleanup callback\n  unregisterCleanup(callback: () => void): void {\n    this.cleanupCallbacks.delete(callback);\n  }\n\n  // Create weak reference for automatic cleanup\n  createWeakRef<T extends object>(obj: T): WeakRef<T> {\n    const weakRef = new WeakRef(obj);\n    this.weakRefs.add(weakRef);\n    return weakRef;\n  }\n\n  // Get performance metrics\n  getPerformanceMetrics(): PerformanceMetrics {\n    return {\n      memoryStats: this.getMemoryStats(),\n      renderTime: this.measureRenderTime(),\n      interactionLatency: this.measureInteractionLatency(),\n      resourceCount: document.querySelectorAll('*').length,\n      activeListeners: this.getTotalListenerCount(),\n    };\n  }\n\n  // Measure render time\n  private measureRenderTime(): number {\n    if ('navigation' in performance) {\n      const navigation = performance.getEntriesByType('navigation')[0] as any;\n      if (navigation) {\n        return navigation.loadEventEnd - navigation.loadEventStart;\n      }\n    }\n    return 0;\n  }\n\n  // Measure interaction latency\n  private measureInteractionLatency(): number {\n    // This would be implemented with performance observer\n    // For now, return a placeholder\n    return 0;\n  }\n\n  // Generate memory report\n  generateMemoryReport(): any {\n    const currentStats = this.getMemoryStats();\n    const metrics = this.getPerformanceMetrics();\n\n    return {\n      timestamp: new Date().toISOString(),\n      currentMemory: currentStats,\n      memoryHistory: [...this.memoryHistory],\n      performanceMetrics: metrics,\n      recommendations: this.generateRecommendations(currentStats, metrics),\n    };\n  }\n\n  // Generate performance recommendations\n  private generateRecommendations(\n    memoryStats: MemoryStats | null,\n    metrics: PerformanceMetrics\n  ): string[] {\n    const recommendations: string[] = [];\n\n    if (memoryStats && memoryStats.usagePercentage > 70) {\n      recommendations.push('Consider reducing the number of cached objects');\n      recommendations.push('Review and remove unused event listeners');\n    }\n\n    if (metrics.activeListeners > 100) {\n      recommendations.push(\n        'High number of event listeners detected - consider event delegation'\n      );\n    }\n\n    if (metrics.resourceCount > 1000) {\n      recommendations.push(\n        'High DOM node count - consider virtual scrolling for large lists'\n      );\n    }\n\n    if (metrics.renderTime > 100) {\n      recommendations.push(\n        'Slow render time detected - optimize component rendering'\n      );\n    }\n\n    return recommendations;\n  }\n\n  // Cleanup all resources\n  cleanup(): void {\n    this.stopMemoryMonitoring();\n    this.cleanupCallbacks.clear();\n    this.activeListeners.clear();\n    this.weakRefs.clear();\n    this.memoryHistory = [];\n  }\n}\n\n// React component memory optimizer\nexport class ReactMemoryOptimizer {\n  private componentRefs = new Map<string, WeakRef<any>>();\n\n  // Track component mount/unmount\n  trackComponent(componentName: string, component: any): void {\n    this.componentRefs.set(componentName, new WeakRef(component));\n  }\n\n  // Check for components that should have been unmounted\n  checkForLeakedComponents(): string[] {\n    const leaked: string[] = [];\n\n    this.componentRefs.forEach((weakRef, componentName) => {\n      const component = weakRef.deref();\n      if (component) {\n        // Component still exists - check if it should have been cleaned up\n        if (component._unmounted || component._reactInternalFiber === null) {\n          leaked.push(componentName);\n        }\n      } else {\n        // Component was garbage collected - remove from tracking\n        this.componentRefs.delete(componentName);\n      }\n    });\n\n    return leaked;\n  }\n\n  // Get component count\n  getComponentCount(): number {\n    let count = 0;\n    this.componentRefs.forEach(weakRef => {\n      if (weakRef.deref()) count++;\n    });\n    return count;\n  }\n}\n\n// Export singleton instances\nexport const memoryOptimizer = new MemoryOptimizer();\nexport const reactMemoryOptimizer = new ReactMemoryOptimizer();\n\n// Initialize memory optimization\nexport const initializeMemoryOptimization = () => {\n  if (process.env.NODE_ENV === 'development') {\n    memoryOptimizer.startMemoryMonitoring(10000); // Check every 10 seconds in dev\n  } else {\n    memoryOptimizer.startMemoryMonitoring(30000); // Check every 30 seconds in prod\n  }\n\n  // Cleanup on page unload\n  window.addEventListener('beforeunload', () => {\n    memoryOptimizer.cleanup();\n  });\n\n  // Register global cleanup for React components\n  memoryOptimizer.registerCleanup(() => {\n    const leaked = reactMemoryOptimizer.checkForLeakedComponents();\n    if (leaked.length > 0) {\n      console.warn('üö® Potentially leaked components:', leaked);\n    }\n  });\n\n  console.log('üß† Memory optimization initialized');\n};\n\nexport default {\n  memoryOptimizer,\n  reactMemoryOptimizer,\n  initializeMemoryOptimization,\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/pdfGenerator.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[141,144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[141,144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[186,189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[186,189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'quality' is defined but never used.","line":300,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":300,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'quality' is defined but never used.","line":438,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":438,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'quality' is defined but never used.","line":628,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":628,"endColumn":20}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import jsPDF from 'jspdf';\nimport 'jspdf-autotable';\n\nexport interface ProtocolData {\n  id: string;\n  type: 'handover' | 'return';\n  rental: any;\n  location: string;\n  vehicleCondition: any;\n  vehicleImages: unknown[];\n  documentImages: unknown[];\n  damageImages: unknown[];\n  damages: unknown[];\n  signatures: unknown[];\n  notes: string;\n  createdAt: Date;\n  completedAt: Date;\n}\n\ninterface PDFOptions {\n  includeImages?: boolean;\n  includeSignatures?: boolean;\n  imageQuality?: number;\n  maxImageWidth?: number;\n  maxImageHeight?: number;\n  filename?: string;\n  saveToR2?: boolean;\n  downloadLocal?: boolean;\n}\n\nclass PDFGenerator {\n  private doc: jsPDF;\n  private currentY: number = 30;\n  private pageWidth: number;\n  private pageHeight: number;\n  private margin: number = 20;\n  private primaryColor: [number, number, number] = [25, 118, 210]; // Modr√°\n  private secondaryColor: [number, number, number] = [75, 85, 99]; // Siv√°\n  private accentColor: [number, number, number] = [59, 130, 246]; // Modr√° akcent\n  private successColor: [number, number, number] = [34, 197, 94]; // Zelen√°\n  private warningColor: [number, number, number] = [245, 158, 11]; // Oran≈æov√°\n\n  /**\n   * Bezpeƒçn√© nastavenie fontu s fallback\n   */\n  private setFontSafely(font: string, style: string = 'normal') {\n    try {\n      this.doc.setFont(font, style);\n    } catch (error) {\n      console.warn(\n        `‚ö†Ô∏è Warning: Could not set font ${font} ${style}, using helvetica:`,\n        error\n      );\n      try {\n        this.doc.setFont('helvetica', style);\n      } catch (fallbackError) {\n        console.warn('‚ö†Ô∏è Warning: Could not set fallback font, using default');\n      }\n    }\n  }\n\n  constructor() {\n    this.doc = new jsPDF('p', 'mm', 'a4');\n    this.pageWidth = this.doc.internal.pageSize.getWidth();\n    this.pageHeight = this.doc.internal.pageSize.getHeight();\n\n    // Nastavenie Unicode podpory pre diakritiku\n    // jsPDF podporuje tieto fonty: 'helvetica', 'courier', 'times', 'symbol', 'zapfdingbats'\n    // Pou≈æ√≠vame 'helvetica' ako ≈°tandardn√Ω font\n    this.setFontSafely('helvetica');\n  }\n\n  /**\n   * Generovanie PDF protokolu s fotkami\n   */\n  async generateProtocolPDF(\n    protocol: ProtocolData,\n    options: PDFOptions = {}\n  ): Promise<Blob> {\n    const {\n      includeImages = true,\n      includeSignatures = true,\n      imageQuality = 0.9,\n      maxImageWidth = 80,\n      maxImageHeight = 60,\n    } = options;\n\n    try {\n      // Header\n      this.addHeader(protocol);\n\n      // Z√°kladn√© inform√°cie\n      this.addBasicInfo(protocol);\n\n      // Stav vozidla\n      this.addVehicleCondition(protocol);\n\n      // Fotky vozidla\n      if (\n        includeImages &&\n        protocol.vehicleImages &&\n        protocol.vehicleImages.length > 0\n      ) {\n        await this.addVehicleImages(\n          protocol.vehicleImages,\n          maxImageWidth,\n          maxImageHeight,\n          imageQuality\n        );\n      }\n\n      // Dokumenty\n      if (\n        includeImages &&\n        protocol.documentImages &&\n        protocol.documentImages.length > 0\n      ) {\n        await this.addDocumentImages(\n          protocol.documentImages,\n          maxImageWidth,\n          maxImageHeight,\n          imageQuality\n        );\n      }\n\n      // ≈†kody\n      if (protocol.damages && protocol.damages.length > 0) {\n        this.addDamages(protocol.damages);\n      }\n\n      // Pozn√°mky\n      if (protocol.notes) {\n        this.addNotes(protocol.notes);\n      }\n\n      // Podpisy\n      if (\n        includeSignatures &&\n        protocol.signatures &&\n        protocol.signatures.length > 0\n      ) {\n        await this.addSignatures(\n          protocol.signatures,\n          maxImageWidth,\n          maxImageHeight,\n          imageQuality\n        );\n      }\n\n      // Footer\n      this.addFooter(protocol);\n\n      return this.doc.output('blob');\n    } catch (error) {\n      console.error('‚ùå Error generating PDF:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Header s logom a n√°zvom\n   */\n  private addHeader(protocol: ProtocolData) {\n    // Pozadie pre header\n    this.doc.setFillColor(...this.primaryColor);\n    this.doc.rect(0, 0, this.pageWidth, 35, 'F');\n\n    // Logo\n    this.doc.setFillColor(255, 255, 255);\n    this.doc.circle(25, 17.5, 8, 'F');\n    this.doc.setFontSize(12);\n    this.setFontSafely('helvetica', 'bold');\n    this.doc.setTextColor(255, 255, 255);\n    this.doc.text('BR', 25, 21, { align: 'center' });\n\n    // N√°zov protokolu\n    this.doc.setFontSize(16);\n    this.setFontSafely('helvetica', 'bold');\n    this.doc.setTextColor(255, 255, 255);\n    const title =\n      protocol.type === 'handover'\n        ? 'PROTOKOL O PREVZAT√ç VOZIDLA'\n        : 'PROTOKOL O VR√ÅTEN√ç VOZIDLA';\n    this.doc.text(title, this.pageWidth / 2, 22, { align: 'center' });\n\n    // Reset poz√≠cie\n    this.currentY = 45;\n\n    // Inform√°cie o protokole\n    this.doc.setFontSize(10);\n    this.setFontSafely('helvetica', 'normal');\n    this.doc.setTextColor(...this.secondaryColor);\n    this.doc.text(\n      `ƒå√≠slo protokolu: ${protocol.id}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n\n    this.doc.text(\n      `D√°tum: ${new Date(protocol.completedAt).toLocaleDateString('sk-SK')}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 6;\n\n    this.doc.text(`Miesto: ${protocol.location}`, this.margin, this.currentY);\n    this.currentY += 15;\n  }\n\n  /**\n   * Z√°kladn√© inform√°cie\n   */\n  private addBasicInfo(protocol: ProtocolData) {\n    this.addSectionTitle('Z√ÅKLADN√â INFORM√ÅCIE');\n\n    const rental = protocol.rental;\n    const vehicle = rental.vehicle || {};\n    const customer = rental.customer || {};\n\n    const basicInfo = [\n      ['ƒå√≠slo objedn√°vky:', rental.orderNumber || 'N/A'],\n      [\n        'Vozidlo:',\n        `${vehicle.brand || ''} ${vehicle.model || ''} (${vehicle.licensePlate || 'N/A'})`,\n      ],\n      ['Z√°kazn√≠k:', `${customer.name || ''} ${customer.surname || ''}`],\n      ['Telef√≥n:', customer.phone || 'N/A'],\n      ['Email:', customer.email || 'N/A'],\n      [\n        'D√°tum pren√°jmu:',\n        `${new Date(rental.startDate).toLocaleDateString('sk-SK')} - ${new Date(rental.endDate).toLocaleDateString('sk-SK')}`,\n      ],\n      ['Cena:', `${rental.totalPrice} ${rental.currency || 'EUR'}`],\n    ];\n\n    // Layout s lep≈°√≠m rozlo≈æen√≠m\n    basicInfo.forEach(([label, value], index) => {\n      const row = Math.floor(index / 2);\n      const col = index % 2;\n      const x = col === 0 ? this.margin : this.margin + 85;\n      const y = this.currentY + row * 7;\n\n      this.doc.setFontSize(10);\n      this.setFontSafely('helvetica', 'bold');\n      this.doc.setTextColor(...this.primaryColor);\n      this.doc.text(label, x, y);\n\n      this.setFontSafely('helvetica', 'normal');\n      this.doc.setTextColor(...this.secondaryColor);\n      this.doc.text(value, x + 50, y);\n    });\n\n    this.currentY += Math.ceil(basicInfo.length / 2) * 7 + 10;\n  }\n\n  /**\n   * Stav vozidla\n   */\n  private addVehicleCondition(protocol: ProtocolData) {\n    this.addSectionTitle('STAV VOZIDLA');\n\n    const condition = protocol.vehicleCondition;\n\n    const vehicleInfo = [\n      ['Poƒçet kilometrov:', `${condition.odometer?.toLocaleString() || 0} km`],\n      ['√örove≈à paliva:', `${condition.fuelLevel || 0}%`],\n      ['Typ paliva:', condition.fuelType || 'N/A'],\n      ['Exteri√©r:', condition.exteriorCondition || 'N/A'],\n      ['Interi√©r:', condition.interiorCondition || 'N/A'],\n    ];\n\n    // Layout s lep≈°√≠m rozlo≈æen√≠m\n    vehicleInfo.forEach(([label, value], index) => {\n      const row = Math.floor(index / 2);\n      const col = index % 2;\n      const x = col === 0 ? this.margin : this.margin + 85;\n      const y = this.currentY + row * 7;\n\n      this.doc.setFontSize(10);\n      this.setFontSafely('helvetica', 'bold');\n      this.doc.setTextColor(...this.primaryColor);\n      this.doc.text(label, x, y);\n\n      this.setFontSafely('helvetica', 'normal');\n      this.doc.setTextColor(...this.secondaryColor);\n      this.doc.text(value, x + 50, y);\n    });\n\n    this.currentY += Math.ceil(vehicleInfo.length / 2) * 7 + 10;\n  }\n\n  /**\n   * Pridanie fotiek vozidla\n   */\n  private async addVehicleImages(\n    images: unknown[],\n    maxWidth: number,\n    maxHeight: number,\n    quality: number\n  ) {\n    this.addSectionTitle('FOTODOKUMENT√ÅCIA VOZIDLA');\n\n    if (images.length === 0) {\n      this.doc.setFontSize(10);\n      this.doc.setTextColor(128, 128, 128);\n      this.doc.text(\n        '≈Ωiadne fotky nie s√∫ k dispoz√≠cii',\n        this.margin,\n        this.currentY\n      );\n      this.currentY += 10;\n      return;\n    }\n\n    const imagesPerRow = 2;\n    let currentX = this.margin;\n    let rowHeight = 0;\n    let imagesInRow = 0;\n\n    for (let i = 0; i < images.length; i++) {\n      const image = images[i];\n\n      try {\n        let imgData: string;\n        try {\n          imgData = await this.loadImageFromUrl(image.url);\n        } catch (error) {\n          console.warn('‚ö†Ô∏è CORS error, trying proxy approach:', image.url);\n          imgData = this.createImagePlaceholder(\n            maxWidth,\n            maxHeight,\n            `Fotka ${i + 1}`\n          );\n        }\n\n        const { width, height } = await this.calculateImageDimensions(\n          imgData,\n          maxWidth,\n          maxHeight\n        );\n\n        // Kontrola ƒçi sa zmest√≠ na str√°nku\n        if (this.currentY + height + 15 > this.pageHeight - 30) {\n          this.doc.addPage();\n          this.currentY = 30;\n          currentX = this.margin;\n          rowHeight = 0;\n          imagesInRow = 0;\n        }\n\n        // Pridanie obr√°zka\n        this.doc.addImage(\n          imgData,\n          'JPEG',\n          currentX,\n          this.currentY,\n          width,\n          height\n        );\n\n        // Popis obr√°zka\n        this.doc.setFontSize(8);\n        this.setFontSafely('helvetica', 'bold');\n        this.doc.setTextColor(...this.primaryColor);\n        this.doc.text(`Fotka ${i + 1}`, currentX, this.currentY + height + 3);\n\n        // URL link pod obr√°zkom (krat≈°√≠)\n        if (image.url) {\n          const urlText = image.url;\n          const encodedUrl = urlText.replace(/\\s/g, '%20');\n\n          this.doc.setFontSize(4);\n          this.setFontSafely('helvetica', 'normal');\n          this.doc.setTextColor(...this.accentColor);\n\n          // Skr√°ten√Ω URL pre zobrazenie pod fotkou\n          const shortUrl =\n            encodedUrl.length > 50\n              ? encodedUrl.substring(0, 50) + '...'\n              : encodedUrl;\n\n          if (this.doc.getTextWidth(shortUrl) > width) {\n            this.doc.setFontSize(3);\n          }\n\n          this.doc.text(shortUrl, currentX, this.currentY + height + 6);\n        }\n\n        currentX += width + 15; // Zv√§ƒç≈°en√Ω spacing medzi obr√°zkami\n        rowHeight = Math.max(rowHeight, height + 20); // Zv√§ƒç≈°en√Ω row height pre URL\n        imagesInRow++;\n\n        if (imagesInRow >= imagesPerRow) {\n          this.currentY += rowHeight;\n          currentX = this.margin;\n          rowHeight = 0;\n          imagesInRow = 0;\n        }\n      } catch (error) {\n        console.error('‚ùå Error processing image:', image.url, error);\n        const placeholder = this.createImagePlaceholder(\n          maxWidth,\n          maxHeight,\n          `Chyba ${i + 1}`\n        );\n        this.doc.addImage(\n          placeholder,\n          'JPEG',\n          currentX,\n          this.currentY,\n          maxWidth,\n          maxHeight\n        );\n        currentX += maxWidth + 10;\n      }\n    }\n\n    if (imagesInRow > 0) {\n      this.currentY += rowHeight;\n    }\n\n    this.currentY += 10;\n\n    // Pridanie URL na nov√∫ stranu\n    if (images.length > 0) {\n      this.addImageUrlsPage(images);\n    }\n  }\n\n  /**\n   * Pridanie dokumentov\n   */\n  private async addDocumentImages(\n    images: unknown[],\n    maxWidth: number,\n    maxHeight: number,\n    quality: number\n  ) {\n    this.addSectionTitle('DOKUMENTY');\n\n    if (images.length === 0) {\n      this.doc.setFontSize(10);\n      this.doc.setTextColor(128, 128, 128);\n      this.doc.text(\n        '≈Ωiadne dokumenty nie s√∫ k dispoz√≠cii',\n        this.margin,\n        this.currentY\n      );\n      this.currentY += 10;\n      return;\n    }\n\n    const imagesPerRow = 2;\n    let currentX = this.margin;\n    let rowHeight = 0;\n    let imagesInRow = 0;\n\n    for (let i = 0; i < images.length; i++) {\n      const image = images[i];\n\n      try {\n        let imgData: string;\n        try {\n          imgData = await this.loadImageFromUrl(image.url);\n        } catch (error) {\n          console.warn('‚ö†Ô∏è CORS error, trying proxy approach:', image.url);\n          imgData = this.createImagePlaceholder(\n            maxWidth,\n            maxHeight,\n            `Dokument ${i + 1}`\n          );\n        }\n\n        const { width, height } = await this.calculateImageDimensions(\n          imgData,\n          maxWidth,\n          maxHeight\n        );\n\n        if (this.currentY + height + 15 > this.pageHeight - 30) {\n          this.doc.addPage();\n          this.currentY = 30;\n          currentX = this.margin;\n          rowHeight = 0;\n          imagesInRow = 0;\n        }\n\n        this.doc.addImage(\n          imgData,\n          'JPEG',\n          currentX,\n          this.currentY,\n          width,\n          height\n        );\n\n        this.doc.setFontSize(8);\n        this.setFontSafely('helvetica', 'bold');\n        this.doc.setTextColor(...this.primaryColor);\n        this.doc.text(\n          `Dokument ${i + 1}`,\n          currentX,\n          this.currentY + height + 3\n        );\n\n        if (image.url) {\n          const urlText = image.url;\n          const encodedUrl = urlText.replace(/\\s/g, '%20');\n\n          this.doc.setFontSize(4);\n          this.setFontSafely('helvetica', 'normal');\n          this.doc.setTextColor(...this.accentColor);\n\n          if (this.doc.getTextWidth(encodedUrl) > width) {\n            this.doc.setFontSize(3);\n          }\n\n          this.doc.text(encodedUrl, currentX, this.currentY + height + 6);\n        }\n\n        currentX += width + 15; // Zv√§ƒç≈°en√Ω spacing medzi obr√°zkami\n        rowHeight = Math.max(rowHeight, height + 20); // Zv√§ƒç≈°en√Ω row height pre URL\n        imagesInRow++;\n\n        if (imagesInRow >= imagesPerRow) {\n          this.currentY += rowHeight;\n          currentX = this.margin;\n          rowHeight = 0;\n          imagesInRow = 0;\n        }\n      } catch (error) {\n        console.error('‚ùå Error processing document:', image.url, error);\n        const placeholder = this.createImagePlaceholder(\n          maxWidth,\n          maxHeight,\n          `Chyba ${i + 1}`\n        );\n        this.doc.addImage(\n          placeholder,\n          'JPEG',\n          currentX,\n          this.currentY,\n          maxWidth,\n          maxHeight\n        );\n        currentX += maxWidth + 10;\n      }\n    }\n\n    if (imagesInRow > 0) {\n      this.currentY += rowHeight;\n    }\n\n    this.currentY += 10;\n  }\n\n  /**\n   * Pridanie ≈°k√¥d\n   */\n  private addDamages(damages: unknown[]) {\n    this.addSectionTitle('≈†KODY A PO≈†KODENIA');\n\n    if (damages.length === 0) {\n      this.doc.setFontSize(10);\n      this.doc.setTextColor(128, 128, 128);\n      this.doc.text(\n        '≈Ωiadne ≈°kody nie s√∫ zaznamenan√©',\n        this.margin,\n        this.currentY\n      );\n      this.currentY += 10;\n      return;\n    }\n\n    damages.forEach((damage, index) => {\n      this.doc.setFontSize(10);\n      this.setFontSafely('helvetica', 'bold');\n      this.doc.setTextColor(...this.warningColor);\n      this.doc.text(`${index + 1}.`, this.margin, this.currentY);\n\n      this.setFontSafely('helvetica', 'normal');\n      this.doc.setTextColor(...this.secondaryColor);\n      this.doc.text(\n        damage.description || 'N/A',\n        this.margin + 15,\n        this.currentY\n      );\n\n      if (damage.location) {\n        this.doc.setFontSize(8);\n        this.doc.setTextColor(128, 128, 128);\n        this.doc.text(\n          `Lok√°cia: ${damage.location}`,\n          this.margin + 15,\n          this.currentY + 4\n        );\n        this.currentY += 8;\n      } else {\n        this.currentY += 6;\n      }\n    });\n\n    this.currentY += 5;\n  }\n\n  /**\n   * Pridanie pozn√°mok\n   */\n  private addNotes(notes: string) {\n    this.addSectionTitle('POZN√ÅMKY');\n\n    this.doc.setFontSize(10);\n    this.setFontSafely('helvetica', 'normal');\n    this.doc.setTextColor(...this.secondaryColor);\n    this.doc.text(notes, this.margin, this.currentY);\n\n    this.currentY += 15;\n  }\n\n  /**\n   * Pridanie podpisov\n   */\n  private async addSignatures(\n    signatures: unknown[],\n    maxWidth: number,\n    maxHeight: number,\n    quality: number\n  ) {\n    this.addSectionTitle('PODPISY');\n\n    if (signatures.length === 0) {\n      this.doc.setFontSize(10);\n      this.doc.setTextColor(128, 128, 128);\n      this.doc.text(\n        '≈Ωiadne podpisy nie s√∫ k dispoz√≠cii',\n        this.margin,\n        this.currentY\n      );\n      this.currentY += 10;\n      return;\n    }\n\n    const signaturesPerRow = 2;\n    let currentX = this.margin;\n    let rowHeight = 0;\n    let signaturesInRow = 0;\n\n    for (let i = 0; i < signatures.length; i++) {\n      const signature = signatures[i];\n\n      if (!signature.url && !signature.signature) {\n        console.warn('‚ö†Ô∏è Signature without URL or base64 data:', signature);\n        continue;\n      }\n\n      try {\n        let imgData: string;\n\n        if (signature.url) {\n          try {\n            imgData = await this.loadImageFromUrl(signature.url);\n          } catch (error) {\n            console.warn(\n              '‚ö†Ô∏è CORS error, trying proxy approach:',\n              signature.url\n            );\n            imgData = this.createImagePlaceholder(\n              maxWidth,\n              maxHeight,\n              `Podpis ${i + 1}`\n            );\n          }\n        } else if (\n          signature.signature &&\n          signature.signature.startsWith('data:image/')\n        ) {\n          imgData = signature.signature;\n        } else {\n          imgData = this.createImagePlaceholder(\n            maxWidth,\n            maxHeight,\n            `Podpis ${i + 1}`\n          );\n        }\n\n        const { width, height } = await this.calculateImageDimensions(\n          imgData,\n          maxWidth,\n          maxHeight\n        );\n\n        if (this.currentY + height + 15 > this.pageHeight - 30) {\n          this.doc.addPage();\n          this.currentY = 30;\n          currentX = this.margin;\n          rowHeight = 0;\n          signaturesInRow = 0;\n        }\n\n        this.doc.addImage(\n          imgData,\n          'JPEG',\n          currentX,\n          this.currentY,\n          width,\n          height\n        );\n\n        this.doc.setFontSize(8);\n        this.setFontSafely('helvetica', 'bold');\n        this.doc.setTextColor(...this.primaryColor);\n        this.doc.text(`Podpis ${i + 1}`, currentX, this.currentY + height + 3);\n\n        if (signature.url) {\n          const urlText = signature.url;\n          const encodedUrl = urlText.replace(/\\s/g, '%20');\n\n          this.doc.setFontSize(4);\n          this.setFontSafely('helvetica', 'normal');\n          this.doc.setTextColor(...this.accentColor);\n\n          if (this.doc.getTextWidth(encodedUrl) > width) {\n            this.doc.setFontSize(3);\n          }\n\n          this.doc.text(encodedUrl, currentX, this.currentY + height + 6);\n        }\n\n        currentX += width + 15; // Zv√§ƒç≈°en√Ω spacing medzi podpismi\n        rowHeight = Math.max(rowHeight, height + 20); // Zv√§ƒç≈°en√Ω row height pre URL\n        signaturesInRow++;\n\n        if (signaturesInRow >= signaturesPerRow) {\n          this.currentY += rowHeight;\n          currentX = this.margin;\n          rowHeight = 0;\n          signaturesInRow = 0;\n        }\n      } catch (error) {\n        console.error(\n          '‚ùå Error processing signature:',\n          signature.url || signature.signature,\n          error\n        );\n        const placeholder = this.createImagePlaceholder(\n          maxWidth,\n          maxHeight,\n          `Chyba ${i + 1}`\n        );\n        this.doc.addImage(\n          placeholder,\n          'JPEG',\n          currentX,\n          this.currentY,\n          maxWidth,\n          maxHeight\n        );\n        currentX += maxWidth + 10;\n      }\n    }\n\n    if (signaturesInRow > 0) {\n      this.currentY += rowHeight;\n    }\n\n    this.currentY += 10;\n  }\n\n  /**\n   * Footer\n   */\n  private addFooter(protocol: ProtocolData) {\n    this.currentY = this.pageHeight - 25;\n\n    // ƒåiara\n    this.doc.setDrawColor(...this.primaryColor);\n    this.doc.line(\n      this.margin,\n      this.currentY,\n      this.pageWidth - this.margin,\n      this.currentY\n    );\n    this.currentY += 5;\n\n    this.doc.setFontSize(8);\n    this.setFontSafely('helvetica', 'normal');\n    this.doc.setTextColor(...this.secondaryColor);\n    this.doc.text(\n      `Protokol vygenerovan√Ω: ${new Date().toLocaleString('sk-SK')}`,\n      this.margin,\n      this.currentY\n    );\n    this.currentY += 4;\n    this.doc.text(`ID protokolu: ${protocol.id}`, this.margin, this.currentY);\n    this.currentY += 4;\n    this.doc.text(\n      'BlackRent - Profesion√°lne rie≈°enia pre autopo≈æiƒçovne',\n      this.margin,\n      this.currentY\n    );\n  }\n\n  /**\n   * N√°zov sekcie\n   */\n  private addSectionTitle(title: string) {\n    this.doc.setFontSize(12);\n    this.setFontSafely('helvetica', 'bold');\n    this.doc.setTextColor(...this.primaryColor);\n    this.doc.text(title, this.margin, this.currentY);\n    this.currentY += 8;\n\n    // ƒåiara pod n√°zvom\n    this.doc.setDrawColor(...this.primaryColor);\n    this.doc.line(\n      this.margin,\n      this.currentY,\n      this.pageWidth - this.margin,\n      this.currentY\n    );\n    this.currentY += 8;\n  }\n\n  /**\n   * Naƒç√≠tanie obr√°zka z URL s CORS handling\n   */\n  private async loadImageFromUrl(url: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      // Kontrola ƒçi URL existuje\n      if (!url) {\n        reject(new Error('URL is undefined or empty'));\n        return;\n      }\n\n      // Skontroluj ƒçi je to base64 URL\n      const isBase64Url = url.startsWith('data:image/');\n\n      if (isBase64Url) {\n        // Base64 URL - vr√°≈• priamo\n        console.log('‚úÖ Using base64 image data directly');\n        resolve(url);\n        return;\n      }\n\n      // Skontroluj ƒçi je to R2 URL a potrebuje proxy\n      const isR2Url = url.includes('r2.dev') || url.includes('cloudflare.com');\n\n      if (isR2Url) {\n        try {\n          // Extrahuj key z R2 URL\n          const urlParts = url.split('/');\n          // Zober v≈°etky ƒçasti po dom√©ne ako key (preskoƒç https:// a dom√©nu)\n          const key = urlParts.slice(3).join('/');\n\n          // Pou≈æi proxy endpoint\n          const proxyUrl = `${import.meta.env.VITE_API_URL || 'https://blackrent-app-production-4d6f.up.railway.app/api'}/files/proxy/${encodeURIComponent(key)}`;\n\n          console.log('üîÑ Loading R2 image via proxy:', proxyUrl);\n\n          fetch(proxyUrl)\n            .then(response => {\n              if (!response.ok) {\n                throw new Error(\n                  `HTTP ${response.status}: ${response.statusText}`\n                );\n              }\n              return response.blob();\n            })\n            .then(blob => {\n              const reader = new FileReader();\n              reader.onload = () => {\n                const result = reader.result as string;\n                resolve(result);\n              };\n              reader.onerror = () => reject(new Error('Failed to read blob'));\n              reader.readAsDataURL(blob);\n            })\n            .catch(error => {\n              console.error('‚ùå Proxy fetch error:', error);\n              reject(error);\n            });\n        } catch (error) {\n          console.error('‚ùå Error processing R2 URL:', error);\n          reject(error);\n        }\n      } else {\n        // Pre in√© URL pou≈æij priame naƒç√≠tanie\n        try {\n          const img = new Image();\n          img.crossOrigin = 'anonymous';\n\n          img.onload = () => {\n            const canvas = document.createElement('canvas');\n            canvas.width = img.width;\n            canvas.height = img.height;\n\n            const ctx = canvas.getContext('2d');\n            if (ctx) {\n              ctx.drawImage(img, 0, 0);\n              const dataUrl = canvas.toDataURL('image/jpeg', 0.8);\n              resolve(dataUrl);\n            } else {\n              reject(new Error('Failed to get canvas context'));\n            }\n          };\n\n          img.onerror = () => {\n            reject(new Error('Failed to load image'));\n          };\n\n          img.src = url;\n        } catch (error) {\n          console.error('‚ùå Error loading image:', error);\n          reject(error);\n        }\n      }\n    });\n  }\n\n  /**\n   * Vytvorenie placeholder obr√°zka\n   */\n  private createImagePlaceholder(\n    width: number,\n    height: number,\n    text: string\n  ): string {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) {\n      return '';\n    }\n\n    // Nastavenie veƒækosti canvas\n    canvas.width = width * 3.779527559; // Konverzia mm na px\n    canvas.height = height * 3.779527559;\n\n    // Pozadie\n    ctx.fillStyle = '#f3f4f6';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Border\n    ctx.strokeStyle = '#d1d5db';\n    ctx.lineWidth = 2;\n    ctx.strokeRect(1, 1, canvas.width - 2, canvas.height - 2);\n\n    // Text\n    ctx.fillStyle = '#6b7280';\n    ctx.font = '14px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(text, canvas.width / 2, canvas.height / 2);\n\n    return canvas.toDataURL('image/jpeg', 0.8);\n  }\n\n  /**\n   * V√Ωpoƒçet rozmerov obr√°zka\n   */\n  private async calculateImageDimensions(\n    imgData: string,\n    maxWidth: number,\n    maxHeight: number\n  ) {\n    return new Promise<{ width: number; height: number }>(resolve => {\n      const img = new Image();\n      img.onload = () => {\n        const aspectRatio = img.width / img.height;\n\n        let width = maxWidth;\n        let height = width / aspectRatio;\n\n        if (height > maxHeight) {\n          height = maxHeight;\n          width = height * aspectRatio;\n        }\n\n        resolve({ width, height });\n      };\n\n      img.onerror = () => {\n        resolve({ width: maxWidth, height: maxHeight });\n      };\n\n      img.src = imgData;\n    });\n  }\n\n  /**\n   * Pridanie URL na nov√∫ stranu\n   */\n  private addImageUrlsPage(images: unknown[]) {\n    this.doc.addPage();\n    this.currentY = 30;\n\n    this.addSectionTitle('LINKY NA FOTKY');\n\n    this.doc.setFontSize(10);\n    this.setFontSafely('helvetica', 'normal');\n    this.doc.setTextColor(...this.secondaryColor);\n\n    images.forEach((image, index) => {\n      if (image.url) {\n        const urlText = image.url;\n        const encodedUrl = urlText.replace(/\\s/g, '%20');\n\n        // ƒå√≠slo fotky\n        this.doc.setFontSize(10);\n        this.setFontSafely('helvetica', 'bold');\n        this.doc.setTextColor(...this.primaryColor);\n        this.doc.text(`${index + 1}.`, this.margin, this.currentY);\n\n        // URL\n        this.setFontSafely('helvetica', 'normal');\n        this.doc.setTextColor(...this.accentColor);\n        this.doc.setFontSize(8);\n\n        // Kontrola ƒçi sa zmest√≠ na str√°nku\n        if (this.currentY > this.pageHeight - 30) {\n          this.doc.addPage();\n          this.currentY = 30;\n        }\n\n        // Rozdelenie dlh√©ho URL na viac riadkov\n        const maxWidth = this.pageWidth - this.margin * 2 - 20; // 20mm pre ƒç√≠slo\n        const words = encodedUrl.split('/');\n        let currentLine = '';\n        let lineY = this.currentY;\n\n        for (const word of words) {\n          const testLine = currentLine + (currentLine ? '/' : '') + word;\n          if (this.doc.getTextWidth(testLine) > maxWidth) {\n            if (currentLine) {\n              this.doc.text(currentLine, this.margin + 20, lineY);\n              lineY += 4;\n              currentLine = word;\n            } else {\n              this.doc.text(word, this.margin + 20, lineY);\n              lineY += 4;\n            }\n          } else {\n            currentLine = testLine;\n          }\n        }\n\n        if (currentLine) {\n          this.doc.text(currentLine, this.margin + 20, lineY);\n        }\n\n        this.currentY = lineY + 8;\n      }\n    });\n  }\n}\n\nexport const generateProtocolPDF = async (\n  protocol: ProtocolData,\n  options: PDFOptions = {}\n): Promise<Blob> => {\n  const generator = new PDFGenerator();\n  return await generator.generateProtocolPDF(protocol, options);\n};\n\nexport default PDFGenerator;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/performance.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":2,"message":"React Hook useMemo has an unnecessary dependency: 'dependencies'. Either exclude it or remove the dependency array.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [data, filterFn]","fix":{"range":[2501,2531],"text":"[data, filterFn]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useMemo } from 'react';\n\n/**\n * Hook pre debouncing hodnoty - optimalizuje vyhƒæad√°vanie\n * @param value - hodnota na debouncing\n * @param delay - oneskorenie v ms (default: 300ms)\n * @returns debounced hodnota\n */\nexport function useDebounce<T>(value: T, delay: number = 300): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n/**\n * Hook pre pagination - optimalizuje zobrazenie veƒæk√Ωch tabuliek\n * @param data - pole d√°t\n * @param itemsPerPage - poƒçet polo≈æiek na str√°nku\n * @param initialPage - poƒçiatoƒçn√° str√°nka\n */\nexport function usePagination<T>(\n  data: T[],\n  itemsPerPage: number = 20,\n  initialPage: number = 1\n) {\n  const [currentPage, setCurrentPage] = useState(initialPage);\n\n  const totalItems = data.length;\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const currentData = data.slice(startIndex, endIndex);\n\n  const goToPage = (page: number) => {\n    if (page >= 1 && page <= totalPages) {\n      setCurrentPage(page);\n    }\n  };\n\n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  return {\n    currentData,\n    currentPage,\n    totalPages,\n    totalItems,\n    hasNextPage: currentPage < totalPages,\n    hasPrevPage: currentPage > 1,\n    goToPage,\n    nextPage,\n    prevPage,\n    pageInfo: {\n      startIndex: startIndex + 1,\n      endIndex: Math.min(endIndex, totalItems),\n      showing: `${startIndex + 1}-${Math.min(endIndex, totalItems)} z ${totalItems}`,\n    },\n  };\n}\n\n/**\n * Hook pre memoized filtering - optimalizuje filtrovanie\n * @param data - pole d√°t\n * @param filterFn - filter funkcia\n * @param dependencies - z√°vislosti pre re-run\n */\nexport function useMemoizedFilter<T>(\n  data: T[],\n  filterFn: (item: T) => boolean,\n  dependencies: unknown[] = []\n): T[] {\n  return useMemo(() => {\n    // Bezpeƒçnostn√° kontrola - ak data nie je pole, vr√°≈• pr√°zdne pole\n    if (!Array.isArray(data)) {\n      console.warn('useMemoizedFilter: data is not an array:', data);\n      return [];\n    }\n    return data.filter(filterFn);\n  }, [data, filterFn, dependencies]);\n}\n\n/**\n * Hook pre lazy loading - optimalizuje naƒç√≠tanie obr√°zkov\n * @param src - URL obr√°zka\n * @param placeholder - placeholder obr√°zok\n */\nexport function useLazyImage(src: string, placeholder: string = '') {\n  const [imageSrc, setImageSrc] = useState(placeholder);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!src) {\n      setImageSrc(placeholder);\n      setLoading(false);\n      return;\n    }\n\n    setLoading(true);\n    const img = new Image();\n    img.src = src;\n\n    img.onload = () => {\n      setImageSrc(src);\n      setLoading(false);\n    };\n\n    img.onerror = () => {\n      setImageSrc(placeholder);\n      setLoading(false);\n    };\n  }, [src, placeholder]);\n\n  return { imageSrc, loading };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/priceCalculator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/protocolCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/protocolFormCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/rentalCloneUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/rentalDaysCalculator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/rentalFilters.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[861,864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[861,864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[879,882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[879,882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üîç RENTAL FILTERS UTILITIES\n *\n * Optimalizovan√© filter funkcie s memoization\n */\n\nimport type { Rental } from '../types';\n\nimport { searchInTexts } from './textNormalization';\n\nexport interface FilterCriteria {\n  searchQuery: string;\n  status: string;\n  paymentMethod: string;\n  company: string;\n  dateFrom: string;\n  dateTo: string;\n  priceMin: string;\n  priceMax: string;\n  protocolStatus: string;\n  vehicleBrand: string;\n  insuranceCompany: string;\n  insuranceType: string;\n  customerType: string;\n  rentalLocation: string;\n  vehicleCategory: string;\n}\n\nexport interface VehicleLookup {\n  [vehicleId: string]: {\n    brand?: string;\n    model?: string;\n    licensePlate?: string;\n    vin?: string; // üÜî VIN ƒç√≠slo pre search\n    company?: string;\n    category?: string;\n  };\n}\n\nexport interface ProtocolLookup {\n  [rentalId: string]: {\n    handover?: any;\n    return?: any;\n  };\n}\n\n/**\n * üöÄ Optimalizovan√° search filter funkcia\n */\nexport const applySearchFilter = (\n  rentals: Rental[],\n  query: string,\n  vehicleLookup: VehicleLookup\n): Rental[] => {\n  if (!query.trim()) return rentals;\n\n  return rentals.filter(rental => {\n    const vehicle = vehicleLookup[rental.vehicleId || ''];\n\n    // üî§ DIACRITICS NORMALIZATION: Vyhƒæad√°vanie bez ohƒæadu na diakritiku\n    return searchInTexts(\n      [\n        rental.customerName,\n        rental.customerPhone,\n        rental.customerEmail,\n        rental.vehicleVin,\n        rental.notes,\n        vehicle?.brand,\n        vehicle?.model,\n        vehicle?.licensePlate,\n        vehicle?.vin,\n        vehicle?.company,\n      ],\n      query\n    );\n  });\n};\n\n/**\n * ‚ö° Optimalizovan√© status filter\n */\nexport const applyStatusFilter = (\n  rentals: Rental[],\n  status: string\n): Rental[] => {\n  if (status === 'all') return rentals;\n  return rentals.filter(rental => rental.status === status);\n};\n\n/**\n * üí≥ Payment method filter\n */\nexport const applyPaymentMethodFilter = (\n  rentals: Rental[],\n  paymentMethod: string\n): Rental[] => {\n  if (paymentMethod === 'all') return rentals;\n  return rentals.filter(rental => rental.paymentMethod === paymentMethod);\n};\n\n/**\n * üè¢ Company filter\n */\nexport const applyCompanyFilter = (\n  rentals: Rental[],\n  company: string,\n  vehicleLookup: VehicleLookup\n): Rental[] => {\n  if (company === 'all') return rentals;\n  return rentals.filter(rental => {\n    const vehicle = vehicleLookup[rental.vehicleId || ''];\n    return vehicle?.company === company;\n  });\n};\n\n/**\n * üìÖ Date range filter\n */\nexport const applyDateRangeFilter = (\n  rentals: Rental[],\n  dateFrom: string,\n  dateTo: string\n): Rental[] => {\n  let filtered = rentals;\n\n  if (dateFrom) {\n    const fromDate = new Date(dateFrom);\n    filtered = filtered.filter(\n      rental => new Date(rental.startDate) >= fromDate\n    );\n  }\n\n  if (dateTo) {\n    const toDate = new Date(dateTo);\n    filtered = filtered.filter(rental => new Date(rental.endDate) <= toDate);\n  }\n\n  return filtered;\n};\n\n/**\n * üí∞ Price range filter\n */\nexport const applyPriceRangeFilter = (\n  rentals: Rental[],\n  priceMin: string,\n  priceMax: string\n): Rental[] => {\n  let filtered = rentals;\n\n  if (priceMin) {\n    const minPrice = parseFloat(priceMin);\n    if (!isNaN(minPrice)) {\n      filtered = filtered.filter(rental => rental.totalPrice >= minPrice);\n    }\n  }\n\n  if (priceMax) {\n    const maxPrice = parseFloat(priceMax);\n    if (!isNaN(maxPrice)) {\n      filtered = filtered.filter(rental => rental.totalPrice <= maxPrice);\n    }\n  }\n\n  return filtered;\n};\n\n/**\n * üìÑ Protocol status filter\n */\nexport const applyProtocolStatusFilter = (\n  rentals: Rental[],\n  protocolStatus: string,\n  protocolLookup: ProtocolLookup\n): Rental[] => {\n  if (protocolStatus === 'all') return rentals;\n\n  return rentals.filter(rental => {\n    const rentalProtocols = protocolLookup[rental.id];\n    if (!rentalProtocols) return protocolStatus === 'none';\n\n    const hasHandover = !!rentalProtocols.handover;\n    const hasReturn = !!rentalProtocols.return;\n\n    switch (protocolStatus) {\n      case 'none':\n        return !hasHandover && !hasReturn;\n      case 'handover':\n        return hasHandover && !hasReturn;\n      case 'return':\n        return !hasHandover && hasReturn;\n      case 'both':\n        return hasHandover && hasReturn;\n      case 'partial':\n        return hasHandover || hasReturn;\n      default:\n        return true;\n    }\n  });\n};\n\n/**\n * üöó Vehicle brand filter\n */\nexport const applyVehicleBrandFilter = (\n  rentals: Rental[],\n  vehicleBrand: string,\n  vehicleLookup: VehicleLookup\n): Rental[] => {\n  if (vehicleBrand === 'all') return rentals;\n  return rentals.filter(rental => {\n    const vehicle = vehicleLookup[rental.vehicleId || ''];\n    return vehicle?.brand === vehicleBrand;\n  });\n};\n\n/**\n * üîó Composite filter function - aplikuje v≈°etky filtre naraz\n */\nexport const applyAllFilters = (\n  rentals: Rental[],\n  criteria: FilterCriteria,\n  vehicleLookup: VehicleLookup,\n  protocolLookup: ProtocolLookup\n): Rental[] => {\n  let filtered = rentals;\n\n  // Aplikuj filtre v porad√≠ podƒæa oƒçak√°vanej selektivity (najselekt√≠vnej≈°ie prv√©)\n  filtered = applySearchFilter(filtered, criteria.searchQuery, vehicleLookup);\n  filtered = applyStatusFilter(filtered, criteria.status);\n  filtered = applyCompanyFilter(filtered, criteria.company, vehicleLookup);\n  filtered = applyDateRangeFilter(filtered, criteria.dateFrom, criteria.dateTo);\n  filtered = applyPaymentMethodFilter(filtered, criteria.paymentMethod);\n  filtered = applyPriceRangeFilter(\n    filtered,\n    criteria.priceMin,\n    criteria.priceMax\n  );\n  filtered = applyProtocolStatusFilter(\n    filtered,\n    criteria.protocolStatus,\n    protocolLookup\n  );\n  filtered = applyVehicleBrandFilter(\n    filtered,\n    criteria.vehicleBrand,\n    vehicleLookup\n  );\n\n  return filtered;\n};\n\n/**\n * üìä Get unique values for filter options\n */\nexport const getUniqueFilterValues = (\n  rentals: Rental[],\n  vehicleLookup: VehicleLookup\n) => {\n  const statuses = new Set<string>();\n  const companies = new Set<string>();\n  const paymentMethods = new Set<string>();\n  const vehicleBrands = new Set<string>();\n\n  rentals.forEach(rental => {\n    if (rental.status) statuses.add(rental.status);\n    if (rental.paymentMethod) paymentMethods.add(rental.paymentMethod);\n\n    const vehicle = vehicleLookup[rental.vehicleId || ''];\n    if (vehicle?.company) companies.add(vehicle.company);\n    if (vehicle?.brand) vehicleBrands.add(vehicle.brand);\n  });\n\n  return {\n    statuses: Array.from(statuses).sort(),\n    companies: Array.from(companies).sort(),\n    paymentMethods: Array.from(paymentMethods).sort(),\n    vehicleBrands: Array.from(vehicleBrands).sort(),\n  };\n};\n\n/**\n * üîç Create vehicle lookup map for fast access\n */\nexport const createVehicleLookup = (vehicles: unknown[]): VehicleLookup => {\n  const lookup: VehicleLookup = {};\n\n  vehicles.forEach(vehicle => {\n    if (vehicle.id) {\n      lookup[vehicle.id] = {\n        brand: vehicle.brand,\n        model: vehicle.model,\n        licensePlate: vehicle.licensePlate,\n        company: vehicle.company,\n        category: vehicle.category,\n      };\n    }\n  });\n\n  return lookup;\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/rentalHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/smartLogger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/textNormalization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/typeHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/unifiedCacheSystem.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[799,802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[799,802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[820,823],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[820,823],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[839,842],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[839,842],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1009,1012],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1009,1012],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2882,2885],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2882,2885],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * üóÑÔ∏è UNIFIED CACHE SYSTEM\n *\n * Postupne nahrad√≠ v≈°etky cache syst√©my jedn√Ωm inteligentn√Ωm syst√©mom.\n * F√ÅZA 1: Wrapper okolo existuj√∫cich syst√©mov (BEZPEƒåN√â)\n * F√ÅZA 2: Postupn√° migr√°cia (KONTROLOVAN√â)\n * F√ÅZA 3: Odstr√°nenie star√Ωch syst√©mov (FIN√ÅLNE)\n */\n\nimport { logger } from './smartLogger';\n\n// üîÑ PHASE 4: apiCache.ts removed - implementing direct cache logic\n// import { apiCache, cacheKeys, cacheHelpers } from './apiCache';\n\nexport interface UnifiedCacheOptions {\n  ttl?: number;\n  tags?: string[];\n  priority?: 'low' | 'normal' | 'high';\n  backgroundRefresh?: boolean;\n  background?: boolean; // Compatibility with old API\n}\n\nexport interface CacheStats {\n  hits: number;\n  misses: number;\n  hitRate: number;\n  memoryUsage: string;\n  entryCount: number;\n  systems: {\n    apiCache: any;\n    middleware: any;\n    database: any;\n  };\n}\n\n/**\n * üéØ UNIFIED CACHE SYSTEM\n * Kompletn√Ω cache syst√©m nahr√°dzaj√∫ci v≈°etky predch√°dzaj√∫ce\n */\nclass UnifiedCacheSystem {\n  private cache = new Map<string, any>();\n  private stats = { hits: 0, misses: 0 };\n  private defaultTTL = 10 * 60 * 1000; // 10 minutes\n\n  /**\n   * üîÑ PHASE 4: Direct cache implementation\n   */\n  async getOrFetch<T>(\n    key: string,\n    fetchFn: () => Promise<T>,\n    options: UnifiedCacheOptions = {}\n  ): Promise<T> {\n    logger.debug(`üóÑÔ∏è UNIFIED: Getting ${key}`);\n\n    const ttl = options.ttl || this.defaultTTL;\n    const cached = this.cache.get(key);\n\n    // Check if cached and not expired\n    if (cached && Date.now() - cached.timestamp < ttl) {\n      this.stats.hits++;\n      logger.debug(`üóÑÔ∏è UNIFIED: Cache HIT for ${key}`);\n      return cached.data;\n    }\n\n    // Fetch fresh data\n    this.stats.misses++;\n    logger.debug(`üóÑÔ∏è UNIFIED: Cache MISS for ${key}, fetching...`);\n\n    const data = await fetchFn();\n\n    // Store in cache\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      ttl,\n      tags: options.tags || [],\n    });\n\n    return data;\n  }\n\n  /**\n   * üîÑ PHASE 4: Direct cache invalidation\n   */\n  invalidateEntity(entity: string): void {\n    logger.debug(`üóÑÔ∏è UNIFIED: Invalidating ${entity}`);\n\n    if (entity === 'all') {\n      // Clear all caches\n      this.cache.clear();\n      logger.debug('üóÑÔ∏è UNIFIED: All cache cleared');\n    } else {\n      // Clear cache entries with matching tags\n      const keysToDelete: string[] = [];\n\n      this.cache.forEach((value, key) => {\n        if (value.tags && value.tags.includes(entity)) {\n          keysToDelete.push(key);\n        }\n        // Also clear by key pattern\n        if (key.includes(entity)) {\n          keysToDelete.push(key);\n        }\n      });\n\n      keysToDelete.forEach(key => {\n        this.cache.delete(key);\n        logger.debug(`üóÑÔ∏è UNIFIED: Cleared cache key ${key}`);\n      });\n    }\n  }\n\n  /**\n   * üîÑ PHASE 1: Wrapper okolo cacheKeys (BEZPEƒåN√â)\n   */\n  generateKey(type: string, params?: any): string {\n    // üîÑ PHASE 4: Direct key generation\n    const baseKey = type;\n    if (!params) return baseKey;\n\n    // Generate consistent key from parameters\n    const paramString = Object.keys(params)\n      .sort()\n      .map(key => `${key}:${params[key]}`)\n      .join('|');\n\n    return `${baseKey}_${paramString}`;\n  }\n\n  /**\n   * üìä Unified stats (kombinuje v≈°etky syst√©my)\n   */\n  getStats(): CacheStats {\n    // F√ÅZA 1: Zbiera stats zo v≈°etk√Ωch syst√©mov\n    // üîÑ PHASE 4: Direct stats from unified cache\n    const apiStats = {};\n\n    return {\n      hits: this.stats.hits,\n      misses: this.stats.misses,\n      hitRate:\n        (this.stats.hits / (this.stats.hits + this.stats.misses)) * 100 || 0,\n      memoryUsage: '~calculating~',\n      entryCount: this.cache.size,\n      systems: {\n        apiCache: apiStats,\n        middleware: { status: 'active' },\n        database: { status: 'active' },\n      },\n    };\n  }\n\n  /**\n   * üßπ Clear all caches\n   */\n  clear(): void {\n    logger.debug('üóÑÔ∏è UNIFIED: Clearing all caches');\n\n    // üîÑ PHASE 4: Direct cache clearing\n    this.cache.clear();\n    this.stats = { hits: 0, misses: 0 };\n    logger.debug('üóÑÔ∏è UNIFIED: All caches cleared');\n  }\n}\n\n// üéØ SINGLETON INSTANCE\nexport const unifiedCache = new UnifiedCacheSystem();\n\n// üîÑ COMPATIBILITY EXPORTS (pre postupn√∫ migr√°ciu)\nexport const compatibilityCache = {\n  // Zachov√°va existuj√∫ce API\n  getOrFetch: unifiedCache.getOrFetch.bind(unifiedCache),\n  invalidateEntity: unifiedCache.invalidateEntity.bind(unifiedCache),\n  generateKey: unifiedCache.generateKey.bind(unifiedCache),\n  clear: unifiedCache.clear.bind(unifiedCache),\n};\n\nexport default unifiedCache;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/unifiedFilterSystem.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/v2TestData.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4226,4229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4226,4229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5076,5079],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5076,5079],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * V2 Protocol Test Data Generator\n * Generuje testovac√≠ rental objekt s re√°lnymi d√°tami pre V2 protokol\n */\n\nimport type { Customer, Rental, Vehicle } from '../types';\n\n// Re√°lne d√°ta z BMW X5 pren√°jmu (ID: 1606)\nexport const testRentalData: Rental = {\n  id: '1606',\n  customerId: '395',\n  vehicleId: '209',\n  startDate: new Date('2025-08-31T23:33:04.583Z'),\n  endDate: new Date('2025-08-31T23:33:04.583Z'),\n  totalPrice: 100.0,\n  deposit: 110.0,\n  currency: 'EUR',\n  allowedKilometers: 125,\n  extraKilometerRate: 0.3,\n  customerName: 'Mikail Pirgozi',\n  orderNumber: '123521',\n  handoverPlace: 'Trenƒç√≠n',\n  pickupLocation: 'Trenƒç√≠n',\n  returnLocation: 'Trenƒç√≠n',\n  paymentMethod: 'cash',\n  paid: false,\n  status: 'pending',\n  notes: '',\n  createdAt: new Date('2025-08-31T23:33:29.039Z'),\n  commission: 20.0,\n  discount: null,\n  customCommission: null,\n  extraKmCharge: null,\n  payments: [],\n  history: [],\n  confirmed: false,\n  dailyKilometers: null,\n  returnConditions: null,\n  fuelLevel: null,\n  odometer: null,\n  returnFuelLevel: null,\n  returnOdometer: null,\n  actualKilometers: null,\n  fuelRefillCost: null,\n  handoverProtocolId: null,\n  returnProtocolId: null,\n  company: 'Miki',\n  isFlexible: false,\n  flexibleEndDate: null,\n  customerEmail: 'pirgozi1@gmail.com',\n  customerPhone: '421907751872',\n  vehicleName: 'Bmw X5 - zalo≈æena',\n  vehicleCode: 'C95246',\n  approvalStatus: 'approved',\n  autoProcessedAt: null,\n  emailContent: null,\n  rentalType: 'standard',\n  canBeOverridden: false,\n  overridePriority: 5,\n  notificationThreshold: 3,\n  autoExtend: false,\n  overrideHistory: [],\n};\n\nexport const testVehicleData: Vehicle = {\n  id: '209',\n  companyId: '3',\n  brand: 'Bmw',\n  model: 'X5 - zalo≈æena',\n  year: 2024,\n  licensePlate: 'C95246',\n  vin: '', // Pr√°zdne v datab√°ze\n  color: '',\n  fuelType: '',\n  transmission: '',\n  category: 'suv',\n  dailyRate: null,\n  status: 'temporarily_removed',\n  createdAt: new Date('2025-08-23T17:25:38.597Z'),\n  company: 'Miki',\n  pricing: [\n    { id: '1', maxDays: 1, minDays: 0, pricePerDay: 100 },\n    { id: '2', maxDays: 3, minDays: 2, pricePerDay: 90 },\n    { id: '3', maxDays: 7, minDays: 4, pricePerDay: 80 },\n    { id: '4', maxDays: 14, minDays: 8, pricePerDay: 70 },\n    { id: '5', maxDays: 22, minDays: 15, pricePerDay: 60 },\n    { id: '6', maxDays: 30, minDays: 23, pricePerDay: 50 },\n    { id: '7', maxDays: 365, minDays: 31, pricePerDay: 40 },\n  ],\n  commission: { type: 'percentage', value: 20 },\n};\n\nexport const testCustomerData: Customer = {\n  id: '395',\n  firstName: 'Mikail',\n  lastName: 'Pirgozi',\n  email: 'pirgozi1@gmail.com',\n  phone: '421907751872',\n  createdAt: new Date('2025-08-31T23:33:29.039Z'),\n};\n\n/**\n * Vytvor√≠ kompletn√Ω rental objekt s vehicle a customer d√°tami\n * Simuluje to ƒço dost√°va V1 protokol z API\n */\nexport function createTestRentalWithRelations(): Rental & {\n  vehicle: Vehicle;\n  customer: Customer;\n} {\n  return {\n    ...testRentalData,\n    vehicle: testVehicleData,\n    customer: testCustomerData,\n    // Dodatoƒçn√© polia pre V1 kompatibilitu\n    vehicleVin: testVehicleData.vin,\n    customerAddress: '', // Nie je v datab√°ze\n  };\n}\n\n/**\n * Generuje HandoverProtocolDataV2 z rental d√°t\n * Rovnako ako V1 automaticky mapuje d√°ta\n */\nexport function generateV2ProtocolData(\n  rental: Rental & { vehicle: Vehicle; customer: Customer }\n) {\n  return {\n    protocolId: `test-protocol-${Date.now()}`,\n    vehicleId: rental.vehicleId,\n    customerId: rental.customerId,\n    rentalId: rental.id,\n\n    // Vehicle info - mapovan√© z rental.vehicle\n    vehicle: {\n      licensePlate: rental.vehicle.licensePlate,\n      brand: rental.vehicle.brand,\n      model: rental.vehicle.model,\n      year: rental.vehicle.year,\n      vin: rental.vehicle.vin || rental.vehicleVin,\n      status: rental.vehicle.status,\n      company: rental.vehicle.company,\n      companyName: rental.company, // Pre caching\n    },\n\n    // Customer info - mapovan√© z rental.customer\n    customer: {\n      firstName: rental.customer.firstName,\n      lastName: rental.customer.lastName,\n      name: `${rental.customer.firstName} ${rental.customer.lastName}`, // V1 kompatibilita\n      email: rental.customer.email,\n      phone: rental.customer.phone,\n      address: (rental as any).customerAddress || '', // Ak existuje\n    },\n\n    // Rental details - v≈°etky V1 kompatibiln√© polia\n    rental: {\n      orderNumber: rental.orderNumber,\n      startDate: rental.startDate,\n      endDate: rental.endDate,\n      startKm: rental.odometer || 0,\n      location: rental.pickupLocation || rental.handoverPlace || '',\n      pricePerDay: 100, // Z pricing\n      totalPrice: rental.totalPrice,\n      deposit: rental.deposit,\n      allowedKilometers: rental.allowedKilometers,\n      extraKilometerRate: rental.extraKilometerRate,\n      pickupLocation: rental.pickupLocation,\n      returnLocation: rental.returnLocation,\n    },\n\n    // Protocol specific fields (V2 interface)\n    fuelLevel: rental.fuelLevel || 100,\n    odometer: rental.odometer || undefined,\n    condition: 'good' as const,\n    depositPaymentMethod: (rental.paymentMethod as any) || 'cash',\n    damages: [],\n    notes: rental.notes || '',\n\n    // Signatures - pr√°zdne\n    signatures: [],\n\n    // V1 kompatibiln√© foto kateg√≥rie - pr√°zdne\n    vehicleImages: [],\n    documentImages: [],\n    damageImages: [],\n    odometerImages: [],\n    fuelImages: [],\n\n    // V2 photos - pr√°zdne\n    photos: [],\n  };\n}\n\n/**\n * Console helper pre debugging\n */\nexport function logTestData() {\n  const rental = createTestRentalWithRelations();\n  const v2Data = generateV2ProtocolData(rental);\n\n  console.group('üß™ V2 Protocol Test Data');\n  console.log('üìã Rental:', rental);\n  console.log('üöó Vehicle:', rental.vehicle);\n  console.log('üë§ Customer:', rental.customer);\n  console.log('üìù V2 Protocol Data:', v2Data);\n  console.groupEnd();\n\n  return { rental, v2Data };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/vehicles/vehicleHelpers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/videoCompression.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/viteOptimizations.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ComponentType' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[306,309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[306,309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[323,326],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[323,326],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[434,437],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[434,437],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[487,490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[487,490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[940,943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[940,943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[955,958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[955,958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1334,1337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1334,1337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3076,3079],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3076,3079],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// üöÄ Vite Performance Optimizations\n// Advanced preloading, code splitting, and performance utilities\n\nimport { ComponentType } from 'react';\n\n// Vite-specific module preloading\ninterface ViteModulePreloader {\n  preloadModule: (id: string) => Promise<void>;\n  preloadComponent: (importFunc: () => Promise<any>) => Promise<any>;\n}\n\nclass ViteOptimizer implements ViteModulePreloader {\n  private preloadCache = new Map<string, Promise<any>>();\n  private preloadQueue: Array<() => Promise<any>> = [];\n  private isProcessingQueue = false;\n\n  // Preload Vite module by ID\n  async preloadModule(id: string): Promise<void> {\n    if (this.preloadCache.has(id)) {\n      return this.preloadCache.get(id);\n    }\n\n    const preloadPromise = import(/* @vite-ignore */ id);\n    this.preloadCache.set(id, preloadPromise);\n    return preloadPromise;\n  }\n\n  // Preload component with intelligent batching\n  async preloadComponent(importFunc: () => Promise<any>): Promise<any> {\n    const funcString = importFunc.toString();\n\n    if (this.preloadCache.has(funcString)) {\n      return this.preloadCache.get(funcString);\n    }\n\n    const preloadPromise = importFunc();\n    this.preloadCache.set(funcString, preloadPromise);\n    return preloadPromise;\n  }\n\n  // Batch preload multiple components during idle time\n  queuePreload(importFunc: () => Promise<any>): void {\n    this.preloadQueue.push(importFunc);\n    this.processQueueWhenIdle();\n  }\n\n  private processQueueWhenIdle(): void {\n    if (this.isProcessingQueue || this.preloadQueue.length === 0) return;\n\n    this.isProcessingQueue = true;\n\n    // Use requestIdleCallback for non-blocking preloading\n    const processNext = (deadline?: IdleDeadline) => {\n      while (\n        this.preloadQueue.length > 0 &&\n        (!deadline || deadline.timeRemaining() > 0)\n      ) {\n        const importFunc = this.preloadQueue.shift();\n        if (importFunc) {\n          this.preloadComponent(importFunc).catch(console.warn);\n        }\n      }\n\n      if (this.preloadQueue.length > 0) {\n        if ('requestIdleCallback' in window) {\n          requestIdleCallback(processNext);\n        } else {\n          setTimeout(() => processNext(), 16); // Fallback for Safari\n        }\n      } else {\n        this.isProcessingQueue = false;\n      }\n    };\n\n    if ('requestIdleCallback' in window) {\n      requestIdleCallback(processNext);\n    } else {\n      setTimeout(() => processNext(), 16);\n    }\n  }\n}\n\n// Global Vite optimizer instance\nexport const viteOptimizer = new ViteOptimizer();\n\n// Critical component preloading for BlackRent\nexport const preloadCriticalComponents = () => {\n  // Preload most used components immediately\n  viteOptimizer.queuePreload(\n    () => import('../components/vehicles/VehicleListNew')\n  );\n  viteOptimizer.queuePreload(() => import('../components/rentals/RentalList'));\n  viteOptimizer.queuePreload(\n    () => import('../components/customers/CustomerListNew')\n  );\n};\n\n// Route-based preloading\nexport const preloadRouteComponents = (currentRoute: string) => {\n  const routePreloadMap: Record<string, Array<() => Promise<any>>> = {\n    '/vehicles': [\n      () => import('../components/vehicles/VehicleListNew'),\n      () => import('../components/common/LazyDetailView'),\n    ],\n    '/rentals': [\n      () => import('../components/rentals/RentalList'),\n      () => import('../components/protocols/HandoverProtocolForm'),\n    ],\n    '/customers': [() => import('../components/customers/CustomerListNew')],\n    '/statistics': [() => import('../components/Statistics')],\n    '/email-monitoring': [\n      () => import('../components/email-management/EmailManagementLayout'),\n    ],\n  };\n\n  const preloads = routePreloadMap[currentRoute];\n  if (preloads) {\n    preloads.forEach(importFunc => viteOptimizer.queuePreload(importFunc));\n  }\n};\n\n// Intersection Observer for predictive preloading\nexport const setupPredictivePreloading = () => {\n  const observer = new IntersectionObserver(\n    entries => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          const element = entry.target as HTMLElement;\n          const preloadRoute = element.dataset.preloadRoute;\n\n          if (preloadRoute) {\n            preloadRouteComponents(preloadRoute);\n            observer.unobserve(element);\n          }\n        }\n      });\n    },\n    { rootMargin: '50px' }\n  );\n\n  // Observe navigation elements\n  document.querySelectorAll('[data-preload-route]').forEach(el => {\n    observer.observe(el);\n  });\n\n  return observer;\n};\n\n// Vite environment-specific optimizations\nexport const initializeViteOptimizations = () => {\n  if (import.meta.env.DEV) {\n    console.log('üöÄ Vite optimizations initialized (development mode)');\n\n    // In development, preload less aggressively\n    setTimeout(preloadCriticalComponents, 2000);\n  } else {\n    console.log('üöÄ Vite optimizations initialized (production mode)');\n\n    // In production, preload more aggressively\n    setTimeout(preloadCriticalComponents, 500);\n    setTimeout(setupPredictivePreloading, 1000);\n  }\n};\n\n// Performance monitoring for Vite chunks\nexport const monitorVitePerformance = () => {\n  if ('performance' in window && 'getEntriesByType' in performance) {\n    const observer = new PerformanceObserver(list => {\n      list.getEntries().forEach(entry => {\n        if (entry.name.includes('chunk-') || entry.name.includes('assets/')) {\n          console.log(\n            `üìä Vite chunk loaded: ${entry.name} (${entry.duration}ms)`\n          );\n        }\n      });\n    });\n\n    observer.observe({ entryTypes: ['resource'] });\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/utils/webVitals.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[432,435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[432,435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1172,1175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1172,1175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1743,1746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1743,1746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4116,4119],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4116,4119],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":175,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5010,5013],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5010,5013],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":232,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6409,6412],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6409,6412],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":293,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8207,8210],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8207,8210],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":304,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":304,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8520,8523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8520,8523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ‚ö° Enhanced Web Vitals Monitoring\n// Comprehensive performance tracking with real-time metrics\n\nimport { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';\n\ninterface VitalsMetric {\n  name: string;\n  value: number;\n  rating: 'good' | 'needs-improvement' | 'poor';\n  navigationType: string;\n}\n\ninterface PerformanceData {\n  metrics: VitalsMetric[];\n  timestamp: number;\n  url: string;\n  userAgent: string;\n  connection?: any;\n}\n\nclass WebVitalsMonitor {\n  private metrics: VitalsMetric[] = [];\n  private onMetricCallback?: (data: PerformanceData) => void;\n\n  constructor(onMetricCallback?: (data: PerformanceData) => void) {\n    this.onMetricCallback = onMetricCallback;\n    this.initializeMonitoring();\n  }\n\n  private initializeMonitoring() {\n    // Core Web Vitals\n    getCLS(this.handleMetric.bind(this));\n    getFID(this.handleMetric.bind(this));\n    getFCP(this.handleMetric.bind(this));\n    getLCP(this.handleMetric.bind(this));\n    getTTFB(this.handleMetric.bind(this));\n\n    // Performance Observer for additional metrics\n    this.observeResourceTiming();\n    this.observeLongTasks();\n    this.observeLayoutShifts();\n  }\n\n  private handleMetric(metric: any) {\n    const vitalsMetric: VitalsMetric = {\n      name: metric.name,\n      value: metric.value,\n      rating: metric.rating || this.calculateRating(metric.name, metric.value),\n      navigationType: metric.navigationType || 'navigate',\n    };\n\n    this.metrics.push(vitalsMetric);\n\n    // Send metric to callback\n    if (this.onMetricCallback) {\n      const performanceData: PerformanceData = {\n        metrics: [vitalsMetric],\n        timestamp: Date.now(),\n        url: window.location.href,\n        userAgent: navigator.userAgent,\n        connection: (navigator as any).connection,\n      };\n\n      this.onMetricCallback(performanceData);\n    }\n\n    // Log to console in development\n    if (process.env.NODE_ENV === 'development') {\n      console.group(`üìä Web Vital: ${metric.name}`);\n      console.log(`Value: ${metric.value.toFixed(2)}ms`);\n      console.log(`Rating: ${vitalsMetric.rating}`);\n      console.log(`Navigation: ${vitalsMetric.navigationType}`);\n      console.groupEnd();\n    }\n  }\n\n  private calculateRating(\n    name: string,\n    value: number\n  ): 'good' | 'needs-improvement' | 'poor' {\n    const thresholds: { [key: string]: [number, number] } = {\n      CLS: [0.1, 0.25],\n      FID: [100, 300],\n      FCP: [1800, 3000],\n      LCP: [2500, 4000],\n      TTFB: [800, 1800],\n    };\n\n    const threshold = thresholds[name];\n    if (!threshold) return 'good';\n\n    if (value <= threshold[0]) return 'good';\n    if (value <= threshold[1]) return 'needs-improvement';\n    return 'poor';\n  }\n\n  private observeResourceTiming() {\n    if ('PerformanceObserver' in window) {\n      try {\n        const observer = new PerformanceObserver(list => {\n          const entries = list.getEntries();\n          entries.forEach(entry => {\n            if (entry.entryType === 'resource') {\n              this.trackResourceTiming(entry as PerformanceResourceTiming);\n            }\n          });\n        });\n\n        observer.observe({ entryTypes: ['resource'] });\n      } catch (error) {\n        console.warn('Resource timing observation failed:', error);\n      }\n    }\n  }\n\n  private observeLongTasks() {\n    if ('PerformanceObserver' in window) {\n      try {\n        const observer = new PerformanceObserver(list => {\n          const entries = list.getEntries();\n          entries.forEach(entry => {\n            if (entry.duration > 50) {\n              // Long task threshold\n              this.trackLongTask(entry);\n            }\n          });\n        });\n\n        observer.observe({ entryTypes: ['longtask'] });\n      } catch (error) {\n        console.warn('Long task observation not supported');\n      }\n    }\n  }\n\n  private observeLayoutShifts() {\n    if ('PerformanceObserver' in window) {\n      try {\n        const observer = new PerformanceObserver(list => {\n          const entries = list.getEntries();\n          entries.forEach(entry => {\n            if (\n              entry.entryType === 'layout-shift' &&\n              !(entry as any).hadRecentInput\n            ) {\n              this.trackLayoutShift(entry);\n            }\n          });\n        });\n\n        observer.observe({ entryTypes: ['layout-shift'] });\n      } catch (error) {\n        console.warn('Layout shift observation failed:', error);\n      }\n    }\n  }\n\n  private trackResourceTiming(entry: PerformanceResourceTiming) {\n    const slowResources = entry.duration > 1000; // Slow resource threshold\n\n    if (slowResources && process.env.NODE_ENV === 'development') {\n      console.warn(\n        `üêå Slow resource: ${entry.name} (${entry.duration.toFixed(2)}ms)`\n      );\n    }\n  }\n\n  private trackLongTask(entry: PerformanceEntry) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(`‚è∞ Long task detected: ${entry.duration.toFixed(2)}ms`);\n    }\n  }\n\n  private trackLayoutShift(entry: PerformanceEntry) {\n    const layoutShiftEntry = entry as any;\n\n    if (\n      process.env.NODE_ENV === 'development' &&\n      layoutShiftEntry.value > 0.1\n    ) {\n      console.warn(\n        `üìê Significant layout shift: ${layoutShiftEntry.value.toFixed(4)}`\n      );\n    }\n  }\n\n  // Get current metrics summary\n  getMetricsSummary() {\n    const summary: { [key: string]: VitalsMetric } = {};\n\n    this.metrics.forEach(metric => {\n      if (!summary[metric.name] || metric.value < summary[metric.name].value) {\n        summary[metric.name] = metric;\n      }\n    });\n\n    return summary;\n  }\n\n  // Get performance score (0-100)\n  getPerformanceScore(): number {\n    const summary = this.getMetricsSummary();\n    const metrics = Object.values(summary);\n\n    if (metrics.length === 0) return 0;\n\n    const scores: number[] = metrics.map(metric => {\n      switch (metric.rating) {\n        case 'good':\n          return 100;\n        case 'needs-improvement':\n          return 50;\n        case 'poor':\n          return 0;\n        default:\n          return 50;\n      }\n    });\n\n    return Math.round(\n      scores.reduce((a: number, b: number) => a + b, 0) / scores.length\n    );\n  }\n\n  // Send metrics to analytics\n  sendToAnalytics(endpoint?: string) {\n    const performanceData: PerformanceData = {\n      metrics: this.metrics,\n      timestamp: Date.now(),\n      url: window.location.href,\n      userAgent: navigator.userAgent,\n      connection: (navigator as any).connection,\n    };\n\n    if (endpoint) {\n      // Send to custom endpoint\n      fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(performanceData),\n      }).catch(error => {\n        console.warn('Failed to send performance data:', error);\n      });\n    } else if (process.env.NODE_ENV === 'development') {\n      // Log summary in development\n      console.group('üìà Performance Summary');\n      console.log('Score:', this.getPerformanceScore() + '/100');\n      console.log('Metrics:', this.getMetricsSummary());\n      console.log('Connection:', performanceData.connection);\n      console.groupEnd();\n    }\n  }\n}\n\n// Export enhanced reporting function\nexport const reportWebVitals = (\n  onPerfEntry?: (data: PerformanceData) => void\n) => {\n  if (onPerfEntry && typeof onPerfEntry === 'function') {\n    // Initialize enhanced monitoring\n    const monitor = new WebVitalsMonitor(onPerfEntry);\n\n    // Send summary after page load\n    window.addEventListener('load', () => {\n      setTimeout(() => {\n        monitor.sendToAnalytics();\n      }, 2000);\n    });\n\n    return monitor;\n  }\n};\n\n// Helper function for performance debugging\nexport const debugPerformance = () => {\n  if (process.env.NODE_ENV !== 'development') return;\n\n  console.group('üîç Performance Debug Info');\n\n  // Performance timing\n  const perfTiming = performance.timing;\n  const pageLoad = perfTiming.loadEventEnd - perfTiming.navigationStart;\n  const domReady =\n    perfTiming.domContentLoadedEventEnd - perfTiming.navigationStart;\n\n  console.log(`Page Load Time: ${pageLoad}ms`);\n  console.log(`DOM Ready Time: ${domReady}ms`);\n\n  // Memory usage (if available)\n  if ('memory' in performance) {\n    const memory = (performance as any).memory;\n    console.log(\n      `Memory Used: ${(memory.usedJSHeapSize / 1048576).toFixed(2)} MB`\n    );\n    console.log(\n      `Memory Limit: ${(memory.jsHeapSizeLimit / 1048576).toFixed(2)} MB`\n    );\n  }\n\n  // Network connection info\n  if ('connection' in navigator) {\n    const connection = (navigator as any).connection;\n    console.log(\n      `Connection: ${connection.effectiveType} (${connection.downlink} Mbps)`\n    );\n  }\n\n  console.groupEnd();\n};\n\n// Performance monitoring hook for React components\nexport const usePerformanceMonitoring = () => {\n  const measureComponent = (componentName: string) => {\n    const startTime = performance.now();\n\n    return () => {\n      const endTime = performance.now();\n      const duration = endTime - startTime;\n\n      if (duration > 16 && process.env.NODE_ENV === 'development') {\n        console.warn(\n          `‚ö†Ô∏è Slow component render: ${componentName} (${duration.toFixed(2)}ms)`\n        );\n      }\n    };\n  };\n\n  return { measureComponent };\n};\n\nexport default WebVitalsMonitor;\n","usedDeprecatedRules":[]},{"filePath":"/Users/mikailpirgozi/Desktop/Cursor zalohy mac16/Blackrent Beta 2/src/vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
