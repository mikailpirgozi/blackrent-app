# 🚀 BlackRent Field Scaffolder

Automatizačný tool pre pridanie nového poľa end-to-end podľa E2E checklistu.

## Rýchle spustenie

```bash
# Demo s prednastavenými hodnotami
npx tsx scripts/fields/new-field-simple.ts

# Vlastné parametre (field_name,Field Label,table,type,default,min,max,copyFrom,description)
npx tsx scripts/fields/new-field-simple.ts my_field "My Field" rentals string "pending" "" "" "" "Field description"
```

## Interaktívny režim

```bash
# Spustí otázky pre konfiguráciu poľa
npx tsx scripts/fields/new-field.ts
```

## Čo sa vygeneruje

V `draft/` priečinku:

1. **migration.up.sql** - SQL migrácia s NOT NULL + DEFAULT + CHECK
2. **migration.down.sql** - Rollback migrácia  
3. **dto.ts** - Zod validačné schémy (Input/Output/Update)
4. **service.test.ts** - Unit testy (happy path + edge case)
5. **ui-input.tsx** - React komponenta s controlled input
6. **api-snippets.md** - cURL príklady pre MRE testovanie
7. **readme.md** - Krokový implementačný návod

## Podporované typy

- **number**: DECIMAL(12,2) s min/max constraints
- **string**: VARCHAR(255) s NOT NULL
- **boolean**: BOOLEAN s default true/false
- **enum**: Custom enum typ s CHECK constraint

## E2E Workflow

1. **Spusti scaffolder** → vygeneruj šablóny
2. **Database** → `psql -f draft/migration.up.sql`
3. **API** → Skopíruj kód z `draft/readme.md` do routes
4. **Frontend** → Použij `draft/ui-input.tsx` komponent
5. **Testy** → Spusti `draft/service.test.ts` a `draft/api-snippets.md`
6. **Cleanup** → `rm -rf draft/`

## Príklad použitia

```bash
# Pridaj extra_km_price do vehicles
npx tsx scripts/fields/new-field-simple.ts

# Výsledok: 7 súborov v draft/ pripravených na implementáciu
ls draft/
# migration.up.sql  migration.down.sql  dto.ts  service.test.ts  ui-input.tsx  api-snippets.md  readme.md
```

---

**✨ Generated by BlackRent Field Scaffolder**  
**Rešpektuje všetky E2E pravidlá: DB constraints, Zod validácia, controlled inputs, optimistic updates, telemetria, testy**
