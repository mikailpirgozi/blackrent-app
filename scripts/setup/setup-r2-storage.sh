#!/bin/bash

echo "â˜ï¸  CLOUDFLARE R2 STORAGE SETUP - BLACKRENT"
echo "=============================================="
echo ""

echo "ğŸ¯ Tento script vÃ¡m pomÃ´Å¾e nastaviÅ¥ Cloudflare R2 storage pre BlackRent aplikÃ¡ciu."
echo ""

echo "ğŸ“‹ PREDPOKLADY:"
echo "âœ… MÃ¡te Cloudflare ÃºÄet (zadarmo na cloudflare.com)"
echo "âœ… MÃ¡te prÃ­stup k Railway dashboard"
echo ""

echo "ğŸš€ KROK 1: Vytvorenie Cloudflare R2 bucket"
echo "-------------------------------------------"
echo "1. ChoÄte na https://dash.cloudflare.com"
echo "2. Kliknite na 'R2 Object Storage'"
echo "3. Kliknite 'Create bucket'"
echo "4. NÃ¡zov bucket: blackrent-storage"
echo "5. Location: Automatic (global)"
echo "6. Kliknite 'Create bucket'"
echo ""

echo "ğŸ”‘ KROK 2: Vytvorenie API Token"
echo "-------------------------------"
echo "1. V R2 dashboard kliknite 'Manage API Tokens'"
echo "2. Kliknite 'Create Token'"
echo "3. Permissions:"
echo "   âœ… Object:Edit"
echo "   âœ… Object:Read"
echo "4. Bucket: blackrent-storage"
echo "5. Kliknite 'Create Token'"
echo "6. SKOPÃRUJTE si token!"
echo ""

echo "ğŸ“ KROK 3: ZÃ­skanie Connection Details"
echo "-------------------------------------"
echo "1. V R2 bucket kliknite 'Settings' tab"
echo "2. SkopÃ­rujte:"
echo "   - Endpoint URL (https://xxx.r2.cloudflarestorage.com)"
echo "   - Account ID"
echo ""

echo "ğŸŒ KROK 4: Nastavenie Public URL"
echo "-------------------------------"
echo "1. V R2 bucket kliknite 'Settings'"
echo "2. 'Custom domain' â†’ 'Connect domain'"
echo "3. Domain: blackrent-storage.xxx.r2.dev (automaticky)"
echo "4. Enable public access"
echo ""

echo "âš™ï¸  KROK 5: Railway Environment Variables"
echo "----------------------------------------"
echo "1. ChoÄte na Railway dashboard"
echo "2. VÃ¡Å¡ BlackRent project"
echo "3. Kliknite 'Variables' tab"
echo "4. Pridajte tieto premennÃ©:"
echo ""

echo "R2_ENDPOINT=https://xxx.r2.cloudflarestorage.com"
echo "R2_BUCKET_NAME=blackrent-storage"
echo "R2_ACCESS_KEY_ID=your-access-key"
echo "R2_SECRET_ACCESS_KEY=your-secret-key"
echo "R2_ACCOUNT_ID=your-account-id"
echo "R2_PUBLIC_URL=https://blackrent-storage.xxx.r2.dev"
echo ""

echo "ğŸ”„ KROK 6: Redeploy aplikÃ¡cie"
echo "----------------------------"
echo "1. Po pridanÃ­ vÅ¡etkÃ½ch premennÃ½ch"
echo "2. Railway automaticky redeploy aplikÃ¡cie"
echo "3. ÄŒakajte 1-2 minÃºty"
echo ""

echo "ğŸ§ª KROK 7: Testovanie"
echo "-------------------"
echo "1. Vytvorte novÃ½ protokol s fotkami"
echo "2. Skontrolujte Äi sa fotky zobrazujÃº"
echo "3. Stiahnite PDF protokol"
echo "4. Skontrolujte Äi sÃº fotky v PDF"
echo ""

echo "ğŸ“Š VÃHODY PO NASTAVENÃ:"
echo "âœ… VÅ¡etky fotky a dokumenty v cloude"
echo "âœ… RÃ½chle naÄÃ­tanie cez CDN"
echo "âœ… AutomatickÃ© zÃ¡lohovanie"
echo "âœ… 90% lacnejÅ¡ie ako AWS S3"
echo "âœ… Å½iadne egress poplatky"
echo ""

echo "ğŸ¯ PO NASTAVENÃ BUDETE MAÅ¤:"
echo "âœ… ProfesionÃ¡lne cloud storage"
echo "âœ… RÃ½chle naÄÃ­tanie fotiek"
echo "âœ… PDF protokoly s fotkami"
echo "âœ… DigitÃ¡lne podpisy"
echo "âœ… AutomatickÃ© zÃ¡lohovanie"
echo ""

echo "ğŸ’¡ TIP: Ak mÃ¡te problÃ©my, skontrolujte:"
echo "- VÅ¡etky environment variables sÃº nastavenÃ©"
echo "- Railway redeploy je dokonÄenÃ½"
echo "- R2 bucket mÃ¡ public access"
echo ""

echo "ğŸš€ PRIPRAVENÃ‰ NA NASTAVENIE!"
echo "Spustite tento script znova ak potrebujete pomÃ´cÅ¥." 