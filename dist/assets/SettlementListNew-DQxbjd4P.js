import{a as d,g as Re,b as Le,d as me,bp as rt,_,u as Oe,j as e,s as _e,f as Ve,h as ie,i as Ee,aF as st,aX as te,as as at,a3 as Ae,a4 as Ne,B as a,C as b,$ as v,T as s,t as O,aq as it,aM as nt,a8 as B,a9 as oe,ac as Se,o as H,U as Ge,au as lt,ad as je,aG as dt,a6 as ct,A as xt,q as U,M as Ie,N as We,O as Pe,P as re,I as se,G as Be,a0 as ht,aK as Me,H as Te}from"./index-DfP_Aygt.js";import{R as q}from"./Assessment-Cn6wyk24.js";import{C as Ue}from"./Business-CW2_TAXE.js";import{G as u}from"./Grid-Bdewy4dZ.js";import{B as be,P as pt}from"./Payment-BGrU-2jm.js";import{E as ae}from"./Euro-BjdjzfLF.js";import{R as ut}from"./Receipt-CvIXthAy.js";import{P as ye,L as ve}from"./TrendingUp-BJKl_Eg9.js";import{T as pe,a as ue,b as fe,c as E,d as x,e as ge}from"./TableRow-CF4KSyf5.js";import{P as ft}from"./PictureAsPdf-C2FGlWfp.js";import{P as gt,F as mt}from"./papaparse.min-GJxd3uti.js";import{S as jt}from"./Search-wmGxveR5.js";import{F as bt}from"./FilterList-FhaE75z2.js";import{V as $e}from"./Visibility-PIDOLgzl.js";import{A as De}from"./Autocomplete-BMd06Jll.js";function yt(o){return d.Children.toArray(o).filter(n=>d.isValidElement(n))}function vt(o){return Le("MuiToggleButton",o)}const Z=Re("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),Ze=d.createContext({}),He=d.createContext(void 0);function Ct(o,n){return n===void 0||o===void 0?!1:Array.isArray(n)?n.indexOf(o)>=0:o===n}const wt=["value"],kt=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],zt=o=>{const{classes:n,fullWidth:f,selected:m,disabled:M,size:T,color:h}=o,I={root:["root",m&&"selected",M&&"disabled",f&&"fullWidth",`size${ie(T)}`,h]};return Ee(I,vt,n)},St=_e(st,{name:"MuiToggleButton",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:f}=o;return[n.root,n[`size${ie(f.size)}`]]}})(({theme:o,ownerState:n})=>{let f=n.color==="standard"?o.palette.text.primary:o.palette[n.color].main,m;return o.vars&&(f=n.color==="standard"?o.vars.palette.text.primary:o.vars.palette[n.color].main,m=n.color==="standard"?o.vars.palette.text.primaryChannel:o.vars.palette[n.color].mainChannel),_({},o.typography.button,{borderRadius:(o.vars||o).shape.borderRadius,padding:11,border:`1px solid ${(o.vars||o).palette.divider}`,color:(o.vars||o).palette.action.active},n.fullWidth&&{width:"100%"},{[`&.${Z.disabled}`]:{color:(o.vars||o).palette.action.disabled,border:`1px solid ${(o.vars||o).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:o.vars?`rgba(${o.vars.palette.text.primaryChannel} / ${o.vars.palette.action.hoverOpacity})`:te(o.palette.text.primary,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Z.selected}`]:{color:f,backgroundColor:o.vars?`rgba(${m} / ${o.vars.palette.action.selectedOpacity})`:te(f,o.palette.action.selectedOpacity),"&:hover":{backgroundColor:o.vars?`rgba(${m} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.hoverOpacity}))`:te(f,o.palette.action.selectedOpacity+o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:o.vars?`rgba(${m} / ${o.vars.palette.action.selectedOpacity})`:te(f,o.palette.action.selectedOpacity)}}}},n.size==="small"&&{padding:7,fontSize:o.typography.pxToRem(13)},n.size==="large"&&{padding:15,fontSize:o.typography.pxToRem(15)})}),Fe=d.forwardRef(function(n,f){const m=d.useContext(Ze),{value:M}=m,T=me(m,wt),h=d.useContext(He),I=rt(_({},T,{selected:Ct(n.value,M)}),n),y=Oe({props:I,name:"MuiToggleButton"}),{children:$,className:C,color:r="standard",disabled:i=!1,disableFocusRipple:j=!1,fullWidth:k=!1,onChange:D,onClick:z,selected:A,size:N="medium",value:F}=y,V=me(y,kt),G=_({},y,{color:r,disabled:i,disableFocusRipple:j,fullWidth:k,size:N}),L=zt(G),P=W=>{z&&(z(W,F),W.defaultPrevented)||D&&D(W,F)},w=h||"";return e.jsx(St,_({className:Ve(T.className,L.root,C,w),disabled:i,focusRipple:!j,ref:f,onClick:P,onChange:D,value:F,ownerState:G,"aria-pressed":A},V,{children:$}))});function It(o){return Le("MuiToggleButtonGroup",o)}const g=Re("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),Wt=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Pt=o=>{const{classes:n,orientation:f,fullWidth:m,disabled:M}=o,T={root:["root",f==="vertical"&&"vertical",m&&"fullWidth"],grouped:["grouped",`grouped${ie(f)}`,M&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Ee(T,It,n)},Bt=_e("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:f}=o;return[{[`& .${g.grouped}`]:n.grouped},{[`& .${g.grouped}`]:n[`grouped${ie(f.orientation)}`]},{[`& .${g.firstButton}`]:n.firstButton},{[`& .${g.lastButton}`]:n.lastButton},{[`& .${g.middleButton}`]:n.middleButton},n.root,f.orientation==="vertical"&&n.vertical,f.fullWidth&&n.fullWidth]}})(({ownerState:o,theme:n})=>_({display:"inline-flex",borderRadius:(n.vars||n).shape.borderRadius},o.orientation==="vertical"&&{flexDirection:"column"},o.fullWidth&&{width:"100%"},{[`& .${g.grouped}`]:_({},o.orientation==="horizontal"?{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderTop:0,marginTop:0}})},o.orientation==="horizontal"?{[`& .${g.firstButton},& .${g.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${g.firstButton},& .${g.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},o.orientation==="horizontal"?{[`& .${g.lastButton}.${Z.disabled},& .${g.middleButton}.${Z.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${g.lastButton}.${Z.disabled},& .${g.middleButton}.${Z.disabled}`]:{borderTop:"1px solid transparent"}})),Mt=d.forwardRef(function(n,f){const m=Oe({props:n,name:"MuiToggleButtonGroup"}),{children:M,className:T,color:h="standard",disabled:I=!1,exclusive:y=!1,fullWidth:$=!1,onChange:C,orientation:r="horizontal",size:i="medium",value:j}=m,k=me(m,Wt),D=_({},m,{disabled:I,fullWidth:$,orientation:r,size:i}),z=Pt(D),A=d.useCallback((P,w)=>{if(!C)return;const W=j&&j.indexOf(w);let R;j&&W>=0?(R=j.slice(),R.splice(W,1)):R=j?j.concat(w):[w],C(P,R)},[C,j]),N=d.useCallback((P,w)=>{C&&C(P,j===w?null:w)},[C,j]),F=d.useMemo(()=>({className:z.grouped,onChange:y?N:A,value:j,size:i,fullWidth:$,color:h,disabled:I}),[z.grouped,y,N,A,j,i,$,h,I]),V=yt(M),G=V.length,L=P=>{const w=P===0,W=P===G-1;return w&&W?"":w?z.firstButton:W?z.lastButton:z.middleButton};return e.jsx(Bt,_({role:"group",className:Ve(z.root,T),ref:f,ownerState:D},k,{children:e.jsx(Ze.Provider,{value:F,children:V.map((P,w)=>e.jsx(He.Provider,{value:L(w),children:P},w))})}))});function Tt({settlement:o,onClose:n}){const{state:f}=at(),[m,M]=d.useState(!1),T=Ae();Ne(T.breakpoints.down("md"));const h={cash:o.rentals.filter(r=>r.paymentMethod==="cash"),bank_transfer:o.rentals.filter(r=>r.paymentMethod==="bank_transfer"),vrp:o.rentals.filter(r=>r.paymentMethod==="vrp"),direct_to_owner:o.rentals.filter(r=>r.paymentMethod==="direct_to_owner")},I={cash:{count:h.cash.length,totalPrice:h.cash.reduce((r,i)=>r+i.totalPrice,0),totalCommission:h.cash.reduce((r,i)=>r+i.commission,0),netAmount:h.cash.reduce((r,i)=>r+i.totalPrice-i.commission,0)},bank_transfer:{count:h.bank_transfer.length,totalPrice:h.bank_transfer.reduce((r,i)=>r+i.totalPrice,0),totalCommission:h.bank_transfer.reduce((r,i)=>r+i.commission,0),netAmount:h.bank_transfer.reduce((r,i)=>r+i.totalPrice-i.commission,0)},vrp:{count:h.vrp.length,totalPrice:h.vrp.reduce((r,i)=>r+i.totalPrice,0),totalCommission:h.vrp.reduce((r,i)=>r+i.commission,0),netAmount:h.vrp.reduce((r,i)=>r+i.totalPrice-i.commission,0)},direct_to_owner:{count:h.direct_to_owner.length,totalPrice:h.direct_to_owner.reduce((r,i)=>r+i.totalPrice,0),totalCommission:h.direct_to_owner.reduce((r,i)=>r+i.commission,0),netAmount:h.direct_to_owner.reduce((r,i)=>r+i.totalPrice-i.commission,0)}},y=r=>{switch(r){case"cash":return"Hotovosť";case"bank_transfer":return"FA (Faktúra)";case"vrp":return"VRP";case"direct_to_owner":return"Majiteľ";default:return r}},$=r=>{switch(r){case"cash":return"#4caf50";case"bank_transfer":return"#2196f3";case"vrp":return"#ff9800";case"direct_to_owner":return"#9e9e9e";default:return"#666"}},C=async()=>{if(!f.token){alert("Nie ste prihlásený");return}M(!0);try{const r=await fetch(`${dt()}/settlements/${o.id}/pdf`,{method:"GET",headers:{Authorization:`Bearer ${f.token}`}});if(!r.ok){const z=await r.json().catch(()=>({error:"Neznáma chyba"}));throw new Error(z.error||`HTTP ${r.status}`)}const i=await r.blob(),j=window.URL.createObjectURL(i),k=document.createElement("a");k.href=j;const D=`vyuctovanie_${o.company?.replace(/[^a-zA-Z0-9]/g,"_")}_${o.id.slice(-8)}.pdf`;k.download=D,document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(j)}catch(r){console.error("❌ Chyba pri sťahovaní PDF:",r),alert(`Chyba pri sťahovaní PDF: ${r instanceof Error?r.message:"Neznáma chyba"}`)}finally{M(!1)}};return e.jsxs(a,{sx:{p:{xs:2,md:3}},children:[e.jsx(b,{sx:{mb:3,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsxs(v,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",position:"relative"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(q,{sx:{fontSize:32}}),e.jsxs(a,{children:[e.jsx(s,{variant:"h4",sx:{fontWeight:700,mb:.5},children:"Detail vyúčtovania"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ue,{sx:{fontSize:20}}),e.jsx(s,{variant:"h6",children:o.company||"N/A"})]})]})]}),e.jsx(O,{variant:"outlined",startIcon:e.jsx(it,{}),onClick:n,sx:{color:"white",borderColor:"white","&:hover":{borderColor:"white",backgroundColor:"rgba(255,255,255,0.1)"}},children:"Zavrieť"})]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(nt,{sx:{fontSize:18}}),e.jsxs(s,{variant:"body1",children:["Obdobie: ",B(o.period.from instanceof Date?o.period.from:Se(o.period.from),"dd.MM.yyyy",{locale:oe})," - ",B(o.period.to instanceof Date?o.period.to:Se(o.period.to),"dd.MM.yyyy",{locale:oe})]})]})]})}),e.jsxs(u,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",height:"100%"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:1},children:"CELKOVÉ PRÍJMY"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:[o.totalIncome.toFixed(2),"€"]})]}),e.jsx(be,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",height:"100%"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:1},children:"CELKOVÉ NÁKLADY"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:[o.totalExpenses.toFixed(2),"€"]})]}),e.jsx(ae,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{background:"linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",height:"100%"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:1},children:"CELKOVÉ PROVÍZIE"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:[o.totalCommission.toFixed(2),"€"]})]}),e.jsx(ut,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{background:o.profit>=0?"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)":"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",height:"100%"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600,mb:1},children:o.profit>=0?"CELKOVÝ ZISK":"CELKOVÁ STRATA"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:[o.profit.toFixed(2),"€"]})]}),o.profit>=0?e.jsx(ye,{sx:{fontSize:40,opacity:.8}}):e.jsx(ve,{sx:{fontSize:40,opacity:.8}})]})})})})]}),e.jsx(b,{sx:{mb:3,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsxs(v,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(pt,{sx:{color:"#1976d2"}}),e.jsx(s,{variant:"h6",sx:{fontWeight:600,color:"#1976d2"},children:"Prehľad podľa spôsobov platby"})]}),e.jsx(pe,{sx:{backgroundColor:"transparent","& .MuiTableHead-root":{"& .MuiTableCell-root":{backgroundColor:"#f8f9fa",fontWeight:600,color:"#1976d2"}}},children:e.jsxs(ue,{children:[e.jsx(fe,{children:e.jsxs(E,{children:[e.jsx(x,{children:"Spôsob platby"}),e.jsx(x,{align:"center",children:"Počet prenájmov"}),e.jsx(x,{align:"right",children:"Celková cena (€)"}),e.jsx(x,{align:"right",children:"Provízie (€)"}),e.jsx(x,{align:"right",children:"Po odpočítaní provízií (€)"})]})}),e.jsxs(ge,{children:[Object.entries(I).map(([r,i])=>e.jsxs(E,{sx:{"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.04)"}},children:[e.jsx(x,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:$(r)}}),e.jsx(s,{variant:"body2",sx:{fontWeight:600},children:y(r)})]})}),e.jsx(x,{align:"center",children:e.jsx(H,{label:i.count,size:"small",color:"primary",variant:"outlined"})}),e.jsx(x,{align:"right",sx:{fontWeight:600},children:i.totalPrice.toFixed(2)}),e.jsx(x,{align:"right",sx:{fontWeight:600,color:"#ff9800"},children:i.totalCommission.toFixed(2)}),e.jsx(x,{align:"right",sx:{fontWeight:600,color:"#4caf50"},children:i.netAmount.toFixed(2)})]},r)),e.jsxs(E,{sx:{backgroundColor:"#e3f2fd","& .MuiTableCell-root":{fontWeight:700,borderTop:"2px solid #1976d2"}},children:[e.jsx(x,{children:"SPOLU"}),e.jsx(x,{align:"center",children:o.rentals?.length||0}),e.jsx(x,{align:"right",children:o.totalIncome.toFixed(2)}),e.jsx(x,{align:"right",children:o.totalCommission.toFixed(2)}),e.jsx(x,{align:"right",children:(o.totalIncome-o.totalCommission).toFixed(2)})]})]})]})})]})}),e.jsxs(u,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(u,{item:!0,xs:12,lg:8,children:e.jsx(b,{sx:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",height:"fit-content"},children:e.jsxs(v,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(Ge,{sx:{color:"#4caf50"}}),e.jsxs(s,{variant:"h6",sx:{fontWeight:600,color:"#4caf50"},children:["Prenájmy (",o.rentals?.length||0,")"]})]}),e.jsx(pe,{sx:{maxHeight:600,"& .MuiTableHead-root":{"& .MuiTableCell-root":{backgroundColor:"#e8f5e8",fontWeight:600,position:"sticky",top:0,zIndex:1}}},children:e.jsxs(ue,{size:"small",children:[e.jsx(fe,{children:e.jsxs(E,{children:[e.jsx(x,{children:"Vozidlo"}),e.jsx(x,{children:"Zákazník"}),e.jsx(x,{children:"Dátum prenájmu"}),e.jsx(x,{children:"Platba"}),e.jsx(x,{align:"right",children:"Cena (€)"}),e.jsx(x,{align:"right",children:"Provízia (€)"})]})}),e.jsx(ge,{children:o.rentals.map((r,i)=>e.jsxs(E,{sx:{backgroundColor:i%2===0?"transparent":"#fafafa","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.04)"}},children:[e.jsxs(x,{children:[e.jsxs(s,{variant:"body2",sx:{fontWeight:600},children:[r.vehicle?.brand," ",r.vehicle?.model]}),e.jsx(s,{variant:"caption",color:"text.secondary",children:r.vehicle?.licensePlate})]}),e.jsx(x,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(lt,{sx:{fontSize:16,color:"text.secondary"}}),e.jsx(s,{variant:"body2",children:r.customerName})]})}),e.jsxs(x,{children:[e.jsxs(s,{variant:"body2",sx:{fontWeight:600},children:[B(new Date(r.startDate),"dd.MM.yyyy",{locale:oe})," - ",B(new Date(r.endDate),"dd.MM.yyyy",{locale:oe})]}),e.jsxs(s,{variant:"caption",color:"text.secondary",children:[Math.max(1,Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/(1e3*60*60*24)))," dní"]})]}),e.jsx(x,{children:e.jsx(H,{label:y(r.paymentMethod),size:"small",sx:{backgroundColor:$(r.paymentMethod),color:"white",fontWeight:600}})}),e.jsx(x,{align:"right",sx:{fontWeight:600},children:r.totalPrice.toFixed(2)}),e.jsx(x,{align:"right",sx:{fontWeight:600,color:"#ff9800"},children:r.commission.toFixed(2)})]},r.id))})]})})]})})}),e.jsx(u,{item:!0,xs:12,lg:4,children:e.jsx(b,{sx:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",height:"fit-content"},children:e.jsxs(v,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(ae,{sx:{color:"#f44336"}}),e.jsxs(s,{variant:"h6",sx:{fontWeight:600,color:"#f44336"},children:["Náklady ",o.company||"N/A"," (",o.expenses?.length||0,")"]})]}),e.jsx(pe,{sx:{maxHeight:400,"& .MuiTableHead-root":{"& .MuiTableCell-root":{backgroundColor:"#ffebee",fontWeight:600,position:"sticky",top:0,zIndex:1}}},children:e.jsxs(ue,{size:"small",children:[e.jsx(fe,{children:e.jsxs(E,{children:[e.jsx(x,{children:"Popis"}),e.jsx(x,{children:"Kategória"}),e.jsx(x,{align:"right",children:"Suma (€)"})]})}),e.jsx(ge,{children:o.expenses.map((r,i)=>e.jsxs(E,{sx:{backgroundColor:i%2===0?"transparent":"#fafafa","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.04)"}},children:[e.jsx(x,{children:e.jsx(s,{variant:"body2",sx:{fontWeight:600},children:r.description})}),e.jsx(x,{children:e.jsx(H,{label:r.category,size:"small",color:"secondary",variant:"outlined"})}),e.jsx(x,{align:"right",sx:{fontWeight:600,color:"#f44336"},children:r.amount.toFixed(2)})]},r.id))})]})})]})})})]}),e.jsx(b,{sx:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:{xs:"column",sm:"row"},gap:2},children:[e.jsx(O,{variant:"contained",size:"large",startIcon:m?e.jsx(je,{size:20,color:"inherit"}):e.jsx(ft,{}),onClick:C,disabled:m,sx:{background:"linear-gradient(135deg, #d32f2f 0%, #f44336 100%)",px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,borderRadius:2,boxShadow:"0 4px 12px rgba(211, 47, 47, 0.3)","&:hover":{background:"linear-gradient(135deg, #c62828 0%, #e53935 100%)",transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(211, 47, 47, 0.4)"},"&:disabled":{background:"linear-gradient(135deg, #bdbdbd 0%, #9e9e9e 100%)"},transition:"all 0.2s ease"},children:m?"Generujem PDF...":"Stiahnuť PDF"}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic",textAlign:{xs:"center",sm:"right"}},children:["ID vyúčtovania: ",o.id.slice(-8).toUpperCase()]})]})})})]})}const Kt=()=>{const{state:o,getFilteredVehicles:n,createSettlement:f,deleteSettlement:m,loadData:M}=ct(),T=Ae(),h=Ne(T.breakpoints.down("md"),{noSsr:!0}),I=o.settlements||[],y=n(),$=o.companies||[],[C,r]=d.useState(""),[i,j]=d.useState(""),[k,D]=d.useState(""),[z,A]=d.useState(!1),[N,F]=d.useState(!1),[V,G]=d.useState(null),[L,P]=d.useState(!1),[w,W]=d.useState(!1),[R,ne]=d.useState([]),[Y,le]=d.useState([]),[de,Q]=d.useState(""),[ce,J]=d.useState(""),[xe,Ce]=d.useState("month"),[he,X]=d.useState(""),Ke=d.useMemo(()=>$.map(t=>t.name).sort(),[$]),we=d.useMemo(()=>y.map(t=>({id:t.id,label:`${t.brand} ${t.model} - ${t.licensePlate}`,company:t.company})),[y]),qe=d.useMemo(()=>Array.from(new Set(I.map(t=>t.company).filter(t=>!!t))).sort(),[I]),S=d.useMemo(()=>I.filter(t=>{const l=!C||t.company?.toLowerCase().includes(C.toLowerCase())||t.id.toLowerCase().includes(C.toLowerCase()),c=!i||t.company===i,p=!k||t.vehicleId===k;return l&&c&&p}),[I,C,i,k]),Ye=d.useMemo(()=>S.reduce((t,l)=>t+l.totalIncome,0),[S]),Qe=d.useMemo(()=>S.reduce((t,l)=>t+l.totalExpenses,0),[S]),ee=d.useMemo(()=>S.reduce((t,l)=>t+l.profit,0),[S]);d.useMemo(()=>S.reduce((t,l)=>t+l.totalCommission,0),[S]);const Je=()=>{ne([]),le([]),Q(""),J(""),X(""),Ce("month"),W(!0)},ke=t=>{G(t),F(!0)},ze=async t=>{if(window.confirm(`Naozaj chcete zmazať vyúčtovanie za obdobie ${B(new Date(t.period.from),"dd.MM.yyyy")} - ${B(new Date(t.period.to),"dd.MM.yyyy")}?`))try{await m(t.id)}catch(l){console.error("Chyba pri mazaní vyúčtovania:",l),alert("Chyba pri mazaní vyúčtovania. Skúste to znova.")}},Xe=async()=>{let t,l;if(xe==="month"){if(!he){alert("Prosím vyberte mesiac");return}const[c,p]=he.split("-").map(Number);t=new Date(c,p-1,1),l=new Date(c,p,0)}else{if(!de||!ce){alert("Prosím vyberte obdobie");return}t=new Date(de),l=new Date(ce)}if(R.length===0&&Y.length===0){alert("Prosím vyberte aspoň jednu firmu alebo vozidlo");return}P(!0);try{if(R.length>0)for(const c of R)await f({period:{from:t,to:l},company:c,vehicleId:void 0,totalIncome:0,totalExpenses:0,totalCommission:0,profit:0});if(Y.length>0)for(const c of Y){const p=y.find(ot=>ot.id===c),K={period:{from:t,to:l},company:p?.company||"",vehicleId:c,totalIncome:0,totalExpenses:0,totalCommission:0,profit:0};await f(K)}await M(),W(!1),ne([]),le([]),Q(""),J(""),X("")}catch(c){console.error("Error creating settlement:",c),alert("Chyba pri vytváraní vyúčtovania")}finally{P(!1)}},et=()=>{const t=S.map(p=>({ID:p.id,"Obdobie od":B(new Date(p.period.from),"dd.MM.yyyy"),"Obdobie do":B(new Date(p.period.to),"dd.MM.yyyy"),Firma:p.company||"",Vozidlo:p.vehicleId?y.find(K=>K.id===p.vehicleId)?.licensePlate||p.vehicleId:"",Príjmy:p.totalIncome,Náklady:p.totalExpenses,Provízia:p.totalCommission,Zisk:p.profit,"Počet prenájmov":p.rentals?.length||0,"Počet nákladov":p.expenses?.length||0})),l=gt.unparse(t),c=new Blob([l],{type:"text/csv;charset=utf-8;"});mt.saveAs(c,`vyuctovanie-${B(new Date,"yyyy-MM-dd")}.csv`)},tt=()=>{r(""),j(""),D("")};return e.jsxs(a,{sx:{p:{xs:1,md:3}},children:[e.jsx(b,{sx:{mb:3,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(q,{sx:{color:"#1976d2",fontSize:28}}),e.jsx(s,{variant:"h4",sx:{fontWeight:700,color:"#1976d2"},children:"Vyúčtovanie"})]}),e.jsxs(a,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(O,{variant:"contained",startIcon:e.jsx(xt,{}),onClick:Je,sx:{minWidth:120},children:"Vytvoriť"}),e.jsx(O,{variant:"outlined",onClick:et,disabled:S.length===0,children:"Export CSV"})]})]})})}),e.jsx(b,{sx:{mb:3,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsxs(v,{children:[e.jsxs(a,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[e.jsx(U,{placeholder:"Hľadať vyúčtovanie...",value:C,onChange:t=>r(t.target.value),InputProps:{startAdornment:e.jsx(jt,{sx:{color:"text.secondary",mr:1}})},sx:{minWidth:250,flexGrow:1}}),e.jsx(O,{variant:z?"contained":"outlined",startIcon:e.jsx(bt,{}),onClick:()=>A(!z),children:"Filtre"}),(i||k)&&e.jsx(O,{variant:"text",onClick:tt,children:"Vymazať filtre"})]}),z&&e.jsx(a,{sx:{mt:2,pt:2,borderTop:"1px solid #e0e0e0"},children:e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ie,{fullWidth:!0,children:[e.jsx(We,{children:"Firma"}),e.jsxs(Pe,{value:i,onChange:t=>j(t.target.value),label:"Firma",children:[e.jsx(re,{value:"",children:"Všetky firmy"}),qe.map(t=>e.jsx(re,{value:t,children:t},t))]})]})}),e.jsx(u,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ie,{fullWidth:!0,children:[e.jsx(We,{children:"Vozidlo"}),e.jsxs(Pe,{value:k,onChange:t=>D(t.target.value),label:"Vozidlo",children:[e.jsx(re,{value:"",children:"Všetky vozidlá"}),y.map(t=>e.jsxs(re,{value:t.id,children:[t.brand," ",t.model," - ",t.licensePlate]},t.id))]})]})})]})})]})}),e.jsxs(u,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Celkom"}),e.jsx(s,{variant:"h4",sx:{fontWeight:700},children:S.length})]}),e.jsx(q,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Príjmy"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:[Ye.toFixed(2),"€"]})]}),e.jsx(be,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:"Náklady"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:[Qe.toFixed(2),"€"]})]}),e.jsx(ae,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{sx:{background:ee>=0?"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)":"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:e.jsx(v,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(a,{children:[e.jsx(s,{variant:"h6",sx:{fontWeight:600},children:ee>=0?"Zisk":"Strata"}),e.jsxs(s,{variant:"h4",sx:{fontWeight:700},children:[ee.toFixed(2),"€"]})]}),ee>=0?e.jsx(ye,{sx:{fontSize:40,opacity:.8}}):e.jsx(ve,{sx:{fontSize:40,opacity:.8}})]})})})})]}),L&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",my:3},children:e.jsx(je,{})}),h?e.jsx(a,{sx:{display:"flex",flexDirection:"column",gap:1},children:S.length===0?e.jsx(b,{sx:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsxs(v,{sx:{textAlign:"center",py:4},children:[e.jsx(q,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",children:"Žiadne vyúčtovania nenájdené"})]})}):S.map(t=>{const l=t.vehicleId?y.find(p=>p.id===t.vehicleId):null,c=t.profit>=0;return e.jsx(b,{sx:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:2,"&:hover":{boxShadow:"0 4px 16px rgba(0,0,0,0.15)",transform:"translateY(-2px)"},transition:"all 0.2s ease"},children:e.jsxs(v,{sx:{p:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsxs(a,{sx:{flexGrow:1,mr:2},children:[e.jsxs(s,{variant:"h6",sx:{fontWeight:600,mb:.5,wordWrap:"break-word"},children:[B(new Date(t.period.from),"dd.MM.yyyy")," - ",B(new Date(t.period.to),"dd.MM.yyyy")]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(H,{icon:c?e.jsx(ye,{fontSize:"small"}):e.jsx(ve,{fontSize:"small"}),label:c?"Zisk":"Strata",color:c?"success":"error",size:"small",sx:{fontWeight:600}}),e.jsxs(s,{variant:"h6",sx:{fontWeight:700,color:c?"#4caf50":"#f44336"},children:[t.profit.toFixed(2),"€"]})]})]}),e.jsxs(a,{sx:{display:"flex",gap:.5},children:[e.jsx(se,{size:"small",onClick:()=>ke(t),sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#bbdefb"}},children:e.jsx($e,{fontSize:"small"})}),e.jsx(se,{size:"small",onClick:()=>ze(t),sx:{backgroundColor:"#ffebee",color:"#d32f2f","&:hover":{backgroundColor:"#ffcdd2"}},children:e.jsx(Be,{fontSize:"small"})})]})]}),e.jsx(ht,{sx:{my:1}}),e.jsxs(u,{container:!0,spacing:1,sx:{fontSize:"0.875rem"},children:[e.jsx(u,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(be,{fontSize:"small",sx:{color:"text.secondary"}}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Príjmy: ",t.totalIncome.toFixed(2),"€"]})]})}),e.jsx(u,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(ae,{fontSize:"small",sx:{color:"text.secondary"}}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Náklady: ",t.totalExpenses.toFixed(2),"€"]})]})}),t.company&&e.jsx(u,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Ue,{fontSize:"small",sx:{color:"text.secondary"}}),e.jsx(s,{variant:"body2",color:"text.secondary",noWrap:!0,children:t.company})]})}),l&&e.jsx(u,{item:!0,xs:6,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Ge,{fontSize:"small",sx:{color:"text.secondary"}}),e.jsx(s,{variant:"body2",color:"text.secondary",noWrap:!0,children:l.licensePlate})]})}),e.jsx(u,{item:!0,xs:12,children:e.jsxs(s,{variant:"body2",sx:{color:"text.secondary",mt:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1},children:[t.rentals?.length||0," prenájmov • ",t.expenses?.length||0," nákladov"]})})]})]})},t.id)})}):e.jsxs(b,{sx:{boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx(a,{sx:{position:"sticky",top:0,backgroundColor:"white",zIndex:1,borderBottom:"2px solid #f0f0f0"},children:e.jsxs(a,{sx:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr 1fr 120px",gap:2,p:2,fontWeight:600,color:"#1976d2",backgroundColor:"#f8f9fa"},children:[e.jsx(s,{variant:"subtitle1",sx:{fontWeight:700},children:"Obdobie"},"obdobie"),e.jsx(s,{variant:"subtitle1",sx:{fontWeight:700},children:"Firma"},"firma"),e.jsx(s,{variant:"subtitle1",sx:{fontWeight:700},children:"Vozidlo"},"vozidlo"),e.jsx(s,{variant:"subtitle1",sx:{fontWeight:700},children:"Príjmy"},"prijmy"),e.jsx(s,{variant:"subtitle1",sx:{fontWeight:700},children:"Náklady"},"naklady"),e.jsx(s,{variant:"subtitle1",sx:{fontWeight:700},children:"Provízia"},"provizia"),e.jsx(s,{variant:"subtitle1",sx:{fontWeight:700},children:"Zisk"},"zisk"),e.jsx(s,{variant:"subtitle1",sx:{fontWeight:700,textAlign:"center"},children:"Akcie"},"akcie")]})}),e.jsx(a,{sx:{maxHeight:"600px",overflow:"auto"},children:S.length===0?e.jsxs(a,{sx:{textAlign:"center",py:8},children:[e.jsx(q,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e.jsx(s,{variant:"h6",color:"text.secondary",children:"Žiadne vyúčtovania nenájdené"})]}):S.map((t,l)=>{const c=t.vehicleId?y.find(K=>K.id===t.vehicleId):null,p=t.profit>=0;return e.jsxs(a,{sx:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr 1fr 120px",gap:2,p:2,borderBottom:"1px solid #e0e0e0",backgroundColor:l%2===0?"#fafafa":"white","&:hover":{backgroundColor:"#f0f7ff",cursor:"pointer"},transition:"background-color 0.2s ease"},children:[e.jsxs(a,{children:[e.jsxs(s,{variant:"body1",sx:{fontWeight:600,mb:.5},children:[B(new Date(t.period.from),"dd.MM.yyyy")," - ",B(new Date(t.period.to),"dd.MM.yyyy")]}),e.jsxs(s,{variant:"body2",sx:{color:"text.secondary"},children:[t.rentals?.length||0," prenájmov • ",t.expenses?.length||0," nákladov"]})]}),e.jsx(s,{variant:"body2",sx:{display:"flex",alignItems:"center"},noWrap:!0,children:t.company||"-"}),e.jsx(s,{variant:"body2",sx:{display:"flex",alignItems:"center"},noWrap:!0,children:c?`${c.brand} ${c.model} - ${c.licensePlate}`:"-"}),e.jsxs(s,{variant:"body1",sx:{fontWeight:600,color:"#4caf50",display:"flex",alignItems:"center"},children:[t.totalIncome.toFixed(2),"€"]}),e.jsxs(s,{variant:"body1",sx:{fontWeight:600,color:"#f44336",display:"flex",alignItems:"center"},children:[t.totalExpenses.toFixed(2),"€"]}),e.jsxs(s,{variant:"body1",sx:{fontWeight:600,color:"#ff9800",display:"flex",alignItems:"center"},children:[t.totalCommission.toFixed(2),"€"]}),e.jsxs(s,{variant:"body1",sx:{fontWeight:700,color:p?"#4caf50":"#f44336",display:"flex",alignItems:"center"},children:[t.profit.toFixed(2),"€"]}),e.jsxs(a,{sx:{display:"flex",gap:.5,justifyContent:"center"},children:[e.jsx(Me,{title:"Zobraziť detail",children:e.jsx(se,{size:"small",onClick:()=>ke(t),sx:{backgroundColor:"#e3f2fd",color:"#1976d2","&:hover":{backgroundColor:"#bbdefb"}},children:e.jsx($e,{fontSize:"small"})})}),e.jsx(Me,{title:"Zmazať",children:e.jsx(se,{size:"small",onClick:()=>ze(t),sx:{backgroundColor:"#ffebee",color:"#d32f2f","&:hover":{backgroundColor:"#ffcdd2"}},children:e.jsx(Be,{fontSize:"small"})})})]})]},t.id)})})]}),e.jsx(Te,{open:w,onClose:()=>W(!1),maxWidth:"sm",fullWidth:!0,fullScreen:h,children:e.jsxs(a,{sx:{p:3},children:[e.jsx(s,{variant:"h5",sx:{mb:3,fontWeight:600},children:"Vytvoriť vyúčtovanie"}),e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:12,children:e.jsxs(a,{sx:{mb:2},children:[e.jsx(s,{variant:"subtitle2",sx:{mb:1},children:"Typ obdobia"}),e.jsxs(Mt,{value:xe,exclusive:!0,onChange:(t,l)=>{l!==null&&(Ce(l),Q(""),J(""),X(""))},"aria-label":"period type",size:"small",fullWidth:!0,children:[e.jsx(Fe,{value:"month","aria-label":"mesiac",children:"Mesiac"}),e.jsx(Fe,{value:"range","aria-label":"obdobie",children:"Časové obdobie"})]})]})}),xe==="month"?e.jsx(u,{item:!0,xs:12,children:e.jsx(U,{label:"Mesiac",type:"month",value:he,onChange:t=>X(t.target.value),fullWidth:!0,InputLabelProps:{shrink:!0},helperText:"Vyberte mesiac pre vyúčtovanie"})}):e.jsxs(e.Fragment,{children:[e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(U,{label:"Od dátumu",type:"date",value:de,onChange:t=>Q(t.target.value),fullWidth:!0,InputLabelProps:{shrink:!0}})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(U,{label:"Do dátumu",type:"date",value:ce,onChange:t=>J(t.target.value),fullWidth:!0,InputLabelProps:{shrink:!0}})})]}),e.jsxs(u,{item:!0,xs:12,children:[e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Vyberte firmy alebo vozidlá na vyúčtovanie. Môžete vybrať viacero položiek naraz."}),e.jsx(De,{multiple:!0,fullWidth:!0,options:Ke,value:R,onChange:(t,l)=>{ne(l)},getOptionLabel:t=>t,isOptionEqualToValue:(t,l)=>t===l,filterOptions:(t,{inputValue:l})=>t.filter(c=>c.toLowerCase().includes(l.toLowerCase())),renderInput:t=>e.jsx(U,{...t,label:"Firmy (voliteľné)",placeholder:"Začnite písať pre vyhľadávanie firiem..."}),noOptionsText:"Žiadne firmy nenájdené",renderTags:(t,l)=>t.map((c,p)=>d.createElement(H,{variant:"outlined",label:c,...l({index:p}),key:c}))})]}),e.jsx(u,{item:!0,xs:12,children:e.jsx(De,{multiple:!0,fullWidth:!0,options:we,value:Y.map(t=>we.find(l=>l.id===t)).filter(Boolean),onChange:(t,l)=>{le(l.map(c=>c.id))},getOptionLabel:t=>t.label,isOptionEqualToValue:(t,l)=>t.id===l.id,filterOptions:(t,{inputValue:l})=>t.filter(c=>c.label.toLowerCase().includes(l.toLowerCase())),renderInput:t=>e.jsx(U,{...t,label:"Vozidlá (voliteľné)",placeholder:"Začnite písať pre vyhľadávanie vozidiel..."}),noOptionsText:"Žiadne vozidlá nenájdené",renderTags:(t,l)=>t.map((c,p)=>d.createElement(H,{variant:"outlined",label:c.label,...l({index:p}),key:c.id}))})})]}),e.jsxs(a,{sx:{display:"flex",gap:2,mt:3,justifyContent:"flex-end"},children:[e.jsx(O,{variant:"outlined",onClick:()=>W(!1),disabled:L,children:"Zrušiť"}),e.jsx(O,{variant:"contained",onClick:Xe,disabled:L,children:L?e.jsx(je,{size:20}):"Vytvoriť"})]})]})}),e.jsx(Te,{open:N,onClose:()=>F(!1),maxWidth:!1,fullWidth:!0,fullScreen:h,sx:{"& .MuiDialog-paper":{maxWidth:h?"100%":"95vw",width:h?"100%":"95vw",height:h?"100%":"auto",maxHeight:h?"100%":"90vh"}},children:V&&e.jsx(Tt,{settlement:V,onClose:()=>F(!1)})})]})};export{Kt as default};
