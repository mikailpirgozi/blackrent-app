<!DOCTYPE html>
<html lang="sk">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="theme-color" content="#1976d2" />
    <meta name="msapplication-TileColor" content="#1976d2" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="BlackRent" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta
      name="description"
      content="BlackRent - ModernÃ½ systÃ©m pre sprÃ¡vu prenÃ¡jmu vozidiel s pokroÄilÃ½mi funkciami"
    />
    <meta
      name="keywords"
      content="prenÃ¡jom vozidiel, autopoÅ¾iÄovÅˆa, car rental, BlackRent, PWA"
    />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="/logo192.png" />
    <link rel="apple-touch-icon" sizes="512x512" href="/logo512.png" />
    <link rel="mask-icon" href="/favicon.ico" color="#1976d2" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="/manifest.json" crossorigin="anonymous" />
    <!-- Google Fonts - Inter for modern minimalistic design -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!--
      All paths are now absolute to work correctly with Vercel deployment.
      Files are served directly from the public folder.
    -->
    <title>BlackRent - ModernÃ¡ aplikÃ¡cia pre autopoÅ¾iÄovne</title>
  </head>
  <body>
    <noscript>
      <div style="font-family: Arial, sans-serif; text-align: center; padding: 50px; background: #f5f5f5;">
        <h1 style="color: #1976d2;">BlackRent</h1>
        <p>Pre pouÅ¾Ã­vanie tejto aplikÃ¡cie je potrebnÃ© povoliÅ¥ JavaScript.</p>
        <p>Please enable JavaScript to use this application.</p>
      </div>
    </noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
    
    <!-- Service Worker Registration -->
    <script>
      // ğŸ›¡ï¸ MOBILE FIX: Temporarily disable Service Worker for testing
      console.log('ğŸ“± Service Worker temporarily disabled for mobile testing');
      
      // Clear existing service worker cache
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          for(let registration of registrations) {
            console.log('ğŸ—‘ï¸ Unregistering Service Worker:', registration);
            registration.unregister();
          }
        });
        
        // Clear all caches
        if ('caches' in window) {
          caches.keys().then(function(cacheNames) {
            return Promise.all(
              cacheNames.map(function(cacheName) {
                console.log('ğŸ—‘ï¸ Deleting cache:', cacheName);
                return caches.delete(cacheName);
              })
            );
          });
        }
      }
      
      // Register service worker for PWA functionality
      if (false && 'serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
              console.log('âœ… SW registered: ', registration);
              
              // Check for updates
              registration.addEventListener('updatefound', () => {
                const newWorker = registration.installing;
                if (newWorker) {
                  newWorker.addEventListener('statechange', () => {
                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                      console.log('ğŸ”„ New content is available; please refresh.');
                      // The app will handle this via the PWA hook
                    }
                  });
                }
              });
            })
            .catch((registrationError) => {
              console.log('âŒ SW registration failed: ', registrationError);
            });
        });
        
        // Listen for service worker messages
        navigator.serviceWorker.addEventListener('message', (event) => {
          const { type, message } = event.data;
          
          switch (type) {
            case 'SW_UPDATE_AVAILABLE':
              console.log('ğŸ”„ Service Worker update available');
              break;
            case 'SW_UPDATED':
              console.log('âœ… Service Worker updated successfully');
              break;
            default:
              console.log('ğŸ“¨ Service Worker message:', type, message);
          }
        });
      }

      // Handle PWA install prompt
      let deferredPrompt;
      window.addEventListener('beforeinstallprompt', (e) => {
        console.log('ğŸ“± PWA install prompt triggered');
        e.preventDefault();
        deferredPrompt = e;
        // The app will handle this via the PWA hook
      });

      window.addEventListener('appinstalled', () => {
        console.log('ğŸ‰ PWA was installed successfully');
        deferredPrompt = null;
      });

      // Splash screen for iOS
      if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
        const splashScreen = document.createElement('div');
        splashScreen.innerHTML = `
          <div style="
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 9999;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
          ">
            <div style="font-size: 4rem; margin-bottom: 20px;">ğŸš—</div>
            <h1 style="margin: 0; font-size: 2rem; font-weight: 700;">BlackRent</h1>
            <p style="margin: 10px 0 0; opacity: 0.9;">NaÄÃ­tavam aplikÃ¡ciu...</p>
          </div>
        `;
        document.body.appendChild(splashScreen);
        
        // Remove splash screen after load
        window.addEventListener('load', () => {
          setTimeout(() => {
            splashScreen.remove();
          }, 1000);
        });
      }
    </script>
  </body>
</html>
<!-- Vercel Auto-Deploy Test -->
