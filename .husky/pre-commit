#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Run lint-staged for formatting and linting
npx lint-staged

# TypeScript check for frontend
echo "ğŸ” TypeScript check (frontend)..."
npm run build > /dev/null 2>&1 || {
  echo "âŒ Frontend TypeScript errors found! Run 'npm run build' to see details."
  exit 1
}

# TypeScript check for backend
echo "ğŸ” TypeScript check (backend)..."
cd apps/backend && npm run build > /dev/null 2>&1 || {
  echo "âŒ Backend TypeScript errors found! Run 'cd apps/backend && npm run build' to see details."
  exit 1
}

echo "âœ… All checks passed!"